---

title: Electronic trading system and method for pricing transactions to account for risk
abstract: An electronic trading system and method are described in which credit risk associated with a transaction is captured as a price adjustment on a trade-by-trade basis. In one preferred embodiment, a “request for quote” (RFQ) trading model is presented in which each dealer receiving an RFQ determines a base price as well as an additional credit risk adjustment amount by which the base price should be modified to account for credit risk. In other preferred embodiments, an exchange trading model is presented in which traders submit buy and sell orders whose prices are appropriately adjusted for presentation to each potential counterparty to account for credit risk associated with potential transactions. System designs are also presented to address the technical challenge of permitting each trading participant to apply its own credit risk algorithms and methodologies while avoiding their disclosure to other trading participants.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08473400&OS=08473400&RS=08473400
owner: ICAP Services North America LLC
number: 08473400
owner_city: Jersey City
owner_country: US
publication_date: 20060412
---
In many markets the risk associated with default by a trader s counterparty is addressed by a broker or other centralized entity that stands behind every transaction and assumes the risk associated with such default. In other markets however such as markets for trading interest rate swaps where the potential for default extends long into the future such an arrangement is not practical. Instead those markets have developed bi lateral credit arrangements where each trading entity specifies maximum amounts of credit that it is willing to extend to its potential counterparties. Electronic trading systems that incorporate credit modules to store and apply these credit limits have also been developed and are widely used today.

These systems however do not accurately account for the actual risk to a party in executing any given trade but rather seek to limit overall risk to the party through the application of appropriate credit limits. Creating a system that deals with transaction risk on a trade by trade basis presents several issues. These include designing an appropriate risk model that will accurately reflect the risk to each trading participant in any given transaction and will furthermore be suitable for implementation in an electronic trading system. Technical problems relating to the design of system architecture and components are also presented since it is desirable for each trading participant to be able to apply its own risk algorithms and methodologies to assess credit risk while avoiding the disclosure of such algorithms and methodologies to other trading participants.

A system and method are described for addressing the issues noted above and providing for the electronic trading of financial instruments e.g. interest rate swaps and other items in which the credit risk associated with a transaction is captured as a price adjustment on a trade by trade basis. In one preferred embodiment a request for quote RFQ trading model is presented in which customers submit requests for price quotes for specified financial instruments. Each dealer receiving an RFQ for a financial instrument determines a base price for the financial instrument as well as an additional credit risk adjustment amount by which the base price subject to normal bid offer spread should be modified to account for credit risk associated with potential transactions. This modified price is presented to the customer in a response to the RFQ. This is in contrast to the prior art techniques described above in which arbitrary credit lines have been utilized to account for credit risk. These credit models do not account correctly for the inherent credit cost in for example an OTC derivative contract between counterparties with differing credit ratings. Rather in accordance with the present invention to correctly reflect this credit risk a charge is added to any price based on the market maker s perception of credit risk associated with the transaction. As a result the price presented to a customer is a function of the customer and the dealer s perception of the credit risk associated with transaction with that customer.

In other preferred embodiments an exchange trading model is presented in which traders submit buy and sell orders whose prices are appropriately adjusted for presentation to each potential counterparty to account for credit risk associated with potential transactions. System designs are also presented to address the technical challenge of permitting each trading participant to apply its own credit risk algorithms and methodologies to assess credit risk while avoiding the disclosure of such algorithms and methodologies to other trading participants.

A preferred embodiment for implementing the present invention to provide a request for quote RFQ trading model is described in connection with . Beginning with there is shown a system comprising a dealer sub system and a plurality of customer sub systems connected via appropriate communication links .

Dealer sub system preferably comprises one or more dealer terminals an order manager a risk processor and a market information processor . Each dealer terminal may preferably be a computer workstation comprising a CPU memory a display and input devices such as a mouse keyboard or specialized trading keypad. Terminals are preferably provided to traders employed by the dealer that operates dealer sub system . These traders use terminals to receive and respond to RFQs for specified financial instruments as described in more detail below. Terminals are also preferably connected to market information processor to facilitate pricing of RFQs by traders working at terminals as described in more detail below.

Order manager preferably comprises one or more server computers adapted to receive and process RFQs responses to RFQs and trading orders and confirmations as described in more detail below. Risk processor preferably comprises one or more server computers adapted to implement the dealer s credit risk analysis methodologies and more specifically to generate for each RFQ response one or more price adjustment values used in generating price quotes to account for credit risk to the dealer associated with transactions that may result from the RFQ response as described in more detail below. Communication links and other communication links described throughout the specification may comprise any appropriate arrangement of wired or wireless communication lines or networks such as the Internet or dedicated communication lines.

Customer sub system preferably comprises one or more customer terminals and an order manager . Each customer terminal may preferably be a computer workstation comprising a CPU memory a display and input devices such as a mouse keyboard or specialized trading keypad. Terminals are preferably provided to traders employed by the customers that operate customer sub systems . These traders use terminals to create and transmit RFQs receive responses to RFQs and to submit buy and sell orders and receive trade confirmations as described in more detail below. Order manager preferably comprises one or more server computers adapted to receive and process RFQs responses to RFQs and trading orders and confirmations from terminals and dealer sub system as described in more detail below.

A preferred embodiment for conducting RFQ trading utilizing the system architecture shown in will now be described in connection with . With reference to in step a trader working at a customer terminal enters an RFQ for a specified financial instrument. In step customer terminal forwards the RFQ to order manager of customer sub system . In step order manager transmits the RFQ to order manager of dealer sub system .

In step order manager transmits the RFQ to the dealer terminals of all dealer employees authorized to and responsible for responding to the RFQ. In step a trader working at a dealer terminal that received the RFQ prepares a responsive price quote. Where the RFQ indicates a request for a quote to buy only or to sell only the price quote may comprise a single price. Commonly however the RFQ may request that the dealer quote prices both to buy and sell a specified financial instrument in which case the price quote will take the form of a buy sell spread. Accordingly for ease of description the case of an RFQ for a buy sell spread is primarily described below. Information concerning wholesale market trading in the financial instrument identified in the RFQ and other related market information relevant to pricing the quote is preferably fed to dealer terminal from market processor to aid the trader in pricing the quote.

In step dealer terminal forwards the price quote to order manager . In step order manager transmits a request to risk processor for one or more price adjustment values to account for any credit risk to the dealer that may result from transacting with the requesting customer. The request preferably comprises all relevant information concerning the RFQ required for any desired credit risk calculations which may for example include the financial instrument the quoted price or price spread and the customer.

In step risk processor determines an appropriate price adjustment to account for any credit risk associated with potential transactions that may result from the quote. In a preferred embodiment risk processor may be programmed to apply any desired algorithm specified by the dealer to calculate the price adjustment. These may range from relatively simple algorithms in which price adjustment values are set equal to fixed risk premiums based on the financial instrument potential counterparty or price to more sophisticated proprietary algorithms that may require multiple inputs and complex calculations to determine the credit risk associated with a particular transaction. Typically the particular credit risk algorithms applied will be established by the dealer s compliance department and may vary significantly from dealer to dealer. Thus one benefit of this aspect of the present invention is that it permits each dealer that utilizes the present invention to apply its own credit risk methodologies and algorithms to develop different price quotes for different customers without disclosure or external examination of its proprietary risk analysis algorithms by outside parties. A preferred embodiment of a price adjustment algorithm for use by a dealer is described below in Example 1.

In step risk processor forwards the calculated price adjustment values to order manager . In step order manager constructs an RFQ response using the price quote from dealer terminal and the price adjustment values from risk processor . Specifically in formatting the RFQ response order manager calculates a modified price quote by starting with the trader s price quote and modifying the quote to reflect the price adjustments calculated by risk processor . Thus the resulting modified price quote may be viewed as comprising two distinct components a first component that represents the price quoted by the trader and a second component that represents the price adjustment required by the dealer to account for credit risk associated with any potential transaction that may result from the quote. A preferred embodiment for generating a modified price quote from a trader s price quote and calculated price adjustment values is described below in connection with Example 1.

In step order manager of dealer sub system transmits the RFQ response including the modified price quote to order manager of customer sub system . In step order manager transmits the RFQ response to customer terminal for display to the trader.

The trader considers the RFQ response and determines whether he or she wishes to buy or sell at the quoted prices. If so in step the trader enters an order to buy or sell a specified quantity of the financial instrument at the quoted price. In step customer terminal transmits the order to order manager . In step order manager of customer sub system transmits the order to order manager of dealer sub system .

In step order manager processes the order to determine if it is valid pursuant to any terms specified in the RFQ response or other contractual documents between the dealer and the customer. For example if an RFQ response specifies that a price quote is good for 1 minute and the customer s order is received after that time the order will be rejected by order manager .

Otherwise assuming the order satisfies all requirements order manager will execute the order. More specifically in step order manager updates the customer s account to reflect purchase or sale of the quantity of the financial instrument specified in the order. In step order manager separates the transaction price for the asserted order into two components the component attributable to the price quote specified by the trader and the modifying component included to account for credit risk associated with the transaction. In step order manager credits the risk adjustment portion of the execution price to an internal risk allocation account and performs any other internal accounting necessary to reflect the transaction. A preferred embodiment for crediting a risk allocation account of the dealer in the case of a 10 year interest rate swap is described below in Example 1. In step order manager transmits order confirmations to customer sub system and dealer terminals . In step the screens of both dealer and customer terminals are updated to reflect the executed transaction.

The trading process described above in connection with will now be illustrated by way of a particular example.

For purposes of the present example it is assumed that a trader employed by a customer enters an RFQ for a buy sell spread on a semi bond 10 year interest rate swap. Upon receipt of this RFQ at the dealer the RFQ is forwarded to a dealer terminal for processing. For purposes of the present example it will be assumed that the trader responsible for responding to the RFQ quotes a bid offer spread of 4.610 4.630 . This bid offer spread will typically be generated by modeling software operated by the dealer and adapted to process the current prices of the next 40 Eurodollar futures contracts and other market information to obtain a mid market price for the 10 year interest swap and then to generate a bid offer spread around that calculated mid market price.

The trader s price quote is forwarded to the dealer s order manager which requests price adjustment values for the price quote from its risk processor. For purposes of the present example it will be assumed that the risk processor calculates the requested price adjustment values in accordance with the methodology described below.

As known in the art an interest rate swap IRS is an OTC derivatives contract where one party pays a fixed interest rate over the term of the swap in return for receiving a floating interest rate normally based on the London Interbank Offered Rate LIBOR . A model of the credit exposures to a party paying and receiving the fixed rate over the life of the swap are shown in respectively assuming the yield curve shown in Table 3 with a volatility of 20 per annum. These exposures are a function of absolute interest rates the shape of the interest rate yield curve and the market makers perception of the volatility of interest rates. It should be recognized that the curves shown in are merely exemplary and each dealer may derive its own curves using any desired model and modeling software.

In making a loan to a counterparty it is typical for the lender to charge a spread or premium to the borrower that is a function of the borrower s credit rating. Table 4 sets out an example of a spread pricing matrix in basis points 100th of one percent as a function of borrower credit rating and loan maturity. It should be recognized that the values in Table 4 are merely exemplary and each dealer may derive its own values for this table using any desired algorithm.

Applying the matrix of Table 4 to the expected loan balance of an IRS maturing in 5 and 10 years at assumed volatility rates of 15 and 20 yields the illustrative price adjustment values set forth in Table 5 which represent the additional price adjustment values that the market maker should charge to account for credit risk associated with paying and receiving the fixed rate in an IRS for the selected premiums 50 150 and 300 basis points. Other values may be separately calculated or be interpolated from the table using linear or more sophisticated interpolation.

More specifically the values in Table 5 are preferably determined by 1 integrating the area under the expected loan balance curves in respectively to determine the size of the risk to the dealer for an IRS in which it pays fixed rate and in which it receives fixed rate 2 multiplying these amounts by the desired credit premium e.g. 300 bp to determine the total amount necessary to account for credit risk associated with such transactions and 3 spreading this amount over the total 100 m size of the IRS to determine the equivalent number of basis points by which the IRS price must be adjusted to account for the credit risk.

The dealer s order manager constructs an RFQ response including a modified price quote using the trader s price quote and the calculated price adjustment values. For purposes of the present example it will be assumed that the party that submitted the RFQ has a single A credit rating. Applying the values in Table 5 to the present example the modified bid quote will be equal to 4.6100 0.0170 4.5930 

More specifically order manager will subtract the price adjustment value calculated by risk processor from the trader s buy quote to generate the modified buy quote for presentation to the requesting customer. This may be understood conceptually as follows The initial interest rate specified by the trader in the price quote reflects the total fixed interest rate that the trader will pay to do the swap specified in the RFQ. A portion of that fixed rate however will not be paid to the customer but rather will be withheld by the dealer to account for credit risk associated with any transaction that may result from the quote. That portion is equal to the price adjustment amount. Accordingly the total fixed rate that the dealer will actually pay to the customer in the event of a transaction is the rate specified by the trader less the price adjustment amount and the buy quote published to the customer must therefore be reduced by that amount.

More specifically the dealer s order manager will add the price adjustment value calculated by its risk processor to the trader s sell quote to generate the modified sell quote for presentation to the requesting customer. This may be understood conceptually as follows The initial fixed rate specified by the trader in the sell quote reflects the total fixed rate that the trader must receive to sell the financial instrument specified in the RFQ. The rate that the dealer quotes the customer however must be higher than the rate specified by the trader to account for credit risk associated with any potential transaction that may result from the quote. This increase in the rate above the rate specified by the trader is equal to the price adjustment amount. Accordingly the total fixed rate that the dealer must actually receive from the customer to complete a transaction is the rate specified by the trader plus the price adjustment amount and the offer quote published to the customer must therefore be increased by that amount.

It is assumed further for purposes of the present example that in response to the above price quote the customer wishes to sell 10M of the 10 year interest swap at the quoted price of 4.5930 . The customer s order is transmitted to the dealer where it is validated and executed. The price of 4.5930 is then broken into its component parts of 4.6100 specified by the trader and 0.0170 allocated by the dealer to account for credit risk associated with the transaction. In a preferred embodiment the net present value of the 0.0170 risk allocation component over the life of the swap is determined and immediately credited to a risk allocation account of the dealer and debited to the trader s account. Thereafter the size of the fixed rate leg of the swap each quarter may be determined using the transaction price of 4.5930 since the entire risk premium for the transaction will have been allocated at the time of execution. Alternatively the system may be adapted to credit the dealer s risk allocation account on a quarterly basis with the risk allocation portion of the swap s fixed rate leg in which case the quarterly fixed rate leg of the swap is determined based on the 4.6100 rate specified by the trader of which 4.5930 is set off against the customer s floating rate obligation for the quarter and 0.0170 is allocated to the dealer s risk allocation account.

In a preferred embodiment each dealer may complete a matrix that specifies the credit rating or rating band to which the dealer wishes to assign each potential counterparty. If desired the matrix may also comprise a column for specifying whether the dealer is willing to transact with the counterparty on any terms. An illustrative matrix completed by a dealer DCF is shown below 

In a preferred embodiment seven rating bands are defined. The first rating band band 0 is preferably used by dealers to specify potential counterparties as to whom a price adjustment of zero should be subtracted or added from bids offers quoted to the potential counterparty. The remaining rating bands may preferably correspond to credit ratings AAA through B respectively. Matrixes for specifying the price adjustment values for the different rating bands such as the illustrative matrixes shown below may then be determined.

In this preferred embodiment when a dealer receives an RFQ from a customer the dealer preferably determines the customer s rating band from the customer matrix and uses the rating band to look up the price adjustment value for the quote being prepared in the appropriate pay or receive credit spread grid.

It should be recognized that although the above preferred embodiment and example have been described in connection with a single dealer fielding RFQs from multiple customers the system may be adapted to support multiple dealers such that customer RFQs are concurrently transmitted to multiple dealers and customers may receive competitive price quotes from two or more of the multiple dealers in response to their RFQs.

A preferred embodiment for implementing the present invention to provide an exchange trading model is described in connection with . With reference to there is shown a system comprising a matching engine and a plurality of dealer sub systems connected via communication links . Matching engine preferably comprises one or more server computers adapted to receive orders to buy and sell financial instruments from dealer sub systems to process trading orders in accordance with specified protocols and to communicate market information concerning trading activity to dealer sub systems as described in more detail below.

With reference to each dealer sub system preferably comprises one or more trading terminals an order manager and a risk processor connected via communication links . Each trading terminal may preferably be a computer workstation comprising a CPU memory a display and input devices such as a mouse keyboard or specialized trading keypad. Terminals are preferably provided to traders employed by dealers and used by those traders to enter buy and sell orders and to display market and transaction confirmation information as described in more detail below.

Order manager preferably comprises one or more server computers adapted to receive and process buy and sell orders from trading terminals and transaction confirmations and market information from matching engine as described in more detail below. Risk processor preferably comprises one or more server computers adapted to periodically generate an array of price adjustment quantities for each financial instrument traded via matching engine and to transmit the array to matching engine via order manager . Each price adjustment quantity in the array represents a price premium required by the dealer that operates risk processor to account for credit risk associated with transacting in the specified instrument with a particular counterparty. Risk processor preferably generates the price adjustment quantities by executing one or more predetermined risk calculation algorithms programmed in computer software running on risk processor . The array preferably comprises entries by dealer instrument and maturity for each of the buy and sell sides of the market pay and receive in the case of IRSs .

Risk processor may be programmed to apply any desired algorithm or algorithms to calculate the price adjustment values such as the algorithm described above in connection with the RFQ trading model. In addition where appropriate risk processor may be programmed to run such algorithms at any desired periodicity e.g. every 10 minutes or each time there is a shift in market price for the instrument greater than some predetermined amount . As above such algorithms may range from relatively simple ones in which the price adjustment values are set equal to fixed risk premiums based on transaction type and or potential counterparty to more sophisticated proprietary algorithms for calculating the credit risk associated with a particular transaction. Risk processor may further be programmed to generate and transmit price adjustment arrays to matching engine at any periodicity desired by the dealer. Thus one benefit of this aspect of the present invention is that it permits each dealer to apply its own risk calculation algorithms to develop different order prices for presentation to different potential counterparties without requiring the dealer to disclose the algorithms by which it calculates those prices to any other entity including the entity that operates matching engine and thus to maintain the confidentiality of its proprietary risk calculation algorithms. Generation of a price adjustment array will now be illustrated by way of a particular example.

This example illustrates how a dealer Dealer A might implement the above described preferred embodiment to generate a price adjustment array. For purposes of the present example it will be assumed that Dealer A has specified the following risk processing rule for determining price adjustment values with respect to a specified instrument 

Assuming this risk processing algorithm risk processor of Dealer A would determine for each potential counterparty e.g. Dealers B E whether Dealer A has signed a bilateral credit agreement with the potential counterparty. As to any potential counterparty with which it has such an agreement it will set the price adjustment value for that potential counterparty to zero. As to any other potential counterparty it will determine the change in the interest rate summed over the life of the swap such that its present value is equal to the average expected loss to the dealer that would result from failure to deliver by the potential counterparty. This quantity may for example be calculated as discussed above in connection with Example 1 or using any desired proprietary algorithm of the dealer and may for example take as input the current market price for the instrument and average price fluctuations for an expected period over the life of the contract predicted by the dealer s proprietary risk modeling algorithms.

For purposes of the present example it will be assumed that Dealer A has an executed bilateral credit agreement with Dealer D but not Dealer B Dealer C or Dealer E and that the average expected loss for non delivery by a counterparty with respect to a particular instrument is 0.002 running i.e. per annum on the notional principal . For ease of description it will be further assumed for purposes of this illustrative example that this amount is the same for both buying and selling. In that case the price adjustment array generated by Dealer A for that instrument will be 

Each of Dealers B E will similarly generate price adjustment arrays according to their own proprietary algorithms and transmit these to matching engine for use in adjusting order prices as described in more detail below.

A preferred embodiment for conducting exchange trading utilizing the system architecture shown in will now be described in connection with . Referring to in step a trader working at a trading terminal of a dealer sub system enters a bid or offer to buy or sell a specified financial instrument at a specified price. For ease of description this will be referred to as a base order.

In step the base order is forwarded by terminal to order manager . In step order manager transmits the base order to matching engine . For ease of description the dealer that submitted the order to matching engine will be referred to as the submitting party.

In step matching engine uses the price adjustment arrays received from the dealers to generate a family of orders from the entered order wherein each order in the family is specifically targeted to a potential counterparty and the price of each order is adjusted by the price adjustment quantities specified in the appropriate entry of the price adjustment arrays associated with the submitting party and the potential counterparty. For ease of description these orders will be referred to as price adjusted orders. A particular example illustrating a preferred embodiment for carrying out step is described below in Example 3.

In step matching engine determines for each price adjusted order in the family of orders the potential counterparty to which the order relates and transmits the order to the order manager of that counterparty. The following steps will preferably be performed at each potential counterparty sub system that receives an order. For ease of discussion however the steps will be described with reference to one such sub system.

Upon receipt of the price adjusted order by order manager of the potential counterparty in step the order manager transmits the order to terminals for display to the potential counterparty s traders. In some embodiments each trader may have the option of seeing pricing for the price adjusted order broken into two components the transaction price equal to the price of the base order as adjusted by the submitting party s risk adjustment and the credit risk adjustment applied by the trader s risk processor.

In step a counterparty trader determines that he or she wishes to execute against the displayed price adjusted order and enters a command to do so e.g. a hit or a lift command . In step this hit or lift command is transmitted to the counterparty s order manager . In step order manager transmits the hit or lift command to matching engine .

In step matching engine executes the transaction. In step matching engine derives three price components for the transaction. One component constitutes the price adjustment specified by the submitting party a second component constitutes the price adjustment specified by the hitting or lifting dealer and a third component constitutes the original price specified by the submitting dealer s trader in the base order. Illustrative examples for deriving these pricing components in the case of a hit or lift are described below in Example 3.

In step matching engine transmits confirmation messages to both transacting parties. In a preferred embodiment the confirmation message transmitted to the entity that originally submitted the bid or offer includes the first and third of the three price components determined in step . By contrast the confirmation message transmitted to the hitting or lifting entity preferably includes the second of these three components and a composite price component comprised of the third component as modified by the first price adjustment value. A particular example illustrating implementation of step is described below in Example 3 along with a conceptual explanation for why matching engine parses and distributes pricing information in this way. In step order managers of the transacting dealers credit their respective risk adjustment portions of the execution price to respective internal risk allocation accounts and perform any other internal accounting necessary to reflect the transaction. A preferred embodiment for crediting a risk allocation account at each transacting dealer in the case of a 2 year interest rate swap is described below in Example 3.

In step order managers of the transacting dealers transmit transaction confirmation messages to the trader terminals of the transacting traders. In step matching engine broadcasts a market update message to all market participants to inform the market of the transaction. In step the screens of all traders are updated to reflect the new state of the market resulting from the trade execution.

Operation of this preferred embodiment of the present invention will now be further described in connection with a particular example.

For purposes of the present example it will be assumed that a trader at a first dealer Dealer A enters a base bid for 10M at 4.970 . This order is transmitted to matching engine by order manager of Dealer A.

It will be assumed further that the current price adjustment arrays of Dealers A E previously submitted to matching engine see Example 2 above are as follows 

Matching engine generates a family of related orders based on the order submitted by Dealer A by creating a modified price adjusted order for each potential counterparty Dealers B E whose price is adjusted based on the relevant entries in the price adjustment arrays of Dealer A and the potential counterparty. More specifically to generate the modified price for a given counterparty matching engine first subtracts from the submitted order price the price adjustment value specified in Dealer A s array for the potential counterparty and then further subtracts the price adjustment value specified in the potential counterparty s array for Dealer A. Thus for example the modified price calculated for presentation to Dealer B in the present example will be equal to 4.970 0.002 0.001 4.967 

This may be understood conceptually as follows The interest rate of the base bid entered by the trader at Dealer A reflects the fixed rate that the trader is willing to pay to do the swap specified in the bid. If and when the trader s bid is hit by another dealer however a portion of that interest rate will not be paid to the counterparty but rather will be withheld by Dealer A to account for any credit risk to Dealer A associated with execution of the transaction. That portion is equal to the price adjustment amount specified by Dealer A for transacting with the counterparty dealer. Accordingly the total fixed rate that will actually be paid by Dealer A to its counterparty is less than the rate specified in the trader s base bid by that price adjustment amount. Similarly if and when a trader at Dealer B hits Dealer A s bid some portion of the fixed rate that Dealer A will pay to Dealer B will be allocated by Dealer B to account for credit risk to Dealer B associated with execution of the transaction. That portion is equal to the price adjustment amount specified by Dealer B for transacting with Dealer A. Accordingly the total rate specified in the modified order transmitted by matching engine for display to Dealer B s traders must be further reduced to account for this second price adjustment amount. In other words from the counterparty trader s perspective the total rate the counterparty trader will receive if it hits the bid from Dealer A is equal to the price specified by Dealer A s trader less the price adjustment amounts required by Dealer A and Dealer B to account for credit risk associated with the transaction.

Applying the above to each potential counterparty for the bid Dealers B E it will be seen that in the present example matching engine preferably generates a family of four modified orders as follows 

For purposes of the present example it will now be further assumed that a trader at Dealer B enters a base offer to sell 20M at 5.030 . This base order is transmitted to matching engine by order manager of Dealer B. For ease of description it will be assumed further that the current price adjustment arrays of Dealers A E previously submitted to matching engine for processing offers at the time of Dealer B s submission are the same as those shown above in connection with the processing of Dealer A s bid.

Matching engine generates a family of related orders based on the order submitted by Dealer B by creating a modified price adjusted order for each potential counterparty Dealer A and Dealers C E whose price is adjusted based on the relevant entries in the price adjustment arrays of Dealer B and the potential counterparty. More specifically to generate the modified price for a given counterparty matching engine first adds the submitted order price to the price adjustment value specified in Dealer B s array for the potential counterparty and then further adds the price adjustment value specified in the potential counterparty s array for Dealer B. Thus for example the modified price calculated for presentation to Dealer A in the present example will be equal to 5.030 0.001 0.002 5.033 

This may be understood conceptually as follows The fixed rate entered by the trader at Dealer B reflects the total fixed rate that the trader wishes to receive to do the swap specified in the offer. If and when the trader s offer is lifted by another dealer however a portion of the total fixed rate received by Dealer B will be allocated by Dealer B to account for any credit risk to Dealer B associated with execution of the transaction. That portion is equal to the price adjustment amount specified by Dealer B for transacting with the other dealer. Accordingly the total rate that must actually be received by Dealer B from its counterparty is more than the rate specified by the trader by that price adjustment amount. Similarly if and when a trader at Dealer A lifts Dealer B s offer Dealer A will allocate a portion of the fixed rate that it pays to Dealer B to account for credit risk to Dealer A associated with execution of the transaction. That portion is determined by the price adjustment amount specified by Dealer A for transacting with Dealer B. Accordingly the total fixed rate specified in the modified order transmitted by matching engine for display to Dealer A s traders must be further increased to account for this second price adjustment amount. In other words from the counterparty trader s perspective the total fixed rate the counterparty trader will pay if it lifts the offer from Dealer B is equal to the rate specified by Dealer B s trader plus the price adjustment amounts required by Dealer B and Dealer A to account for credit risk associated with the transaction.

Applying the above calculations to each potential counterparty for the offer Dealer A and Dealers C E it will be seen that in the present example matching engine preferably generates a family of four modified orders as follows 

As those skilled in the art will recognize although for purposes of illustration the above example describes processing of one bid and one offer for a relatively small number of dealers the above example may be scaled to include more market participants and repeated for additional orders resulting in further population of traders screens with bids and offers at various prices and quantities.

Continuing with the present example it will be assumed further that a trader at Dealer C sees the price adjusted bid priced at 4.966 on his or her screen and hits the bid. The hit command is transmitted by order manager of Dealer C to matching engine . Matching engine executes the transaction and transmits confirmation messages concerning the transaction to both transacting dealers. As noted above these confirmation messages preferably comprise distinct pricing information. Specifically in the present example matching engine will parse the pricing information relating to the transaction into three components 

The confirmation message to Dealer A preferably comprises Component and Component above. This information is enough for Dealer A to determine a the total price paid by Dealer A to Dealer C to purchase the instrument equal to Component Component and b the portion of that price that should be allocated to credit risk associated with the transaction Component without revealing to Dealer A any information concerning Dealer C s credit risk profile for Dealer A. Similarly the confirmation message to Dealer C preferably comprises component and a calculated component Component equal to the difference between Component and Component . This information is enough for Dealer C to determine a the total price it will receive from Dealer A for selling the instrument Component Component and b the portion of that price that should be allocated to credit risk associated with the transaction Component without revealing to Dealer C any information concerning Dealer A s risk profile for Dealer C.

In a preferred embodiment each dealer calculates the net present value of the risk allocation portion of the fixed rate over the life of the swap and immediately credits that amount to its respective risk allocation account and debits the account of its respective trader in this amount. Thereafter the size of the fixed rate leg of the swap each quarter may be determined using the transaction price of the swap i.e. 4.968 since the entire credit risk premium for the transaction will have been allocated at the time of execution. Alternatively one or both of the dealer risk allocation accounts may be credited on a quarterly basis in an amount equal to the portion of the swap s fixed rate leg ascribable to the dealer s respective price adjustment amount in which case the size of the fixed rate leg of the swap is determined for the dealer s trader based on the fixed rate specified in the base bid in the case of the passive trader or the hit in the case of the aggressive trader .

Continuing with the present example it will be assumed further that a trader at Dealer D sees the price adjusted offer priced at 5.032 on his or her screen and lifts the offer. The lift command is transmitted by order manager of Dealer D to matching engine . Matching engine executes the transaction and transmits confirmation messages concerning the transaction to both transacting dealers. As noted above these confirmation messages preferably comprise distinct pricing information. Specifically in the present example matching engine will parse the pricing information relating to the transaction into three components 

The confirmation message to Dealer B preferably comprises Component and Component above. This information is enough for Dealer B to determine a the total price it will receive from Dealer D for selling the instrument equal to Component Component and b the portion of that price that should be allocated to credit risk associated with the transaction Component without revealing to Dealer B any information concerning Dealer D s credit risk profile for Dealer B. Similarly the confirmation message to Dealer D preferably comprises component and a calculated component Component equal to the sum of Component and Component . This information is enough for Dealer D to determine a the total price paid by Dealer D to Dealer B to purchase the instrument Component Component and b the portion of that price that should be allocated to credit risk associated with the transaction Component without revealing to Dealer D any information concerning Dealer B s credit risk profile for Dealer D.

In a preferred embodiment each dealer calculates the net present value of the risk allocation portion of the fixed rate over the life of the swap and immediately credits that amount to its respective risk allocation account and debits the account of its respective trader in this amount. Thereafter the size of the fixed rate leg of the swap each quarter may be determined using the transaction price of the swap i.e. 5.031 since the entire credit risk premium for the transaction will have been allocated at the time of execution. Alternatively one or both of the dealer risk allocation accounts may be credited on a quarterly basis in an amount equal to the portion of the swap s fixed rate leg ascribable to the dealer s respective price adjustment amount in which case the size of the fixed rate leg of the swap is determined for the dealer s trader based on the fixed rate specified in the base offer in the case of the passive trader or the lift in the case of the aggressive trader .

In a preferred embodiment one or both of the traders participating in the transaction may be charged a commission by the entity that operates matching engine . If desired this commission may be included in the bid and offer prices displayed to the submitting and or potential counterparty traders so that the displayed prices represent the total price to be paid received by a trader including any commission.

As those skilled in the art will recognize although the preferred embodiment described above exhibits many desirable features it will typically require periodic updates of potentially voluminous price adjustment information from dealer sub systems to matching engine . In some circumstances however it may be preferable to avoid such updates by transmitting a received order to all potential counterparties for direct price adjustment processing by the counterparty. But this alternative may present its own difficulties particularly where disclosure of the entity that submitted the order is required or helpful in calculating price adjustment values since multi lateral trading systems typically operate on an anonymous basis. Accordingly alternative preferred embodiments of the present invention may be provided that do not call for such periodic updates and yet preserve the anonymity of trading participants as described below.

More specifically another preferred embodiment for implementing the present invention to provide an exchange trading model will now be described in connection with and . This preferred embodiment may preferably utilize largely the same architecture and components shown in however as will be understood from the following description and examples the design and operation of those components will differ to some degree in this preferred embodiment.

In this preferred embodiment risk processor is preferably implemented in accordance with the architecture shown in schematic form in . With reference to there is shown a preferred embodiment of risk processor comprising a secure software environment adapted to securely run an instance of a risk application such that it is not able to communicate directly with any application or device external to secure environment . Risk application is preferably a proprietary software application of the dealer that owns risk processor and is adapted to implement the dealer s risk calculation algorithms and generate appropriate price adjustment values to account for risk associated with the potential execution of orders received by the dealer from matching engine as described in more detail below.

Secure environment is also preferably adapted to run a communication application which provides the sole mechanism for transmitting data into or out of the secure environment a cryptography application adapted to decrypt messages received from matching engine and an order processor application adapted to query risk application for price adjustment values and to generate modified orders that include adjusted pricing based on those price adjustment values for display to traders as described in more detail below. Risk processor may also preferably run a second version of the dealer s proprietary risk application shown as in . As described below in connection with this architecture permits each dealer to run its own risk processing software on its own servers but to receive as input to that software information identifying the entity that submitted each order without compromising the anonymous character of such multi lateral trading systems.

In a preferred embodiment communication application cryptography application and order processor application are provided to each dealer by the entity that operates matching engine via download such as a secure STP download or otherwise. Risk application preferably comprises a compiled executable able to be installed using a standard install procedure on commercial operating systems such as MS Windows Solaris or Linux. Risk application is also preferably adapted to be uninstalled through the use of a standard uninstall procedure.

In a preferred embodiment risk application preferably does not comprise any external dependencies that might compromise the secure deployment of the present embodiment. Thus for example where risk application requires access to specific software libraries such libraries are preferably incorporated with the compiled executable comprising risk application rather than stored on other servers which would require risk application to access them outside of secure environment .

In a preferred embodiment the entity that operates matching engine publishes an application programming interface API or software development kit SDK that comprises a list of messages that components are adapted to generate and receive to facilitate proper inter communication amongst such components and the dealer s risk application . Each dealer preferably writes to this API or SDK in creating its risk application to ensure proper interfacing between the risk application and components .

All communications amongst components and risk application are preferably made via secure TCP IP sockets using e.g. 128 SSL or other appropriate encryption standards to avoid interception of messages within secure environment such as through ciphering by external process probes or other means. In addition to ensure inter component message authentication each component and is preferably provided with a valid digital certificate such as a valid class 3 digital certificate issued by Verisign or other trusted certificate authority for signing communications with other components within secure environment .

A preferred embodiment for conducting trading utilizing the system architecture shown in and the preferred embodiment of risk processor shown in will now be described in connection with . Referring to in step a trader working at a trading terminal of a dealer sub system enters a base bid or offer to buy or sell a specified financial instrument at a specified price. In step this base order is forwarded by terminal to order manager . In step order manager transmits a request to risk processor for a plurality of price adjustment values to facilitate separate pricing of the order for distinct counterparties based on the specific degree of credit risk associated with transacting with such counterparty. The request preferably comprises all relevant information concerning the order required for any desired credit risk calculations and may for example include the instrument price and quantity. In step risk application selects an appropriate algorithm for calculating the requested price adjustment values for the entered order. The resulting price adjustment values generated using the algorithm are preferably used to generate an array comprising a plurality of entries wherein each entry in the array specifies a price adjustment for the order to account for credit risk associated with transacting with one potential counterparty. Illustrative examples of price adjustment arrays are described below in connection with Example 4. As above risk application of risk processor may be programmed to apply any desired algorithm to calculate the price adjustment values such as the algorithm described above in connection with Example 1.

In step the price adjustment array generated by risk processor is forwarded to order manager . In step order manager uses the price adjustment array to generate a family of orders from the entered order wherein each order in the family is specifically targeted to a potential counterparty and the price of each order is adjusted by the price adjustment quantity specified in the appropriate entry of the price adjustment array associated with that potential counterparty. For ease of description these orders will be referred to as partial price adjusted orders. A particular example illustrating a preferred embodiment for carrying out step is described below in Example 4.

In step order manager transmits the family of partial price adjusted orders to matching engine . In an alternative preferred embodiment order manager may be adapted to transmit the trader s base order and the price adjustment array generated by risk processor to matching engine and matching engine may be programmed to generate the family of partial price adjusted orders.

In step matching engine encrypts each partial price adjusted order in the family of orders. The encrypted orders preferably comprise the identity of the dealer that submitted the order. In step matching engine determines for each encrypted order in the family of partial price adjusted orders the potential counterparty to which the order relates and transmits the encrypted order to the order manager of that counterparty. Thus each dealer sub system receives a message that includes the submitting party s identity but is unable to determine the submitting party s identity because of the encryption. The following steps will preferably be performed at each potential counterparty sub system that receives an order. For ease of discussion however the steps will be described with reference to one such sub system.

Upon receipt of the encrypted order by order manager of the potential counterparty in step the order manager transmits the partial price adjusted order to risk processor where it is directed to communication application which controls access to all other applications within secure environment . In step the received partial price adjusted order is forwarded to cryptography application . In step cryptography application decrypts the order. In step the decrypted order is forwarded to order processor application . As noted above all such inter component communications within secure environment preferably comprise authenticated communications transmitted via secure TCP IP sockets.

In step order processor application requests a price adjustment value for the partial price adjusted order from risk application . In step risk application selects an appropriate algorithm for calculating a price adjustment for the received partial price adjusted order based on the dealer s internal risk policies and risk calculation methodologies. As above risk application may be adapted to apply any desired algorithm to calculate the price adjustment value such as the algorithm described above in connection with Example 1.

In step risk application forwards the price adjustment value to order processor application . In step order processor application strips the submitting party identifier from the received order and modifies the order price in accordance with the price adjustment value to generate a price adjusted order. A particular example illustrating a preferred embodiment for carrying out step is described below in Example 4. In step order processor application forwards the price adjusted order to communication application . In step communication application transmits the price adjusted order without an identifier for the submitting party to order manager . In step order manager transmits the price adjusted order to terminals for display to the potential counterparty s traders.

In step a counterparty trader determines that he or she wishes to execute against the displayed price adjusted order and enters a command to do so e.g. a hit or a lift command . In step this hit or lift command is transmitted to order manager . In step order manager transmits the hit or lift to matching engine . In step matching engine executes the transaction.

In step matching engine transmits transaction confirmation messages to both transacting parties. In step order managers of the transacting dealers credit their respective risk adjustment portion of the execution price which may be obtained from risk processor to an internal risk allocation account and perform any other internal accounting necessary to reflect the transaction. Crediting of dealer risk allocation accounts may preferably be performed in a manner analogous to that described above in Example 3. In step order managers of the transacting dealers transmit transaction confirmation messages to the trader terminals of the transacting traders. In step matching engine broadcasts a market update message to all market participants to inform the market of the transaction. In step the screens of all traders are updated to reflect the new state of the market resulting from the hit or lift.

Operation of this preferred embodiment of the present invention will now be further described in connection with a particular example.

For purposes of the present example it will be assumed that a trader at a first dealer Dealer A enters a base bid for 10M at 4.970 . For ease of description it will be assumed for purposes of the present example that the price adjustment values generated by risk application for this order are the same as the values generated by risk processor of Dealer A described above in Example 3.

Assuming these values order manager of Dealer A will generate the following family of partial price adjusted orders from the trader s base bid 

More specifically for each partial price adjusted order generated in the family of orders order manager of Dealer A subtracts the price adjustment value determined by risk processor from the trader s order price to generate the modified order price. The conceptual explanation for this aspect of the process is the same as that described above in connection with Example 3.

Order manager transmits the family of partial price adjusted orders to matching engine . Matching engine encrypts the partial price adjusted orders including an identifier of the submitting party and transmits the appropriate encrypted order to each of Dealers B E.

Order manager of each potential counterparty transmits the encrypted partial price adjusted order to its risk processor where it is decrypted and a price adjustment value for the order generated by risk application within secure environment . For purposes of the present example it will be assumed that the price adjustment values generated by risk applications of Dealers B E are the same as those described above for Dealers B E in Example 3.

Order processor application at each respective potential counterparty creates a price adjusted order from the partial price adjusted order that does not identify Dealer A and includes a modified price calculated by subtracting the price adjustment amount determined by risk application from the price specified in the received order. The conceptual explanation for this aspect of the process is the same as described above in connection with Example 3. Thus the pricing for the bid presented to traders at the different dealers will be as follows 

The display screens of all traders are updated to reflect the bid. As will be recognized such screens will look the same in this example as the screens shown above in Example 3 after processing of Dealer A s bid.

It will now be further assumed that a trader at Dealer B enters a base offer to sell 20M at 5.030 . For ease of description it will be assumed for purposes of the present example that the price adjustment values generated by risk application for this base order is the same as the values generated by risk processor of Dealer B described above in Example 3.

Assuming these values order manager of Dealer B will generate the following family of partial price adjusted orders from the trader s bid 

More specifically for each partial price adjusted order generated in the family of orders order manager of Dealer B adds the price adjustment value determined by risk processor to the trader s order price to generate the modified order price. The conceptual explanation for this aspect of the process is the same as that described above in connection with Example 3.

Order manager transmits the family of partial price adjusted orders to matching engine . Matching engine encrypts the partial price adjusted orders including an identifier of the submitting party and transmits the appropriate encrypted partial price adjusted order to each of Dealer A and Dealers C E.

Order manager of each potential counterparty transmits the encrypted partial price adjusted order to its risk processor where a price adjustment value for the order is generated by risk application within secure environment . For ease of description it will be assumed for purposes of the present example that the price adjustment values generated by risk applications of Dealer A and Dealers C E are the same as those described above for those dealers in Example 3.

Order processor application at each respective potential counterparty then creates a price adjusted order from the partial price adjusted order that does not identify Dealer B and includes a modified price calculated by adding the price adjustment amount determined by risk application to the price specified in the received partial price adjusted order. The conceptual explanation for this aspect of the process is the same as described above in connection with Example 3. Thus the pricing for the offer presented to traders at the different dealers will be as follows 

The display screens of all traders are updated to reflect the offer. As will be recognized such screens will look the same in this example as the screens shown above in Example 3 after processing of Dealer B s offer.

Another preferred embodiment for implementing the present invention to provide an exchange trading model will now be described in connection with . This preferred embodiment may preferably utilize largely the same architecture and components shown in however as will be understood from the following description and example the design and operation of those components will differ to some degree in this preferred embodiment.

A preferred embodiment for conducting exchange trading utilizing the system architecture shown in will now be described in connection with . Referring to in step a trader working at a trading terminal of a dealer sub system enters a base bid or offer to buy or sell a specified financial instrument at a specified price. In step this base order is forwarded by terminal to order manager . In step order manager transmits a request to risk processor for a plurality of price adjustment values to facilitate separate pricing of the order for one or more classes of counterparties based on the specific degree of credit risk associated with transacting with such classes of counterparties. The request preferably comprises all relevant information concerning the order required for any desired credit risk calculations and may for example include the instrument price and quantity. In step risk processor selects an appropriate algorithm for calculating the requested price adjustment values for the entered order. The resulting price adjustment values generated using the algorithm are preferably used to generate an array comprising a plurality of entries wherein each entry in the array specifies a price adjustment for the order to account for credit risk associated with transacting with a class of counterparties. Illustrative examples of price adjustment arrays are described below in connection with Example 5. As above risk processor may be programmed to apply any desired algorithm to calculate the price adjustment such as the algorithm described above in connection with Example 1.

In step the price adjustment array generated by risk processor is forwarded to order manager . In step order manager uses the price adjustment array to generate a family of partial price adjusted orders from the base order wherein each order in the family is specifically targeted to a class of potential counterparties and the price of each order is adjusted by the price adjustment quantity specified in the appropriate entry of the price adjustment array associated with that class of potential counterparties. A particular example illustrating a preferred embodiment for carrying out step is described below in Example 5.

In step order manager transmits the family of partial price adjusted orders to matching engine . In an alternative preferred embodiment order manager may be adapted to transmit the trader s order and the price adjustment array generated by risk processor to matching engine and matching engine may be programmed to generate the family of partial price adjusted orders.

In step matching engine determines for each potential counterparty the class to which the counterparty belongs by consulting a lookup table. The lookup table may in some embodiments classify dealers using criteria on a system wide basis e.g. assets primary dealer status or credit rating as in Example 1 above . Alternatively in other embodiments any dealer wishing to do so may periodically submit to matching engine a lookup table to be used in processing orders received from or transmitted to the dealer. A particular example illustrating a preferred embodiment for carrying out step is described below in Example 5.

In step matching engine determines for each order in the family of partial price adjusted orders the potential counterparty or counterparties to which the order relates based on the counterparty s class designation and transmits the order to the order manager of that counterparty or those counterparties. In a preferred embodiment matching engine transmits with the order a classification parameter that specifies the class of institution to which the dealer entity that submitted the order belongs without revealing the identity of that trading entity. This class designation too may be derived in some embodiments from a system wide table that classifies dealers based on objective criteria or may be derived in other embodiments from a table submitted by the counterparty for use in processing orders input by or transmitted to that counterparty. Thus in this preferred embodiment of the present invention substantial information regarding the trading entity that submitted the order is provided to the potential counterparty so that the counterparty may perform its own risk based price adjustment calculations without compromising the anonymity preferred in multi lateral trading systems. The following steps will preferably be performed at each potential counterparty sub system that receives an order. For ease of discussion however the steps will be described with reference to one such sub system.

Upon receipt of the partial price adjusted order by order manager of the potential counterparty in step the order manager transmits a request to risk processor for a price adjustment value for the order. The request preferably comprises all relevant information concerning the order required for any desired risk calculations and may for example include the instrument price quantity and classification of the dealer that submitted the order. In step risk processor selects an appropriate algorithm for calculating a price adjustment for the received order based on the counterparty s internal risk policies and risk calculation methodologies. As above risk processor may be programmed to apply any desired algorithm to calculate the price adjustment value.

In step risk processor transmits the price adjustment value to order manager . In step order manager modifies the order price in accordance with the price adjustment value to create a price adjusted order. In step order manager transmits the price adjusted order to terminals for display to the potential counterparty s traders.

In step a counterparty trader determines that he or she wishes to execute against the displayed price adjusted order and enters a command to do so e.g. a hit or a lift command . In step this hit or lift command is transmitted to order manager . In step order manager transmits the hit or lift to matching engine which in step executes the transaction.

In step matching engine transmits transaction confirmation messages to both transacting parties. In step order managers of the transacting dealers credit their respective risk adjustment portion of the execution price to an internal risk allocation account and perform any other internal accounting necessary to reflect the transaction. Crediting of dealer risk allocation accounts may preferably be performed in a manner analogous to that described above in Example 3. In step order managers of the transacting dealers transmit transaction confirmation messages to the trader terminals of the transacting traders. In step matching engine broadcasts a market update message to all market participants to inform the market of the transaction. In step the screens of all traders are updated to reflect the new state of the market resulting from the hit or lift.

Operation of this preferred embodiment of the present invention will now be further described in connection with a specific particular example.

For purposes of the present example it will be assumed that a trader at a first dealer Dealer A enters a base bid for 10M at 4.970 . It will further be assumed that risk processor of Dealer A calculates the following price adjustment array for this bid 

Assuming these values order manager of Dealer A will generate the following family of partial price adjusted orders from the trader s bid 

More specifically for each modified order generated in the family of partial price adjusted orders order manager of Dealer A subtracts the price adjustment value determined by risk processor from the trader s order price to generate the modified order price. The conceptual explanation for this aspect of the process is the same as that described above in connection with Example 3.

Order manager transmits the family of partial price adjusted orders to matching engine which identifies the target dealers for each order in the family based on their class and transmits the orders to them. With the transmitted orders matching engine transmits a class identifier that identifies the class to which Dealer A belongs.

Matching engine may be provided with lookup tables analogous to those described above in connection with the RFQ embodiment for determining a class or rating band to which a particular potential counterparty should be assigned. For ease of description however it will be assumed in the present example that matching engine maintains the somewhat simpler tables described below.

For purposes of the present example it will be assumed that matching engine maintains two classification lookup tables 1 a first lookup table that classifies each dealer based on objective characteristics and is adopted for use by Dealers B E and 2 a second lookup table submitted by Dealer A which wishes to utilize its own proprietary classification scheme. It will be further assumed that the first lookup table is as follows 

Thus for example matching engine will transmit to Dealer B an order priced at 4.969 since Dealer B is a class 2 dealer in lookup table 2 and specifying the submitting dealer as a class 1 dealer since Dealer A is a class 1 dealer on lookup table 1 . Applying this principle to all potential counterparties matching engine will transmit the following partial price adjusted orders to the potential counterparty dealers 

Upon receipt of these orders each order manager at a potential counterparty will request a price adjustment value for the order from its risk processor. It will be assumed for purposes of the present example that the price adjustment values determined by the potential counterparties are as follows 

Assuming these price adjustment values the order managers of the potential counterparties will derive the following price adjusted orders for presentation to their respective traders 

More specifically each order manager of a potential counterparty subtracts the price adjustment value determined by its risk processor from the received partial price adjusted order price to generate the modified order price that it presents to its traders. The conceptual explanation for this aspect of the process is the same as that described above in connection with Example 3.

For purposes of the present example it will be further assumed that a trader at Dealer B now enters a base offer to sell 20M at 5.030 . It will further be assumed that risk processor of Dealer B calculates the following price adjustment array for this offer 

Assuming these values order manager of Dealer B will generate the following family of partial price adjusted orders from the trader s offer 

More specifically for each modified order generated in the family of partial price adjusted orders order manager of Dealer B adds the price adjustment value determined by risk processor to the trader s order price to generate the modified order price. The conceptual explanation for this aspect of the process is the same as that described above in connection with Example 3.

Order manager transmits the family of partial price adjusted orders to matching engine which identifies the target dealers for each order in the family based on their class and transmits the orders to them. With the transmitted orders matching engine transmits a class identifier that identifies the class to which Dealer B belongs.

For ease of description it will be assumed for purposes of the present example that matching engine maintains the same two lookup tables described above in connection with processing of Dealer A s bid i.e. 

Thus for example matching engine will transmit to Dealer A an order priced at 5.030 since Dealer A is a class 1 dealer in lookup table 1 and specifying the submitting dealer as a class 2 dealer since Dealer B is a class 2 dealer on lookup table 2 . Applying this principle to all potential counterparties matching engine will transmit the following partial price adjusted orders to the potential counterparty dealers 

Upon receipt of these orders each order manager at a potential counterparty will request a price adjustment value for the order from its risk processor. It will be assumed for purposes of the present example that the price adjustment values determined by the potential counterparties are as follows 

Assuming these price adjustment values the order managers of the potential counterparties will derive the following price adjusted orders for presentation to their respective traders 

More specifically each order manager of a potential counterparty adds the price adjustment value determined by its risk processor to the received order price to generate the modified order price that it presents to its traders. The conceptual explanation for this aspect of the process is the same as that described above in connection with Example 3.

While the invention has been described in conjunction with specific embodiments it is evident that numerous alternatives modifications and variations will be apparent to those skilled in the art in light of the foregoing description.

