---

title: Tag system
abstract: A monitoring device is configured to be attached to an agent to be monitored. The device includes sensor circuitry that detects or measures conditions relating to the environment, the agent or the agent's behavior. A microcontroller processes the conditions to produce event data, and a wireless transmitter transmits the event data to a remote host system. The conditions can include temperature, acceleration, the presence of another tag, or other conditions relating to the agent. The event data may relate to movement of the agent, an encounter with another tag, or other behavior of the agent, and may be stored to an internal memory. The monitoring device may also include a transmitter that transmits a signal, or tag identifier, that identifies the device. The event data may be reported as information relating to the behavior of the agent.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07616124&OS=07616124&RS=07616124
owner: Snif Labs, Inc.
number: 07616124
owner_city: Boston
owner_country: US
publication_date: 20061011
---
This application claims the benefit of U.S. Provisional Application No. 60 725 109 filed on Oct. 11 2005 and U.S. Provisional Application No. 60 810 751 filed on Jun. 5 2006. The entire teachings of the above applications are incorporated herein by reference.

A social network is a social structure made of nodes individual people and edges connections between people . It indicates the ways in which people are connected through social familiarities including acquaintances friends and families.

 Social networking services refers to a class of online tools that enable participants to visualize manage and grow their social networks. Users of these websites value the services offered primarily because they reinforce their connections with peers introduce them to new individuals and create opportunities to learn about ideas that people in their personal networks value.

Social networking websites often experience growth because each new member tends to invite their entire preexisting social network to join the new service. Attracted by the possibility of exponential growth there are many contenders in the social networking service industry.

Personal electronic devices such as cell phones digital cameras and portable music players allow people to take their communication devices with them wherever they go. These devices are small digital computers which have been designed to perform specific tasks. Cell phones for example exist primarily to place telephone calls but are also used to send text messages and store contact information.

Pet animals function as natural social devices. For example walking a dog in a park can lead to conversations that one might not otherwise have. In this way pets function as active icebreakers that will approach anyone without any notion of social inhibition. Pet walking is an example of a natural interaction in the physical world which can introduce people and establish new relationships.

An opportunity exists to improve existing social networking services and applications by using discrete and unobtrusive mobile electronic devices to automatically discover verify and characterize social interactions and encounters.

Embodiments of the present invention include a monitoring device comprising an enclosure that attaches to an agent to be monitored. The device may be an electronic tag the enclosure being similar in form to a dog tag that is worn around a pet animal s neck. The enclosure houses sensor circuitry that detects or measures conditions relative to the enclosure such as conditions relating to the environment the agent or the agent s behavior. The enclosure also houses a microcontroller that processes the conditions to produce event data and a wireless transmitter that transmits the event data to a remote host system. The conditions can include temperature acceleration the presence of another tag or other conditions relating to the agent. The event data may relate to movement of the agent an encounter with another tag or other behavior of the agent and may be stored to an internal memory. The monitoring device may also include a transmitter that transmits a signal or tag identifier that identifies the device. The device may also include a visual indicator such as a light emitting diode LED that indicates the status of the device or information relating to the agent.

In further embodiments the device is a tag comprising electronics that record the activities and environmental conditions of a pet animal that wears the tag. The recorded information can be uploaded to a network server operating a network service community of pet owners and pets. The recorded data can enable the data mining of the structural features of the community as well as the computation of statistics about the observed behavior of the community members. Through a web site SMS and instant messaging clients pet owners can remotely monitor their pets and receive notifications when pet related events occur. Pet owners can also use an online interface to explore and refine the community of pets and pet owners.

Further embodiments of the present invention comprise a system of electronic devices and software that together allow users to explore the activities of their agents who are associated with the devices. Devices may contain electronics that perform sensing digital storage and communication with other devices and base stations. Base stations may act as gateways between host software and devices and they may also be used to charge devices. Host software runs on a personal computer and connects base stations to network services. Network services aggregate process and cross reference data from devices. A website can provide a view of the data contained in the network services. Alternative viewing interfaces such as those used on the mobile devices connect to network services in order to access data from the devices.

The remote monitoring device is powered by a battery which can be rechargeable and is connected to power management circuitry for routing power to the device . The management circuitry also supplies a signal to battery voltage sensor C indicating a voltage level of the battery . This signal can indicate whether the battery should be recharged or replaced. The management circuitry is also connected to the docking port through which an electrical current may be routed to recharge the battery .

In addition to the battery sensor described above the plurality of sensors include a temperature sensor and an accelerometer for measuring environmental conditions relative to the device . The temperature sensor A receives an environmental input and can be adapted to detect the ambient air temperature of the environment or the temperature of a nearby surface such as the surface of an agent wearing the device . A 3 axis accelerometer B detects acceleration deceleration and other movement of the device utilizing four analog outputs to provide the measurements in real time to the MCU module . Alternatively other sensors may be substituted for or added to the plurality of sensors thereby providing other measurements relating to the environment or an agent. For example alternative sensors could measure ambient light humidity altitude or heart rate of the agent.

The MCU module performs a number of functions as determined by the mode of operation of the remote monitoring device . Exemplary operations of the device are described in further detail with reference to below. The MCU receives analog signals from the plurality of sensors converting the signals to digital readings with an analog to digital converter ADC . The MCU captures and processes the readings according to one or more software or firmware programs stored at the MCU or the Flash memory . The readings may be processed at the MCU for example by sampling the readings at variable intervals deriving a conditioned selection of readings detecting an event based on the readings or producing data relating to a set of readings. The processed event data may be stored to the external Flash memory through a serial peripheral interface SPI . The event data may also be sent to the radio RF module at MCU with antenna where it is transmitted via wireless communication to a computer or a remote device . The computer may be a base station as described herein with reference to a personal computer or other system. The remote device may be similar to the remote monitoring device . The RF module at MCU may also receive wireless signals from the computer or remote device enabling data transfer or other communication.

The MCU may be programmed to detect a particular reading or signal event received from the analog sensors or communication with a computer or remote device . In response to the event the MCU may send a signal to the LED controller indicating to activate one or more LED lights . The LED lights may turn on or enter a blinking pattern to indicate the occurrence of the event. For example an LED may flash to indicate that the battery is low on power the ambient temperature has reached a threshold or another remote device is nearby.

A soft switch connects to the MCU and can be configured to toggle modes of operation of the remote monitoring device such as power on power off and low power operation. The MCU also interfaces with a docking port which can be connected to the port of a base station described below with reference to . Through this link the MCU can transfer data stored at the external Flash memory as well as information about the device such as hardware and software settings storage capacity and the firmware version. The MCU can also receive commands and data from the base station such as a command to update the MCU firmware accompanied by updated firmware.

In further embodiments the remote monitoring device is a tag worn by a pet animal such as a dog the pet animal being the agent monitored by the device . Sensor circuitry detects or measures the temperature and acceleration of the pet animal and the radio receiver at the MCU receives signals from a second tag the second tag being worn by a second pet animal. This data from the sensor circuitry and radio receiver is processed by the MCU to produce event data. The event data relates to the environment and the behavior of the pet animal such as its activities e.g. whether it is walking running or at rest and its interaction with other animals as evidenced by signals received by a second tag . The event data can be transferred to a computer system in real time or can be stored to a Flash memory for transfer at a later time. The computer system may include a base station described herein with reference to which communicates with the device by receiving the event data and sending commands and other signals to the device . The computer system can report the event data or transfer the data to a server on a computer network. A pet owner can access the computer system or the network in order to monitor the behavior of his or her pet animal.

Wireless negotiations between tags or between a tag and a base station are based on periodic pings containing unique ID information. During the base station communication process the base station status is determined by listening for pings from a nearby base station. If it is determined that a base station is within range the device enters the home state . At this state the tag can record the encounter with the base station and can ask for any pending messages from the web server such as one which might change the LED collar tone setting on the tag. The tag can then begin to stream its data back to the base station to be uploaded to a computer. This data may include lists of encounters with other tags and base stations raw sensor data or higher level features computed on the sensor data. Depending on the application the data retrieved wirelessly can be real time or accessed from a pre recorded log. Periodically the tag checks to see if a base station is still present to receive its data stream. When a base station is no longer present the tag enters the Away state . In this state the tag terminates its data streams and waits for a base station to appear. During this time the tag can record information about its activity state and received pings.

During a communication process with another tag the tag receives a ping from a second tag and the ping is recorded as an encounter. Because the radio provides a received signal strength measurement the distance between the two tags can also be roughly estimated. This measurement gives rise to two types of interactions near encounters and stronger close encounters . The tag is able to monitor several encounters from each category at the same time so the states are not as distinct as the flow diagram implies. However this view shows what happens to each new encounter quite clearly. When a tag is detected the ping rate can be increased so that interactions are registered more quickly. Then the ID of the encountered tag is recorded and a timer is initialized to measure the duration of the interaction. An LED sequence specific to a given pairing of tags can also be played. Finally the average activity features observed over the period of an interaction can be logged to characterize the encounter. When no other tags are present the device enters the Alone state and lowers its ping rate to save power.

A third process illustrates processing the accelerometer state. Modes of device operation can be changed according to accelerometer measurements in order to save power and resources. For example if there is no energy present on the accelerometer the device is probably stationary and thus can rely on more sparse radio usage because it is unlikely to encounter new devices. The device may not require calculating received signals other than the accelerometer energy threshold. Thus the tag may enter a low power mode while accelerometer energy is below a first specified threshold operating with minimal functions. A higher accelerometer energy level may indicate that the sensor data is more interesting as various activities may be present. Typically the more movement there is the more likely interesting events will be observed. Therefore once accelerometer energy surpasses the first threshold the tag enters an inactive state whereby feature calculation resources and RF protocol speed are increased. Further increase in accelerometer energy beyond a second threshold results in a transition to an active state whereby the tag may operate with a further increase in activity and resources. Conversely a decrease in accelerometer energy can cause a transition to the inactive state and further to the low power mode . Transitions between states can be logged transmitted to a computer system or stored to a memory in order to indicate the activity of an agent to which the tag is attached.

These processes can be executed from a main loop that checks a plurality of statuses. For example the tag communicates with the base station to determine whether the tag firmware is out of date. If so the tag enters the firmware update state whereby updated firmware is downloaded and written to the tag. If the tag has stored event data that has not been sent to the base station the tag may enter an uploading state whereby the tag outputs event data read from the memory. If the tag battery is low in power the tag enters a battery charge state whereby the base station sends a power signal to charge the battery. If tag settings are modified by a user or the base station the tag enters a state whereby it receives updated configuration settings and updates the tag configuration accordingly. While inside each state a status LED pattern can be triggered for user feedback. While the tag is docked communication signals are sent through a wired serial interface connecting the tag and the docking port.

The docking port corresponds to the docking port of a tag with reference to above with corresponding power and serial connection. Two status LEDs may be included to provide visual feedback to a user. The base station can be programmed either via the USB connection or via the JTAG programming interface . Further operations of the base station are described below with reference to the state diagram of .

The base station communicates information it receives from tags back to a computer system via a USB connection where the data can be handled in a more flexible form. The tags may be docked state or located within a range of wireless communication state . Event data can be streamed from the tags wirelessly when they are within range of the base station as in the tag nearby state . Data can also be directly downloaded from memory when a tag is docked in the base station as in the downloading data state . The base station may also negotiate tag maintenance consistent with the states expected above with reference to above. This functionality is provided in the states updating tag firmware and changing tag settings .

Host software is run by the host computer and the host computer may connect to one or more base stations . The host software may provide status information authenticate user accounts to the network service and administer firmware updates to the base stations and tags .

Further the host computer may communicate with a network server via a network protocol such as HTTP thereby transmitting the reported information to the network server The network server stores the reported information to a database and provides network based access to the reported information in one or more formats. For example the network server may create a webpage at a web server the page displaying the reported information and being accessible to the host computer or another computer that has a network connection and a web browser.

The network service may comprise addressable computers connected to the internet that provide an interface to the host software. One embodiment of the network service is a centralized server that exports a web services application programming interface API . This interface provides functionality for authentication authorization uploading and manipulation of uploaded data. Users at a computer may be able to login to network services with a username and password thereby accessing the website host software or other viewing interfaces. A website can provide a full featured interface to the reported information uploaded by the tags to the network service at the network server . The website may be configured so that users can log in view historical data set preferences and privacy levels and navigate through the interaction based social networks.

Additional interfaces to the reported information are made possible by a network service component API. Among the possible embodiments are instant messaging services text messaging email and the display of information at the tag itself. For example the network server may operate an instant messaging IM service whereby the reported information is sent to an IM client running on another computer . In another example the network server may operate a short message service SMS whereby reported information is send to a mobile device such as a mobile telephone that is configured to receive SMS messages. As a result a user can access the reported information of the agent s behavior through a variety of means.

Packet is a tag ping packet. This packet is broadcast by tags at a regular interval and serves to simply identify the tag to neighboring devices. The opcode for a tag ping operation is 0x01 and the length is 6 bytes. The Data for this type of packet is 0xAA. Packet is a base station ping packet which is transmitted by a base station at regular intervals to identify the base station to nearby devices. The packet is identical to the Tag Ping packet with the exception that the opcode is 0x02.

Initially the tag must establish communication with a base station. The tag and base station identify themselves to one another by exchanging radio packets. Meanwhile the client software running on the host computer has logged into the server and received security credentials that allow the client to send data packets from the tag.

Once the tag has identified the base station as a trusted entity the tag transmits data packets having encoded sensor data to the base station. The base station forwards these packets to the client software at the host computer via a USB interface. The client software sends periodic summary data dumps to the server. Because the latency of the internet is greater than that of USB connected devices the client attempts to bundle large number of data packets together before contacting the server.

Upon receiving the bundled packets the server un bundles and parses the raw packet data described further with reference to below.

Soft IDs are used by tags whenever they are transmitting by radio step . The Soft IDs must be mapped to Agents on the server because soft IDs are transient. Data is then unpacked from the raw data dump. For example any data with a data type ID of 1 are converted into an encounter and stored in the encounters table . The encounters table includes fields for agent a agent b and time of encounter.

The remaining data items are then stored in the data table on the server as shown in example Table 1 below.

Regarding table 1 Data ID is a unique key identifying each data entry. Agent ID identifies to the agent that collected the data. The Dump ID is a foreign key that refers to a table in which the un processed data is stored in binary format. The data type is a foreign key field which maps to one of 4 data types Encounter Accelerometer Energy and RAW sensor values. The data time is the time that the data was logged. Data Value is particular to each data type. For example in the case of encounters the value is the software ID of the encountered tag.

While this invention has been particularly shown and described with references to example embodiments thereof it will be understood by those skilled in the art that various changes in form and details may be made therein without departing from the scope of the invention encompassed by the appended claims.

