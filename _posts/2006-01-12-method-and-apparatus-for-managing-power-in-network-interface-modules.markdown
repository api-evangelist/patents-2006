---

title: Method and apparatus for managing power in network interface modules
abstract: A method and system for managing power consumption in a portable computing device having a network interface module is presented. A power management module receives inputs from other modules and determines when the network interface module is to be put in a doze state for a predetermined number of beacon intervals to conserve power consumption in the network interface module. The network interface module in a device that is associated with a network is put in the doze state after an event has occurred including when a scan has been performed, after a delayed sleep timer has expired, and after a beacon transmission has been completed and no traffic is buffered for the device. The delayed sleep time is set based on the estimated round trip time of a packet.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07555663&OS=07555663&RS=07555663
owner: Microsoft Corporation
number: 07555663
owner_city: Redmond
owner_country: US
publication_date: 20060112
---
This application is a divisional of application Ser. No. 10 355 412 entitled METHOD AND APPARATUS FOR MANAGING POWER IN NETWORK INTERFACE MODULES filed on Jan. 31 2003.

This invention relates generally to portable computing devices and more particularly relates to power management in portable computing devices.

With the development and deployment of wireless networking devices such as laptop computers personal digital assistant devices etc. and infrastructures consumers and businesses are increasingly being able to realize the benefits of true mobile computing collaboration and information exchange. No longer are business travelers required to carry an assortment of cables and search endlessly for an available data port simply to connect to a network to retrieve email messages download files or exchange information. No longer are companies and home consumers restrained in where they may access their networks by the location of the Ethernet jacks on the wall. Meeting participants and groups of friends may now form their own ad hoc networks without connecting cables between themselves or logging in to some preexisting network. They can log onto the network using a wireless protocol while running on battery power thereby allowing even greater mobility

However while the concept of mobile computing on wireless networks is well accepted the implementation of this concept has taken on many forms. That is there now exist several different wireless protocol standards that are competing in the marketplace. These standards include 802.11b also know as Wi Fi 802.11a also know as Wi Fi5 802.11g HomeRF Bluetooth Wireless 1394 HiperLAN2 UWB ZigBee etc. Each of these different standards has particular advantages and was and is being developed with particular applications and users in mind. One thing in common with these standards is the use of a network interface module commonly implemented as a network interface card NIC .

As mobile workers demand greater mobility both inside the organization and when traveling the mobile workers are limited by the lifetime of the battery powering the wireless device. The battery life is a major restriction on mobility. The wireless NIC is the third highest consumer of battery power in a laptop. In small form factor devices the wireless NIC consumes an even larger percentage of battery power than in a laptop. Most of that energy is used for wireless data transmissions to keep the wireless NIC powered on even when the NIC is not engaged in data transmissions. Since the amount of power a battery provides is limited how to minimize power consumption to extend the operation time of the device powered by the battery is an important issue for these devices.

One method that has been taken to reduce power consumption of the functions the wireless NIC performs is adjusting the period between performing scanning to determine which devices are in the range of the wireless networking device. For example U.S. application Ser. No. 10 323 043 filed Dec. 18 2002 and assigned to the assignee of this application teaches setting the time between scans using an exponential function based on the scanning history and scan results of the latest scan. However while increasing the time between scans conserves power more methods to conserve battery power are needed.

The present invention provides a method and apparatus for managing power in a network interface module in a computing device. A power management module controls the power state of the network interface module based upon parameters received from other modules in the computing device. If the computing device is being powered from the limited energy power source such as a battery or fuel cell and the computing device is associated with an access point the network interface module is operated in a power saving mode to conserve power draw from the limited energy power source. In one embodiment the power saving mode is either a fast power save mode or a maximum power save mode. If the computing device is not associated with an access point and the network interface module is scanning or a scan has been requested the network interface module is operated in a powered up state where the network interface module is fully powered. In one embodiment when the network interface module is not associated with an access point and is not performing a scan or has completed a scan the network interface module is put into a low power state i.e. a doze state . If the computing device is not associated with an access point and the network interface module is scanning or a scan has been requested the network interface module is set to a powered up state if the network interface module was in a doze state where the minimum amount of power for the network interface module to operate is used. If the computing device is being powered from a power line source e.g. an ac power source battery charger etc. the network interface module remains in a powered up state where the network interface module is fully powered.

A user may set a preference via an interface to specify whether the user wants no power conservation i.e. a constant awake mode a mid range of power conservation i.e. a fast power save mode or a maximum mode of power conservation i.e. a maximum power save mode . In addition to the user settable preference an application can tag a packet to indicate a fast response is required and the power management module adjusts operation of the network interface module to operate in a constant awake mode or a fast power save mode.

In the fast power save mode the power management module determines when the network interface module can enter a doze state and sends a notification to an access point that the network interface module is going to be set to the doze state. The power management module sets the network interface module to the doze state after the notification has been sent. Prior to a beacon interval ending the network interface module is set to a powered up state i.e. an on state to receive a beacon for each beacon interval. If the beacon indicates that no packets are queued for the computing device at the access point or the peer computing device the network interface module is put back into the doze state. If the beacon indicates that at least one packet is buffered for the computing device the network interface module receives the packets that have been buffered and then is put in the doze state.

The step of determining when the network interface module can enter a doze state includes determining that a delayed sleep timer has expired determining if a scan has been completed determining if a beacon indicates that no traffic is queued for the computing device and determining if the power source switches from the limited energy power source to the power line source.

In a maximum power save mode the power management module puts the network interface module into a doze state for multiple beacon intervals i.e. a listening interval . The power management module determines when the network interface module can enter a doze state and sends a notification to an access point that the network interface module is going to be set to the doze state. The power management module sets the network interface module to the doze state after the notification has been sent. Prior to the listening interval ending the network interface module is set to an on state to receive a beacon. If the beacon indicates that no packets are queued for the computing device the network interface module is put back into the doze state for a listening interval. If the beacon indicates that at least one packet is buffered for the computing device the network interface module receives the packets that have been buffered and then is put into the doze state for the remainder of the listening interval.

The power management module has a power management backend module to determine when the network interface module is to be set to one of an on state and a doze state a system state module in communication with the power management backend module to provide system state information including whether the device is being powered from the limited energy power source to the power management backend module and an interface list module in communication with the power management backend module to provide interface state information of the network interface module to the power management backend module. The power management backend module determines when the network interface module is to be set to the on state the doze state and the off state using a state machine. The power management module determines that the network interface module is to be set to the doze state after a delayed sleep timer has expired a scan has been completed or a beacon indicates that no traffic is queued for the computing device when the network interface module is operating in a power save mode.

A delayed sleep time is used to improve network throughput for devices operating in a power save mode by waiting for a specified time after a packet is sent before setting the network interface module to a doze state. This allows an application to receive a response without having to wait for the next beacon interval or listening interval provided that the recipient sends a response within the delayed sleep time. A delay sleep timer is used to provide the timing function. The delay sleep timer is set after a packet is sent to an access point for distribution and the network interface module is set to the doze state after the delay sleep timer has timed out. The delay sleep timer is reset if another packet is being sent to the access point while the delay sleep timer is counting. The delay sleep time is determined for each packet and is based upon an estimated round trip time of the packet being sent.

Additional features and advantages of the invention will be made apparent from the following detailed description of illustrative embodiments which proceeds with reference to the accompanying figures.

This invention operates in a computing device having a network interface module for accessing a network and a limited energy power source such as a battery pack or the like that has a limited amount of energy stored therein. Current network interface modules stay remain in a high power state transmitting receiving or listening longer than needed when not sending network traffic. This time is wasted power consumption which reduces the duration of the battery pack. This leads to having to replace or recharge the battery pack more frequently. It is desirable to reduce the amount of time the network interface module is in a high power state when not sending traffic or scanning. The invention provides a method to conserve battery power based upon a user s preferences. Prior to describing the invention in detail an exemplary computing device in which the invention may be implemented is first described with reference to .

The invention may be implemented in a system employing various types of machines including cell phones hand held devices wireless surveillance devices microprocessor based programmable consumer electronics and the like using instructions such as program modules that are executed by a processor. Generally program modules include routines objects components data structures and the like that perform particular tasks or implement particular abstract data types. The term program includes one or more program modules.

Turning to the drawings wherein like reference numerals refer to like elements the invention is illustrated as being implemented in a suitable computing environment. Although not required the invention will be described in the general context of computer executable instructions such as program modules being executed by a personal computer. Generally program modules include routines programs objects components data structures etc. that perform particular tasks or implement particular abstract data types. Moreover those skilled in the art will appreciate that the invention may be practiced with other computer system configurations including hand held devices multi processor systems microprocessor based or programmable consumer electronics network PCs minicomputers mainframe computers and the like. The invention may also be practiced in distributed computing environments where tasks are performed by remote processing devices that are linked through a communications network. In a distributed computing environment program modules may be located in both local and remote memory storage devices.

The device may also contain one or more communications connections that allow the device to communicate with other devices. The communications connections are an example of communication media. Communication media typically embodies computer readable instructions data structures program modules or other data in a modulated data signal such as a carrier wave or other transport mechanism and includes any information delivery media. The term modulated data signal means a signal that has one or more of its characteristics set or changed in such a manner as to encode information in the signal. By way of example and not limitation communication media includes wired media such as a wired network or direct wired connection and wireless media such as acoustic RF infrared and other wireless media. As discussed above the term computer readable media as used herein includes both storage media and communication media.

The device may also have one or more input devices such as keyboard mouse pen voice input device touch input device etc. One or more output devices such as a display speakers printer etc. may also be included. All these devices are well known in the art and need not be discussed at greater length here.

In keeping with the intended application of the invention the device is configured as a mobile device. To that end the device is provided with a portable limited energy power source such as a battery pack a fuel cell or the like. The limited energy power source provides power for computations and data transmissions by the device . As shown in the computing device further includes a network interface module for wirelessly communicating with different types of wireless networks. The network interface module in this implementation includes a transmitter which is coupled to an antenna for transmitting data wirelessly over a suitable frequency channel. A receiver is also coupled to the antenna for receiving communication packets wirelessly transmitted from the networks that the device is communicating with. The network interface module and the antenna are part of the communication connections in . In one embodiment the network interface module employs wireless configuration service over the IEEE 802.11 wireless connections to ease network configuration including infrastructure networks and ad hoc networks. An exemplary network interface module is PCMCIA wireless card. It will be appreciated that the interface type and physical configuration of the network interface module is not critical to the invention. For instance the interface type could be PCI or another type and the network interface module does not have to reside on a separate card. It may be included on the motherboard of the computer or even possibly built into the processor in the future.

Through the network interface module the computing device may communicate with different types of wireless networks. For instance in the illustrated environment of the computing device may be a station connected wirelessly to an infrastructure network through an access point thereof. The computing device may also be part of a peer to peer network also referred to as an ad hoc network that includes other computing devices such as the computing devices and . Before connecting to either the access point of the infrastructure network or the ad hoc network the computing device may be in a state of searching for devices that belong to the network by periodically scanning actively by sending probe requests and scanning for probe response signals transmitted by the access point or other devices. Alternatively the computing device may search passively by scanning for beacons transmitted by access points.

A network driver controls the operation of the network interface module . The network driver is either part of the operating system of the computing device or a separate executable program running on the computing device . An exemplary network driver is the Network Driver Interface Specification NDIS . The network driver is in communication with a power management module which dynamically directs the network interface module to change power states as described herein. The power management module is in communication with several components to obtain data used to determine which power state the network interface module should be in. These components may include a scanning engine applications through API application programming interface power supply indicator power setting packet analyzer and statistics analyzer .

The scanning engine uses an interface to the power management module to request that the network interface module be put into a high power state when it needs to perform a scan. It will send a message to indicate that a scan has been completed to indicate that it does not need the network interface module to remain in a high power state any longer. The scanning engine adjusts the time between scans using an exponential function based upon scan history and scan results. Further details of the scanning engine may be found in U.S. patent application Ser. No. 10 323 043 filed Dec. 18 2002 hereby incorporated by reference in its entirety. Applications use API to request the data that it transmits must be transmitted in a low or high power state. If the application has no preferences it does not call the API .

The operating system of the device or another module not shown determines if power is being supplied by the limited energy power source or from an ac source. It uses power supply indicator to communicate to the power management module whether the device is being supplied power by an ac source or from the limited energy power source . The user may specify the power setting it wants through power setting . These power settings are high medium and low. The high power setting corresponds to a constant awake mode the low power setting corresponds to a maximum power saving mode and the medium power setting corresponds to a fast power saving mode and these power settings are described herein. Packet analyzer determines when the network interface module may be put in the doze state. The packet analyzer observes packets sent through the network interface module to determine when a client is not sending traffic. When sufficient time has passed between sending data the packet analyzer informs the power management module that it can set the network interface module to a doze state. Statistics analyzer only works for network drivers that support it. The packet analyzer queries the statistics analyzer to determine statistics for the connection to determine if the power level should be adjusted. The statistics include received signal strength transmitted fragment count failed count retry count multiple retry count frame duplicate count RTS success count RTS failure count ACK failure count FCS error count and transmitted frame count.

The power management module and components may reside in the system memory the removable storage or the non removable storage in . While the power management module and components are shown separately for clarity it is recognized that the module and some or all of the components may be part of the operating system or part of another module in the computing device .

In the description that follows the invention will be described with reference to acts and symbolic representations of operations that are performed by one or more computing devices unless indicated otherwise. As such it will be understood that such acts and operations which are at times referred to as being computer executed include the manipulation by the processing unit of the device of electrical signals representing data in a structured form. This manipulation transforms the data or maintains it at locations in the memory system of the computer which reconfigures or otherwise alters the operation of the computer in a manner well understood by those skilled in the art. The data structures where data is maintained are physical locations of the memory that have particular properties defined by the format of the data. However while the invention is being described in the foregoing context it is not meant to be limiting as those of skill in the art will appreciate that various of the acts and operations described hereinafter may also be implemented in hardware. Additionally an access point will be used to describe the operation of the invention. It is understood that the invention will work in the ad hoc mode with peers and in other systems that have components that behave like access points and peers. In the description that follows the interaction between the network interface module and access point e.g. messages and notifications can also be implemented between a peer and the like.

The invention controls the power to the network interface module to three primary levels. These levels are on state doze state and off state. While three levels are described an arbitrary number of levels may be used depending on the operating system capabilities of the network interface module and driver. In the doze state the system is in an idle state where the network interface module is powered to the minimal power level it needs to maintain itself but not send any traffic. The invention provides a method for the network interface module to spend as much time in the doze state when the network interface module is not sending or receiving traffic or scanning.

In the on state there are three power levels. These power levels are constant awake mode CAM maximum power saving mode Max PSP and fast power saving mode Fast PSP . In the CAM mode the network interface module is fully powered and no power saving is employed. Prior to defining Max PSP and Fast PSP the relationship between beacon interval and listening interval shall be explained. Turning now to in many wireless systems an access point periodically broadcasts a beacon frame that contains the timing information and other information including a traffic indication map TIM . The stations that receive the beacon frame adopt the access point s timer value in a received beacon if the received time is later than the stations own timer. The period between broadcasts is known as a beacon interval. A typical beacon interval is 100 ms.

Now that the states have been described the overall operation of the power management module shall be described. Turning now to the power management module determines if the device is using power from limited energy power source or from a power line source step . If the device is using power from a power line source the power management module sets the network interface module to operate in the constant awake mode step . It should be noted that if the device is an energy star compliant device or the like the power management module operates as if the device is running off the limited energy power source to conserve energy. A user may force the device to be in the constant awake mode through power setting .

If the device is using power from a limited energy power source the power management module determines if the device is associated with an access point step . The power management module operates the network interface module in one of the power saving modes i.e. Max PSP or Fast PSP if the device is associated with an access point step . If the device is not associated the power management module determines if the device is in the scanning mode step . The scanning engine provides this information to the module . The power management module operates the network interface module in the constant awake mode if the device is scanning step . If the device is not in the scanning mode the power management module puts the network interface module in the doze mode step .

When in one of the power savings modes the power management module receives information from the modules and uses that information to set the power level of the network interface module . The packet analyzer settings from packet analyzer take precedence over the scanning settings from scanning engine or application settings received from the API . The rationale is that the packet analyzer determines the appropriate power level for the supported data transmission rate and if the card requires less than full power to achieve the data transmission rate then power should be conserved. The exception is if neither the scanning engine nor the application request high power and one of them requests low power in which case the network interface module can remain in low power state as there is no client requirement for it to be in a high power state. If none of the components provide input to the power management module then the power setting will remain in its existing state.

When there is data to send the network interface module will be set to the continually awake mode to send data from an application. The packet analyzer determines an expected round trip time that it would take to get traffic back from the last transmission. This time called a delayed sleep time is associated with each packet sent by the device . When a packet is sent the power management module sets a timer for the delayed sleep time. After the timer times out and no traffic has been received the network interface module will be set to the doze state to save power. If there is more traffic to send the timer is reset. The delayed sleep time is dynamic because it is based on the round trip time. The network interface module could be transmitting packets from multiple sessions. Packet transmissions from different session would have different round trip transmission RTT delays. The delayed sleep time is a dynamic value based on the maximum of the RTTs for the packet transmissions from all sessions. For example pending packet transmission from one session may have a RTT of under 10 msecs while the other may have a RTT of 50 msecs in this case the delayed sleep would be based on the maximum between the two cases e.g. 50 msecs . Additionally the RTT for a session may be different in situations where the packets are being sent to multiple locations. For example a transmission that is being sent to Japan from the United States will have a longer delayed sleep time than a transmission being sent from the United States to another location within the United States. If the round trip time is longer than a beacon interval the power management module determines if the network interface module can remain in the doze state for longer than the beacon interval based upon factors such as the risk of missing a return packet the round trip time etc. If the power management module determines that the network interface module cannot remain in the doze state for longer than a beacon interval the power management module will set the network interface module to the powered up state to receive a beacon. Otherwise the network interface module remains in the doze state until the delayed sleep timer expires.

The delayed sleep time improves network throughput for devices operating in a power save mode because it allows an application to receive a response without having to wait for the next beacon interval or listening interval provided that the recipient sends a response within the delayed sleep time. Additionally an access point does not have to buffer the response thereby conserving resources. Applications which are satisfied with this mode of operation do not need to call the API and will not have any influence on the power setting chosen.

An application that specifically requires fast response will use the API to tag packets accordingly. The power management module will not be as aggressive in powering down the network interface module to allow sufficient time for return traffic when an application has called the API . For example the network interface module may be put in the constant awake mode for several beacon intervals and or the delayed sleep time could be increased. The invention protects the device against an application constantly tagging packets to intentionally draw down the limited energy power source with a timer function. If an application calls the API the power management module starts a timer. If the application or any other application does not send any more packets the timer will time out after a multiple of the round trip time for the traffic has elapsed allowing the power management module to set the network interface module to the doze state.

The power management module communicates with the network interface module using object identifiers e.g. OIDs . The OIDs are to set or query the power state of the network interface module and to set or query the delayed sleep time for transmitted traffic. The power state OID is OID80211 Power State and the delayed sleep OID is OID80211 Delayed Sleep. Parameters for the OID80211 Power State are a setting to switch the network interface module to the on state a setting to switch the network interface module to the doze state and a setting to switch the network interface module to the off state. The parameter for the OID80211 Delayed Sleep is the delay sleep setting in milliseconds.

Now that the overall operation has been described the modules within the power management module will be described. Turning now to the power management module has a power management backend a system state module and an interface list module . The power management backend uses a state machine to manage the power state of the network interface module based on the current state of the device . The state information includes global system state information from the system state module and per interface state information from the interface list module . The global system state information includes whether the device is operating from the limited energy power source or from an ac source. The per interface state information includes whether the device is associated on an interface whether a scan is being requested and plug and play events. The power setting is also an input to the power management backend .

The state machine is illustrated in . The power management module will set the network interface module to the doze state from the on state for several conditions. These conditions include when the delayed sleep timer since the last sent packet has expired line . If the delayed sleep time is longer than a beacon interval the network interface module is set to the doze state . Other conditions are when a scan has been completed line when the network interface module has woken up to receive a beacon and no traffic is waiting to be sent to the device line and when the device switches from a power line source to the limited energy power source and no traffic is flowing line .

The power management module will set the network interface module to the on state from the doze state for several conditions. These conditions include when the device has a packet to transmit line when the network interface module needs to scan for available networks line when the network interface module needs to wake up to receive a beacon line and when the device switches from limited energy power source to ac power line . If the device is an energy compliant device or the like the network interface module remains in the doze state when the device switches from limited energy power source to ac power. The power management module will set the network interface module to the off state from the doze state if an idle timer has expired line . The power management module will set the network interface module to the on state from the off state if the device has a packet to send and the network interface module was put in the off state line .

A typical operation scenario when the network interface module is operating in the Max PSP or Fast PSP mode is illustrated in . When the device is not sending or receiving packets it enters the doze state after the delayed sleep time has passed. Before entering the doze state a packet is sent to the access point to indicate that the network interface module in device is entering the doze state line . The access point buffers packets represented by line destined for device while the network interface module is in the doze state. The access point periodically sends beacons. As previously indicated the beacon contains a traffic indication map that identifies which devices using power saving mode have data frames waiting for them in the access point s buffer. When the network interface module is set to the on state to receive a beacon after a beacon interval has passed if the network interface module is being operated in the Fast PSP mode or in the case of Max PSP after a listening interval has passed it receives a beacon packet line and learns via the traffic indication map if at least one packet for the device is buffered at the access point .

The network interface module sends a message to the access point indicating that it is awake if the traffic indication map indicates a packet for the device is buffered line . After receiving the message the access point sends a buffered packet to the device line . If there is more packets queued in the buffers the access point provides an indication in the first packet sent and sends all the packets. The last packet to be sent has an indication that there is no more data in the access point s buffers for the device . After all of the packets have been received a packet is sent to the access point to indicate that the network interface module is entering the doze state line . The network interface module will re enter the doze only if it has no pending packets to be transmitted. If there are packets for transmission the network interface module will first send all the pending packets and only after it has exhausted its transmit queues will it send an indication to the access point that it is entering the doze state. This takes care of the case where the network interface module has queued packets to be transmitted to the access point or the peer while it was in the doze state. This process repeats itself for as long as the device is associated with the access point . When sending a packet the network interface module sends the packet to the access point for routing to the packet s destination and waits for the delayed sleep time to time out. After the delayed sleep time has passed the network interface module sends a message to the access point that the module is entering the doze state and then the module enters the doze state.

Every network media type either does or could be required to implement power management. Turning now to an alternate embodiment of the power management mechanism of the present invention is illustrated in an operating environment . In this embodiment the power management module receives commands from components that provide an input to the power management module and that are not specific to a particular network. For purposes of explanation these components will be called power setting components. The power management module translates the commands and provides power settings to network adapter interfaces. This allows the power setting components such as the power supply indicator application programming interface user power setting and the like to specify its power management requirement to the power management translator without needing to specify their requirements to a specific network adapter. Each power setting component is also able to specify to which device the setting applies if applicable. Components particular to a network such as scanning engine packet analyzer and statistics analyzer remain in a network specific power management module such as power management module for 802.11 WLAN. Components particular to the GPRS General Packet Radio Service are in WWAN power management module which controls the power level in the GPRS network interface module . Similarly components particular to a LAN are in Ethernet power management module which controls the power level in LAN adapter .

The operating system of the device or another module not shown determines if power is being supplied by the limited energy power source or from an ac source. It uses power supply indicator to communicate to the power management translator whether the device is being supplied power by an ac source or from a limited energy power source. Applications use API to request the data that it transmits must be transmitted in a low or high power state. If the application has no preferences it does not call the API . The user may specify the power setting it wants through user power setting . These power settings are high medium low or no power management. These power settings may be extended to additional settings for interface modules that provide more power settings. In one embodiment when the device is being supplied power from an ac source the user settings are ignored. Additionally if there is a real time application actively engaged in a call and the user has specified high power management the power management translator temporarily overrides the user setting.

The base power setting is used to instruct a power management module to shut a network interface module down if thermal conditions are exceeded or if the user has specified a global power setting. The roaming component also has an impact on power management. If the 802.11 network interface module is the active network connection the power management translator specifies to the other power management modules that their network interface modules should be powered off. If two network interface modules are active at the same time e.g. a LAN and a WLAN then the power management translator specifies a relevant power setting to both of them and specify that the other network interface modules should be powered off. Each power management component uses the power level setting provided by the power management translator to determine the level of power management required for the particular network interface module the power management module is controlling.

The power management translator has a system state module and an interface module. The system state module is in communication with the power supply indicator API user power setting base power setting and roaming component . The interface module communicates with power management modules and provides the desired power setting to the power management modules based on the inputs from the power supply indicator API user power setting base power setting and roaming component as described above. Using the 802.11 power management module as an example the power management translator sends the 802.11 power management module a setting of H M L Idle Off high power setting medium power setting low power setting no power management or off . The 802.11 power management module translates this setting into the correct power state On Doze Off for the network interface module and controls the network interface module based upon the operation parameters specific to the 802.11 network interface module . For example if a low power setting is specified to power management module from the power management translator the power management module sets the network interface module to the doze state for listening intervals as previously described e.g. no scanning is being performed the delayed sleep timer has timed out etc. . Similarly if the power management translator provides a medium power setting to power management module the power management module sets the network interface module to the doze state for beacon intervals as previously described.

Power management modules for the other media types use the power setting provided by the power management translator to use the appropriate power management setting for their network interface module. For example wireless WAN might support more or less than three power settings so the WWAN power management module uses the power setting provided by the power management translator to determine the correct power management setting for the GPRS network interface module . For example power settings for a device in a GPRS network is idle or fully powered. When the device is transmitting or receiving call traffic the device is fully powered. When the device is not in a call or is in a call and is not transmitting or receiving the device is in a low power setting.

The power management translator provides the ability to seamlessly add a new media type. A new media type registers with the power management translator by calling an API and providing a globally unique identifier GUID and a friendly name. The power management translator uses these to provide the generic setting to the power management module of the network interface module for the media type. The power management translator is not required to have knowledge of the functioning of the specific power management module . Similarly the individual power management module is not required to be aware of the power management requirements of the upper layer components to as these are translated into a single setting

It can be seen that a method to conserve power has been presented by optimizing the power consumption of a network interface module of a computing device. While the description has been described in terms of time intervals that are used in 802.11 wireless networks the method is useable in other types of wireless networks including Bluetooth GPRS Hiperlan and other wireless LAN network types that use beacon intervals and the like and networks such as Ethernet LAN.

In view of the many possible embodiments to which the principles of this invention may be applied it should be recognized that the embodiment described herein with respect to the drawing figures is meant to be illustrative only and should not be taken as limiting the scope of invention. For example the power management module can also turn off the transmitter in wireless network interface modules that support this functionality. In this case the network interface module or power management module may choose to keep the receive path powered on while the transmit path is put into a lower power state. This mechanism could be used while the network interface module performs passive scans where it does not actively transmit probe requests per IEEE 802.11 and the like but rather passively gathers information regarding the networks around by receiving beacons and broadcast probe responses from nodes in the range of the network interface module. Those of skill in the art will recognize that the elements of the illustrated embodiment shown in software may be implemented in hardware and vice versa or that the illustrated embodiment can be modified in arrangement and detail without departing from the spirit of the invention. Therefore the invention as described herein contemplates all such embodiments as may come within the scope of the following claims and equivalents thereof.

