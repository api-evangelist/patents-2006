---

title: Reconfigurable floating point filter
abstract: A reconfigurable floating point data filter may be implemented by configuring a texture filter in response to state data, where the state data specifying at least a data width of input texture data to be filtered, where the input texture data is in a floating point format, filtering the input texture data using the texture filter, and then reconfiguring the texture filter to be substantially fully utilized when the data width of the input texture data changes.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07936359&OS=07936359&RS=07936359
owner: Intel Corporation
number: 07936359
owner_city: Santa Clara
owner_country: US
publication_date: 20060313
---
Data filters are commonly used to interpolate or filter between discrete data samples. For example a typical 3D graphics system employs a pipelined data rendering scheme including a rasterizer stage employing one or more texture filters to interpolate or filter texel data. In doing so a hardware implemented texture filter s input will be as wide as the widest texel data that the filter may be expected to process. For example a texture filter unit or module may need to be wide enough to process 32 bit wide texel data. In that case a typical texture filter unit would be fully utilized when filtering 32 bit wide texel data but would be partially idle when filtering narrower 16 bit or 8 bit texel data.

The following description refers to the accompanying drawings. Among the various drawings the same reference numbers may be used to identify the same or similar elements. While the following description provides a thorough understanding of the various aspects of the claimed invention by setting forth specific details such as particular structures architectures interfaces techniques etc. such details are provided for purposes of explanation and should not be viewed as limiting. Moreover those of skill in the art will in light of the present disclosure appreciate that various aspects of the invention claimed may be practiced in other examples or implementations that depart from these specific details. At certain junctures in the following disclosure descriptions of well known devices circuits and methods have been omitted to avoid clouding the description of the present invention with unnecessary detail.

System may assume a variety of physical implementations. For example system may be implemented in a personal computer PC a networked PC a server computing system a handheld computing platform e.g. a personal digital assistant PDA a gaming system portable or otherwise a 3D capable cellular telephone handset etc. Moreover while all components of system may be implemented within a single device such as a system on a chip SOC integrated circuit IC components of system may also be distributed across multiple ICs or devices. For example host processor along with components and may be implemented as multiple ICs contained within a single PC while graphics processor and components and may be implemented in a separate device such as a television coupled to host processor and components and through communications pathway .

Host processor may comprise a special purpose or a general purpose processor including any control and or processing logic hardware software and or firmware capable of providing graphics processor with 3D graphics data and or instructions. Processor may perform a variety of 3D graphics calculations such as 3D coordinate transformations etc. the results of which may be provided to graphics processor over bus and or that may be stored in memories and or for eventual use by processor .

In one implementation host processor may be capable of performing any of a number of tasks that support filtering of floating point data. These tasks may include for example although the invention is not limited in this regard providing 3D graphics data to graphics processor downloading microcode to processor initializing and or configuring registers within processor interrupt servicing and providing a bus interface for uploading and or downloading 3D graphics data. In alternate implementations some or all of these functions may be performed by processor . While system shows host processor and graphics processor as distinct components the invention is not limited in this regard and those of skill in the art will recognize that processors and possibly in addition to other components of system may be implemented within a single IC.

Graphics processor may comprise any processing logic hardware software and or firmware capable of processing graphics data. In one implementation graphics processor may implement a 3D graphics architecture capable of processing graphics data in accordance with one or more standardized rendering application programming interfaces APIs such as OpenGL 2.0 The OpenGL Graphics System A Specification Version 2.0 Oct. 22 2004 and DirectX 9.0 Version 9.0c Aug. 8 2004 to name a few examples although the invention is not limited in this regard. Graphics processor may process 3D graphics data provided by host processor held or stored in memories and or and or provided by sources external to system and obtained over bus from interfaces and or .

Graphics processor may receive 3D graphics data in the form of 3D scene data and process that data to provide image data in a format suitable for conversion by display processor into display specific data. In addition graphics processor may implement a variety of 3D graphics processing components and or stages not shown such as an applications stage a geometry stage and or a rasterizer stage. Further the rasterizer stage implemented by graphics processor may include a reconfigurable floating point data filter in accordance with the invention as will be described in greater detail below.

Bus or communications pathway s may comprise any mechanism for conveying information e.g. graphics data instructions etc. between or amongst any of the elements of system . For example although the invention is not limited in this regard communications pathway s may comprise a multipurpose bus capable of conveying for example instructions e.g. macrocode between processor and processor . Alternatively pathway s may comprise a wireless communications pathway.

Display processor may comprise any processing logic hardware software and or firmware capable of converting image data supplied by graphics processor into a format suitable for driving a display i.e. display specific data . For example while the invention is not limited in this regard processor may provide image data to processor in a specific color data format for example in a compressed red green blue RGB format and processor may process such RGB data by generating for example corresponding LCD drive data levels etc. Although shows processors and as distinct components the invention is not limited in this regard and those of skill in the art will recognize that for example some if not all of the functions of display processor may be performed by processor .

Block normalizer may be capable of block normalizing floating point input data to yield data in a block normalized format. As those skilled in the art will recognize normalizer may use well known techniques to block normalize the floating point input data so as to conform to for example the Institute of Electrical and Electronics Engineers IEEE Standard for Binary Floating Point Arithmetic ANSI IEEE Std 754 1985 also known as IEC 60559 1989 Binary Floating Point Arithmetic for Microprocessor Systems Standard although the invention is not limited in this regard and normalizer may block normalize the input data so as to conform to other floating point arithmetic schemes.

As shown in normalizer of filter may supply the fractions or significands of the block normalized input data to filter bank while an associated exponent may be passed around filter bank and recombined with the filtered output data of filter bank . Those skilled in the art will recognize that the block normalized data output from normalizer may have a range of exponent values. In accordance with the invention normalizer may pass the largest of those exponent values around filter bank and also may before passing the significands to bank right shift the significands of the input data having smaller exponent values by the respective differences between their exponent values and the largest exponent value. For example if four data samples are being filtered by filter and one sample has an exponent value of twelve while the other sample have exponent values of eight then normalizer may pass the exponent value of twelve around filter bank and right shift by four bits the significands of the input data sample with exponent values of eight before passing all four significands to bank for filtering.

Bank employs four 8 6 bilinear filter units each unit having four texel inputs and two blend factor inputs. Those skilled in the art will recognize that labeling a filter unit as 8 6 signifies that each texel input has an 8 bit data width and each blend factor input has 6 bit data width. Bank also includes two 16 bit adders and as well as a 32 bit adder . Implementations of adders will be discussed in greater detail below.

While bank employs 8 6 bilinear filter units the invention is not limited in this regard and texel input and or blend factor inputs having other than 8 bit and 6 bit respective data widths are contemplated by the invention. Moreover while bank employs filter units for undertaking bilinear texture filtering the invention is not limited to a particular type of texture filtering. Thus as those skilled in the art will recognize the claimed invention contemplates with appropriate modifications to the filter units other texture filtering schemes including trilinear anisotropic bi cubic four by four etc.

While in the above discussion of bank and elsewhere in this detailed description filtering of texels is described in terms of filtering on a per pixel basis those skilled in the art will recognize that filtering may be undertaken on a per channel basis where each pixel is represented by four channels including red R green G blue B and alpha channels to name one possibility. Thus for example each 8 bit texel to be filtered by bank may comprise respective 8 bit R G B and alpha channel values. Hence in this example each of bilinear filter units may include four channel units one each for filtering the respective R G B and alpha values. The invention is however not limited to a particular number of pixel channels or type of pixel channels and hence to provide clarity to the description of the invention filter banks and subsequent filter banks to be discussed below are described in terms of pixels rather than pixel channels.

Process may begin with the block normalization of input data act . In one implementation block normalizer may undertake act by block normalizing floating point texel input data to yield block normalized texel data. Thus act may in part comprise normalizer converting texel data i.e. binary data describing texture vertices in a floating point format into texel data in a block normalized format where each texel s block normalized data comprises a fraction or significand and an associated exponent.

While undertaking act normalizer may pass the largest exponent value of the texel data around filter bank and may before passing the texel significands to bank right shift the significands of the texels having smaller exponents by the respective differences in their exponent values. For example if four texels are to be filtered by filter and one texel has an exponent value of twelve while the other texels have exponent values of ten then normalizer may as part of act pass the exponent value of twelve around filter bank and right shift the significands of the texels other than the texel having the exponent value of twelve by two bits before passing all texel significands to bank for filtering.

Process may continue with the configuration of the filter bank act . In one implementation state data associated with the input data may configure the filter bank. However the invention is not limited in this regard and for example in another implementation the state data may be supplied by processor . Referring to filter bank the state data may configure units and or adders to implement different filter modes or configurations. For example referring to if 8 bit texels are to be filtered then configuration may be specified by the state data. In configuration bank has been configured such that four pixels may be texture filtered at the same time where the output of each unit may directly provide four filtered 8 bit output pixels P P.

Alternatively referring to if 16 bit texels are to be filtered then configuration may be specified by the state data in act . In configuration bank has been configured such that two pixels may be texture filtered at the same time where the output of filter units and are added together by adder to provide one filtered 16 bit output pixel P and the output of filter units and are added together by adder to provide a second filtered 16 bit output pixel P. As a final example referring to if 32 bit texels are to be filtered then configuration may be specified by the state data in act . In configuration bank has been configured by the state data such that one pixel may be texture filtered at a time where the input texel data is distributed across all four units and the output of those units are added together by adder to provide one filtered 32 bit output pixel P.

Process may continue with filtering of the normalized input data significands act . In one implementation each unit of filter may upon configuration in act undertake filtering of the texel significands provided by normalizer . For example in implementations such as where units implement bilinear filtering act may comprise bilinear filtering of the texel significands.

If in act filter has been configured to undertake filtering of 8 bit texels then act may comprise undertaking filtering for four pixels at the same time. Thus as shown in a first filtered pixel P s 8 bit significand may be generated by having filter unit filter four input texels in response to the associated blend factors P.BetaU and P.BetaV. Similarly a second filtered pixel P s 8 bit significand may be generated by having filter unit filter four other input texels in response to the associated blend factors P.BetaU and P.BetaV a third filtered pixel P s 8 bit significand may be generated by having filter unit filter another four input texels in response to the associated blend factors P.BetaU and P.BetaV and a fourth filtered pixel P s 8 bit significand may be generated by having filter unit filter an additional four input texel significands in response to the associated blend factors P.BetaU and P.BetaV.

Alternatively if in act filter has been configured to undertake filtering of 16 bit texels then act may comprise undertaking filtering for two pixels at the same time. Thus as shown in a first portion of a filtered pixel P s significand may be generated by having filter unit filter the eight highest bits 15 8 of four input texel significands while unit filters the eight lowest bits 7 0 of those four input texel significands to generate a second portion of a filtered pixel P s significand. The output of units and may then be added together by adder to generate P s complete 16 bit filtered significand. Units and may both undertake act in response to the blend factors P.BetaU and P.BetaV associated with pixel P.

At the same time and in a similar manner a first portion of a second filtered pixel P s significand may be generated by having filter unit filter the eight highest bits 15 8 of another four input texel significands while unit filters the eight lowest bits 7 0 of those four input texel significands to generate a second portion of the second filtered pixel P s significand. Units and may both undertake act in response to the blend factors P.BetaU and P.BetaV associated with pixel P. The output of units and may then be added together by adder to generate P s complete 16 bit filtered significand.

Alternatively if in act filter has been configured to undertake filtering of 32 bit texels then act may comprise undertaking filtering for one pixel at a time. Thus as shown in a first portion of a filtered 32 bit pixel P s significand may be generated by having filter unit filter the eight highest bits 31 24 of four input texel significands by having unit filter the eight next highest bits 23 16 of those texel significands to generate a second portion of a filtered 32 bit pixel P s significand by having unit filter the eight next highest bits 15 8 to generate a third portion of a filtered 32 bit pixel P s significand and by having unit filter the lowest bits 7 0 to generate a fourth portion of a filtered 32 bit pixel P s significand. Units may undertake act in response to the blend factors P.BetaU and P.BetaV associated with pixel P. The output of units may then be added together by adder to generate P s complete 32 bit filtered significand.

Process may then continue with the recombination of the filtered significands and associated exponent act . In one implementation filter may recombine the exponent passed around bank with the significands in act to yield output data i.e. one or more filtered pixels in block normalized format.

The acts shown in need not be implemented in the order shown nor do all of the acts necessarily need to be performed. Also those acts that are not dependent on other acts may be performed in parallel with the other acts. For example acts and may be undertaken in parallel. Alternatively act may be undertaken before act . Further at least some of the acts in this figure may be implemented as instructions or groups of instructions implemented in a machine readable medium.

While the foregoing description of one or more instantiations consistent with the claimed invention provides illustration and description of the invention it is not intended to be exhaustive or to limit the scope of the invention to the particular implementations disclosed. Clearly modifications and variations are possible in light of the above teachings or may be acquired from practice of various implementations of the invention. For example while and the accompanying text may show and describe a filter including four filter units those skilled in the art will recognize that data processors in accordance with the invention may include filters having more than one filter bank functioning in parallel or having a filter bank employing more or less that four filter units. Clearly many other implementations may be employed to provide a reconfigurable floating point filter consistent with the claimed invention.

No device element act data type instruction etc. set forth in the description of the present application should be construed as critical or essential to the invention unless explicitly described as such. Also as used herein the article a is intended to include one or more items. Moreover when terms or phrases such as coupled or responsive or in communication with are used herein or in the claims that follow these terms are meant to be interpreted broadly. For example the phrase coupled to may refer to being communicatively electrically and or operatively coupled as appropriate for the context in which the phrase is used. Variations and modifications may be made to the above described implementation s of the claimed invention without departing substantially from the spirit and principles of the invention. All such modifications and variations are intended to be included herein within the scope of this disclosure and protected by the following claims.

