---

title: System for annotating a data object by creating an interface based on a selected annotation structure
abstract: A method and apparatus for capturing annotations about database material in a way that allows queries with conditions or predicates on both the database material and the annotations. Database material may be text, computer programs, graphics, audio, spreadsheets, or any other material which may be stored and indexed. Database material may be in one or multiple sources, and annotations may be stored together with the original material or in a separate store. Annotations can be used to capture information such as additional facts about the database material, the opinions and judgments of experts about the database material, and/or links to other related material. Annotations may be captured in a structured form to enhance queryability and semantic interpretation.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08327260&OS=08327260&RS=08327260
owner: International Business Machines Corporation
number: 08327260
owner_city: Armonk
owner_country: US
publication_date: 20060103
---
The present application is a divisional of U.S. patent application Ser. No. 10 243 404 filed on Sep. 12 2002 now U.S. Pat. No. 7 013 307 which in turn is a divisional of Ser. No. 09 429 550 filed on Oct. 28 1999 issued as U.S. Pat. No. 6 519 603 on Feb. 11 2003 all of which are assigned to the same assignee as the present application and are incorporated herein by reference.

The present invention relates to the field of data entry and retrieval. Specifically the present invention relates to a method and system having the capability to organize an annotation structure and to query both data and annotations in computer systems. More particularly the present invention enables the annotation of stored information and permits the capture sharing and querying of data and annotations.

Successful planning and decision making in many technical and other industries depends on the expeditious and correct interpretation of complex information. For example in the drug industry the data may have origins as diverse as high throughput screening experiments clinical trials patent information and research journals. In the petroleum industry the data may span seismic measurements aerial surveys laboratory data and economic forecasts. A system capable of providing unified access to disparate data sources and applications reduces the time spent finding accessing preparing transforming and reformatting data and allows professionals to focus on the interpretation and extraction of knowledge for planning and decision making.

However one complication with providing this type of unified access is that the data inevitably spans several disciplines with an attendant probability of misinterpretation. Extensive knowledge of multiple domains is required if misuse is to be avoided.

Therefore there is still an unsatisfied need for an information management system that clarifies the generation use and purpose of the data. The information management system can capture knowledge about the genesis and history of the data how analyses are done how decisions are made and what the outcomes are. This corporate memory forms the basis for the analysis required to make better technical and business decisions.

Several attempts have been made to access information based on annotations. Illustrative attempts are described in the following references 

For example U.S. Pat. No. 5 404 295 describes a method and apparatus for computer retrieval of database material. Annotations are provided for selected database subdivisions and are converted to a structured form and stored in that form along with connections to corresponding subdivisions. Searching for relevant subdivisions involves entering a query in natural language or structured form converting natural language queries to structured form matching the structured form query against stored annotations and retrieving database subdivisions connected to matched annotations.

However the teaching of this patent is limited to a system with the capability to search the annotations to locate the database material. The system does not have the capability to search the stored information based on both the annotations and database material or to search on database material to retrieve the annotations. As a result the system is not suitable for directly locating a subset of data where the filter has predicates on both the annotations and database material. Rather it will locate all database material that corresponds to the annotation predicates and it would require a second step to filter this subdivision and to apply the data predicates.

The present invention contemplates a method and apparatus for capturing annotations about database material in a way that allows queries with conditions or predicates on both the database material and the annotations. Database material may be text graphics spreadsheets relational tables or any other material which may be stored and indexed. An annotatable data item i.e. the subsection of database material that can be annotated is any entity referenced by an index e.g. by an object identifier or any attribute or subcomponent of such an entity or any arbitrary set of such items. Examples include a table such as a relational table or spreadsheet a view such as a relational view a row within a table a cell within a table i.e. the intersection of a column and a row a column within a table an object an attribute of an object a set of rows or columns from one table or a set of rows from different tables. The annotatable data items may be in a single source or multiple sources or span such sources. Multiple annotations may be entered for a single annotatable data item.

The annotations together with the pointer information that relates them to the original database material may be stored in a separate source so that the data model and operation of the sources containing the original database material is not affected. It is the pointer information that allows formulation of the queries to retrieve either annotations related to specific database material or database material related to specific annotations.

Annotations may be used to capture information such as additional facts about the database material the opinions and judgments of experts about the database material and or links to other related material. Annotations may be entered manually or automatically by an application. Henceforth the person or application that enters an annotation will be referred to as an annotation author and the person or application that retrieves annotation and or database material will be referred to as the reader.

Annotations may be captured in structured form to enhance queryability and semantic interpretation as well as to provide some order for users to enter this additional information content. The entry of comments in an unorganized and undisciplined way can often lead to more data with little useful content. The structure is comprised of labeled categories to aid semantic interpretation. The annotation structure could be as simple as a header category containing attributes or fields about whom and when the person or application wrote the annotation together with a business meaning category containing a single Comment field for a textual description of the data item being annotated. In this example the title of the latter category business meaning can aid in the interpretation of the Comment field. An annotation structure may be more complicated than the one illustrated above and contain many categories each of which contains a number of attributes. Some or all of these attributes may have constraints placed on their values. For example the constraints may be on the datatype e.g. numeric character and or on their values so that users have to enter values consistent with a particular datatype or consistent with an input list or pick list. The constraints enforce more structure and consistency in the annotation content and also enhance the queryability with today s query engines.

It is the capture and query of information from experts represents one important feature of the present invention. To this end the present method offers the capability to allow standardized structure of annotations based on the group to which the author and reader belong as well as on the data item being annotated. A group can be as small as one person in which case there can be a personalized annotation structure or it can contain a related set of people such as people of a particular discipline or performing a particular role. Henceforth group will be referred to as a context . There is a context associated with the annotation author as well as the reader. Thus it is permitted for the structure for the entry of an annotation about any one data item to be different depending on the context of the author and for this information to be presented differently on retrieval depending on the context of the reader. These structures that are associated with contexts can be used to give a level of credibility to the annotations. That is the annotation structure may be set up such that only experts in a given discipline context can enter information or advice pertaining to the expertise understood by that discipline. Filtering and transforming the entered annotation content based on the context of the reader can be used to retrieve only relevant information or to hide information to which this reader context is unauthorized or to present the information in a form easily understood by the discipline or role of the reader. Multiple annotations from authors with different contexts or within the same context can be attached to a single annotatable data item.

It should be understood that the foregoing capabilities encompass a single annotation structure containing an attribute such as Comment or URL for every annotatable data item wherein annotations of this type are entered and retrieved in the same way by all author readers.

The method of the present invention is outlined as follows The type of annotatable data item is identified and the allowed structures for this type are registered. A type may include but is not limited to set of rows of table x or any cell in column y of spreadsheet z . This registration step can be done as a pre processing step or may be done immediately before annotation entry.

For annotation entry an annotatable data item is chosen e.g. a 5th cell in column y of spreadsheet z and an annotation is entered and stored. The annotation is associated with the annotatable data item at the time of entry by including pointer information to the annotatable data item with the annotation. Optionally the annotation may be propagated or automatically associated with additional annotatable data items using extra information defined in the registration step. Once annotations have been stored queries may be issued to retrieve both the annotation content and or the database material.

There are a number of query modes possible. In the first mode the reader may browse the annotations in the context of the database material. That is the reader identifies the specific database material of interest and all accompanying annotations are retrieved. This is achieved by issuing a query using the pointer information stored with the annotations. This mode is useful when the reader is perusing database material and wants to read annotations that contain related information or links to related information.

A second mode refers to querying for particular annotations in the context of the data. That is the reader first identifies the database material of interest. This may include identifying an annotatable data item or a type of annotatable data item. In the case of an annotatable data item the reader asks for the accompanying annotations with particular characteristics e.g. where the author field contains Smith . In the case of a type the reader may ask for elements of the type whose annotations have particular characteristics. A query is issued that uses the pointer information and specifies a filter on the annotation content.

The reader may alternatively ask for only the elements of the type and their annotations where the elements of the type and their annotations both have filters on their content. In this case a query is issued that uses the pointer information and specifies a filter on the annotation content and also a filter on the data content.

The second mode is useful when the reader wishes to review only certain annotations that relate to the data e.g. all those by expert X or when the reader wishes to focus on particular database material and annotation content e.g. find all the data and annotations about drug molecules that have biological activity greater than x data content and for which the experts said the experimental measurement was reliable annotation content .

The third mode involves querying across the full body of annotations regardless of the database material being annotated. This may be used for example for locating all annotations containing a particular category or for locating annotations containing particular content. For example an exemplary query can be How many times has Simulation package x been used to generate production estimates 

The fourth mode involves querying for particular data in the context of the annotations is an extension of the third mode. In this case the query retrieves not only the annotations of interest but also the database material that they annotate. For example in the fourth mode the answer to the above exemplary query How many times has Simulation package x been used to generate production estimates might include not only how many times the package x has been used but also the values of the production estimates. This mode also uses the pointer information in order to formulate the query to retrieve the appropriate database material.

According to a preferred embodiment an information management method is implemented by the information management system whereby one or more users such as administrators annotation authors readers and or applications start the information management method of the present invention by setting up an annotation structure. Using the information management system a user is capable of performing any one or more of the following tasks or processes 

It is therefore clear that the information management system is not domain specific in that it can be used in combination with any application regardless of the complexities of the underlying technical or professional fields. The data model for the annotations i.e. the annotation metadata model is generic self describing and self contained.

The information management system is adaptable to the user s query preferences in that the information management system provides the ability to operate in a data centric mode or in an annotation centric mode. The data centric mode will be explained in connection with and allows the user to select desired data items and to subsequently query and retrieve data and annotations based on these data items. The annotation centric mode will be explained in connection with and allows the user to select the annotation categories and to subsequently query and retrieve data and annotations based on the content of the selected annotation categories. As a result the information management system allows both data and annotations to be queried in that queries can be made over the data content over the annotation content or over both simultaneously. This provides the ability to query the annotations or the annotations and the data and further provides the ability to retrieve the annotations when their associated data is retrieved.

Yet another feature of the information management system is its ability to allow annotations to be targeted to or associated with data at different levels of granularities such as collection view table attribute column instance row cell arbitrary combinations thereof and so forth.

Still another feature of the information management system is its ability to support storage and retrieval of annotations with a generic structure or a more specific structure where the structure can depend on the nature of the data being annotated and the context of the author of the annotation.

In addition the information management system is capable of supporting annotations of data in a variety of sources formats and or data models. The information management system can annotate data in multiple sources when coupled with a data integration engine in only one source or in any source regardless of the source s data model diverse sources . Further the information management system can annotate views on the data in these sources without requiring the data sources being annotated to be modified. The information management system can have multiple annotations for the same data object and different annotations on the same data item can be entered by different people applications or by the same person application at different times. Moreover when the annotations are retrieved they can be filtered or modified in a way that depends on the context of the reader. The annotations can also be propagated to specific target data items that can be selected from a drop down list or by entering a free format text numeric document URL and so forth.

As further illustrated in computer hosts an information management system of the present invention and includes or is connected to one or multiple databases to be searched. Computer is interconnected to computer via an annotation input link for allowing annotations to be inputted from computer to computer . The annotation input can be from a user of for example a graphical user interface GUI application or from a software application running for example on computer . One or more input devices can be used to provide information to computer . These input devices may include but are not limited to keyboard devices pointing devices monitors scanners modems inputs from other systems microphones and voice recognition applications and like devices.

Computer is interconnected to computer via an annotation output link for allowing annotations to be outputted from computer to computer . The annotations and or other data can be retrieved on the request of a user of for example a GUI application or on the request of a software application running for example on computer . The annotations and or other data that are retrieved from the system may be utilized of displayed by means of one or more of output devices . These output devices may include but are not limited to monitors printers modems outputs to other systems speakers and audio synthesizers robots storage systems and like devices.

A query browser annotator is a separate application that provides users represented by computer with a graphical user interface GUI to facilitate the interaction with the information management system . Using the query browser annotator the users can find view and annotate data.

The result of this query is shown in the third row. Various annotations on the retrieved values or data of this row are shown attached to the bar. It should be understood that one value or data may have multiple annotations of multiple types and that different values may have different sorts of annotations. The formats of the annotations depend on the discipline or context of the persons or applications writing reading or entering the annotations. For example a reservoir engineer might add an annotation about a reserve simulation but an accountant would add annotations about the financial analysis.

In operation one or more users such as an administrator or the client application start the information management method of the present invention by setting up an annotation structure as illustrated in The information management system is capable of performing any one or more of the following tasks or processes with the understanding that it can perform other tasks as well 

Entering annotations about the data or fields by various input means as illustrated in . These annotations are preferably stored in a separate database . It should however be understood that the annotations can be stored in the same data sources i.e. as the data.

The foregoing tasks will now be described in greater detail with reference to their respective drawings. Starting with the process of setting up or organizing the annotation structure an administrator for example identifies data items or data item types to be annotated as shown in block or step . An annotatable data item can be a table a view a row a cell a column or any entity referenced by an index e.g. by an object identifier or any attribute or subcomponent of such an entity or any arbitrary set of such items. Specification of an annotatable data item allows any of a whole set of similar annotatable data items to have the same annotation structure. For example any object in class y any row in table x any cell in column a of table b . This greatly facilitates the annotation structure setup and registers the availability of annotation structures for data that has not yet been input such as the addition of rows to a table or objects to a class. The data items and data item types can originate from a single source or from multiple sources . In the example of one of the data item types to be annotated is any cell which is listed in the column whose attribute is Reserve .

The annotatable data item to be annotated can be selected by selecting an attribute or attributes of an entity where the entity can be referenced for example by an index a schema object or objects or any arbitrary set of such attributes and or schema objects. As used herein a schema object can be for example a table a class an attribute of a class a view a column a function or any combination thereof.

The administrator then selects or enters a context if one does not already exist for the annotation author as illustrated in block . The term context denotes a discipline or a role being performed by a person of a particular discipline. In the above example it is possible to allow persons of different disciplines to annotate various data items. For illustration purposes it is possible to allow reservoir engineers geologists and or chemists to enter different types of information in their annotations.

Since multiple types of information can be captured in an annotation about each data item the administrator can enter a category of information to be captured about the data item as illustrated in block . These categories can be factual or interpretive in nature. Examples include but are not limited to the origin of the data factual the quality of the data interpretive and appropriate use of the data factual and or interpretive . The administrator enters a desired category block .

The method then automatically determines if the selected category already exists block . If the selected category does not exist the administrator enters the list of attributes for this category and how the annotation content will be defined for these attributes block . As an example for the category origin of data three attributes might be vendor name install date and the name of the person who performed the installation.

Annotation content can be associated with these attributes during subsequent annotation entry by any of several mechanisms including but not limited to the following mechanisms 

The method then automatically inquires the administrator at block if another category is required for the selected data item. If the administrator determines that another category is needed the method repeats the set of steps or blocks and until the administrator determines at block that no additional categories are needed for the selected data item.

If at block the method determines that the selected category already exists the method proceeds to block and inquires if an additional category is required for the selected data item. If at block the administrator instructs the method that no additional category is needed the method proceeds to block for allowing the administrator to define the annotation structure from the selected categories to assemble the categories and to associate the annotation structure with the annotatable data items.

In the example of the administrator defines the annotation structure by identifying the desired categories and the order in which the annotation content will be entered and or displayed. For illustration purposes the annotation structure for cell includes three categories The first category represents the annotation author s category and provides information in the form of annotations for instance about the author s name the context or author s discipline and the entry date. The second category represents the simulation category and provides information about the person who ran the simulation e.g. reservoir engineer s name the type of oil well simulation the location of the simulation reference files and the simulation date. The third category represents the usage category and provides information about the usage of data in cell that can be used for tax purposes the person who authorized this use of the data and further comments about the use. While the foregoing example is explained in light of certain specific entries it should be clear that alternative entries and or categories can be used.

Once the annotation structure is defined at block the method automatically determines at block whether this annotation structure already exists since annotation structures can be reused. If the method determines that the annotation structure does not exist the administrator builds a new annotation structure from the selected categories block as explained above in connection with block . The annotation structure can be built automatically from concatenation of the annotation categories. If the method determines that the annotation structure already exists it proceeds to block .

The method associates the annotation structures with the annotatable data item. Annotation structures can vary according to the data item being annotated and or to the context of the annotation author. Multiple annotations with differing or identical structures can be assigned to the same data item. It should be clear that the contexts can be defined for groups of people or applications or on an individual basis.

When the annotation structure assignment is completed at block the method can proceed to decision block . Optionally the method can perform a template transforming or filtering loop illustrated by blocks and or an annotation propagation loop illustrated by blocks .

The template transforming loop can be automatically initiated by the method at the decision block whereby the method inquires whether the administrator or application wishes to specify a filter or modify a template to reflect the reader s context. The administrator indicates which categories are to be retained which attributes within these categories are to be retained which attribute names are to be changed and how and more generally transformations that should be applied to the annotation content.

For illustration purposes if the reader is a reservoir engineer he or she might not be interested in retrieving annotations by accountants since these may not be relevant to their work. Alternatively a reader who is a project manager might not be interested in or may not be allowed to see the simulation category of the annotation.

If the administrator determines at decision block that a filter and or a template is needed the administrator enters a reader context such as Reservoir Engineer as shown by block . The administrator then specifies a corresponding reader template at block and the method inquires at decision block whether templates for additional reader contexts are desired.

If the administrator determines at block that a template for an additional reader context is desired the method proceeds to block and repeats the reader selection loop comprised of steps until the administrator determines at block that no additional templates are desired.

When the reader selection loop terminates or if the method determines at step that neither a filter nor a template is needed the method proceeds to decision block and inquires whether or not the administrator wishes to propagate the annotations about the selected data item. When the annotation structures are assigned to the data items the method enables the annotations written through these structures to be propagated to other data items. For example a data item that describes the depth of an oil well could appear in many views pertaining to oil wells. Annotations about a depth value could be propagated to all of these views not just the one against which the annotation was entered. In the example of the data in cell could appear in different views suitable for accountants geologists chemists reservoir engineers and or viewers of other disciplines. In many of these cases the viewers might also want to see the annotations entered by the reservoir engineer in their views. If at step the administrator determines that no propagation is desired the method proceeds to decision block and inquires whether or not additional contexts for the annotation authors are desired as it will be explained later.

If at block the method determines that the annotations need to be propagated the method allows the administrator to specify the target data items or data item types to receive the propagated annotations block . These target data items can be selected from a drop down list and or by entering text. The method then proceeds to decision block and inquires whether or not additional contexts for the annotation authors are desired. If the answer to this inquiry is in the affirmative the method loops back to block and performs the loop comprised of the steps between blocks and as described above until the administrator determines that no additional context for the annotation authors is needed.

When the latter condition is satisfied the method proceeds to block and inquires whether or not the user needs to select additional data items. If no additional data items need to be selected the method is terminated at block . If on the other hand additional data items need to be selected the method loops back to block and performs the loop comprised of the steps between blocks and as described above until the method is terminated at step .

Once the information management system is set up according to the method the system will be ready to be used by the annotation authors readers and applications. illustrate exemplary methods of using the information management system . In summary illustrates the process of writing or inputting an annotation illustrates the process of browsing an annotation in the context of data illustrates the process of querying for particular annotations in the context of data illustrates the process of querying across the full body of annotations and illustrates the process of querying for particular data in the context of the annotations.

The method begins at block by having the reader select the data of interest. The method then inquires at block if the reader wishes to view the annotations. If not the method terminates at block . If the reply to this inquiry is in the affirmative the annotations corresponding to the data items within the data collection are retrieved on request from the data storage . The annotation content can be returned as written or alternatively filtered or modified in a way that depends on the context of the reader.

The method proceeds to the decision block and inquires if the requested annotation content is subject to filtering transformation or modification. If it is the method proceeds to block and performs the necessary filtering transformation and or modification and then returns or displays the requested annotations at block . If on the other hand the method determines that filtering transformation and or modification is not required it returns or displays the requested annotations at block . The loop comprised of blocks and will hereinafter be referred to as the transforming loop .

It is to be understood that the specific embodiments of the invention that have been described above are merely illustrative of one application of the principles of the present invention. Numerous modifications may be made to the information management system and associated methods described herein without departing from the spirit and scope of the present invention. For example while the information management method is described in terms of a computer it should be understood that this method can be implemented without the use of a computer and as such it can cover a method of conducting business and other information management tasks.

