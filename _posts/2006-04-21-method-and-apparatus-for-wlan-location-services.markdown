---

title: Method and apparatus for WLAN location services
abstract: Methods, apparatuses and systems directed to providing location services in a wireless network. According to one implementation of the present invention, the wireless network infrastructure provides high-accuracy location information via location services to wireless clients. In one embodiment, during an advertisement phase, a location server provides a list of available location services to wireless clients via a central controller. In another embodiment, during a presentation phase, a driver of the wireless client presents the available location services to one or more applications of the wireless client. In another embodiment, during a request phase, the driver transmits a location service request to the central controller, which passes the location service request to the location server.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08099107&OS=08099107&RS=08099107
owner: Cisco Technology, Inc.
number: 08099107
owner_city: San Jose
owner_country: US
publication_date: 20060421
---
The present invention relates to wireless networks and more particularly to methods apparatuses and systems directed to providing location services in a wireless network.

Market adoption of wireless LAN WLAN technology has exploded as users from a wide range of backgrounds and vertical industries have brought this technology into their homes offices and increasingly into the public air space. This inflection point has highlighted not only the limitations of earlier generation systems but also the changing role that WLAN technology now plays in people s work and lifestyles across the globe. Indeed WLANs are rapidly changing from convenience networks to business critical networks. Increasingly users are depending on WLANs to improve the timeliness and productivity of their communications and applications and in doing so require greater visibility security management and performance from their network.

For some applications it is desirable to provide location information to the wireless clients. Some wireless infrastructures may provide the MAC address of a wireless access point or a basic service set identification BSSID as a coarse grained proxy for the actual location to the client during an initial association between the wireless access point and the wireless client. However such systems do not provide location information about the wireless client. The IEEE 802.11k standard defines a mechanism for a wireless client to request its location from the wireless infrastructure. This location is generally defined in location configuration information LCI e.g. latitude longitude . The IEEE 802.11k standard does not support however location based services that support more than one location service type.

The present invention provides methods apparatuses and systems directed to providing location services in a wireless network. According to one implementation of the present invention the wireless network infrastructure provides high accuracy location information via location services to wireless clients which may include any wireless device capable of receiving the location information e.g. laptops personal digital assistants PDAs radio frequency identification RFID tags etc. . For example a location service may provide location information that describes where a particular wireless client is located in a particular region e.g. one square meter in accuracy within a particular city campus or building. As described in more detail below in one implementation location services may be categorized into location service classes. In one implementation one location service class may include on demand location services and another location service class may include update location services. In one implementation for each location service class the location server may provide to a wireless client a comprehensive set of location service options. For example for update location services update options may include receiving update services based on one or more triggers which may be based on events including time intervals movement containment etc.

In one implementation during an advertisement phase a location server provides a list of its available supported location services to wireless clients via one or more elements of the wireless network infrastructure. The location server provides to the wireless network infrastructure a list of available location services that the location server supports. The wireless network infrastructure may then advertise the available location services to wireless clients. In one implementation during a presentation phase a wireless network interface driver of the wireless client presents the available location services to one or more applications of the wireless client. During a request phase the wireless client transmits a location service request to the wireless network infrastructure which passes the location service request to the location server. The location service request in one implementation may be a request to subscribe to an update location service or an on demand request for one or more location services.

A network environment including a wireless local area network WLAN according to one implementation of the present invention is shown in . In a specific embodiment of the present invention the system includes a location server an Authentication Authorization and Account AAA server and a central controller a local area network LAN a router and wireless access points and collectively referred to as wireless access points . LAN is implemented by a switch or an array of switches and or other network devices such as a bridge. The location server supports a variety of location service categories and options described below.

As illustrates these network elements are operably connected to a network . Network in one implementation generally refers to a computer network such as a LAN a WAN etc. that includes one or more intermediate network devices e.g. routers switches etc. which allow for the transmission of messages between location server AAA server central controller and wireless clients via wireless access points . Of course network can include a variety of network segments transmission technologies and components such as terrestrial WAN links satellite links optical fiber links and cellular links network could also be a campus LAN. LAN may be a LAN or LAN segments implemented by an Ethernet switch not shown or an array of switches having multiple ports to which wireless access points are connected. The wireless access points are typically connected to switch ports via Ethernet links however other link layer connection protocols or communication means can be employed. illustrates one possible network environment in which the invention may operate however other implementations are possible. For example although WLAN management server is illustrated as being on a different LAN or LAN segment it may be co located with wireless access points .

The wireless access points are operative to wirelessly communicate with remote wireless client devices and . In one implementation the wireless access points implement the wireless network protocol specified in the IEEE 802.11 WLAN specification. The wireless access points may be autonomous or so called fat wireless access points or light weight wireless access points operating in connection with a wireless switch see . In addition the network infrastructure may also include a Wireless LAN Solution Engine WLSE offered by Cisco Systems Inc. of San Jose Calif. or another wireless network management system. In some implementations the network infrastructure may also include one or more Wireless Control System WCS nodes operative to manage one or more wireless switches and access points.

The remaining elements of hardware system are described below. In particular wireless network interface provides communication between hardware system and any of a wide range of wireless networks such as a WLAN i.e. IEEE 802.11 WiMax i.e. IEEE 802.16 Cellular e.g. GSMA etc. Mass storage provides permanent storage for the data and programming instructions to perform the above described functions implemented in the system controller whereas system memory e.g. DRAM is used to provide temporary storage for the data and programming instructions when executed by processor . I O ports are one or more serial and or parallel communication ports that provide communication between additional peripheral devices which may couple to hardware system .

Hardware system may include a variety of system architectures and various components of hardware system may be rearranged. For example cache may be on chip with processor . Alternatively cache and processor may be packed together as a processor module with processor being referred to as the processor core. Furthermore certain implementations of the present invention may not require nor include all of the above components. For example the peripheral devices shown coupled to standard I O bus may couple to high performance I O bus . In addition in some implementations only a single bus may exist with the components of hardware system being coupled to the single bus. Furthermore hardware system may include additional components such as additional processors storage devices or memories.

In one embodiment the operations of wireless client side functionality are implemented as a series of software routines run by hardware system . These software routines which can be embodied in a wireless network interface driver comprise a plurality or series of instructions to be executed by. a processor in a hardware system such as processor . Initially the series of instructions are stored on a storage device such as mass storage . However the series of instructions can be stored on any. suitable storage medium such as a diskette CD ROM ROM etc. Furthermore the series of instructions need not be stored locally and could be received from a remote storage device such as a server on a network via network communication interface . The instructions are copied from the storage device such as mass storage into memory and then accessed and executed by processor . In alternate embodiments the present invention is implemented in hardware or firmware.

While illustrates for didactic purposes the hardware architecture of a wireless client according to one implementation of the present invention the wireless client however may be implemented on a wide variety of computer system architectures such as dual mode cellular phones e.g. cellular plus 802.11 capable devices wireless VoIP phones Personal Digital Assistants e.g. converged devices which support WLAN data voice and cellular Laptop computers and the like. An operating system manages and controls the operation of hardware system including the input and output of data to and from software applications not shown . The operating system provides an interface such as a graphical user interface GUI between the user and the software applications being executed on the system. According to one embodiment of the present invention the operating system is the Windows 95 98 NT XP operating system and or Windows CE WinCE operating system available from Microsoft Corporation of Redmond Wash. However the present invention may be used with other operating systems such as the Apple Macintosh Operating System available from Apple Computer Inc. of Cupertino Calif. UNIX operating systems LINUX operating systems Symbian operating systems and the like.

As described above the wireless network infrastructure provides location information via location services to wireless clients. The location server in one implementation supports a plurality of location services such as on demand location services and update location services where update location services may include automatic location updates conditional location updates and the like. An on demand location service for example may provide location information that describes where a particular wireless client is located in a particular region e.g. within one square meter in accuracy within in a particular city campus or building. An update i.e. subscription location service may also provide location information e.g. where a particular wireless client is located in a particular city campus or building but the delivery of the location information may be based on one or more triggers which may include the occurrence of one or more events including time interval triggers movement containment etc. For example the update location service may provide the wireless client with a location update periodically e.g. every 60 minutes . In one implementation the update location service may provide the wireless client with a location update based on particular conditions. For example in one implementation a condition may be a change in location e.g. when the wireless client enters or leaves a particular area . Also parameters may define the conditions. For example in one implementation the particular area may be defined as a particular room floor building etc. The sections below describe location service classes and location service options in more detail.

As discussed above location server supports a plurality of location service classes each corresponding to a type of location service. Location service classes may include on demand location services and or subscription based services. A location service class is a mode by which the wireless client receives a location service. For example in one implementation a wireless client may access a location service by transmitting an on demand request or by subscribing to a location update service. In one implementation an on demand request is a one time request for the estimated location of the wireless client. For example after transmitting a first on demand request the wireless client may need to transmit additional on demand requests for each desired location update. In one implementation an update service will provide location updates periodically or upon the occurrence of certain events. In one implementation the location server provides options for both on demand location services and update location services. The location services supported by location server in one implementation are independent of each other. Accordingly a wireless client may simultaneously request or subscribe to more than one location service supported by location server .

In some implementations for one or more of the location service classes e.g. on demand location services or update location services location server provides to the wireless client a set of location service options. For example in one implementation for update location services location service options may include receiving updates based on one or more triggers which may include the occurrence of one or more events including time interval triggers movement containment etc. For example in one implementation an update may be triggered based on a signal automatically triggered by a clock according to various schedules periodically e.g. every minute every hour etc. or at particular times e.g. 12 00 p.m. 2 50 p.m. etc. . In one implementation updates may be conditioned upon a threshold distance traveled e.g. every 5 meters movement from a reference point crossing a threshold region movement in or out of an area floor or building etc. and the like. Update choices may include location updates based on other network parameters such as traffic generated by wireless clients transmission control protocol TCP connections either from or to the client i.e. as the wireless client accesses a web site with a specific URL give an update of location etc.

For both on demand and update location services the location server provides various options such as format e.g. geospatial CIVIC and or proprietary formats resolution e.g. location accuracy and message encoding options e.g. binary vs. text based encoding and the like. For example in one implementation a format option may enable a selection of formats that the wireless network infrastructure supports as either part of an on demand request or an update location service request. For example in one implementation format options may include a geospatial format i.e. geographic coordinates a civic format i.e. postal or legal addresses an LCI format or a proprietary format. In one implementation a resolution option defines the accuracy to which the wireless network infrastructure attempts to calculate a location. For example the resolution option may include a building resolution where the wireless infrastructure may resolve a location to a particular building within a campus or a room within a building that a wireless client resides. Further the resolution option may include a wireless access point resolution where the wireless network infrastructure may resolve a location to a particular wireless access point to which a wireless client is connected. Further the resolution option may include an XY resolution where the wireless network infrastructure may resolve a location to a specific XYZ point within the coordinate space. In one implementation the datum used for XY Resolution is relative to the location format chosen. In one implementation an encoding option may include text e.g. extensible markup language XML or binary options e.g. binary representation of XML . In one implementation a security option may include a requirement that location information be digitally signed for secure distribution.

In one implementation location server may give a high priority to emergency requests. For example an e911 location server may provide location information to a wireless client so that the wireless client can include the location information as part of emergency call signaling.

The following sections describe how a wireless network infrastructure advertises one or more location services to a wireless client and how the wireless client requests or subscribes to one or more location services.

As described above in one implementation location server provides a list of its available supported location services to wireless clients via the wireless network infrastructure. More specifically location server provides to central controller a list of available location services and central controller advertises the available location services to wireless clients via wireless access points . In one implementation during a presentation phase the wireless client receives the advertisements and then presents the available location services to one or more applications of the wireless client. The wireless network infrastructure advertises the one or more location services supported by location server in a variety of manners. For example in one implementation the wireless network infrastructure may advertise the location service types and attributes in a location service Information Element location service IE appended to wireless network management frames such as Beacon Frames Probe Response Frames Authentication Response Frames and Association Response Frames. A location service IE is an element that indicates what location services are available and in some implementations the attributes of the available location services. The location service IE is described in more detail below in connection with . In one implementation the information IE may be advertised in other frame types such as a management frame specifically dedicated to location service advertisements.

In one implementation the position of each bit in the services field corresponds to a location service class e.g. on demand location service or update location service and the value of each bit indicates whether location services in the particular location service class is available e.g. 0 available 1 not available . Similarly in one implementation the position of each bit in the option field corresponds to a location service option e.g. geospatial CIVIC proprietary format building resolution wireless access point resolution x y coordinate resolution binary encoding text based encoding etc. and the value of each bit indicates whether the particular location option is available e.g. 0 available 1 not available . In one implementation if a bit is unused the bit may be reserved for additional classes options etc.

If the management frame includes a location service IE the wireless network interface driver processes the location service IE . In one implementation the wireless network interface driver parses the information in the location service IE and populates a data structure such as a location services table with information from the location service IE. In one implementation the wireless network interface driver updates the location service data structure as subsequent location services advertisements are received. One or more applications installed on the wireless client may then access the location service data structure to determine available location services and attributes. In one implementation the wireless network interface driver further supports application programming interfaces APIs that allow the one or more applications to make calls to the driver to request that a location service request frame be transmitted. The calls can include parameters such as the selected location service and one or more options corresponding to the selected location service. For example in a subscription phase an application may select one or more of the location services such as a location update service and invoke the wireless network interface driver to transmit a location service request identifying the location update service.

If the location service request is not an on demand request central controller forwards the location service request to location server . Central controller then generates path loss measurement PLM parameters . The PLM parameters are parameters according to which the wireless client transmits wireless frames that are detected by one or more access points or other wireless receivers associated with the wireless network infrastructure . As above one or more detected attributes of the RF signals corresponding to the frames are forwarded to location server . In one implementation the central controller transmits the PLM parameters to the wireless client . In one implementation the transmission of the PLM parameters may correspond to one or more attributes of a wireless frame transmission schedule where the wireless client transmits a plurality of wireless frames. In one implementation the wireless frame transmission schedule may include one or more of the following PLM parameters 1 an interval between bursts of wireless frames 2 the number of wireless frames in a burst 3 the RF channels on which to transmit the wireless frames and 4 an overall duration expressed for example as a total number of bursts or as a period of time . In one implementation the PLM parameters may specify that the wireless client gather and transmit wireless frames to particular wireless access points operating on respective RF channels e.g. channels 1 6 and 11 at particular time periods e.g. every minute . After central controller collects the location data it then forwards the location data to location server . Location server may then provide location services to wireless client . The location data enables location server to provide location updates as often as the location data is updated.

In one implementation the PLM parameters may vary depending on the location services and or attributes selected by the wireless client. For example a first update location service may require shorter intervals between bursts while a second update location service may require a greater number of wireless frames in each burst. Accordingly central controller in one implementation is configured to parse the location service request and identify one or more suitable PLM parameters to provide to the wireless client based on the one or more selected location services and or options.

In one implementation for security and privacy reasons central controller may provide a given wireless client only the location information of that wireless client. In another implementation a given wireless client may request location information for other entities in the network and may receive such location information if authorized.

The present invention has been explained with reference to specific embodiments. For example while embodiments of the present invention have been described as operating in connection with IEEE 802.11 networks the present invention can be used in connection with any suitable wireless network environment. Other embodiments will be evident to those of ordinary skill in the art. It is therefore not intended that the present invention be limited except as indicated by the appended claims.

