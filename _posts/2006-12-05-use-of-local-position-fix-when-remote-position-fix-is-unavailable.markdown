---

title: Use of local position fix when remote position fix is unavailable
abstract: A mobile computing device has a transceiver circuit, a location determination circuit, and a processing circuit. The transceiver circuit is configured to receive a remote position fix from a remote computer via a wireless network. The location determination circuit is configured to receive satellite data and to calculate a local position fix. The processing circuit is configured to operate an application, to receive a request for a position fix from the application, to determine whether the remote position fix is available, and to provide the local position fix to the application based on whether the remote position fix is available.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07991408&OS=07991408&RS=07991408
owner: Hewlett-Packard Development Company, L.P.
number: 07991408
owner_city: Houston
owner_country: US
publication_date: 20061205
---
Some mobile computing devices provide location based services to a user. For example a user may use a mobile computing device to report their location to a 9 1 1 emergency service in the event of an emergency. Further the mobile computing device may use a navigation application to provide directions from the user s current location to a desired destination.

Some location determination methods require the use of real time wireless data from a wireless network. An alternative method uses an on board global positioning system receiver to acquire satellite data and provide a standalone position fix. Wireless network carriers sometimes prefer that the mobile computing device use real time wireless data instead of a standalone position fix to maximize network usage and accordingly revenue. However there are scenarios where wireless service is not available such as when the mobile device is deep in a canyon on a cruise ship in a foreign country or when there is a network failure due to a temporary block or other cause etc. The ability to obtain a position fix may nevertheless be useful in these scenarios.

Accordingly there is a need for a system and method for providing position fixes when real time wireless data is unavailable. Further there is a need for a system and method for providing a configurable location determination scheme which selectively allows standalone position fixes in accordance with wireless network carrier preferences. Further still there is a need for a system and method for making use of a carrier s wireless network when wireless data is available yet still allowing position fixes when the wireless data is unavailable.

The teachings herein extend to those embodiments which fall within the scope of the appended claims regardless of whether they accomplish one or more of the above mentioned needs.

The disclosure of U.S. patent application Ser. No. 11 469 374 filed Aug. 31 2006 is incorporated by reference herein in its entirety.

Referring first to a mobile computing device is shown. Device is a smart phone which is a combination mobile telephone and handheld computer having personal digital assistant functionality. The teachings herein can be applied to other mobile computing devices e.g. a laptop computer or other electronic devices e.g. a desktop personal computer etc. . Personal digital assistant functionality can comprise one or more of personal information management database functions word processing spreadsheets voice memo recording etc. and is configured to synchronize personal information from one or more applications with a computer e.g. desktop laptop server etc. . Device is further configured to receive and operate additional applications provided to device after manufacture e.g. via wired or wireless download SecureDigital card etc.

Device comprises a housing having a front side and a back side . An earpiece speaker may be an electro acoustic transducer configured to provide audio output with a volume suitable for a user placing earpiece against or near the ear. Loudspeaker may be an electro acoustic transducer that converts electrical signals into sounds loud enough to be heard at a distance. Loudspeaker can be a used for a speakerphone functionality. In alternative embodiments display user input device earpiece and loudspeaker may each be positioned anywhere on front side back side or the edges therebetween.

Device may provide voice communications functionality in accordance with different types of cellular radiotelephone systems. Examples of cellular radiotelephone systems may include Code Division Multiple Access CDMA cellular radiotelephone communication systems Global System for Mobile Communications GSM cellular radiotelephone systems etc.

In addition to voice communications functionality device may be configured to provide data communications functionality in accordance with different types of cellular radiotelephone systems. Examples of cellular radiotelephone systems offering data communications services may include GSM with General Packet Radio Service GPRS systems GSM GPRS CDMA 1xRTT systems Enhanced Data Rates for Global Evolution EDGE systems Evolution Data Only or Evolution Data Optimized EV DO systems etc.

Device may be configured to provide voice and or data communications functionality in accordance with different types of wireless network systems. Examples of wireless network systems may include a wireless local area network WLAN system wireless metropolitan area network WMAN system wireless wide area network WWAN system and so forth. Examples of suitable wireless network systems offering data communication services may include the Institute of Electrical and Electronics Engineers IEEE 802.xx series of protocols such as the IEEE 802.11a b g n series of standard protocols and variants also referred to as WiFi the IEEE 802.16 series of standard protocols and variants also referred to as WiMAX the IEEE 802.20 series of standard protocols and variants and so forth.

Device may be configured to perform data communications in accordance with different types of shorter range wireless systems such as a wireless personal area network PAN system. One example of a suitable wireless PAN system offering data communication services may include a Bluetooth system operating in accordance with the Bluetooth Special Interest Group SIG series of protocols including Bluetooth Specification versions v1.0 v1.1 v1.2 v2.0 v2.0 with Enhanced Data Rate EDR as well as one or more Bluetooth Profiles and so forth.

As shown in the embodiment of device may comprise a dual processor architecture including a host processor and a radio processor e.g. a base band processor . The host processor and the radio processor may be configured to communicate with each other using interfaces such as one or more universal serial bus USB interfaces micro USB interfaces universal asynchronous receiver transmitter UART interfaces general purpose input output GPIO interfaces control status lines control data lines shared memory and so forth.

The host processor may be responsible for executing various software programs such as application programs and system programs to provide computing and processing operations for device . The radio processor may be responsible for performing various voice and data communications operations for device such as transmitting and receiving voice and data information over one or more wireless communications channels. Although embodiments of the dual processor architecture may be described as comprising the host processor and the radio processor for purposes of illustration the dual processor architecture of device may comprise additional processors may be implemented as a dual or multi core chip with both host processor and radio processor on a single chip etc.

In various embodiments the host processor may be implemented as a host central processing unit CPU using any suitable processor or logic device such as a general purpose processor. The host processor may comprise or be implemented as a chip multiprocessor CMP dedicated processor embedded processor media processor input output I O processor co processor a field programmable gate array FPGA a programmable logic device PLD or other processing device in alternative embodiments. In an exemplary embodiment host processor is an OMAP2 such as an OMAP2431 processor manufactured by Texas Instruments Inc.

The host processor may be configured to provide processing or computing resources to device . For example the host processor may be responsible for executing various software programs such as application programs and system programs to provide computing and processing operations for device . Examples of application programs may include for example a telephone application voicemail application e mail application instant message IM application short message service SMS application multimedia message service MMS application web browser application personal information manager PIM application contact management application calendar application scheduling application task management application word processing application spreadsheet application database application video player application audio player application multimedia player application digital camera application video camera application media management application a gaming application and so forth. The application software may provide a graphical user interface GUI to communicate information between device and a user.

System programs assist in the running of a computer system. System programs may be directly responsible for controlling integrating and managing the individual hardware components of the computer system. Examples of system programs may include for example an operating system OS device drivers programming tools utility programs software libraries an application programming interface API graphical user interface GUI and so forth. Device may utilize any suitable OS in accordance with the described embodiments such as a Palm OS Palm OS Cobalt Microsoft Windows OS Microsoft Windows CE Microsoft Pocket PC Microsoft Mobile Symbian OS Embedix OS Linux Binary Run time Environment for Wireless BREW OS JavaOS a Wireless Application Protocol WAP OS and so forth.

Device may comprise a memory coupled to the host processor . In various embodiments the memory may be configured to store one or more software programs to be executed by the host processor . The memory may be implemented using any machine readable or computer readable media capable of storing data such as volatile memory or non volatile memory removable or non removable memory erasable or non erasable memory writeable or re writeable memory and so forth. Examples of machine readable storage media may include without limitation random access memory RAM dynamic RAM DRAM Double Data Rate DRAM DDRAM synchronous DRAM SDRAM static RAM SRAM read only memory ROM programmable ROM PROM erasable programmable ROM EPROM electrically erasable programmable ROM EEPROM flash memory e.g. NOR or NAND flash memory or any other type of media suitable for storing information.

Although the memory may be shown as being separate from the host processor for purposes of illustration in various embodiments some portion or the entire memory may be included on the same integrated circuit as the host processor . Alternatively some portion or the entire memory may be disposed on an integrated circuit or other medium e.g. hard disk drive external to the integrated circuit of host processor . In various embodiments device may comprise an expansion slot to support a multimedia and or memory card for example.

Device may comprise a user input device coupled to the host processor . The user input device may comprise for example a QWERTY key layout and an integrated number dial pad. Device also may comprise various keys buttons and switches such as for example input keys preset and programmable hot keys left and right action buttons a navigation button such as a multidirectional navigation button phone send and power end buttons preset and programmable shortcut buttons a volume rocker switch a ringer on off switch having a vibrate mode a keypad an alphanumeric keypad and so forth.

The host processor may be coupled to a display . The display may comprise any suitable visual interface for displaying content to a user of device . For example the display may be implemented by a liquid crystal display LCD such as a touch sensitive color e.g. 16 bit color thin film transistor TFT LCD screen. In some embodiments the touch sensitive LCD may be used with a stylus and or a handwriting recognizer program.

Device may comprise an input output I O interface coupled to the host processor . The I O interface may comprise one or more I O devices such as a serial connection port an infrared port integrated Bluetooth wireless capability and or integrated 802.11x WiFi wireless capability to enable wired e.g. USB cable and or wireless connection to a local computer system such as a local personal computer PC . In various implementations device may be configured to transfer and or synchronize information with the local computer system.

The host processor may be coupled to various audio video A V devices that support A V capability of device . Examples of A V devices may include for example a microphone one or more speakers an audio port to connect an audio headset an audio coder decoder codec an audio player a digital camera a video camera a video codec a video player and so forth.

The host processor may be coupled to a power supply configured to supply and manage power to the elements of device . In various embodiments the power supply may be implemented by a rechargeable battery such as a removable and rechargeable lithium ion battery to provide direct current DC power and or an alternating current AC adapter to draw power from a standard AC main power supply.

As mentioned above the radio processor may perform voice and or data communication operations for device . For example the radio processor may be configured to communicate voice information and or data information over one or more assigned frequency bands of a wireless communication channel. In various embodiments the radio processor may be implemented as a communications processor using any suitable processor or logic device such as a modem processor or baseband processor. Although some embodiments may be described with the radio processor implemented as a modem processor or baseband processor by way of example it may be appreciated that the embodiments are not limited in this context. For example the radio processor may comprise or be implemented as a digital signal processor DSP media access control MAC processor or any other type of communications processor in accordance with the described embodiments. Radio processor may be any of a plurality of modems manufactured by Qualcomm Inc.

In various embodiments the radio processor may perform analog and or digital baseband operations for device . For example the radio processor may perform digital to analog conversion DAC analog to digital conversion ADC modulation demodulation encoding decoding encryption decryption and so forth.

Device may comprise a transceiver module coupled to the radio processor . The transceiver module may comprise one or more transceivers configured to communicate using different types of protocols communication ranges operating power requirements RF sub bands information types e.g. voice or data use scenarios applications and so forth. In various embodiments the transceiver module may comprise one or more transceivers configured to support voice communication for a cellular radiotelephone system such as a GSM UMTS and or CDMA system. The transceiver module also may comprise one or more transceivers configured to perform data communications in accordance with one or more wireless communications protocols such as WWAN protocols e.g. GSM GPRS protocols CDMA 1 xRTT protocols EDGE protocols EV DO protocols EV DV protocols HSDPA protocols etc. WLAN protocols e.g. IEEE 802.11a b g n IEEE 802.16 IEEE 802.20 etc. PAN protocols Infrared protocols Bluetooth protocols EMI protocols including passive or active RFID protocols and so forth.

The transceiver module may be implemented using one or more chips as desired for a given implementation. Although the transceiver module may be shown as being separate from and external to the radio processor for purposes of illustration in various embodiments some portion or the entire transceiver module may be included on the same integrated circuit as the radio processor .

Device may comprise an antenna system for transmitting and or receiving electrical signals. As shown the antenna system may be coupled to the radio processor through the transceiver module . The antenna system may comprise or be implemented as one or more internal antennas and or external antennas.

Device may comprise a memory coupled to the radio processor . The memory may be implemented using one or more types of machine readable or computer readable media capable of storing data such as volatile memory or non volatile memory removable or non removable memory erasable or non erasable memory writeable or re writeable memory etc. The memory may comprise for example flash memory and secure digital SD RAM. Although the memory may be shown as being separate from and external to the radio processor for purposes of illustration in various embodiments some portion or the entire memory may be included on the same integrated circuit as the radio processor .

Device may comprise a subscriber identity module SIM coupled to the radio processor . The SIM may comprise for example a removable or non removable smart card configured to encrypt voice and data transmissions and to store user specific data for allowing a voice or data communications network to identify and authenticate the user. The SIM also may store data such as personal settings specific to the user.

Device may comprise an I O interface coupled to the radio processor . The I O interface may comprise one or more I O devices to enable wired e.g. serial cable etc. and or wireless e.g. WiFi short range etc. communication between device and one or more external computer systems.

In various embodiments device may comprise location determination capabilities. Device may employ one or more location determination techniques including for example Global Positioning System GPS techniques Cell Global Identity CGI techniques CGI including timing advance TA techniques Enhanced Forward Link Trilateration EFLT techniques Time Difference of Arrival TDOA techniques Angle of Arrival AOA techniques Advanced Forward Link Trilateration AFTL techniques Observed Time Difference of Arrival OTDOA Enhanced Observed Time Difference EOTD techniques Assisted GPS AGPS techniques hybrid techniques e.g. GPS CGI AGPS CGI GPS AFTL or AGPS AFTL for CDMA networks GPS EOTD or AGPS EOTD for GSM GPRS networks GPS OTDOA or AGPS OTDOA for UMTS networks etc.

Device may be configured to operate in one or more location determination modes including for example a standalone mode a mobile station MS assisted mode and or a MS based mode. In a standalone mode such as a standalone GPS mode device may be configured to determine its position without receiving wireless navigation data from the network. In a standalone mode device may comprise a local location determination circuit e.g. a GPS receiver which may be integrated within housing configured to receive satellite data via an antenna and to calculate a position fix. Local location determination circuit may alternatively comprise a GPS receiver in a second housing separate from housing but in the vicinity of device and configured to communicate with device wirelessly e.g. via a PAN such as Bluetooth . When operating in an MS assisted mode or an MS based mode however device may be configured to communicate over a radio access network e.g. UMTS radio access network with a remote computer e.g. a location determination entity PDE a location proxy server LPS and or a mobile positioning center MPC etc. .

In an MS assisted mode such as an MS assisted AGPS mode the remote computer may be configured to determine the position of the mobile computing device and provide wireless data comprising a position fix. In an MS based mode such as an MS based AGPS mode device may be configured to determine its position using acquisition data or other wireless data from the remote computer . The acquisition data may be provided periodically. In various implementations device and the remote computer may be configured to communicate according a suitable MS PDE protocol e.g. MS LPS or MS MPC protocol such as the TIA EIA standard IS 801 message protocol for MS assisted and MS based sessions in a CDMA radiotelephone system.

When assisting the mobile computer device the remote computer may handle various processing operations and also may provide information to aid location determination. Examples of assisting information may include satellite based measurements terrestrial based measurements and or system based measurements such as satellite almanac information GPS code phase measurements ionospheric data ephemeris data time correction information altitude estimates timing offsets forward reverse link calibration and so forth.

In various implementations the assisting information provided by the remote computer may improve the speed of satellite acquisition and the probability of a position fix by concentrating the search for a GPS signal and or may improve the accuracy of location determination. Each position fix or series of position fixes may be available at device and or at the remote computer depending on the location determination mode. In some cases data calls may be made and assisting information may be sent to device from the remote computer for every position fix. In other cases data calls may be made and assistance information may be sent periodically and or as needed.

In various embodiments device may comprise dedicated hardware circuits or structures or a combination of dedicated hardware and associated software to support location determination. For example the transceiver module and the antenna system may comprise GPS receiver or transceiver hardware and one or more associated antennas coupled to the radio processor to support location determination.

The host processor may comprise and or implement at least one LBS location based service application. In general the LBS application may comprise any type of client application executed by the host processor such as a GPS application configured to communicate location requests and location responses. Examples of LBS applications include without limitation wireless 911 emergency services roadside assistance asset tracking fleet management friends and family locator services dating services and navigation services which may provide the user with maps directions routing traffic updates mass transit schedules information regarding local points of interest POI such as restaurants hotels landmarks and entertainment venues and other types of LBS services in accordance with the described embodiments.

The LBS application may be configured to send a location request in response to receiving input from device or from a source external to device . For example the user of device may interact with a data input device to command the LBS application to send a location request. The LBS application also may send a location request in response to receiving input from an external network element or computing device that is attempting to locate the user of device . In some cases the LBS application also may be configured to automatically periodically and or autonomously send location requests.

Although other applications may operate without regard to the location of device in various embodiments the LBS application may request and receive position information to enhance the functionality of one or more of the other applications. For example position information may be provided in conjunction with a messaging application to locate the sender or recipient of a message. Position information may be provided to a web browser application to generate directions to a location associated with a particular website. Positioning information may be provided to a personal management application to generate location based alerts and or directions to a meeting place.

The radio processor may be configured to receive location requests from an LBS API handler on host processor and may forward location responses to the LBS API handler for delivery to the LBS application through the LBS API. Radio processor may be configured to communicate securely over a network with remote computer e.g. PDE LPS or MPC configured to provide authentication and authorization services and or a variety of geo services. For example radio processor may be configured to communicate with a PDE configured to verify privacy for location requests allow authorized access to a location server and provide various location server services. Radio processor also may be configured to communicate with a PDE to request and receive geo service information. Examples of geo service information may include mapping information routing information geo coding and reverse geo coding information for addresses and coordinates POI information and so forth.

Radio processor may be configured to invoke a position fix by configuring a position engine and requesting a position fix. For example a position engine interface on radio processor may set configuration parameters that control the location determination process. Examples of configuration parameters may include without limitation location determination mode e.g. standalone MS assisted MS based actual or estimated number of position fixes e.g. single position fix series of position fixes request assisting information without a position fix time interval between position fixes Quality of Service QoS values optimization parameters e.g. optimized for speed accuracy or payload PDE address e.g. IP address and port number of LPS or MPC etc.

Radio processor also may set request response parameters to request and return various types of position information. Examples of request response parameters may include current location latitude longitude altitude heading vector information such as horizontal and vertical velocity sector based position location position fix method level of accuracy time offset position uncertainty device orientation client initialization and registration and so forth.

The radio processor may comprise or implement a position engine such as a GPS engine. In various embodiments the position engine may be configured to provide location determination capabilities for device . In some embodiments the position engine may be implemented as software operating in conjunction with hardware e.g. GPS receiver hardware allowing device to receive and process GPS satellites signals for location determination. In one embodiment the position engine may be implemented as a QUALCOMM gpsOne engine.

In various implementations the position engine may employ one or more location determination techniques such as GPS CGI CGI TA EFLT TDOA AOA AFTL OTDOA EOTD AGPS GPS AGPS hybrid techniques and so forth. The position engine also may be configured to operate in one or more location determination modes including a standalone mode an MS assisted mode and an MS based mode. The determined position information generated and or obtained by the position engine generally may comprise any type of information associated with the location of device . Examples of position information may include without limitation current location latitude longitude altitude heading information vector information such as horizontal and vertical velocity sector based position location position fix information position uncertainty device orientation and so forth.

Referring now to a system and method for providing a position fix will be described according to an exemplary embodiment. Method steps described in and the alternative embodiment of may be performed in one or more of host processor and radio processor or in a single processor application on the single processor. At step the processor is configured to receive a request for a position fix from an application operable on the processor or operable on a nearby or remote processor. Alternatively the request for a position fix may come from a user via key pad . The position fix may be data representative of a position typically expressed in terms of a latitude and longitude though an alternative method of expression may be used such as a bearing and range.

At step device is configured to determine whether device has wireless service available for example from a wireless network operated by carrier within a range of device . If wireless service is available device is configured at step to determine whether remote computer can provide a position fix i.e. a first remote position fix . A position fix may not be available for remote computer for any number of reasons for example the network remote computer may return an error indicating position fix capability not supported by the base station providing network access capability normally supported by base station but temporarily not available or not enabled data service not available authentication failed other errors supported by the IS 801 standard etc.

If remote computer can provide a position fix for device transceiver module is configured to receive a position fix from remote computer via the wireless network. The processor of device is configured to provide a position fix to the application which requested the position fix based on the position fix received from remote computer . For example the processor may provide the position fix from remote computer to the application without further processing calculation or modification. Alternatively the processor may be configured to provide further processing calculation or modification based on additional data e.g. satellite data received by device and provide suitably a modified position fix to the application. At step the processor is configured to provide a position fix e.g. a second local position fix from location determination circuit to the application in response to the request. The position fix provided to the application may be the same position fix provided by location determination circuit or the position fix received from location determination to circuit may be further processed calculated or modified based on additional data prior to sending to the application.

Referring now to a system and method for providing a position fix according to an alternative embodiment will be described. At step the processor is configured to receive a request for a position fix from an application e.g. an LBS application or other application . At step the processor is configured to determine whether the request includes a position fix calculation characteristic. A position fix calculation characteristic may be a characteristic of the position fix calculation method that the application wishes to be used to calculate the position fix. For example and as shown in step the application may request that the position fix returned in response to the request is calculated using a standalone process an MS based process or an MS assisted process. Further the application may request that the calculation method have a predetermined calculation speed calculation accuracy and or data source e.g. whether satellite and position data received wirelessly from remote source may be used which may be optimal speed optimal accuracy or may comprise a desired level of one or more of speed and accuracy. Further based on the characteristics of calculation speed calculation accuracy and data source the processor may choose to use one or more of standalone MS based MS assisted or other calculation methods or some combination thereof to meet the characteristic or constraint or specification of the position fix request from the application. For example a request for optimal accuracy may result in the use of the MS assisted mode. Further a request that the data source use as little data as possible from the wireless network may result in the calculation method applying an MS based mode of calculation.

At step the processor is configured to determine whether or not a position fix from remote computer is required such as would be required in the MS assisted method and perhaps other methods. If a position fix from remote computer is not required at step the position fix is calculated using the selected method and the position fix is provided to the application. Alternatively if a position fix is required from remote computer at step the processor determines whether wireless service is available and at the processor determines whether remote computer can provide a position fix. If both answers are yes at step the processor provides a position fix to the application based on a position fix from remote computer . If the answer to either of steps or is no the process continues at step .

At step the processor is configured to determine whether a standalone position fix is allowed in a situation where the selected method requires a position fix from remote computer . The processor may be configured to read a flag or other memory location which may be stored in non volatile memory which may indicate whether a standalone position fix is allowed. The flag can be set based on the preference of a network carrier for favoring network based position fixes for example to maximize revenue. If a standalone position fix is not allowed no position fix is provided to the application. At step a message may be returned to the application and or to the user via display and or an audio output to indicate that position fix is unavailable. If a standalone position fix is allowed at step the processor is configured to provide the position fix based on local location determination circuit instead of basing the position fix calculated by remote computer .

It is understood that the determination of whether a position fix from remote computer is available may comprise either or both of steps and above.

In one alternative embodiment an additional step may be provided between steps and or elsewhere in a process to determine whether the calculation characteristic requires an MS based position fix and a determination of whether satellite acquisition data of sufficient acceptability is available. If such data is not available e.g. wireless service is not available and or the data cannot be provided within the constraints of a selected position fix calculation method a similar determination as in steps can be made to determine whether a fallback to standalone position calculation from MS based calculation is allowed and to provide position fix data based on that determination.

According to one alternative embodiment if the data request includes the characteristic that a position fix must be calculated at a remote computer the processor may be configured to meet that request by not providing a position fix using the standalone mode e.g. a local location determination circuit . In some circumstances an application may require a calculation from remote computer . For example during a test mode when a specific PDE calculation test case is being verified if a network carrier wants to ensure that network access is required in an attempt to receive as much revenue as possible from access to the wireless network and or if a position request is received at device from the network e.g. is mobile terminated and the application determines that a PDE calculation may be quicker if it can reduce the number of communications back and forth between the PDE and device etc.

According to one exemplary embodiment device is configured to enable and or disable position fixes provided in a standalone mode in real time based on the ability of device to acquire wireless data suitable for receiving a position fix from remote computer .

According to one alternative embodiment device can be configured to automatically enable and or disable standalone position fixes as follows if device is in a location without service device automatically enables standalone position fixes except when the application has explicitly requested that the fix be calculated at remote computer if the mobile device is in a location with service but the network is unable to provide position fixes e.g. via remote computer then automatically enable standalone position fixes except when the application has explicitly requested that the fix be calculated at remote computer and when mobile device returns to a location with service and the network is able to provide position fixes disable these fallback to standalone position fixes and utilize the network for position fixes.

According to another alternative embodiment device can be configured to enable and or disable a fallback to standalone option based on a setting flag or word in non volatile memory of device . Device may be configured to automatically e.g. without a user pressing a button or issuing a command switch to using standalone position fixes based on the status of a flag in non volatile memory when position fixes are not available from remote computer . This embodiment provides the ability of a carrier to refuse to permit standalone position fixes even when carrier service is not available. When the fallback to standalone option is disabled no standalone position fixes are permitted regardless of wireless service availability. When the fallback to standalone option is enabled standalone position fixes are enabled as follows if the mobile device is in a location without service automatically enable standalone position fixes if the mobile device is in a location with service but the network is unable to provide position fixes automatically enable standalone position fixes if the mobile device returns to a location with service and the network is able to provide position fixes disable the fall back to standalone feature and utilize the network for position fixes. A request for a standalone position fix will still be responded to with a standalone position fix.

According to another alternative embodiment when no wireless service is available and 1 the application or user has specifically requested that the fix be calculated by remote computer or 2 the non volatile memory setting or item described in the paragraph above has been set to disable the fallback to standalone option device shall provide a message or indication to the application or to the user that a standalone position fix may be possible and the application or user shall be given the option of overriding the setting currently blocking standalone position fixes.

According to some exemplary embodiments device is configured to give precedence to position fixes calculated by remote computer using network resources over standalone position fixes though in alternative embodiments other precedences may be provided.

Accordingly to another alternative embodiment if a standalone position fix is not allowed where wireless service is unavailable e.g. as shown by the no result of step in device may be configured to provide a last known position fix to the application.

According to alternative embodiments the various requests for position fixes described hereinabove may come from an application from a user e.g. a person using the device or from another source.

According to an alternative embodiment the flag discussed with reference to step of may have more than two settings e.g. other than allow and disallow . For example a standalone position fix can be allowed based on one or more criteria such as the number of errors being received or the types of errors being received from remote computer when the position fix from remote computer is requested. Each error type may have its own configurable value of allow or disallow based on the carrier s or manufacturer s preference. For example if data service is unavailable one carrier may want standalone disallowed completely while another carrier may want standalone allowed. Error types may include but not be limited to wireless service unavailable device roaming data authentication failure PDE authentication failure data service unavailable wireless network failure base station BS does not support service BS does support service but it is temporarily unavailable etc.

According to one exemplary embodiment when a request includes a characteristic of MS based mode along with a request for a selected or desired level of calculation speed and calculation accuracy device may be configured to determine that the requested calculation speed and calculation accuracy cannot be obtained without using MS assisted mode and device may be configured to ignore or override the request that MS based mode be used and instead use MS assisted mode or otherwise request some additional data from remote computer .

While the exemplary embodiments illustrated in the Figs. and described above are presently exemplary it should be understood that these embodiments are offered by way of example only. For example the above steps of the various embodiments may be interchanged with other embodiments and rearranged in their order of execution. For example in one embodiment steps and of are added to the method of before step . Accordingly the present invention is not limited to a particular embodiment but extends to various modifications that nevertheless fall within the scope of the appended claims.

