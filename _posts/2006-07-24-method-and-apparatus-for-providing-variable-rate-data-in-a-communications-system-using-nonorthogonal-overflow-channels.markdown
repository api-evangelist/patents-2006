---

title: Method and apparatus for providing variable rate data in a communications system using non-orthogonal overflow channels
abstract: A variable rate transmission system where a packet of variable rate data is transmitted on a traffic channel if the capacity of the traffic channel is greater than or equal to the data rate of the packet. When the rate of the packet of variable rate data exceeds the capacity of the traffic channel, the packet is transmitted on a traffic channel and at least one overflow channel. Also described is a receiving system for receiving and reassembling the data transmitted on the traffic channel and at least one additional overflow channel.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07751371&OS=07751371&RS=07751371
owner: QUALCOMM Incorporated
number: 07751371
owner_city: San Diego
owner_country: US
publication_date: 20060724
---
This application is a continuation of U.S. patent application Ser. No. 09 851 655 filed May 8 2001 now U.S. Pat. No. 7 167 460 which is a continuation of U.S. patent application Ser. No. 08 937 052 filed Sep. 24 1997 now U.S. Pat. No. 6 292 476 which is a continuation of application Ser. No. 08 838 240 filed Apr. 16 1997 now U.S. Pat. No. 5 777 990 issued Jul. 7 1998 which is a continuation of U.S. patent application Ser. No. 08 395 960 filed Feb. 28 1995 abandoned assigned to the same assignee as the present invention which are incorporated herein by reference.

The present invention relates to communications. More particularly the present invention relates to a novel and improved communication system wherein a user transmits variable rate data on an allocated traffic channel but when the user s variable transmission exceeds the capacity of the allocated traffic channel the user is provided temporary use of an overflow channel to use with the allocated traffic channel in order to transmit the high rate data.

The use of code division multiple access CDMA modulation techniques is one of several techniques for facilitating communications in which a large number of system users are present. Other multiple access communication system techniques such as time division multiple access TDMA frequency division multiple access FDMA and AM modulation schemes such as amplitude companded single sideband ACSSB are known in the art. However the spread spectrum modulation technique of CDMA has significant advantages over these modulation techniques for multiple access communication systems. The use of CDMA techniques in a multiple access communication system are disclosed in U.S. Pat. No. 4 901 307 entitled SPREAD SPECTRUM MULTIPLE ACCESS COMMUNICATION SYSTEM USING SATELLITE OR TERRESTRIAL REPEATERS assigned to the assignee of the present invention of which the disclosure thereof is incorporated by reference. The use of CDMA techniques in a multiple access communication system is further disclosed in U.S. Pat. No. 5 103 459 entitled SYSTEM AND METHOD FOR GENERATING SIGNAL WAVEFORMS IN A CDMA CELLULAR TELEPHONE SYSTEM assigned to the assignee of the present invention of which the disclosure thereof is incorporated by reference.

The method and apparatus for the generation of a pseudorandom noise PN signal that is well suited for CDMA applications is disclosed in U.S. Pat. No. 5 228 054 issued Jul. 13 1993 entitled POWER OF TWO LENGTH PSEUDO NOISE SEQUENCE GENERATOR WITH FAST OFFSET ADJUSTMENT assigned to the assignee of the present invention of which the disclosure thereof is incorporated by reference.

CDMA by its inherent nature of being a wideband signal offers a form of frequency diversity by spreading the signal energy over a wide bandwidth. Therefore frequency selective fading affects only a small part of the CDMA signal bandwidth. Space or path diversity is obtained by providing multiple signal paths through simultaneous links from a mobile user through two or more cell sites. Furthermore path diversity may be obtained by exploiting the multipath environment through spread spectrum processing by allowing a signal arriving with different propagation delays to be received and processed separately. Examples of path diversity are illustrated in copending U.S. Pat. No. 5 101 501 entitled SOFT HANDOFF IN A CDMA CELLULAR TELEPHONE SYSTEM and copending U.S. Pat. No. 5 109 390 entitled DIVERSITY RECEIVER IN A CDMA CELLULAR TELEPHONE SYSTEM both assigned to the assignee of the present invention and incorporated by reference herein.

An additional technique that may be used to increase the efficiency of the allocation of the communication resource is to allow the users of the resource to provide data at varying rates thereby using only the minimum amount of the communication resource to meet their service needs. An example of a variable rate data source is a variable rate vocoder which is detailed in U.S. Pat. No. 5 414 796 issued May 9 1995 entitled VARIABLE RATE VOCODER assigned to the assignee of the present invention and incorporated herein by reference. Since speech inherently contains periods of silence i.e. pauses the amount of data required to represent these periods can be reduced. Variable rate vocoding most effectively exploits this fact by reducing the data rate for these periods of silence.

In a variable rate vocoder of the type described in aforementioned U.S. Pat. No. 5 414 796 approximately 40 of the speech packets are coded at full rate. In the vocoder described in the patent application the encoding rate is selected in accordance with the packet energy. When the packet energy exceeds a full rate threshold the speech is coded at full rate. In U.S. patent application Ser. No. 08 288 413 entitled IMPROVED METHOD AND APPARATUS FOR SELECTING AN ENCODING RATE IN A VARIABLE RATE VOCODER assigned to the assignee of the present invention and incorporated herein by reference a method for determining based on characteristics of the speech packet if some of the packets to be coded at full rate can be coded at a lower rate without sacrificing perceived quality.

A variable rate speech encoder provides speech data at full rate when the talker is actively speaking thus using the full capacity of the transmission packets. When a variable rate speech coder is providing speech data at a less that maximum rate there is excess capacity in the transmission packets. A method for transmitting additional data in transmission packets of a fixed predetermined size wherein the source of the data for the data packets is providing the data at a variable rate is described in detail in copending U.S. Pat. No. 5 504 773 issued Apr. 2 1996 entitled METHOD AND APPARATUS FOR THE FORMATTING OF DATA FOR TRANSMISSION assigned to the assignee of the present invention of which the disclosure thereof is incorporated by reference herein. In the above mentioned patent application a method and apparatus is disclosed for combining data of differing types from different sources in a data packet for transmission.

A communications resource is typically divided into communications channels. Typically each of these channels has the same capacity. A communications system could re allocate the channels to the users for each transmission. This would theoretically allow for a maximally efficient allocation of the communication resource because each user would be using only the amount of the resource absolutely necessary. However this technique would result in unacceptable complexity in the resulting receiver and transmitter design.

In the present invention an efficient method of transmitting and receiving variable rate data is disclosed. In the present invention each user is provided with a voice or data channel also referred to as a traffic channel specifically allocated for that user. In addition each user is provided with selective access to a pool of overflow channels that are for use by all users of the communications resource. If a user needs to transmit at a rate higher than the capacity of the allocated traffic channel then the user transmits the information using both the allocated traffic channel and an overflow channel.

In the exemplary embodiment the communication system is a code division multiple access CDMA communication system as is described in detail in the aforementioned U.S. Pat. Nos. 4 901 307 and 5 103 459. In the exemplary embodiment each of the traffic channels are orthogonal to one another. Each traffic channel is spread by a unique Walsh sequence that is orthogonal to the other Walsh sequences. The spread signals are then spread by pseudorandom noise PN sequences and then transmitted.

In the exemplary embodiment the overflow channels are not provided with unique orthogonal Walsh spreading sequences because this would decrease system capacity. Instead the system spreads the overflow channel portion of the information by a Walsh sequence that is not unique from those used in spreading the traffic channels. This portion is then spread by a PN sequence. The PN sequence is unique from the PN sequence used to spread the traffic channel of the same Walsh sequence. In the exemplary embodiment the traffic channel and the overflow channel use although not necessarily the same Walsh spreading sequence.

In the exemplary embodiment the receiver continuously monitors both the traffic channel and the overflow channel. If the receiver determines that information is being transmitted on both the traffic channel and an overflow channel then the receiver decodes both portions of the message combines the portions and provides the decoded message to the user. In an alternative embodiment the receiver need not continuously monitor the overflow channel but rather only monitors the overflow channel when instructed by information on the traffic channel that directs the receiver to monitor the overflow channel.

A multiple access communication resource is divided into parcels referred to as channels. This division is called multiplexing. Three specific types of multiplexing are frequency division multiplexing FDM time division multiplexing TDM and code division multiplexing CDM . The basic unit of information transmitted and received in a communication system is referred to as a packet.

Referring now to the figures illustrates the exemplary implementation of the present invention. In the present invention is implemented in a satellite communications network. It should be understood that the present invention may be utilized in a terrestrial based system such as one where base stations are used to communicate with remote stations. The network is used to communicate information to a remote user station or terminal from gateway via satellites and which may be either geosynchronous or low earth orbit LEO types. User terminal may be a mobile station such as a portable telephone or other portable or mobile communications device or user terminal may be a fixed communications device such as a wireless local loop terminal or a central communications center such as a cellular base station. Although only two satellites a single user terminal and a single gateway are shown in for ease in illustration a typical system may contain a plurality of all.

In the exemplary embodiment satellites and are transponders or non regenerative repeaters that simply amplify and re transmit the signal received from gateway . The present invention is equally applicable to cases where satellites and are regenerative repeaters that demodulate and reconstitute the signal prior to re transmission. In the exemplary embodiment the signal transmitted from gateway to satellites and is a spread spectrum signal. In addition the signals transmitted from satellites and to user terminal are spread spectrum communications signals. The generation of spread spectrum communications signals is described in detail in the aforementioned U.S. Pat. Nos. 4 901 307 and 5 103 459.

Gateway serves as an interface from a communication network to the satellites and or directly to terrestrial base stations a configuration not shown . Gateway is typically a central communications center that receives data via a network not shown which may include public switching telephone networks PSTN and networks specifically designed for the communications of the present invention. Gateway may be connected to the network not shown by wireline communications or by means of an air interface. Gateway provides the data received from the network via satellites and to user terminal . Similarly gateway provides data received from user terminal via satellites and to the network.

In the exemplary embodiment the communications network transmits variable rate data from gateway to user terminal . A variable rate communication system communicates data where the rate of the data communicated varies with time. In the exemplary embodiment the communications resource is divided into channels. In the exemplary embodiment each channel has the same capacity.

In the exemplary embodiment gateway communicates to user terminal at one of four different information data rates. These data rates ordered from lowest rate to highest rate are referred to as eighth rate quarter rate half rate and full rate. In the exemplary embodiment a single traffic channel has adequate capacity to carry the packet of all rates except full rate which requires a traffic and an overflow channel. In the exemplary embodiment a traffic channel can carry packets of 96 bits or less. Half rate quarter rate and eighth rate packets consist of 96 48 and 24 bits respectively. A full rate packet consists of 192 bits and so requires a traffic channel plus an overflow channel of equal capacity.

The present invention is easily extendible to cases where there are more or less than four rates where the channels can carry data at a lesser subset of the possible rates or where the highest rate requires more than two channels. The communications system of the present invention can communicate both fixed rate data and variable rate data. In the communication of fixed rate data a channel or set of channels is to be allocated for the duration of the service being provided.

In the exemplary embodiment the channels are designated into two groups. A first group of channels is the traffic channel group. Users are allocated traffic channels or sets of traffic channels specifically for their use for the duration of service. In the exemplary embodiment all traffic channels are orthogonal to one another. In the exemplary embodiment this orthogonality is attained by allocating a unique Walsh sequence to each user as is described in detail in the aforementioned U.S. Pat. Nos. 4 901 307 and 5 103 459. The information packets are spread i.e. combined with an orthogonal function sequence typically a Walsh sequence then the Walsh spread packet is mixed i.e. spread spectrum processed with a pseudorandom noise PN sequence. Further details on the spread spectrum modulation of the information packets are provided in the aforementioned U.S. Pat. Nos. 4 901 307 and 5 103 459.

Overflow channels are not provided with unique orthogonal or Walsh sequences and as such are not assured of being orthogonal to all traffic channels. However the PN sequence which is mixed with the spread packet is unique so all other packets will appear as noise to the decoder of the overflow channel and the overflow channel information can be distinguished from all traffic channel information.

The exemplary embodiment of variable rate data source is a variable rate vocoder as described in the aforementioned U.S. Pat. No. 5 414 796. In the exemplary variable rate vocoder the energy of a packet of speech data is measured and compared to a set of threshold values which determine the encoding rate. The aforementioned U.S. patent application Ser. No. 08 288 413 teaches of methods that minimize the number of packets encoded at full rate with minimum impact on perceptual quality.

Variable rate data source encodes the input data and provides it at one of the predetermined rates. In the exemplary embodiment a traffic channel is capable of carrying packets encoded at or below half rate. When a packet of data is encoded by variable rate data source at full rate then the packet must be transmitted using both a traffic channel and an overflow channel.

The data packet provided by variable rate data source is provided to encoder . In the exemplary embodiment encoder generates a set of redundant bits in accordance with error correction and detection methods that are well known in the art. In the exemplary embodiment the redundant bits are cyclic redundancy check CRC bits the generation of which is well known in the art and is detailed in the aforementioned U.S. Pat. No. 5 504 773.

Referring back to encoder then encodes the formatted packet for error detection and correction as is well known in the art. In the exemplary embodiment encoder encodes the formatted packet in accordance with a rate 1 2 convolutional code. Encoder provides the encoded packet to interleaver .

Interleaver interleaves the binary symbols of the encoded packet in accordance with a predetermined interleaver format. In the exemplary embodiment interleaver is a block interleaver. In addition interleaver provides redundancy in the packets such that each interleaved packet consists of the same number of binary symbols as described below.

Referring to in conjunction with interleaver interleaves the binary symbols of the packet then groups the reordered binary symbols into power control groups. and illustrate a full rate packet organized into a packet format. Because a full rate packet of a transmission packet requires two channels the first portion of the packet illustrated in is organized into a traffic packet and transmitted on the traffic channel. The second portion of the full rate packet as illustrated in is organized into an overflow packet and transmitted on an overflow channel. For the full rate packet interleaver does not provide symbol repetition. Since the symbol data fills the traffic channel and the overflow channel packet. In the exemplary embodiment each power control group consists of 12 binary symbols. illustrates a half rate packet organized into a packet format. Note that because transmission of the half rate packet utilizes the full capacity of the traffic channel packet there is no symbol repetition provided in the packet. illustrates a quarter rate packet organized into a packet format in which each symbol is provided twice. illustrates an eighth rate packet organized into packet format in which each symbol is provided four times.

Referring again to the interleaved packet is provided by interleaver to de multiplexer which operates in accordance with a rate signal provided by variable rate data source . If the packet is such that it can be carried on the traffic channel without need of an overflow channel then the interleaved packet is provided through de multiplexer DE MUX without any change to modulator . If on the other hand the packet requires use of an overflow channel for transmission then de multiplexer splits the packet into two portions. The de multiplexed packet is provided by de multiplexer to modulator . Buffering may be added to ensure two portions are simultaneously provided to modulator .

In the exemplary embodiment if the packet is of a rate less than full rate then the entire packet is provided to combining element which in the exemplary embodiment is a digital multiplier modulo adder or exclusive or gate. The interleaved packet is spread by an orthogonal function W as is described in detail in the aforementioned U.S. Pat. No. 5 103 459. In the exemplary embodiment orthogonal function Wis a Walsh function the selection of which is detailed in the aforementioned U.S. Pat. No. 5 103 459. In the exemplary embodiment each Walsh sequence W is uniquely provided for use by User i .

The orthogonal function spread packet from element is provided to quadrature spreading elements and which are employed as digital multipliers modulo adder or exclusive or gates. The orthogonal function spread packet is spread in quadrature spreading elements and by pseudorandom noise PN functions PNand PN respectively. PNand PNare generated by traffic PN generator . In the exemplary embodiment the pseudorandom noise signals are generated by a maximal shift register where the PN sequence is determined by the temporal offset of the register. The design and implementation of such registers is described in detail in the aforementioned copending U.S. Pat. No. 5 228 054. The quadrature spread packets are provided from quadrature spreading elements and to transmitter .

Transmitter converts the signal to analog form frequency up converts and amplifies the signal for transmission transmitter amplifies the signal in accordance with the rate of the packet. The relationship between the necessary transmission energy and the amount of repetition is illustrated in . When a redundancy is present in a packet the packet can be transmitted at a lower energy with redundant portions combined at the receiver. In a full rate packet both the packet on the traffic channel traffic packet and the packet transmitted on the overflow channel overflow packet are transmitted at a maximum bit energy E. In there is no repetition in the half rate packet so the packet is also provided at energy level E. In there is a repetition rate of two so the packet is provided at half the packet energy of the half rate packet or E 2. In there is a repetition rate of four so the packet is provided at a quarter of the packet energy of the half rate packet or E 4. Transmitter amplifies and up converts the signal and provides it to antenna for broadcast to a receiver.

In the case where a packet requires use of an overflow channel for transmission that is the packet is a full rate packet then de multiplexer splits the interleaved packet into two halves and provides a first half to combining element and a second half of the packet to combining element which is also embodied as a digital multiplier modulo adder or an exclusive or gate. The modulation of the first half of the packet proceeds as described previously for packets of less than full rate. The modulation of the second half of the packet is the same except that the spreading functions are different.

Now turning to the specifics of the modulation process of modulator it should be noted that a spread spectrum communication system is primarily limited in capacity by the number of unique orthogonal functions or in the exemplary embodiment Walsh functions available. If one allocates a subset of these functions for the purpose of modulating the overflow channels then the capacity of the system is reduced.

In the present invention all of the traffic channels are orthogonal to one another because each is modulated by a unique Walsh function W or Walsh code sequence. However the Walsh functions provided for modulation of the overflow channel W will overlap those allocated for modulation of the traffic channel and so are not orthogonal to the traffic channels. In the exemplary embodiment Wis the same Walsh function as W. That is the same Walsh code function spreads the traffic channel portion of the packet as it spreads the overflow portion of the packet. The two signals are distinguished from one another by subsequent PN code sequence spreading.

The spread packet from combining element is provided to quadrature spreading elements and which may be embodied as digital multipliers modulo adders or exclusive or gates. Quadrature spreading elements and spread the packet from spreading element in accordance with pseudorandom noise functions PN and PN. Pseudorandom noise functions PN and PN are generated by overflow PN generator . In the exemplary embodiment pseudorandom noise functions PN and PN are generated in the same manner as pseudorandom noise functions PNand PN but are unique due to different temporal offsets in the code sequences.

In a first exemplary embodiment pseudorandom noise functions PNand PNand pseudorandom noise functions PN and PN are short codes. A short code is a code in which the number of sequences generated is relatively few. In the exemplary embodiment the PN generator provides a bit stream that is periodic with a period of 2PN chips. The benefit of this implementation is that it allows a faster acquisition at the receiver. In an alternative embodiment pseudorandom noise functions PNand PNare short codes but pseudorandom noise functions PN and PN are long codes. This has the potential of advantage of greater separation in code space while allowing the mobile to acquire using the demodulation of the first subpacket modulated by the short code.

The modulated overflow packet from quadrature spreading elements and as well as the modulated traffic packet from quadrature spreading elements and are provide to transmitter . Transmitter up converts and amplifies the signal and provides the signal to antenna for broadcast. The subpackets are transmitted with energy E as illustrated in and vertical axis .

The received signal is provided to traffic channel despreading element TRAFFIC DESPREADER which despreads the signal in accordance with the traffic channel pseudorandom noise codes PNand PN. Traffic PN generator generates the PNand PNsequences. In the exemplary embodiment the PN sequences are generated by a shift register with appropriate feedback. The despreading process involves digitally multiplying the signal by the traffic channel pseudorandom noise codes PNand PN. This process is described in detail in the aforementioned U.S. Pat. Nos. 4 901 307 and 5 103 459. Similarly the received signal is provided to overflow channel despreading element OVERFLOW DESPREADER which despreads the signal in accordance with the overflow channel pseudorandom noise codes PN and PN. Overflow PN generator generates the PN and PN sequences. In the exemplary embodiment the PN sequences are generated by a shift register with appropriate feedback. In the exemplary embodiment the two generators are identical except that they are offset from one another temporally which means that the traffic PN sequences and the overflow PN sequences will be unique from one another.

The despread signal is then provided to demodulation elements and . Demodulation element receives the traffic channel despread I and Q values and demodulates the signal. The demodulation process is illustrated by the digital multiplication of the signal by the Walsh function Win multipliers and then the accumulation of the multiplied signal in accumulators and . Similarly the demodulation of the overflow channel is illustrated by the digital multiplication by the Walsh function Win multipliers and then the accumulation of the multiplied signal in accumulators and .

The demodulated signal is provided by traffic demodulator to combiner element and by overflow demodulator to combiner element . The combiner elements combine received and despread data estimates from despreaders and with data estimates from other receiver despreader demodulators demodulated fingers not shown that are simultaneously being tracked by the receiver system. These other estimates take advantage of the delayed signals resulting from multipath signals to provide an improved signal estimate. The design and implementation of combiner elements are described in detail in the aforementioned U.S. Pat. Nos. 5 101 501 and 5 109 390.

The combiners combine the signals based upon the values of the data and the relative strengths of the signals and provide combined estimates to de interleaving element DE INT . De interleaving element re orders the combined estimates of the data in accordance with a predetermined ordering format and provides the reordered data to decoder DECODE . Decoder decodes the data in accordance with a predetermined decoding format. In the exemplary embodiment decoder is a Viterbi decoder of constraint length . The decoded packet is then provided to the receiver system user.

In an improved embodiment of the communication system of the present invention an alternative modulation and demodulation process is provided for when system usage is low. When system usage is low each user is provided use of one of the unique Walsh sequences for communication of its overflow data. That is Wand Ware different so the traffic and overflow signals are orthogonal to one another. In the exemplary embodiment Wand Ware separated by a fixed offset from one another so that the receiver knows which Walsh sequence to use to demodulate the overflow signal. In the exemplary embodiment of a communication system of 128 unique Walsh sequences when usage is low each user is allocated a traffic channel designated by Walsh sequence Wand uses an overflow channel designated by Walsh sequence W W 64.

When system usage rises so that the system can no longer accommodate this many unique overflow channels that is 65 or more users then the system transmitter will send signaling information to the receiver indicating that the overflow communications will be conducted as described previously using the same Walsh sequence for both traffic and overflow communications. The users may be switched to the high usage mode individually as necessary or as a group.

The previous description of the preferred embodiments is provided to enable any person skilled in the art to make or use the present invention. The various modifications to these embodiments will be readily apparent to those skilled in the art and the generic principles defined herein may be applied to other embodiments without the use of the inventive faculty. Thus the present invention is not intended to be limited to the embodiments shown herein but is to be accorded the widest scope consistent with the principles and novel features disclosed herein.

