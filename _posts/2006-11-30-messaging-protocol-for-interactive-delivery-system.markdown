---

title: Messaging protocol for interactive delivery system
abstract: Efficient messaging techniques that facilitate interactive program guide (IPG) delivery and allow a terminal to specifically designate requested items of information from a server. The IPG can be provided via a number of IPG pages, with each page including a number of defined regions. In one method, selection for a particular region of a particular page is received at a terminal and a determination is made whether the selected region is currently received. If the answer is no, a request for the selected region is generated and sent to a server. The request can conform to a particular message format that includes a number of fields, e.g., a region ID field that identifies the selected region, a subtype field that identifies a particular type, a time slot field that identifies a specific time slot, and a page offset field that identifies a specific page from among many.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07707608&OS=07707608&RS=07707608
owner: Cox Communications, Inc.
number: 07707608
owner_city: Atlanta
owner_country: US
publication_date: 20061130
---
This application is a divisional of U.S. patent application Ser. No. 09 708 809 filed Nov. 8 2000 now U.S. Pat. No. 7 146 628 entitled MESSAGING PROTOCOL FOR INTERACTIVE DELIVERY SYSTEM which application is incorporated herein by reference as if set forth in its entirety.

The present invention relates to communications systems in general. More specifically the invention relates to techniques to efficiently deliver interactive program guide IPG in a server centric system.

Over the past few years the television industry has seen a transformation in a variety of techniques by which its programming is distributed to consumers. Cable television systems are doubling or even tripling system bandwidth with the migration to hybrid fiber coax HFC cable plant. Customers unwilling to subscribe to local cable systems have switched in high numbers to direct broadcast satellite DBS systems. And a variety of other approaches have been attempted focusing primarily on high bandwidth digital technologies intelligent two way set top terminals or other methods of trying to offer service differentiated from standard cable and over the air broadcast systems.

With this increase in bandwidth the number of programming choices has also increased. Leveraging off the availability of more intelligent set top terminals several companies such as Starsight Telecast Inc. and TV Guide Inc. have developed elaborate systems for providing an interactive listing of a vast array of channel offerings expanded textual information about individual programs and the ability to look forward to plan television viewing as much as several weeks in advance.

With this increase in the quantity of programming it is a challenge to deliver program guide data to viewers in an efficient and effective manner. A large amount of resources e.g. bandwidth would normally be needed to continually transmit for example two weeks of programming for 200 channels. Therefore efficient and effective techniques to deliver interactive program guide to a large number of viewers are highly desirable.

Moreover the increased bandwidth has allowed service providers to offer various services such as regular programming pay per view PPV video on demand VOD music channels and so on. The large amount of programming offered by each of these services typically necessitates the use of a separate user interface especially adopted for the service. As more services are provided and the complexity of these services increases the user interfaces becomes more complicated to implement and for users to navigate. Thus an integrated user interface that supports these various services especially interactive program guide IPG and VOD are highly desirable.

The present invention provides messaging techniques that can be advantageously used to support an interactive program guide IPG delivery system. The IPG can be provided via a number of IPG pages with each IPG page being defined with a number of regions or portions . The non redundant regions for the IPG pages can be encoded and some of the encoded regions can be continually transmitted i.e. broadcast and some others can be transmitted as requested i.e. demand cast . To implement a bandwidth efficient demand cast system only the necessary regions not currently received at a terminal are requested as oppose to entire pages and the head end transmits only the requested regions.

An aspect of the invention provides efficient messaging techniques to facilitate the IPG delivery scheme described above. These messaging techniques allow the terminals to specifically designate the requested items of information i.e. the specific regions of interest .

An embodiment of the invention provides a method for requesting information for IPG with the IPG being provided via a number of IPG pages and each IPG page including a number of defined regions e.g. a guide region a video region and so on . In accordance with the method selection for a particular region of a particular IPG page is received at a terminal and a determination is made whether the selected region is currently received at the terminal. If the selected region is not currently received a request for the selected region is generated and sent to a server of an information distribution system. The selected region may be defined to be a guide region for a program listing if the selected IPG page is not currently received at the terminal.

The request can be generated based on a particular message format that includes a number of fields. In a specific implementation the request for a guide region includes a region ID field that identifies the selected region a subtype field that identifies a particular filter if any used to filter programs to be included in the program listing a time slot field that identifies a specific time slot for the selected IPG page and a page offset field that identifies a particular page from among a number of pages available for the selected time slot.

Other message formats can be defined for requests of other regions of the IPG page. For example for picture in picture encoding scenarios one of a number of video steams can be shown in the barker video region upon request from a set top terminal. In this case the request for the video region may include the region ID that identifies the barker region the subtype field that may be used to identify the type of video stream being requested such as sports related kids related and the like and time slot and page offset fields can be reserved to be used for future implementation purposes.

The invention further provides other methods and system elements i.e. terminal and server that implement various aspects embodiments and features of the invention as described in further detail below.

The foregoing together with other aspects of this invention will become more apparent when referring to the following specification claims and accompanying drawings.

To facilitate understanding identical reference numerals have been used where possible to designate identical elements that are common within a figure.

As shown in communications network includes one or more head ends HE one or more centers for local neighborhood equipment LNE a number of distribution nodes and a number of terminals . Local neighborhood equipment may be located for example at remote hubs of a cable distribution network. Terminals may be user terminals interactive set top terminals STT or other devices with interactive functionalities.

As used herein demand cast refers to the process of managing and delivering content to one or more users in response to user demand for the content. Broadcast refers to the process of managing and delivering content to a number of users on a continual basis. Pointcast refers to the process of managing and delivering content to a particular user. And Narrowcast refers to the process of managing and delivering content to a group of users.

In a first step a first set of IPG pages to be broadcast is predetermined. The first set of IPG pages may comprise video sequences for example for a current time period. For instance if the current time is 1 07 pm then the current time period may include programming from 1 00 pm to 2 30 pm assuming a 90 minute time period.

In a second step a second set of IPG pages to be broadcast is predetermined. The second set of IPG pages may comprise video sequences for example for a prime time period. Such prime time period is a time period during which a large number of viewers typically watch TV programming. For example the prime time period may include programming from 6 00 pm to 9 00 pm.

In a third step the bandwidth to broadcast the first and second sets of IPG pages is allocated by the distribution system for that purpose. For example as described below in more detail a bandwidth manager BWM within head end and or local neighborhood equipment allocates the necessary bandwidth within the in band network to broadcast the first and second sets of IPG pages to the terminals. If the first and second sets overlap then only the non redundant video sequences need to be broadcast and only enough bandwidth to broadcast the non redundant video sequences needs to be allocated. Such situation may occur for example when the current time period overlaps the prime time period.

In a fourth step the IPG pages of the first and second sets are broadcast to terminals within the broadcast range. The broadcast range may comprise all terminals downstream from head end or local neighborhood equipment . Only non redundant content needs to be broadcast and the broadcast is achieved within the allocated in band bandwidth.

In a first step one or more IPG pages are selected to be narrowcast to a group of terminals . For example the group of terminals may be a group comprising a high concentration of users with a particular ethnicity or special interest and the selected IPG page s may comprise programming targeted to that ethnic or special interest group. As another example the group of terminals may comprise terminals in a school campus or business and the selected IPG page s may comprise class instruction or other targeted material. The group of terminals may include terminals in one geographic area or terminals dispersed among different geographic areas but linked for example via a network group address.

In a second step the bandwidth to narrowcast the selected IPG page s is allocated by the distribution system for that purpose. For example as described below in more detail the bandwidth manager BWM within head end and or local neighborhood equipment allocates the necessary bandwidth within the in band network to narrowcast the selected IPG page s to the group of terminals. If the requested IPG page s are already being broadcast as shown in then no additional bandwidth for a narrowcast needs be allocated.

In a third step the selected IPG page s are narrowcast to the group of terminals. The narrowcast needs only to be received by terminals within the group of terminals and does not need to be received by other terminals. The narrowcast is sent downstream from head end or local neighborhood equipment to the group of terminals. The narrowcast is achieved within the allocated in band bandwidth. If the requested IPG page s are already being broadcast as shown in then the narrowcast needs not be performed.

In a first step a request for an IPG page is received from a terminal . The request is transmitted upstream from terminal to head end or local neighborhood equipment via communications network . The upstream transmission may be achieved via an out of band network or alternatively via an in band network. Such request from the requesting terminal may comprise for example a look ahead request for programming for a time period ahead of the current time period. For a system where one or more IPG pages are already broadcast as shown in the requesting terminal may first check to see whether or not the requested IPG page is already being broadcast before transmitting the request upstream.

In a second step the bandwidth to pointcast the requested IPG page is allocated by the distribution system for that purpose. For example as described in more detail below the bandwidth manager within head end and or local neighborhood equipment may allocate the necessary bandwidth within the in band network to pointcast the requested IPG page to the requesting terminal. The allocation is performed if sufficient system resources are available to establish a pointcast session. Moreover if the requested IPG page is already being broadcast as shown in then no additional bandwidth for a pointcast needs be allocated.

In a third step the requested IPG page is pointcast to the requesting terminal. The pointcast needs only to be received by the requesting terminal and does not need to be received by other terminals. The pointcast is sent downstream from head end or local neighborhood equipment to the requesting terminal. The pointcast if necessary is achieved within the allocated in band bandwidth. If the requested IPG page is already being broadcast as shown in then the pointcast needs not be performed.

In a first step a request for an IPG page is received from a requesting terminal . The request is transmitted upstream from requesting terminal to head end or local neighborhood equipment via communications network . The upstream transmission may be achieved via an out of band network or alternatively via an in band network. Such request may comprise for example a look ahead request for special interest programming available for a future time period ahead of the current time period. For a system where a set or sets of IPG pages are already being broadcast as shown in requesting terminal may first check to determine whether or not the requested IPG page is already being broadcast before transmitting the request upstream.

In a second step the bandwidth to narrowcast the requested IPG page is allocated by the distribution system for that purpose. For example as described below in relation to the bandwidth manager within head end and or local neighborhood equipment may allocate the necessary bandwidth within the in band network to narrowcast the requested IPG page to a group of terminals that includes requesting terminal . The allocation is performed if sufficient system resources are available to establish a narrowcast session. If the requested IPG page is already being broadcast as shown in then no additional bandwidth for a pointcast needs to be allocated. The group of terminals may include terminals in one geographic area or terminals dispersed among different geographic areas but linked for example via a network group address.

In a third step the requested IPG page is narrowcast to group of terminals . The narrowcast needs only to be received by the terminals within group of terminals and does not need to be received by other terminals. The narrowcast is sent downstream from head end or local neighborhood equipment to group of terminals . The narrowcast is achieved within the allocated in band bandwidth. If the requested IPG page is already being broadcast as shown in then the narrowcast needs not be performed.

In a first step a request for an IPG page is received from a first terminal . The request is transmitted upstream from first terminal to head end or local neighborhood equipment via communications network . The upstream transmission may be achieved via an out of band network or alternatively via an in band network. Such request from first terminal may comprise for example a look ahead request for programming for a future time period ahead of the current time period. For a system where one or more IPG pages are already being broadcast as shown in first terminal may first check to see whether or not the requested IPG page is already being broadcast before transmitting the request upstream.

In a second step a stream may be assigned by the distribution system to pointcast the requested IPG page. The assignment is performed if sufficient system resources are available to establish a pointcast session. For example as described below in more detail the bandwidth manager within head end and or local neighborhood equipment may determine that sufficient resources are available to assign stream to pointcast the requested IPG page to first terminal . The stream assignment may be achieved for example by assigning a particular value to the program identifier PID for stream . If the requested IPG page is already being broadcast as shown in then stream needs not be assigned.

In a third step the requested IPG page is pointcast to first terminal via assigned stream . This may be achieved by transmitting packets that are identified by the particular PID value and contain a video sequence of the requested IPG page. The pointcast needs only to be received by first terminal and does not need to be received by other terminals. The pointcast is sent downstream from head end or local neighborhood equipment to first terminal . If the requested IPG page is already being broadcast as shown in then the pointcast needs not be performed.

In a fourth step a request for an IPG page is received from a second terminal . In this example the IPG page requested by second terminal is the same as the IPG page requested by first terminal . Similar to the first request the second request is transmitted upstream from second terminal to head end or local neighborhood equipment via communications network via an out of band network or an in band network. Second terminal may be in the same or different geographic area as first terminal .

In a fifth step the identifier e.g. PID value for the assigned stream is transmitted from head end or local neighborhood equipment to second terminal . This enables the next step to occur without use of additional PIDs or additional network bandwidth.

And in a sixth step second terminal receives the requested IPG page via the same assigned stream which was used to deliver the IPG page to first terminal . Second terminal may be set to decode and present packets that are identified by the particular PID value for stream . Such packets contain the video sequence of the requested IPG page. In this manner sharing of stream occurs changing the previous single pointcast to a double pointcast.

Similarly other terminals may share the pointcast if they request the same IPG page and can receive the requested IPG page via the same stream . In this manner any number of terminals may share the pointcast. This sharing results in more efficient use of the available bandwidth.

In a first step a terminal finishes viewing a stream used to send an IPG page. In the example described above in the terminal may be either first terminal or second terminal . In general the terminal may be any of the terminals that are sharing the same stream or the last terminal to view a stream that was previously shared.

In a second step head end or local neighborhood equipment is notified that the terminal has finished viewing the stream. Such notification can be achieved by the terminal by sending a communication upstream to head end or local neighborhood equipment via an out of band or in band network.

In a third step a determination is made whether or not that stream is being viewed by one or more terminals. As described in more detail below this determination is done within head end or local neighborhood equipment and may be done by a bandwidth manager in conjunction with a session manager.

In a fourth step if one or more terminals are still viewing that stream then head end or local neighborhood equipment continues to transmit the stream. Such transmission is typically performed by an in band delivery system.

Finally in a fifth step if no other terminals are viewing that stream then the stream is torn down so that it is no longer transmitted and no longer takes up network bandwidth. The torn down stream is then available for reassignment and the bandwidth can be reused to transmit a different pointcast narrowcast or broadcast.

The usage of guide pages can be characterized by their frequency distribution. Certain pages in a guide page matrix such as those in the current time slot and adjacent time slots near look ahead are likely to be accessed more frequently by viewers. Other guide pages such as the far look ahead pages are likely to be accessed less frequently. These characteristics of guide page usage can be supported by a demand cast model described herein. Access to all possible guide pages in the guide page matrix can be achieved by sending in a transport stream a combination of continually broadcast guide pages for pages that are more frequently accessed and temporarily broadcast or demand cast guide pages for pages less frequently accessed. In an embodiment current and near look ahead pages are sent in a broadcast fashion and far look ahead pages are sent in a demand cast fashion.

A demand cast IPG system is a two way system employing communication between the terminal in the communications network and the head end via a back channel. Demand cast pages are inserted in the transport stream for temporary broadcast in response to access demand generated by viewers in the network. When a particular viewer requests a particular guide page one of two things can occur. If the requested page is already in the IPG broadcast the terminal simply acquires the corresponding stream. Otherwise if the page is not in the broadcast the terminal requests the head end to insert a stream in the IPG multiplex for the requested page. The head end can then replace the least frequently accessed and not currently accessed stream in the IPG multiplex with a stream for the newly requested page.

When a terminal no longer accesses a guide page it informs the head end that it has released it. When accessing a demand cast page an IPG application at the terminal can time out following a certain period of inactivity e.g. 2 minutes by the viewer. If a time out occurs the terminal can inform the head end that it has released the page. Informing the head end when demand cast pages are released ensures that non accessed demand cast pages are available for substitution. If a terminal requests a new demand cast page to be inserted into the IPG multiplex and there is no slot available in the IPG multiplex the head end refuses to insert a stream for the newly requested guide page which then results in a blockage. Most statistical multiplexed systems are susceptible to blockage if loaded with an excessive number of users and during chaotic episodes. An advantage of the demand cast model is that if a particular page is likely to be extensively accessed such as a page listing a major sports event the page only needs to be inserted once into the transport stream. The page is then readily accessible by any number of terminals without consuming additional bandwidth.

Access to guide pages within a short delay i.e. with low latency is an important feature for interactive program guide. Continually broadcast pages offer a low latency access whereas demand cast pages may incur additional processing delays if not yet included in the transport stream. In an embodiment frequently accessed pages such as those in the current time slot and near look ahead time slots and perhaps prime time slots are broadcast continually so that they can be accessed with the lowest possible latency. Less frequently accessed far look ahead pages can be sent via demand cast.

Session manager and transport stream generator may be co located within a distribution center. The distribution center may comprise for example head end in communications network . Alternatively session manager and transport stream generator may be at different locations. For example session manager may be located at head end and transport stream generator may be located at local neighborhood equipment in communications system .

Session manager and transport stream generator are both coupled to a number of terminals via a distribution network. The distribution network may comprise for example a cable distribution network as illustrated in . In that example terminals would comprise terminals or an equivalent functionality integrated into a computer system or advanced television. Alternatively for example the distribution network may comprise a satellite communications system or another type of communications system telephonic wireless etc. .

One terminal and its links to session manager and transport stream generator are illustrated in . In the specific embodiment shown in terminal receives in band communication from transport stream generator and sends out of band OOB communications to session manager . In an alternative embodiment the communication to session manager may comprise upstream in band communications.

Session manager may comprise in one embodiment a computer system residing at head end . The computer system may comprise for example a computer server running a particular operating system e.g. a version of the UNIX or Windows operating system . The computer system may receive out of band communication from terminals via a connection to the network controller. For example the connection may comprise an Ethernet connection and the network controller may comprise a controller from General Instruments Corp now part of Motorola Inc. or another supplier. The computer system also communicates with and controls transport stream generator via a network connection such as an Ethernet connection.

Session manager manages delivery of IPG pages to terminals on a number of cable nodes with each node being served by a separate IPG multiplexed transport stream generated at a corresponding transport stream generator . Session manager also monitors demand cast stream usage by terminals . Session manager tracks IPG demand cast streams that are acquired by at least one terminal . For example session manager can maintain a table that dynamically lists which terminals are using each stream. This tracking is performed for each IPG multiplexed transport stream managed by session manager .

Session manager also accepts messages from terminals indicating that they have acquired released or requested demand cast streams. A new terminal that has acquired a demand cast stream is registered i.e. added to the stream and a terminal that has released a demand cast stream is removed from the registry for the stream. Session manager informs the corresponding transport stream generator if there is no longer any terminals registered to a particular demand cast stream and also informs transport stream generator when a terminal requests a demand cast stream. In one embodiment session manager may time out acquisition of a stream by any terminal if the terminal has not released the stream within a particular period of time e.g. a few minutes . The time out may be implemented by removing terminals from the registry for the stream after the particular period of time.

Transport stream generator may comprise in one embodiment a computer system residing at head end . The computer system may comprise for example a computer server running a particular operating system e.g. a version of Windows or UNIX operating system . Alternatively transport stream generator may be located apart from session manager for example at local neighborhood equipment . Each transport stream generator is coupled to an associated session manager for example via an Ethernet network. Transport stream generator may generate one or more IPG multiplexed transport streams with each transport stream being broadcast to a respective node in the distribution system.

In one embodiment the IPG multiplexed transport stream comprises an MPEG transport stream. In this case transport stream generator may communicate with terminals via tables in the private section of the MPEG transport stream. Such table may include a list of available demand cast streams along with the address of the source transport stream generator and information to identify the particular IPG multiplexed transport stream to which the table belongs.

Transport stream generator manages each IPG multiplexed transport stream that it generates. Transport stream generator receives information from session manager indicating whether each demand cast stream being served is currently being acquired by any terminal or not at all. That is transport stream generator is informed by session manager when a demand cast stream is no longer being acquired by any terminals .

In one embodiment transport stream generator maintains a status for each demand cast stream being served. The status for each stream is adjusted upon receipt by transport stream generator of certain messages from session manager . In an embodiment the basic states for the stream status comprise an acquired state that denotes that the demand cast stream is being acquired by one or more terminals and a released state that denotes that the demand cast stream is not being acquired by any terminal . Transport stream generator continues to serve acquired demand cast streams by multiplexing them into the appropriate transport streams and replaces released demand cast streams with new demand cast streams upon receipt of request messages from session manager . In an embodiment transport stream generator also keeps track of the order in which the streams are released so that the oldest released stream may be used as the most likely candidate for replacement.

If all demand cast streams in a particular IPG multiplexed transport stream are acquired then a new stream may not be inserted into the transport stream and transport stream generator may refuse any new requests. In such case a message indicating such refusal may be sent to session manager and or the requesting terminal .

In an embodiment terminal comprises a set top terminal STT for use by a service subscriber. The STT may comprise an embedded system that includes a tuner a demultiplexer and a decoder as described in further detail below. The STT drives the subscriber s display unit or TV set and it may be coupled to transport stream generator via an RF feed from a cable distribution network. The IPG pages may be received from a particular IPG multiplexed transport stream on a particular modulated carrier signal. In an embodiment the IPG multiplexed transport stream may comprise an ensemble of elementary MPEG video streams with each elementary stream representing a portion of the guide.

In an embodiment terminal includes IPG client software application that resides at the terminal. The IPG client application is responsible for presenting the IPG to the viewer and demultiplexes and decodes IPG pages requested by the user. If a requested page is already being received via the IPG multiplexed transport stream then the IPG client application acquires the stream immediately and sends a message to session manager indicating that it has acquired the stream. And if the requested page is not in the IPG multiplexed transport stream then the IPG client application sends a request message to session manager . Subsequently the IPG client application acquires the stream once it is transmitted by transport stream generator and received by terminal . In addition if a stream is no longer being acquired the IPG client application sends a release message to session manager . In an embodiment if there is no remote control or other activity by the user for a particular period of time e.g. a few minutes then the IPG client application times out the acquisition. The time out may be accomplished for example by sending a release message to session manager and acquiring a broadcast stream instead.

The demand cast system includes three major subsystems the set top terminal STT the session manager SM and the transport stream generator TSG . For a better understanding of the invention a specific implementation of each subsystem is now described. Other implementations are also possible and within the scope of the invention.

The STT is the end user or cable service subscriber tuner demultiplexer decoder and embedded system. In an embodiment the STT used in initial pilot deployments of the demand cast system is the General Instruments DCT 2000. The STT is coupled to the cable operator RF feed and drives the subscriber s display unit or TV set. The IPG content is provided in an IPG transport stream i.e. IPG multiplex located on a specific QAM carrier. The IPG multiplex contains an ensemble of elementary MPEG video streams with each elementary video stream representing portions of the guide and some of these streams representing guide grid pages. The STT receives messages from the head end via tables in the private section of the IPG transport stream in band messaging. The STT sends messages to the head end via an out of band back channel or return path.

The STT includes an IPG application that is responsible for presenting e.g. the DIVA Interactive Program Guide to the viewer. The IPG application demultiplexes and decodes IPG pages requested by the user. If a particular page is in the IPG transport stream the STT can quickly acquire the stream and inform the session manager that it has requested the page. And if the page is not in the IPG multiplex the STT also sends a message to the session manager that it has requested it. The STT then acquires the stream once the stream is included in the IPG multiplex. When the STT no longer acquires a particular guide stream it informs the session manager that it has released the stream.

In an embodiment if the STT is on a particular demand cast stream for more than a particular period of time e.g. 2 minutes without any remote control activity the STT times out. The STT then acquires a broadcast stream instead and informs the session manager that it has released the demand cast stream.

In an embodiment the session manager is implemented with a computer system e.g. a SPARC Station running the Solaris operating system from SunMicrosystems Inc. residing at the cable head end. The session manager is coupled via Ethernet to the server side of a network controller NC from General Instruments Corp. and is the receiver of out of band return path messages originating from the STTs. The session manager can handle STTs on multiple cable nodes each node being served by a separate IPG multiplex. The session manager communicates with and controls the transport stream generators via Ethernet. The transport stream generators generate the IPG transport streams.

The session manager manages one or more cable networks and monitors demand cast stream usage. The session manager also tracks IPG demand cast streams that are acquired by at least one STT and maintains a dynamic list of STTs that are using each demand cast stream. This tracking is achieved for each IPG multiplex managed by the session manager. The session manager accepts messages from the STTs indicating requests for or release of demand cast streams. An STT that has acquired a demand cast stream is registered to the stream and an STT that has released a demand cast stream is removed from the stream s registry. The session manager informs the transport stream generator if there are no longer any STTs using a particular demand cast stream and also informs the transport stream generator when an STT requests a demand cast stream.

In an embodiment the session manager times out an STT from a demand cast stream if the STT has not released the stream within a particular time period e.g. a few minutes . The session manager can achieve this by removing the STT from the demand cast stream s registry.

In an embodiment the transport stream generator is implemented with a computer system e.g. running a WindowNT operating system from Microsoft Corp. residing at the cable head end. The transport stream generator is coupled via Ethernet to the session manager controlling it. The transport stream generator produces one or more IPG transport streams with each transport stream being broadcast to a respective node. In an embodiment the transport stream generator communicates with the STTs via tables in the private section of the IPG transport streams. The table contains a list of the available demand cast streams along with the IP address of the source transport stream generator e.g. its IP address and the channel number of the IPG multiplex i.e. which multiplex it is in the transport stream generator .

The transport stream generator manages the transport stream for each IPG multiplex it generates. The transport stream generator receives information from the session manager for each demand cast stream indicating whether the stream is currently acquired by any STT or released by all STTs. The transport stream generator is informed by the session manager when there is no longer any STT on a particular demand cast stream and when an STT requests a demand cast stream.

The transport stream generator maintains the status for all demand cast streams in each IPG multiplex. The transport stream generator adjusts the status for each demand cast stream each time it receives a message from the session manager for the stream. The basic status for each stream includes acquired for a stream that is in use by one or more STTs and released for a stream that is not in use by any STT. The transport stream generator continues to send acquired streams in its IPG multiplexes and replaces released streams with new demand cast streams as they are requested. The transport stream generator also keeps track of the age of the released streams and the best candidate for replacement is the oldest released stream. If all demand cast streams in a multiplex are acquired then it may not be possible to insert a new stream when requested and the transport stream generator can refuse to process the request.

An embodiment of an interactive program guide in accordance with the invention is described below. The embodiment is described for purposes of illustration and is not meant to limit the scope of the invention.

In such a system when a request for a guide page is made by a particular terminal either one of two scenarios can occur. First if the page is already in the IPG broadcast then the terminal simply acquires the stream for the page from the IPG broadcast. Alternatively if the page is not in the broadcast then the terminal transmits a request for the page to the head end. The head end may then fulfill the request by replacing the currently transmitted stream that is least frequently accessed and not currently accessed with another stream containing the requested page.

Subsequently the terminal eventually ends its access to the guide page. This may occur because the user has instructed the terminal to view a different page. Alternatively this may occur because of a time out due to inactivity over a particular period of time e.g. 2 minutes . In any case if the terminal is no longer accessing the guide page then the terminal transmits a message to the head end indicating that it has released the corresponding stream. Informing the head end when demand cast pages become released ensures that non accessed demand cast pages become available for substitution as described above.

An advantage of the invention is that if a particular page is extensively accessed such as a page listing a major sports event then the system needs to insert the particular page only once into the transport stream. Once inserted the page is readily accessible by any number of terminals without requiring additional bandwidth. Other systems may be more susceptible to blockage which occurs for example when a newly requested page cannot be inserted into the transport stream because no bandwidth is available within the transport stream.

An IPG delivery system in accordance with an embodiment of the invention is a two way system that is capable of supporting two way communication between the terminals on the cable network and the equipment in the cable head end. For example communication may be transmitted from the terminals to the head end via a back channel and content may be transmitted from the head end to the terminals by insertion into a transport stream.

Time slot region includes a first time slot object and a second time slot object that indicate the time slots for which program guide is being provided on the IPG page. Guide region is used to display program listings for a group of channels. In the embodiment shown in the program listings show the available programming in two half hour time slots. Guide region thus includes a number of channel objects through used to display channel information for a guide listing of channels. Guide region further includes a pair of channel indicator icons and that identifies the current cursor location.

Program description region is used to present descriptive information relating to a particular program selected from the program listings or may be used to show other information. Video region may be used to display images videos text or a combination thereof which may be used for advertisements previews or other purposes. Video region may be implemented as described above in a server centric manner. Logo region may include a logo of a service operator or other entity and may be optionally displayed. Date time display may be configurable by the user and may also be optionally displayed.

Icon region is used to display various icons which may be created and or enabled by the user. Each icon in icon region can represent a filter or a link to another IPG page or a particular interface. Each filter selects a particular type of programming to be included in the program listings shown in guide region . For example a Pay Per View PPV icon may be a filter that selects only PPV programming to be included in the program listings. A Favorites icon may be a filter that selects only channels designated by the user to be among his or her favorites. A Movies icon may be a filter that selects only movies or movie channels. A Kids icon may be a filter that selects only channels for children or programming appropriate for or produced for viewing by children. A Sports icon may be a filter that selects only sports channels or sports related programming. A Music icon is a link to a music interface. An Options icon may also be a link to a menu of IPG options that the user may select amongst. The options may include 1 configuration and selection deselection information of IPG related services 2 custom information such as deactivating some of the filters or accessing the custom condensed listing menus and others. A Weather icon may be a link to an interface to weather information.

As an illustration in a system comprising 80 channels of information the channels are displayed in 10 channel groups having associated with them two half hour time slots. In this organization 8 video PIDs are provided to carry the present time channel time title information one or more audio PIDs are provided to carry the audio barker and or one or more data PIDs or other data transport method are provided to carry the program description data overlay data and the like. To fully broadcast interactive program information for up to 24 hours in advance 192 e.g. 8 24 video PIDs are provided along with one or more audio PIDs and optionally one or more data PIDs.

The time depth of a program guide which is defined by the amount of time in programming is provided in the broadcast video PIDs for the particular channel groups. The channel depth of the program guide is defined by the number of channels available through the guide as compared to the total number of channels in the system . In a system providing only half of the available channels via the broadcast video PIDs the channel depth is 50 . In a system providing 12 hours of look ahead time slot the time depth is 12 hours. In a system providing 16 hours of look ahead time slot and 4 hours of look back time slot the time depth is 16 4 hours.

The video streams representing the IPG are sent in a one or more transport streams within the form of a single program or multi programs as described above. A user desiring to view the next 1 hour time interval e.g. 10 00 11 00 may activate a scroll right object or move the joystick to the right when a program within guide region occupies the final displayed time interval . Such activation results in a controller within the terminal noting that a new time interval is desired. The video stream desired for the new time interval is then decoded and displayed. If the corresponding video stream is within the same transport stream i.e. a new PID then the stream is simply decoded and presented. If the desired video stream is within a different transport stream then that transport stream is extracted from the broadcast stream and the desired video stream is decoded and presented. And if the desired transport stream is within a different broadcast stream then that broadcast stream is tuned the desired transport stream is extracted and the desired video stream is decoded and presented.

A user interaction requesting in a prior time interval or a different set of channels results in the retrieval and presentation of the desired video stream. If the desired video stream is not part of the broadcast video streams then a pointcast session for example may be initiated as described above for . For this pointcast session the terminal sends a message to the head end via a back channel requesting a particular stream. The head end processes the request retrieves the desired stream from the information server and incorporates the stream within a transport stream as a video PID. Preferably the desired stream is inserted into the transport stream currently being tuned selected by the terminal. The head end further informs the terminal which PID should be received and from which transport stream it should be demultiplexed. The terminal then retrieves the desired video PID. If the video PID is within a different transport stream the terminal first demultiplexes that transport stream possibly by tuning a different QAM stream within the forward channel .

Typically upon completion of the viewing of the desired stream the terminal indicates to the head end that it no longer needs the stream. In response the head end tears down the pointcast session. The terminal then returns to the broadcast stream from which the pointcast session was launched. However as described above in B and C the method for sharing pointcasts may delay or avoid the need to tear down the pointcast session if another terminal is still utilizing the pointcast. In addition the above described pointcast sharing technique more efficiently utilizes the network bandwidth allocated for pointcasts.

Push demand casts and pull demand casts are associated with different delays i.e. latencies . Access to IPG pages with low latency is a desirable feature in interactive program guide. A system that only pushes IPG pages may be able to offer access with the lowest possible latency whereas a system that only pulls pages may incur significant processing delays in accessing each page.

In accordance with an embodiment of the invention more frequently accessed IPG pages such as those in the current time slot and near look ahead time slots and perhaps prime time slots are push demand cast continually so that access can be achieved with low latency. Less frequently accessed e.g. far look ahead pages are pull demand cast.

Four architectures for delivery of interactive program guide are described below. These architectures are illustrative of the architectures that may be used to implement various aspects of the invention. However other architectures may also be used and are within the scope of the invention.

Head end couples to a number of terminals via an in band network and or an out of band OOB network. Head end includes various elements that couple together and interact with each other to provide the desired functionality. In the embodiment shown in head end includes an advertising HTML content source an IPG content source a compositor an encoder a processor a multiplexer MUX an encryptor an in band delivery system a controller a session manager an access manager a bandwidth manager and an out of band OOB equipment .

It is noted that session manager in encompasses the functionality of a number of elements in including session manager and bandwidth manager . Also it is noted that transport stream generator in also encompasses the functionality of a number of elements in including processor and multiplexer .

As shown in local neighborhood equipment couples to head end via an in band network and an out of band messaging system. Local neighborhood equipment also couples to a number of terminals via a local in band network. Local neighborhood equipment includes various elements that couple together and interact with each other to provide the desired functionality. Local neighborhood equipment typically includes a subset of the type of components in head end . In the embodiment shown in local neighborhood equipment includes a processor a multiplexer an encryptor a local delivery system a controller a session manager SM an access manager AM and a bandwidth manager BWM .

Local IPG center generates guide page user interface UI screens and periodically sends the UI screens to an IPG server at head end . A multiple service operator MSO third party IPG add on content may be provided to IPG server from MSO equipment within head end . For example the add on content may include real time advertisement video or HTML pages for electronic commerce.

IPG server composes C encodes E processes P multiplexes M and modulates QAM the IPG content guide plus add on content and sends it to a combiner . Combiner combines the IPG content with broadcast TV premium content e.g. HBO pay per view PPV and other content from a multiple service operator MSO content delivery system . The combined content is then broadcast to terminals via an in band distribution network .

Upon viewer tuning of terminal to an IPG channel an IPG application at the terminal processes the IPG stream and provides the IPG via an application programming interface API to a native application running on the terminal. Native application decodes and presents the IPG to the viewer.

In one embodiment the TV program guide for a current time period 1 hour is broadcast to viewers. In addition two weeks of look ahead TV programming may be delivered to viewers on demand via demand cast. Upon a viewer action of moving a cursor to a look ahead time interval the terminal sends a request via a back channel to a session manager SM e.g. via an out of band channel to a reverse path demodulator RPD then to a network controller NC then to session manager . Session manager then causes IPG server to multiplex the requested IPG page into the IPG stream.

Session manager also interacts with a subscriber billing interface in VOD system to coordinate access to VOD services from a link in the IPG user interface. The user interface also provides for access to premium content and pay per view purchasing by interaction through a two way interface to an MSO customer management system CMS and digital access controller DAC in service center . DAC generates digital encryption related keys.

Third architecture also includes a bandwidth manager BWM . As described above bandwidth manager provides techniques to more efficiently utilize the limited bandwidth available for distribution of the IPG.

It can be noted that session manager of encompasses the functionality of a number of elements in including session manager and bandwidth manager . It can also be noted that transport stream generator in encompasses the functionality of a number of elements in including the processor P and the multiplexer M .

Fourth architecture differs from third architecture primarily in that some of the elements are distributed from head end to a number of hubs in the distribution system. In particular combiner processor P multiplexer M and modulator QAM are moved from head end to each hub . Thus the functionality of transport stream generator is transferred to hubs .

Demultiplexer in response to a control signal TD produced by controller demultiplexes i.e. extracts an audio stream A and a video stream V. The audio stream A is provided to audio decoder which decodes the audio stream and provides a decoded audio stream to an audio processor not shown for subsequent presentation. The video stream V is provided to video decoder which decodes the compressed video stream V to produce an uncompressed video stream VD that is provided to video compositor . OSD processor in response to a control signal OSD produced by controller produces a graphical overlay signal VOSD that is provided to video compositor . In an embodiment during transitions between streams representing different IPG pages the buffers in the decoder are not reset. As such the pages seamlessly transition from one page to another.

Video compositor merges the graphical overlay signal VOSD and the uncompressed video stream VD to produce a modified video stream i.e. the underlying video images with the graphical overlay that is provided to frame store unit . Frame store unit stores the modified video stream on a frame by frame basis according to the frame rate of the video stream. Frame store unit provides the stored video frames to a video processor not shown for subsequent processing and presentation on a display device.

Controller includes an input output module a microprocessor support circuitry an infrared IR receiver and a memory . Input output module forms an interface between controller and tuner transport demultiplexer OSD processor back channel modulator and remote control unit . Microprocessor cooperates with support circuitry such as power supplies clock circuits cache memory and the like as well as circuits that assist in executing the software routines that are stored in memory .

Although controller is depicted as a general purpose processor that is programmed to perform specific interactive program guide control function in accordance with the invention the controller can be implemented in hardware as an application specific integrated circuit ASIC . As such the process steps described herein are intended to be broadly interpreted as being equivalently performed by software hardware or a combination thereof.

In the embodiment shown in remote control unit includes an 8 position joystick a numeric pad a Select key a Freeze key and a Return key. User manipulations of the joystick or keys of the remote control device are transmitted to controller via an infrared IR link or an RF link. Controller is responsive to such user manipulations executes related user interaction routines and uses particular overlays that are available in an overlay storage .

After the signal is tuned and demodulated the video streams are recombined via a stream processing routine to form the video sequences that were originally compressed. Stream processing routine employs a variety of methods to recombine slice based streams including using PID filter and demultiplexer . Note that the PID filter implemented illustratively as part of demodulator is utilized to filter the undesired PIDs and retrieve the desired PIDs from the transport stream. The packets to be extracted and decoded to form a particular IPG page are identified by a PID mapping table . After stream processing routine has processed the streams into the correct order assuming the correct order was not produced in the LNE the slices are sent to MPEG video decoder to generate the original uncompressed IPG pages.

If a transport stream with two PIDs as described above is to be received and processed e.g. for slice based decoding stream processing unit recombines the intra coded slices with their corresponding predictive coded slices in the appropriate order before the recombined streams are coupled to video decoder . This process can be implemented by software or hardware or a combination thereof. In the slice structure only one slice is assigned per row and each row is divided into two portions e.g. the guide portion and the video portion . In order for the receiving terminal to reconstruct the original video picture one method is to construct the first row from its two slices in the correct order by retrieving two corresponding slices from the transport stream then construct the second row from its two slices and so on. In this manner the terminal processes two PIDs in the same time period.

PID filter can be programmed to pass the desired PIDs and filter out the undesired PIDs. The desired PIDs are identified by controller after the viewer selects particular IPG page to review. PID mapping table is accessed by controller to identify which PIDs are associated with the desired IPG. If PID filter is available in the receiver terminal it is used to retrieve the PIDs containing slices for the guide and video portions. Demultiplexer then extracts packets from these PIDs and provides the packets to video decoder in the order in which they arrived. If the STT does not have optional PID filter then demultiplexer performs the PID filtering and extracting functions. Depending on the particular STT implementation a corresponding method is used to recombine and decode slice based streams.

A specific messaging protocol for communicating between the major components of the system is now described in relation to . Other messaging protocols can also be used and are within the scope of the invention.

In an embodiment the source transport stream generator communicates with a terminal via for example a one way in band channel. The communication may be for example in the form of a demand cast index table within a private section of the IPG MPEG transport stream.

In an embodiment the terminal communicates with the session manager via for example a one way out of band return path. The return path may be implemented for example using a user datagram protocol internet protocol UDP IP service to connect the terminal to a network controller NC at the session manager.

In an embodiment the session manager communicates with the source transport stream generator via for example a two way communications channel. The two way communications channel may comprise for example a TCP IP connection over an Ethernet network.

Messages from the session manager to the transport stream generator may be acknowledged by the transport stream generator.

The following relates to stream status and conversions of status in accordance with a specific embodiment of the invention. Other stream statuses and conversions of status can also be implemented and are within the scope of the invention.

The transport stream generator models bandwidth usage for each IPG multiplexed transport stream that it is managing. Each demand cast stream within each transport stream may be either active or inactive. Active streams are currently being multiplexed into the transport stream and inactive streams are not currently being multiplexed into the transport stream.

Note that the transport stream generator may remove all the passive demand cast streams from their respective IPG multiplexes and replace them with null packets. It may be advantageous to leave passive demand cast streams in the multiplex in case a terminal requests it in which case the latency will be minimized.

The transport stream generator receives messages from the session manager. Messages received from the session manager are 

If the transport stream generator receives a release demand cast stream message from the session manager then it acknowledges the session manager by sending a success message. If the demand cast stream is currently acquired then the transport stream generator changes the status of the stream to released. 

Removal of a released demand cast stream can be done. However such removal unless necessary may be disadvantageous. Initially the reference to the released demand cast stream is removed from the demand cast index table then a short time later e.g. few seconds later the stream can be physically removed from the multiplex. This delay between the removal from the table and the removal from the multiplex prevents a race condition whereby a terminal is acquiring a demand cast stream while the transport stream generator is in the process of removing it. Therefore only passive streams are removed in accordance with an embodiment of the invention.

The ratio of passive to released demand cast stream may be specified in the transport stream generator configuration file. It may be maintained as a percentage e.g. 10 of released streams are converted to passive or it can be maintained as an absolute number e.g. so as to ensure that there are usually two or three inactive demand cast streams .

The following are further technical aspects in accordance with a specific embodiment of the invention. Other variations are also possible and within the scope of the invention.

Set Top Terminal When the STT launches the IPG application it tunes to the QAM carrying the IPG transport stream. When the STT requests its first demand cast stream it opens the IPG channel with the session manager. When the QAM is tuned the STT acquires the demand cast index table and sends an Init command to the session manager.

Session Manager Initially the session manager has no knowledge of the IPG multiplex fed to its client STTs. Upon receiving a first request demand cast stream message from a STT the session manager verifies that it is aware of the MUX ID. MUX ID includes the transport stream processor IP address and MUX channel within the transport stream generator. If the session manager is aware then nothing happens. And if the session manager is not aware the transport stream generator opens a communication socket with the source transport stream generator. The session manager maintains a log where it registers all MUXes that it controls. For each MUX in the log the transport stream generator s IP address and MUX channel number is recorded.

Transport Stream Generator Initially the transport stream generator is configured through its own configuration file. Configuration includes the number of demand cast streams that can be supported by each IPG multiplex. The absolute number of passive streams or the ratio of passive streams to released streams is specified in the configuration file

Set Top Terminal When the STT does not see the PID of the demand cast stream it is acquiring in the demand cast index table it acquires a default IPG broadcast PID. If the STT does not see the demand cast index table the STT exits the IPG application.

Session Manager If the session manager is down upon reset it looks up transport stream generator log file and sends a reset command to the transport stream generator.

Transport Stream Generator When the transport stream generator receives a Reset command from the session manager it removes reference to all demand cast streams in the demand cast index table in the multiplex referenced by the MUX ID in the reset command. Then a short time e.g. a few second later the transport stream generator removes all the demand cast streams within the multiplex.

Set Top Terminal STT messages regarding demand cast streams include demand cast stream ID transport stream generator s IP address and the MUX channel number on the transport stream generator.

Session Manager The session manager can manage more than one transport stream generator. Each IPG multiplex is referred to by the IPG address of the host transport stream generator and the MUX channel number on the transport stream generator.

The systems shown in can be used to send interactive program guide IPG via broadcast and demand cast. The IPG pages can be efficiently encoded and transmitted from the head end by partitioning each IPG page into a number of regions or portions and separately encoding and transmitting the requested regions. For example IPG page shown in can be partitioned into guide region video region icon region and program description region . Each of these regions can then be encoded using a slice based encoding scheme. Thereafter the slices for each region can be transmitted from the head end via a respective assigned PID.

The partitioning of IPG page into regions coding of the regions using a slice based encoding scheme and recombination of the regions at the terminal are described in detail in U.S. patent application Ser. No. 09 466 990 entitled STREAM INDEXING FOR DELIVERY OF INTERACTIVE PROGRAM GUIDE and filed Dec. 10 1999 now U.S. Pat. No. 6 614 843 . Other techniques for efficiently coding and decoding regions of IPG pages are described in U.S. patent application Ser. No. 09 686 739 entitled TEMPORAL SLICE PERSISTENCE METHOD and APPARATUS FOR DELIVERY OF INTERACTIVE PROGRAM GUIDE filed Oct. 10 2000 now U.S. Pat. No. 6 754 271 . These applications are assigned to the assignee of the invention and incorporated herein by reference.

As noted above many IPG pages may be available to list the programming for a large number of channels over an extended e.g. two week time period. For example 472 IPG pages may be available for 200 channels for a two week period if each IPG page includes a guide listing for a group of 10 channels for a one hour time slot. Broadcasting all of these IPG pages would require a large amount of bandwidth and is typically not necessary. To conserve bandwidth IPG pages for the current and near look ahead time slots may be broadcast and other IPG pages may be sent via demand cast whenever requested by viewers.

For the information distribution systems described above requests for IPG pages from the terminals are typically sent via an out of band network that typically supports a lower bit rate than the in band network used to send programming and IPG. Thus efficient techniques for sending demand cast messages i.e. requests from the terminals to the head end are highly desirable.

An IPG page can be efficiently regenerated at a terminal by assembling the various regions that make up the page. Techniques for achieving this are described in the aforementioned U.S. Pat. Nos. 6 614 843 and 6 754 271. One or more of these regions e.g. the guide and video regions may be transmitted from the head end and one or more other regions e.g. the icon region may be generated at the terminal. Using the techniques described in U.S. Pat. No. 6 754 271 a new e.g. requested IPG page may be constructed by just replacing one or more existing regions e.g. the guide region of the current page with the corresponding regions of the new page. The remaining regions e.g. the icon and video regions of the current page are not updated by the new page.

In accordance with an aspect of the invention only the necessary region or regions not currently received at the terminal or needs to be updated are requested by the terminal and the head end transmits only the requested regions. This demand cast scheme can greatly reduce the amount of bandwidth required to support demand cast.

In a similar manner a video or program description may be requested by the terminal for the current IPG page. In this case using the techniques described in U.S. Pat. No. 6 754 271 only the requested region or regions for the IPG page need to be transmitted. These regions would then replace the corresponding regions in the current IPG page while the remaining regions are not updated.

An aspect of the invention provides an efficient messaging system to facilitate the IPG delivery scheme described above. This messaging system allows the terminals to specifically designate the requested item of information.

Body field includes the body of the request message. In an embodiment the format for body field is dependent on the particular region specified in region ID field . This provides a hierarchical message format that is well suited for defining sub regions of a picture in an MPEG encoding system. Message formats for some of the regions are described below.

Subtype field identifies the particular type of guide being requested. As described above and shown in a number of filters may be provided to allow a viewer to select a particular type of programming to be included in the guide listing displayed in the guide region. Such filters may include Pay Per View PPV Favorites Movies Kids Sports Music and so on. Each filter may thus be used to provide a different type of guide listing including condensed listings.

In an embodiment subtype field includes a value indicative of the particular filter if any selected by the viewer at the time the demand cast was requested. The terminal has knowledge of the filter currently selected by the viewer if any and can automatically fill in this field. Table 2 lists some of the filters that may be selected by the viewer and their exemplary assigned values for subtype field .

As the viewer requests a particular IPG page at a particular time the head end identifies the content of the requested page. For example if the viewer requests a pay per view page at a particular look ahead time and if there is a related condensed listing then the head end sends the condensed listing to the terminal. Otherwise the head end sends a regular IPG page that includes the requested pay per view listing. The same principle can be applied to other filters.

Time slot field identifies the particular time slot of the guide listing being requested. As noted above IPG pages may be available to list programming for an extended time period. If two weeks of guide listing is available and each IPG page covers a one hour time slot then 336 time slots are defined for that two week period. Time slot field is used to identify the specific time slot being requested. The requested time slot can be calculated based on a modulo Mod operation. For example a requested time slot of 500 can correspond to a time slot of 164. And if the current time slot is 100 according to the Mod operation then 64 is the requested time slot with reference to the current time.

For clarity the above scheme is described in the context of guide listing for two week period and one hour time slot. Other time periods and time slot durations may also be used and are within the scope of the invention. Also other schemes to identify the particular time slot being requested can also be contemplated and are also within the scope of the invention.

Page offset field identifies the particular IPG page selected from among a number of pages available for the selected time slot. As noted above IPG pages may be available for guide listing for a large number of channels. If 200 channels are available and each IPG page covers a group of 10 channels then 20 IPG pages may be available for each time slot. Page offset field is used to identify the specific page being requested.

Again the IPG page being requested can be identified using various schemes. In one scheme the IPG pages for all available channels for a particular time slot are numbered consecutively from 0 through N. For example if 200 channels are available and each IPG page includes guide listing for a group of 10 channels page 0 may include the guide listing for channels 1 through 10 page 1 may include the guide listing for channels 11 through 20 and so on and page 19 may include the guide listing for channels 191 through 200. For this scheme the value in page offset field identifies the specific page in the time slot corresponding to the requested page. In another scheme offset value from the current page number is referenced in the page offset field.

In the width of each field in message format is typically dependent on the number of possible values that may be specified for that field. As a specific example two bits would be sufficient to designate one of four possible regions for region ID field three bits would be sufficient to designate one of six possible filters or no filter for subtype field nine bits would be sufficient to designate one of 336 possible time slots and five bits would be sufficient to designate one of 20 possible IPG pages. Of course additional bits may be provided for some or all of the fields to account for possible future expansion. Thus any number of bits may be allocated to each of the fields and this is within the scope of the invention.

For an enhanced IPG it may be desirable to present another video in the video region that is different from the common video. For example if the viewer selects a particular filter icon then a video associated with that filter may be decoded and displayed in place of the common video. As another example if the viewer selects a preview for a particular program a video clip for that program may be requested if it is not already transmitted and presented for viewing. The video region may thus be used to implement a picture in picture feature for IPG. The particular video to be displayed in the video region may be selectable by the viewer or designated by the system. Message format can be used to request such video.

For such picture in picture scenarios subtype field can be used to refer to different types of video such as sport and kids related video which may be used for targeted advertising. In another embodiment instead of sub type field a channel number may be included in a second field to change to a video when the viewer changes channel. The time slot and page offset fields may not be used in such video requests and these fields may be used to reference more detailed information about the requested video.

In the IPG system described in the aforementioned U.S. Pat. No. 6 614 843 one common video sometimes referred to as a video barker is provided for all IPG pages. To regenerate a selected IPG page the guide region for the selected page is retrieved and recombined with the common video region using a slice based recombination method described in the aforementioned U.S. Pat. Nos. 6 614 843 and 6 754 271.

The message formats for the various regions described above in can be defined to have the same lengths e.g. 32 bits which may simplify the generation and processing of the messages. Alternatively the message formats can be defined to have the different lengths which may be more efficient. The message format for each region may be defined to include as many bits as required to specifically define that region.

The above described messaging scheme is especially suited for interactive program guide which is commonly used for television and broadcast distribution systems. However the messaging scheme describe above can also be advantageously used for other guide applications such as for example dining guide local shopping news and others. In general the above described scheme can be used to request delivery of any region or portion of any picture. For example the techniques described above can be used to request delivery of stock quotes sports scores headline news traffic reports other guides and so on.

The foregoing description of the preferred embodiments is provided to enable any person skilled in the art to make or use the invention. Various modifications to these embodiments will be readily apparent to those skilled in the art and the generic principles defined herein may be applied to other embodiments without the use of the inventive faculty. Thus the invention is not intended to be limited to the embodiments shown herein but is to be accorded the widest scope consistent with the principles and novel features disclosed herein.

