---

title: Synchronizing an active feed adapter and a backup feed adapter in a high speed, low latency data communications environment
abstract: Methods, apparatus, and products are disclosed for synchronizing an active feed adapter and a backup feed adapter in a high speed, low latency data communications environment that include brokering, by a stream administration server, establishment of an active message stream to a subscribing client device from an active feed adapter, the active message stream capable of communicating active application messages; brokering, by the server, establishment of a backup message stream to the client device from a backup feed adapter, the backup message stream capable of communicating backup application messages; receiving an active feed adapter state in backup messaging middleware of the backup adapter from active messaging middleware of the active adapter; determining, by the backup feed adapter, whether a backup feed adapter state is synchronized with the active feed adapter state; and administering, by the backup feed adapter, operation of the backup adapter in dependence upon the determining.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08676876&OS=08676876&RS=08676876
owner: International Business Machines Corporation
number: 08676876
owner_city: Armonk
owner_country: US
publication_date: 20060627
---
The field of the invention is data processing or more specifically methods apparatus and products for synchronizing an active feed adapter and a backup feed adapter in a high speed low latency data communications environment.

Messaging environments are generally available to provide data communication between message sending devices and message receiving devices using application messages. An application message is a quantity of data that includes one or more data fields and is passed from a message producer installed on a message sending device to a message consumer installed on a message receiving device. An application message is a form of message recognized by application software operating in the application layer of a data communication protocol stack as contrasted for example with a transport message or network message which are forms of messages recognized in the transport layer and the network layer respectively. An application message may represent for example numeric or textual information images encrypted information and computer program instructions.

A messaging environment may support point to point messaging publish and subscribe messaging or both. In a point to point messaging environment a message producer may address an application message to a single message consumer. In a publish and subscribe messaging environment a message producer may publish an application message to a particular channel or topic and any message consumer that subscribes to that channel or topic receives the message. Because message producers and message consumers communicate indirectly with each other via a channel or topic in a publish and subscribe environment message transmission is decoupled from message reception. As a consequence neither producers nor consumers need to maintain state about each other and dependencies between the interacting participants are reduced or eliminated. A publish and subscribe environment may therefore allow message publishers and message subscribers to operate asynchronously.

For further explanation of a messaging environment sets forth a block diagram illustrating a typical messaging environment for data communications that includes a message sending device a message receiving device and a message administration server . The message sending device is a computer device having installed upon it a message producer a set of computer program instructions configured for transmitting application messages to the message administration server for delivery to a message receiving device. In the example of the message producer transmits application messages to the message administration server on a message stream . The message sending device may produce the transmitted messages by generating the application messages from data of the message sending device itself or data received from some other source. The message receiving device is a computer device having installed upon it a message consumer a set of computer program instructions configured for receiving application messages from the message administration server . In the example of the message consumer receives the application messages from the message administration server on a message stream . In the example of the message stream and the message stream are data communication channels implemented using for examples the User Datagram Protocol UDP and the Internet Protocol IP .

In either a point to point messaging environment or a publish and subscribe messaging environment the application messages transmitted from message sending devices to message receiving devices typically pass through the message administration server . The message administration server is computer device having installed upon it a message administration module computer program instructions configured for administering the messages transmitted from the message producer to the message consumer . Examples of message administration modules may include the IBM WebSphere MQ the Open Message Queue from Sun Microsystems and the OpenJMS from The OpenJMS Group. In a point to point messaging environment the message administration module provides message queuing for the message consumer as the message administration module receives application messages addressed to the consumer from various message providers. In a publish and subscribe messaging environment the message administration module administers the various channels or topics to which message producers publish and message consumers subscribe. In either message environment the message administration module may also provide security services to ensure that the only messages arriving at the messaging consumer from the message producer are those messages that the message consumer is authorized to receive and that the message producer is authorized to send. Moreover the message administration module may also coordinate providing to the message consumer backup messages from a backup message producer in the event that a failure occurs on the message producer .

Current messaging environments such as for example the one described above with reference to have certain drawbacks. Application messages transmitted to a message administration server from a message sending device for delivery to a message receiving device are delayed in the message administration server until the message administration server can process the messages. The message processing that occurs in the message administration server increases the overall messaging latency of the messaging environment and decreases the overall speed for transmitting data in the data communications environment. Messaging latency is the time period beginning when a message producer transmits an application message and ending when a message consumer receives the application message.

In many data communication environments even slight increases in messaging latency are costly. Consider for example a financial market data environment. A financial market data environment is a data processing environment used to communicate information about financial markets and participants in financial markets. In a financial market data environment an application message is commonly referred to as a tick and represents financial market data such as for example financial quotes or financial news. Financial quotes include bid and ask prices for any given financial security. A bid refers to the highest price a buyer is willing to pay for a security. An ask refers to the lowest price a seller is willing to accept for a security. In a financial market data environment a message producer may provide quotes for the purchase or sale of financial securities based on real time financial market conditions and a message consumer may buy and sell financial securities based on financial quotes. When a message consumer buys or sells a financial security based on the quoted price provided by the message producer the ability of a message consumer to obtain the bid or ask in the quote for the financial security is largely influenced by messaging latency in the financial market data environment. The higher the messaging latency the less likely a buy or sell order generated by the message consumer will execute at or near the price stated in the financial quote. In fact a highly volatile security may fluctuate in price dramatically over a time period of a few seconds.

Current solutions to reduce messaging latency are to remove the message administration server from the messaging environment. In such current solutions the message sending devices send application messages directly to message receiving devices. The drawback to such current solutions is that removing the message administration server removes the administration functionality provided by the message administration server from the messaging environment. Current solutions therefore effectively offer no solution in messaging environments where the administrative functions of a message administration server are required. Consider again the financial market data environment example from above. In such an exemplary financial market data environment consider that a message receiving device is only authorized to receive financial quotes on certain financial securities or only authorized to receive financial quotes that are at least fifteen minutes old. Removing the message administration server from such a financial market data environment removes the ability to administer the messages received by the message receiving device from the message sending device in the financial market data environment.

An additional drawback to current messaging environments such as for example the one describe above with reference to involves the situation in which a message administration server receives application messages from both an active message sending device and a backup message sending device to provide redundancy in the event that the active message sending device should fail. Failover from the active messaging sending device to the backup message sending device in current messaging environments often takes many seconds and results in substantial increases in overall messaging latency. As such there is a vast need for improvement in the current art.

Methods apparatus and products are disclosed for synchronizing an active feed adapter and a backup feed adapter in a high speed low latency data communications environment that include brokering by a stream administration server establishment of an active message stream to a subscribing client device from an active feed adapter the active feed adapter characterized by an active feed adapter state the active message stream capable of communicating active application messages to the subscribing client device each active application message characterized by an active source stream sequence number and an active message sequence number brokering by the stream administration server establishment of a backup message stream to the subscribing client device from a backup feed adapter the backup feed adapter characterized by a backup feed adapter state the backup message stream capable of communicating backup application messages representing duplicates of the active application messages to the subscribing client device each backup application message characterized by a backup source stream sequence number and a backup message sequence number receiving the active feed adapter state in backup messaging middleware of the backup feed adapter from active messaging middleware of the active feed adapter determining by the backup feed adapter whether the backup feed adapter state is synchronized with the active feed adapter state and administering by the backup feed adapter operation of the backup feed adapter in dependence upon whether the backup feed adapter state is synchronized with the active feed adapter state.

The foregoing and other objects features and advantages of the invention will be apparent from the following more particular descriptions of exemplary embodiments of the invention as illustrated in the accompanying drawings wherein like reference numbers generally represent like parts of exemplary embodiments of the invention.

Exemplary methods apparatus and products for synchronizing an active feed adapter and a backup feed adapter in a high speed low latency data communications environment according to embodiments of the present invention are described with reference to the accompanying drawings beginning with . sets forth a network and block diagram illustrating an exemplary computer data processing system for synchronizing an active feed adapter and a backup feed adapter in a high speed low latency data communications environment according to embodiments of the present invention. The system of operates generally for synchronizing an active feed adapter and a backup feed adapter in a high speed low latency data communications environment according to embodiments of the present invention as follows A stream administration server brokers establishment of an active message stream to a subscribing client device from an active feed adapter wherein the active feed adapter is characterized by an active feed adapter state. A feed adapter state is an aggregation of values in computer memory that a feed adapter uses to perform data processing at any given moment. The active message stream is capable of communicating active application messages to the subscribing client device wherein each active application message is characterized by an active source stream sequence number and an active message sequence number. The stream administration server brokers establishment of a backup message stream to the subscribing client device from a backup feed adapter wherein the backup feed adapter is characterized by a backup feed adapter state. The backup message stream is capable of communicating backup application messages that represent duplicates of the active application messages to the subscribing client device. Each backup application message is characterized by a backup source stream sequence number and a backup message sequence number. Backup messaging middleware of the backup feed adapter receives the active feed adapter state from active messaging middleware of the active feed adapter . The backup feed adapter determines whether the backup feed adapter state is synchronized with the active feed adapter state. The backup feed adapter administers operation of the backup feed adapter in dependence upon whether the backup feed adapter state is synchronized with the active feed adapter state.

The high speed low latency data communications environment illustrated in includes a high speed low latency data communications network . The network includes an active feed adapter a backup feed adapter a stream administration server and a subscribing client device as well as the infrastructure for connecting such devices together for data communications. The network of is termed high speed low latency because the application messages sent between devices connected to the network on message streams administered by the stream administration server bypass the stream administration server . For example the application messages on the active message stream from the active feed adapter to the subscribing client device bypass the stream administration server . Similarly the application messages on the backup message stream from the backup feed adapter to the subscribing client device bypass the stream administration server . Although such messages are not delayed for processing in the stream administration server the stream administration server retains administration of the streams between devices connected to the high speed low latency data communications network .

Further contributing to the high speed low latency nature of network readers will note that the network does not include a router that is a computer networking device whose primary function is to forward data packets toward their destinations. Rather each device provides its own routing functionality for data communication through a direct connection with the other devices connected to the network . Because the network does not include a computer networking device dedicated to routing data packets the network of may be referred to as a minimally routed network. Although the exemplary network illustrated in does not include a router such a minimally routed network is for explanation only. In fact some high speed low latency networks useful in synchronizing an active feed adapter and a backup feed adapter in a high speed low latency data communications environment according to embodiments of the present invention may include a router.

As mentioned above the high speed low latency data communications environment depicted in includes two message streams . A message stream is a data communication channel between a communications endpoint of a sending device and a communications endpoint of at least one receiving device. A communications endpoint is composed of a network address and a port for a sending device or a receiving device. A message stream may be implemented as a multicast data communication channel. In a multicast data communication channel a one to many relationship exists between a destination address for a message and the communication endpoints of receiving devices. That is each destination address identifies a set of communication endpoints for receiving devices to which each message of the stream is replicated. A multicast data communication channel may be implemented using for example the User Datagram Protocol UDP and the Internet Protocol IP . In addition to a multicast data communication channel the message stream may be implemented as a unicast data communication channel. In a unicast data communication channel a one to one relationship exists between a destination address for a message and a communication endpoint of a receiving device. That is each destination address uniquely identifies a single communication endpoint of single receiving device. A unicast data communication channel may be implemented using for example the Transmission Control Protocol TCP and IP.

The exemplary system of includes a stream administration server connected to the high speed low latency data communications network through a wireline connection . The stream administration server of is a computer device having installed upon it a stream administration module a feed adapter library an authentication module an authorization module and an authorization policy . A stream administration module is a set of computer program instructions configured for synchronizing an active feed adapter and a backup feed adapter in a high speed low latency data communications environment according to embodiments of the present invention. The stream administration module operates generally for synchronizing an active feed adapter and a backup feed adapter in a high speed low latency data communications environment according to embodiments of the present invention by brokering establishment of an active message stream to a subscribing client device from an active feed adapter and brokering establishment of a backup message stream to the subscribing client device from a backup feed adapter . In addition the stream administration module may administer the message streams by providing security services such as authenticating the subscribing client device and authorizing the subscribing client device to receive application messages from the feed adapters on the message streams .

The communications between the stream administration module and the feed adapters may be implemented using a feed adapter library . The feed adapter library is a set of functions contained in dynamically linked libraries or statically linked libraries available to the stream administration module through a feed adapter library API . Through the feed adapter library the stream administration module of the stream administration server may administer the feed adapters including providing to the feed adapters the request for a message stream from a subscribing client device. Functions of the feed adapter library used by the stream administration module may communicate with the active feed adapter through network by calling member methods of a CORBA object calling member methods of remote objects using the Java Remote Method Invocation RMI API using web services or any other communication implementation as will occur to those of skill in the art.

 CORBA refers to the Common Object Request Broker Architecture a computer industry specifications for interoperable enterprise applications produced by the Object Management Group OMG . CORBA is a standard for remote procedure invocation first published by the OMG in 1991. CORBA can be considered a kind of object oriented way of making remote procedure calls although CORBA supports features that do not exist in conventional RPC. CORBA uses a declarative language the Interface Definition Language IDL to describe an object s interface. Interface descriptions in IDL are compiled to generate stubs for the client side and skeletons on the server side. Using this generated code remote method invocations effected in object oriented programming languages such as C or Java look like invocations of local member methods in local objects.

The Java Remote Method Invocation API is a Java application programming interface for performing remote procedural calls published by Sun Microsystems . The Java RMI API is an object oriented way of making remote procedure calls between Java objects existing in separate Java Virtual Machines that typically run on separate computers. The Java RMI API uses a remote procedure object interface to describe remote objects that reside on the server. Remote procedure object interfaces are published in an RMI registry where Java clients can obtain a reference to the remote interface of a remote Java object. Using compiled stubs for the client side and skeletons on the server side to provide the network connection operations the Java RMI allows a Java client to access a remote Java object just like any other local Java object.

In addition to administering the feed adapters the stream administration module of administers the message streams by providing security services such as for example authenticating the subscribing client device and authorizing the subscribing client device to receive application messages from the feed adapters on the message streams . The authentication module of is a set of computer program instructions capable of providing authentication security services to the stream administration module through an exposed authentication application programming interface API . Authentication is a process verifying the identity of an entity. In the exemplary system of the authentication module verifies the identity of the subscribing client device . The authentication module may provide authentication security services using a variety of security infrastructures such as for example shared secret key infrastructure or a public key infrastructure.

The authorization module of is a set of computer program instructions capable of providing authorization security services to the stream administration module through an exposed authorization API . Authorization is a process of only allowing resources to be used by resource consumers that have been granted authority to use the resources. In the example of the authorization module identifies the application messages that the subscribing client device is authorized to receive on the message streams . The authorization module of provides authorization security services using an authorization policy . The authorization policy is a set of rules governing the privileges of authenticated entities to send or receive application messages on a message stream. In a financial market data environment for example an authenticated entity may be authorized to receive application messages that include financial quotes for some financial securities but not other securities. The authorization policy may grant privileges on the basis of an individual entity or an entity s membership in a group.

In the exemplary system of active feed adapter is connected to the high speed low latency data communications network through a wireline connection . The active feed adapter is a computer device having the capabilities of converting application messages on active feed adapter source streams having a first format to application messages on a active feed adapter output stream having a second format and transmitting the application messages on the active feed adapter output stream to subscribing client devices. The active feed adapter source streams of are message streams from a feed source to the active feed adapter . The active feed adapter output stream of is a message stream administered by the stream administration server from the active feed adapter to the subscribing client device . Although the active feed adapter receives application messages having a first format on the active feed adapter source streams and transmits application messages having a second format on the active feed adapter output stream readers will note that application messages received on a feed adapter source stream are referred to in this specification as source stream messages to distinguish such messages from the application messages transmitted to a subscribing client device on a feed adapter output stream.

In the example of the active feed adapter receives active source stream messages on the active feed adapter source streams from a feed source . The feed source is a computer device capable of aggregating data into source stream messages and transmitting the messages to a feed adapter on one or more feed adapter source streams. In a financial market data environment for example a feed source may be implemented as a feed source controlled by the Options Price Reporting Authority OPRA . OPRA is the securities information processor for financial market information generated by the trading of securities options in the United States. The core information that OPRA disseminates is last sale reports and quotations. Other examples of feed sources in financial market data environment may include feed sources controlled by the Consolidated Tape Association CTA or The Nasdaq Stock Market Inc. The CTA oversees the dissemination of realtime trade and quote information in New York Stock Exchange and American Stock Exchange listed securities. The Nasdaq Stock Market Inc. operates the NASDAQ Market Center which is an electronic screen based equity securities market in the United States. In a financial market data environment a feed adapter source stream is referred to as a financial market data feed. 

Readers will note that illustrates two active feed adapter source streams . Each feed adapter source stream of is identified in the active feed adapter by an active source stream identifier. The feed source of may transmit source stream messages to the active feed adapter using more than one feed adapter source stream because the bandwidth required to transmit the messages on a single source stream is not available. In a financial market data environment for example a feed source may transmit ticks for financial securities whose ticker symbol begins with the letters A through M on one message stream and transmit ticks for the financial securities that begin with the letters N through Z on another message stream.

The active feed adapter of has installed upon it a conversion module a converter table converter functions messages message model messaging middleware and a transport engine . The conversion module is a software component that includes computer program instructions configured for converting source stream messages received on the active feed adapter source streams having a first format into application messages having a second format for transmission to subscribing devices on the active feed adapter output stream . The conversion module also includes computer program instructions configured for maintaining accessing and modifying an active feed adapter state such as for example an active message conversion application state and an active message conversion application health state.

The active message conversion application state is an aggregation of the values stored in computer memory of the active feed adapter used by the conversion module to convert source stream messages received on a source stream to application messages for transmission on an output stream. The conversion module of may add the values of the active message conversion application state to source stream messages to create application messages or may use the values of the active message conversion application state to perform administrative services. Often the active message conversion application state includes calculated values derived from a series of source stream messages. In a financial market data environment for example the active message conversion application state may include values that represent the daily trading volume of a security the highest price at which a security traded for the day or the lowest price at which a security traded for the day.

The active message conversion application health state is one or more metrics of the active feed adapter used by the active feed adapter or some other feed adapter to evaluate the relative performance of the active feed adapter compared to the other feed adapter. The active message conversion application health state may be implemented as a measurement of the available computer memory on the active feed adapter the processor usage on the active feed adapter the error count for the active feed adapter message transmission rate for the active feed adapter or any other metric as will occur to those of skill in the art.

The conversion module converts application messages from the first format to the second format according to the converter table . The converter table of is a table that specifies the converter functions capable of converting an application message from one format to another format. Utilizing multiple converter tables the conversion module may convert messages from a variety of input formats to a variety of output formats. In the example of the converter table specifies the converter functions capable of converting the active source stream messages received from the active feed adapter source streams having the first format to application messages having the second format for transmission to subscribing client devices on the active feed adapter output stream . The converter table of may be implemented using a structured document such as for example an eXtensible Markup Language XML document.

The converter functions of are functions capable of converting data fields in an application message from one format to another format or converting values of data fields from one value to another value. Converter functions may for example convert a 16 bit integer to a 32 bit integer convert a number stored in a string field to a 64 bit double floating point value increase the value of a particular data field by one or any other conversion as will occur to those of skill in the art. The conversion module of accesses the converter functions through a set of converter function APIs exposed by the converter functions .

In the example of conversion module uses the converter functions to convert active source stream messages to active application messages . The application messages of represent the active application messages for transmission to the subscribing client device . The format of the messages is specified in the message model . The message model is metadata that defines the structure and the format of the messages . The message model may be attached to and transmitted along with the application messages to the subscribing client device . More often however the subscribing client device and the feed adapters may receive the message model or its identifier from the stream administration server when the stream administration server brokers the message stream . A message model may be implemented using a structured document such as for example an XML document a Java object C object or any other implementation as will occur to those of skill in the art.

Before the conversion module of performs data processing on the source stream messages the conversion module receives the source stream messages from the feed source . The conversion module of may receive the source stream messages through a receiving transport engine not shown of the active feed adapter . The receiving transport engine is a software module that operates in the transport layer of the network stack and may be implemented according to the TCP IP protocols UDP IP protocols or any other data communication protocol as will occur to those of skill in the art. The receiving transport engine may provide the received source stream messages directly to the conversion module or to the messaging middleware which in turn provides the source stream messages to the conversion module.

After the conversion module of performs data processing on the application messages received from the feed source the conversion module provides the application messages to the messaging middleware . The messaging middleware of is a software component that includes computer program instructions configured for administering the application messages received from the conversion module and providing the application messages to the transport engine for transmission to a subscribing client device on the active feed adapter output stream . The conversion module interacts with the messaging middleware through a messaging middleware API exposed by the messaging middleware .

In addition to administering the application messages the messaging middleware of also provides high availability services between the active feed adapter the backup feed adapter and the subscribing client device and provides synchronization services between the active feed adapter and the backup feed adapter . Such synchronization services include transmitting the active feed adapter state to the backup feed adapter. Messaging middleware of provides synchronization services through a data communications channel between the active feed adapter and the backup feed adapter using for example member methods of an RMI object member methods of a CORBA object web services or any other communication implementation as will occur to those of skill in the art.

As mentioned above the active feed adapter state is an aggregation of values in computer memory that an active feed adapter uses to perform data processing at any given moment. The active feed adapter state may include for example the active message conversion application state or the active message conversion application health state discussed above. The active feed adapter state may however include other values used in data processing such as for example an active message stream state. The active message stream state is the state of the active message stream from the active feed adapter to the subscribing client device . The active message stream state may be characterized by a value for the active message sequence number and a value for the active source stream sequence number of the next active application message in the active messaging middleware for transmission to the subscribing client device .

The message stream states of two feed adapters may be used to determine whether messages streams from two feed adapters are synchronized by comparing the values for the message sequence number and the source stream sequence number of each message stream state. A source stream sequence number uniquely identifies the content of a particular application message. Two messages with the same source stream sequence number have the same content. Each application message transmitted by a feed adapter regardless of the message s content is assigned a message sequence number. A backup message stream is considered synchronized with an active message stream when identical message sequence numbers of the messages on both streams refer to messages with the same content. That is the messages streams are referred to as synchronized when the combination of values for the active message sequence number and the active source stream sequence number of the active message stream state match the combination of values for the backup message sequence number and the backup source stream sequence number of the backup message stream state.

The transport engine of is a software component operating in the transport and network layers of the OSI protocol stack promulgated by the International Organization for Standardization. The transport engine provides data communications services between network connected devices. The transport engine may be implemented according to the UDP IP protocols TCP IP protocols or any other data communications protocols as will occur to those of skill in the art. The transport engine includes a set of computer program instructions capable of encapsulating the application messages provided by the messaging middleware into packets and transmitting the packets through the active message stream to the subscribing client device . The messaging middleware operates the transport engine through a transport API exposed by the transport engine .

In the exemplary system of backup feed adapter is connected to the high speed low latency data communications network through a wireline connection . The backup feed adapter is a computer device having the capabilities of converting backup messages on backup feed adapter source streams having a first format to backup messages on a backup feed adapter output stream having a second format and transmitting the backup messages on the backup feed adapter output stream to subscribing client devices. The backup feed adapter source streams are message streams from the feed source to the backup feed adapter . The backup feed adapter output stream is a message stream administered by the stream administration server from the backup feed adapter to the subscribing client device .

The backup feed adapter of has installed upon it a conversion module a converter table converter functions that expose converter function APIs backup application messages for transmission from the backup feed adapter to the subscribing client device message model messaging middleware that exposes messaging middleware API and a transport engine that exposes a transport engine API . The components installed on the backup feed adapter operate in a manner similar to the components installed on the active feed adapter .

In addition the messaging middleware of the backup feed adapter of includes a set of computer program instructions for synchronizing an active feed adapter and a backup feed adapter in a high speed low latency data communications environment according to embodiments of the present invention. The messaging middleware of operates generally for synchronizing an active feed adapter and a backup feed adapter in a high speed low latency data communications environment according to embodiments of the present invention by receiving the active feed adapter state from active messaging middleware of the active feed adapter determining whether the backup feed adapter state is synchronized with the active feed adapter state administering operation of the backup feed adapter in dependence upon whether the backup feed adapter state is synchronized with the active feed adapter state and receiving the backup message conversion application health state of each of a plurality of backup feed adapters. For example the messaging middleware of the backup feed adapter may receive the active message stream state from the active feed adapter determine whether the active message stream state matches the backup message stream state and set the backup message stream state to match the active message stream state.

Similar to the messaging middleware the conversion module of the backup feed adapter in the example of also includes a set of computer program instructions for synchronizing an active feed adapter and a backup feed adapter in a high speed low latency data communications environment according to embodiments of the present invention. The conversion module of operates generally for synchronizing an active feed adapter and a backup feed adapter in a high speed low latency data communications environment according to embodiments of the present invention by determining whether the backup feed adapter state is synchronized with the active feed adapter state and administering operation of the backup feed adapter in dependence upon whether the backup feed adapter state is synchronized with the active feed adapter state. For example the conversion module of the backup feed adapter may receive the active message conversion application state from the messaging middleware of the backup feed adapter determine whether the active message conversion application state matches the backup message conversion application state and set the backup message conversion application state to match the active message conversion application state.

The subscribing client device in exemplary system of connects to the high speed low latency data communications network through a wireline connection . The subscribing client device of is a computer device capable of subscribing to the message streams transmitted by various feed adapters. In a financial market data environment for example a subscribing client device may subscribe to a tick to receive the bid and ask prices for a particular security on a message stream provided by a feed adapter controlled by a financial securities broker.

In the example of the subscribing client device has installed upon it an application a message library a stream administration library messaging middleware and a transport engine . The application of is a software component that processes data contained in the application messages received from one of the feed adapters . The application may process the data for utilization by the subscribing client device itself for contributing the data to another feed adapter or for contributing the data to some other device. In a financial market data environment the application installed on the subscribing client device may be a program trading application that buys or sells financial securities based on the quoted prices contained in ticks. The application may also be a value adding application that contributes information to a tick such as for example the best bid and ask prices for a particular security that is not typically included in the ticks provided by the feed source . The subscribing client device may then transmit the ticks to a feed adapter for resale to other subscribing client devices.

In the example of the application messages represent application messages received from one of the feed adapters and having a format specified by the message model . The application of processes the data contained in the application messages using the message library . The message library is a set of functions that are computer program instructions for creating accessing and manipulating messages according to the message model . The message library is accessible to the application through a message API exposed by the message library .

The communications between the subscribing client device and the stream administration server may be implemented using a stream administration library . The stream administration library is a set of functions contained in dynamically linked libraries or statically linked libraries available to the application through a stream administration library API . Through the stream administration library the application of the subscribing client device may for example request to subscribe to messages from a feed adapter modify an existing message subscription or cancel a message subscription. Functions of the stream administration library used by the application may communicate with the stream administration server through the network by calling member methods of a CORBA object calling member methods of remote objects using the Java RMI API using web services or any other communication implementation as will occur to those of skill in the art.

Before the application processes the data contained in the messages the application receives the messages from the messaging middleware which in turn receives the application messages from one of the feed adapter through the transport engine . The messaging middleware is a software component that provides high availability services between the subscribing client device the active feed adapter and the backup feed adapter . In addition the messaging middleware provides message administration services for the stream administration server . Such message administration services may include restricting the ability of the application to send and receive messages on a message stream to messages that satisfy certain constraints. The application and the stream administration library interact with the messaging middleware through a messaging middleware API .

The transport engine of is a software component operating in the transport and network layers of the OSI protocol stack promulgated by the International Organization for Standardization. The transport engine provides data communications services between network connected devices. The transport engine may be implemented according to the UDP IP protocols TCP IP protocols or any other data communications protocols as will occur to those of skill in the art. The transport engine includes a set of computer program instructions for receiving packets through the message streams from the feed adapters unencapsulating the application messages from the received packets and providing the application messages to the messaging middleware . The messaging middleware operates the transport engine through a transport API exposed by the transport engine .

The servers and other devices illustrated in the exemplary system of are for explanation not for limitation. Devices useful in synchronizing an active feed adapter and a backup feed adapter in a high speed low latency data communications environment according to embodiments of the present invention may be implemented using general purpose computers such as for example computer servers or workstations hand held computer devices such as for example Personal Digital Assistants PDAs or mobile phones or any other automated computing machinery configured for data processing according to embodiments of the present invention as will occur to those of skill in the art.

The arrangement of servers and other devices making up the exemplary system illustrated in are for explanation not for limitation. Although the connections to the network of are depicted and described in terms of wireline connections readers will note that wireless connections may also be useful according to various embodiments of the present invention. Furthermore data processing systems useful according to various embodiments of the present invention may include additional servers routers other devices and peer to peer architectures not shown in as will occur to those of skill in the art. Networks in such data processing systems may support many data communications protocols including for example Transmission Control Protocol TCP Internet Protocol IP HyperText Transfer Protocol HTTP Wireless Access Protocol WAP Handheld Device Transport Protocol HDTP and others as will occur to those of skill in the art. Various embodiments of the present invention may be implemented on a variety of hardware platforms in addition to those illustrated in .

Synchronizing an active feed adapter and a backup feed adapter in a high speed low latency data communications environment in accordance with the present invention in some embodiments may be implemented with one or more subscribing client devices stream administration servers and feed adapters computers that is automated computing machinery. For further explanation therefore sets forth a block diagram of automated computing machinery comprising an example of a subscribing client device useful in synchronizing an active feed adapter and a backup feed adapter in a high speed low latency data communications environment according to embodiments of the present invention. The subscribing client device of includes at least one computer processor or CPU as well as random access memory RAM which is connected through a high speed memory bus and bus adapter to processor and to other components of the subscribing client device.

Stored in RAM are an application application messages message model a message library a messaging middleware a stream administration library and a transport engine . Each application message is a quantity of data that includes one or more data fields and is transmitted from one device to another on a message stream. Application messages are typically created and processed by applications operating in application layers above the network and transport layers of a network protocol stack. As mentioned above an application message may represent numeric or textual information images encrypted information computer program instructions and so on. In a financial market data environment for example a message is commonly referred to as a tick and represents financial market data such as for example financial quotes or financial news. Each application message may be implemented using a structured document such as far example an XML document a Java object C object or any other implementation as will occur to those of skill in the art. The message model is metadata that defines the structure and format of the messages . The message model may also be implemented using a structured document such as for example an XML document a Java object C object or any other implementation as will occur to those of skill in the art. The application the message library the messaging middleware the stream administration library and the transport engine illustrated in are software components that is computer program instructions that operate as described above with reference to .

Also stored in RAM is an operating system . Operating systems useful in subscribing client devices according to embodiments of the present invention include UNIX Linux Microsoft NT IBM s AIX IBM s i5 OS and others as will occur to those of skill in the art. The operating system the application the messages the message model the message library the messaging middleware and the transport engine in the example of are shown in RAM but many components of such software typically are stored in non volatile memory also for example on a disk drive .

The exemplary subscribing client device of includes bus adapter a computer hardware component that contains drive electronics for high speed buses the front side bus the video bus and the memory bus as well as drive electronics for the slower expansion bus . Examples of bus adapters useful in subscribing client devices useful according to embodiments of the present invention include the Intel Northbridge the Intel Memory Controller Hub the Intel Southbridge and the Intel I O Controller Hub. Examples of expansion buses useful in subscribing client devices useful according to embodiments of the present invention may include Peripheral Component Interconnect PCI buses and PCI Express PCIe buses.

The exemplary subscribing client device of also includes disk drive adapter coupled through expansion bus and bus adapter to processor and other components of the exemplary subscribing client device . Disk drive adapter connects non volatile data storage to the exemplary subscribing client device in the form of disk drive . Disk drive adapters useful in subscribing client devices include Integrated Drive Electronics IDE adapters Small Computer System Interface SCSI adapters and others as will occur to those of skill in the art. In addition non volatile computer memory may be implemented for a subscribing client device as an optical disk drive electrically erasable programmable read only memory so called EEPROM or Flash memory RAM drives and so on as will occur to those of skill in the art.

The exemplary subscribing client device of includes one or more input output I O adapters . I O adapters in subscribing client devices implement user oriented input output through for example software drivers and computer hardware for controlling output to display devices such as computer display screens as well as user input from user input devices such as keyboards and mice. The exemplary subscribing client device of includes a video adapter which is an example of an I O adapter specially designed for graphic output to a display device such as a display screen or computer monitor. Video adapter is connected to processor through a high speed video bus bus adapter and the front side bus which is also a high speed bus.

The exemplary subscribing client device of includes a communications adapter for data communications with other computers and for data communications with a high speed low latency data communications network . Such data communications may be carried out serially through RS 232 connections through external buses such as a Universal Serial Bus USB through data communications networks such as IP data communications networks and in other ways as will occur to those of skill in the art. Communications adapters implement the hardware level of data communications through which one computer sends data communications to another computer directly or through a data communications network. Examples of communications adapters useful for synchronizing an active feed adapter and a backup feed adapter in a high speed low latency data communications environment according to embodiments of the present invention include modems for wired dial up communications IEEE 802.3 Ethernet adapters for wired data communications network communications and IEEE 802.11b adapters for wireless data communications network communications.

Although is discussed with reference to exemplary subscribing client devices readers will note that automated computing machinery comprising exemplary stream administration servers and exemplary feed adapters useful in synchronizing an active feed adapter and a backup feed adapter in a high speed low latency data communications environment according to embodiments of the present invention are similar to the exemplary subscribing client device of . That is such exemplary stream administration servers and feed adapters include one or more processors bus adapters buses RAM video adapters communications adapters I O adapters disk drive adapters and other components similar to the exemplary subscribing client device of as will occur to those of skill in the art.

For further explanation sets forth a flowchart illustrating an exemplary method for synchronizing an active feed adapter and a backup feed adapter in a high speed low latency data communications environment according to embodiments of the present invention. The method of includes brokering by a stream administration server establishment of an active message stream to a subscribing client device from an active feed adapter. The active feed adapter is characterized by an active feed adapter state . The active feed adapter state of represents the values in computer memory that specify a particular state of the active feed adapter. The active feed adapter state may include for example an active message stream state an active message conversion application state or an active message conversion application health state as described above.

The active message stream of represents a data communication channel between a communications endpoint of a subscribing client device and a communications endpoint of a feed adapter. A message stream may be implemented as a multicast data communication channel using the UDP IP protocols or a unicast data communication channel using TCP IP protocols as discussed above with reference to . The active message stream is capable of communicating active application messages from the active feed adapter to the subscribing client device. Each active application message represents an application message for transmission by the active feed adapter to the subscribing client device on the active message stream .

Each active application message of is characterized by an active source stream sequence number and an active message sequence number . The active source stream sequence number of represents the sequence number that uniquely identifies the source stream message received by the active feed adapter that was converted in to the active application message among other active source stream messages received by the active feed adapter on the same source stream. The active source stream sequence number also provides the relative transmission order for a particular active source stream message with respect to the other active source stream messages received in the active feed adapter.

The active message sequence number of represents a sequence number that uniquely identifies the active application message among other application messages for transmission from a particular active feed adapter to a subscribing client device. Similar to the active source stream sequence number the active message sequence number provides the relative transmission order for a particular active application message with respect to the other active application messages transmitted from the active feed adapter.

In the method of brokering by a stream administration server establishment of an active message stream to a subscribing client device from an active feed adapter may be carried out by receiving a subscription request from a subscribing client device to subscribe to messages from a feed adapter. The subscription request may be implemented as an XML document a call to a member method of a RMI object on the subscribing client device or any other implementation as will occur to those of skill in the art. The subscription request may include topics of the messages that the subscribing client device requests to receive from the feed adapter. A topic represents the characteristics of the messages that the subscribing client device requests. Using a topic a subscribing client device may specify the group of messages for receipt from the feed adapter. In a financial market data environment for example a subscribing client device may use a topic to request ticks from an OPRA feed source that contains quotes of an IBM option traded on the Chicago Board Options Exchange CBOE that includes the best bid and best ask for the IBM option on the CBOE.

Brokering by a stream administration server establishment of an active message stream to a subscribing client device from an active feed adapter according to the method of may also include providing the subscribing client device a destination address for the feed adapter. The destination address for the feed adapter is a multicast address or a unicast address used by the subscribing client device to listen for messages from a feed adapter. Using the destination address provided by the stream administration server the subscribing client device may establish the active message stream from the feed adapter to the subscribing client device.

Before the stream administration server provides the destination address for the feed adapter the stream administration server in the example of may perform several security services to ensure that the subscribing client device only receives messages from the feed adapter for which the subscribing client device is authorized to receive. In the method of brokering by a stream administration server establishment of an active message stream to a subscribing client device from an active feed adapter may also be carried out by authenticating the subscribing client device and authorizing the subscribing client device to receive messages from the feed adapter on the message stream . Authenticating the subscribing client device may be carried out by verifying client security credentials provided by the subscribing client device with the subscription request. The client security credentials may be implemented as a digital signature in a public key infrastructure a security token or any other security data as will occur to those of skill in the art for authenticating the identity of the originator of the subscription request. Authorizing the subscribing client device to receive messages from the feed adapter on the message stream may be carried out by identifying the privileges associated with the authenticated subscribing client device in dependence upon an authorization policy. An authorization policy is a set of rules governing the privileges of authenticated subscribing client devices requesting to receive data from a feed adapter.

The method of also includes brokering by the stream administration server establishment of a backup message stream to the subscribing client device from a backup feed adapter. The backup feed adapter is characterized by a backup feed adapter state . The backup feed adapter state of represents the values in computer memory that specify a particular state of the backup feed adapter. Similar to the active feed adapter state the backup feed adapter state may include for example a backup message stream state a backup message conversion application state or a backup message conversion application health state. In the method of brokering by the stream administration server establishment of a backup message stream to the subscribing client device from a backup feed adapter may be carried out in a manner similar to brokering by a stream administration server establishment of an active message stream to a subscribing client device from an active feed adapter as described above.

The backup message stream of represents a data communication channel between a communications endpoint of a subscribing client device and a communications endpoint of a feed adapter. The backup message stream is capable of communicating backup application messages that represent duplicates of the active application messages from the backup feed adapter to the subscribing client device. Each backup application message represents an application message for transmission by the backup feed adapter to the subscribing client device on the backup message stream .

Each backup application message of is characterized by a backup source stream sequence number and a backup message sequence number . The backup source stream sequence number of represents the sequence number that uniquely identifies the source stream message received by the backup feed adapter that was converted in to the backup application message among other backup source stream messages received by the backup feed adapter on the same source stream. The backup source stream sequence number also provides the relative transmission order for a particular backup source stream message with respect to the other backup source stream messages received in the backup feed adapter.

The backup message sequence number of represents a sequence number that uniquely identifies the backup application message among other application messages for transmission from a particular backup feed adapter to a subscribing client device. Similar to the backup source stream sequence number the backup message sequence number provides the relative transmission order for a particular backup application message with respect to the other backup application messages transmitted from the backup feed adapter.

The method of also includes receiving the active feed adapter state in backup messaging middleware of the backup feed adapter from active messaging middleware of the active feed adapter. Receiving the active feed adapter state in backup messaging middleware of the backup feed adapter from active messaging middleware of the active feed adapter according to the method of may include retrieving by the active messaging middleware the active feed adapter state and transmitting by the active messaging middleware to the backup messaging middleware the active feed adapter state through a data communications channel implemented using for example member methods of an RMI object member methods of a CORBA object web services or any other implementation as will occur to those of skill in the art. The active messaging middleware may obtain the active feed adapter state from values stored in the active message middleware itself or from a message conversion application of the active feed adapter.

The method of also includes determining by the backup feed adapter whether the backup feed adapter state is synchronized with the active feed adapter state . Determining by the backup feed adapter whether the backup feed adapter state is synchronized with the active feed adapter state according to the method of may be carried out by determining whether the active message stream state matches the backup message stream state and determining whether the values for the active message conversion application state match the values for the backup message conversion application state as discussed below with reference to .

The method of also includes administering by the backup feed adapter operation of the backup feed adapter in dependence upon whether the backup feed adapter state is synchronized with the active feed adapter state. Administering by the backup feed adapter operation of the backup feed adapter in dependence upon whether the backup feed adapter state is synchronized with the active feed adapter state may be carried out by setting the values for the backup message stream state to match the values for the active message stream state if the backup feed adapter state is not synchronized with the active feed adapter state reducing a backup stream transmission rate of the backup feed adapter if the backup feed adapter has previously transmitted a backup application message having a value for the backup source sequence number that matches the value for the active source sequence number of the active message stream state setting the values for the backup message conversion application state to match the values for the active message conversion application state if the backup feed adapter state is not synchronized with the active feed adapter state and failing one of a plurality of backup feed adapters in dependence upon the backup message conversion application health state of each backup feed adapter if the backup feed adapter state is not synchronized with the active feed adapter state as discussed below with reference to and .

For further explanation therefore sets forth a flowchart illustrating a further exemplary method for synchronizing an active feed adapter and a backup feed adapter in a high speed low latency data communications environment according to embodiments of the present invention that includes setting the backup message stream state to match the active message stream state if the backup feed adapter state is not synchronized with the active feed adapter state . The method of is similar to the method of in that the method of includes brokering by a stream administration server establishment of an active message stream to a subscribing client device from an active feed adapter brokering by the stream administration server establishment of a backup message stream to the subscribing client device from a backup feed adapter receiving the active feed adapter state in backup messaging middleware of the backup feed adapter from active messaging middleware of the active feed adapter determining by the backup feed adapter whether the backup feed adapter state is synchronized with the active feed adapter state and administering by the backup feed adapter operation of the backup feed adapter in dependence upon whether the backup feed adapter state is synchronized with the active feed adapter state.

The example of is also similar to the example of in that the active feed adapter of is characterized by an active feed adapter state the active message stream is capable of communicating active application messages to the subscribing client device each active application message is characterized by an active source stream sequence number and an active message sequence number the backup feed adapter of is characterized by a backup feed adapter state the backup message stream is capable of communicating backup application messages representing duplicates of the active application messages to the subscribing client device and each backup application message is characterized by a backup source stream sequence number and a backup message sequence number .

In the example of the active feed adapter state includes an active message stream state . The active message stream state represents the state of the active message stream from the active feed adapter to the subscribing client device. The active message stream state of is characterized by a value for the active message sequence number and a value for the active source stream sequence number of the next active application message in the active messaging middleware for transmission to the subscribing client device. Messaging middleware of an active feed adapter may identify the next active application message for transmission to the subscribing client device by retrieving the value for the active message sequence number from a data field or register that stores the active message sequence number of the next application message to be processed by the active feed adapter for transmission.

In the example of the backup feed adapter state includes a backup message stream state . The backup message stream state of represents the state of the backup message stream from the backup feed adapter to the subscribing client device. The backup message stream state of is characterized by a value for the backup message sequence number and a value for the backup source stream sequence number of the next backup application message in the backup messaging middleware for transmission to the subscribing client device. Messaging middleware of a backup feed adapter may identify the next backup application message for transmission to the subscribing client device by retrieving the value for the backup message sequence number from a data field or register that stores the backup message sequence number of the next application message to be processed by the backup feed adapter for transmission.

In the method of determining by the backup feed adapter whether the backup feed adapter state is synchronized with the active feed adapter state includes determining whether the active message stream state matches the backup message stream state . Determining whether the active message stream state matches the backup message stream state according to the method of may be carried out by comparing the values for the active message sequence number and the active source stream sequence number of active message stream state with the values for the backup message sequence number and the backup source stream sequence number of backup message stream state . If the combination of values for the active message sequence number and the active source stream sequence number of active message stream state matches the combination of values for the backup message sequence number and the backup source stream sequence number of backup message stream state then the backup feed adapter state is synchronized with the active feed adapter state . The backup feed adapter state is not synchronized with the active feed adapter state if the combination of values for the active message sequence number and the active source stream sequence number of active message stream state does not match the combination of values for the backup message sequence number and the backup source stream sequence number of backup message stream state .

In the method of administering by the backup feed adapter operation of the backup feed adapter in dependence upon whether the backup feed adapter state is synchronized with the active feed adapter state includes setting the backup message stream state to match the active message stream state if the backup feed adapter state is not synchronized with the active feed adapter state . Setting the backup message stream state to match the active message stream state according to the method of may be carried out by adjusting a message sequence number counter so that the backup feed adapter assigns the value of the active message sequence number of the active message stream state to the backup message sequence number of the backup application message having the same value for the backup source stream sequence number as the active source stream sequence number of the active message stream state if the backup feed adapter has not previously transmitted the backup application message having the same value for the backup source stream sequence number as the active source stream sequence number. The message sequence number counter is the logic in the backup messaging middleware that generates the next backup message sequence number that will be assigned to an application message.

When the backup feed adapter has previously transmitted the backup application message having the same value for the backup source stream sequence number as the active source stream sequence number administering operation of the backup feed adapter may be carried out by reducing a backup stream transmission rate of the backup feed adapter. For further explanation therefore sets forth a flowchart illustrating a further exemplary method for synchronizing an active feed adapter and a backup feed adapter in a high speed low latency data communications environment according to embodiments of the present invention in which administering operation of the backup feed adapter includes reducing a backup stream transmission rate of the backup feed adapter if the backup feed adapter has previously transmitted a backup application message having a value for the backup source sequence number that matches the value for the active source sequence number of the active message stream state. In the example of the backup stream transmission rate represents the number of backup application messages that the backup feed adapter transmits to the subscribing client device over a period of time. The backup stream transmission rate may be expressed in units of for example messages per second.

In the example of reducing a backup stream transmission rate of the backup feed adapter if the backup feed adapter has previously transmitted a backup application message having a value for the backup source sequence number that matches the value for the active source sequence number of the active message stream state may be carried out by repeated pausing transmission of backup application messages for a predetermined time period. The backup feed adapter may pause transmission after transmitting each backup application message after transmitting every other backup application message or any other frequency as will occur to those of skill in the art. Reducing the backup stream transmission rate of the backup feed adapter allows the active feed adapter to get ahead of the backup feed adapter in the transmission sequence for sending messages to the subscribing client device. When the active feed adapter gets ahead of the backup feed adapter in the transmission sequence the backup feed adapter may again determine whether the active message stream state matches the backup message stream state and set the backup message stream state to match the active message stream state if the backup feed adapter state is not synchronized with the active feed adapter state as discussed above with reference to the method of .

The other steps in the method of operate in a manner similar to the method of . The method of includes brokering by a stream administration server establishment of an active message stream to a subscribing client device from an active feed adapter brokering by the stream administration server establishment of a backup message stream to the subscribing client device from a backup feed adapter receiving the active feed adapter state in backup messaging middleware of the backup feed adapter from active messaging middleware of the active feed adapter determining by the backup feed adapter whether the backup feed adapter state is synchronized with the active feed adapter state administering by the backup feed adapter operation of the backup feed adapter in dependence upon whether the backup feed adapter state is synchronized with the active feed adapter state. The example of is also similar to the example of in that the active feed adapter of is characterized by an active feed adapter state that includes an active message stream state the active message stream is capable of communicating active application messages to the subscribing client device each active application message is characterized by an active source stream sequence number and an active message sequence number the backup feed adapter of is characterized by a backup feed adapter state that includes a backup message stream state the backup message stream is capable of communicating backup application messages representing duplicates of the active application messages to the subscribing client device and each backup application message is characterized by a backup source stream sequence number and a backup message sequence number .

As mentioned above administering operation of the backup feed adapter in dependence upon whether the backup feed adapter state is synchronized with the active feed adapter state may be carried out by setting values for the backup message conversion application state to match values for the active message conversion application state if the backup feed adapter state is not synchronized with the active feed adapter state. For further explanation therefore sets forth a flowchart illustrating a further exemplary method for synchronizing an active feed adapter and a backup feed adapter in a high speed low latency data communications environment according to embodiments of the present invention that includes setting the values for the backup message conversion application state to match the values for the active message conversion application state if the backup feed adapter state is not synchronized with the active feed adapter state .

The method of is similar to the method of in that the method of includes brokering by a stream administration server establishment of an active message stream to a subscribing client device from an active feed adapter brokering by the stream administration server establishment of a backup message stream to the subscribing client device from a backup feed adapter receiving the active feed adapter state in backup messaging middleware of the backup feed adapter from active messaging middleware of the active feed adapter determining by the backup feed adapter whether the backup feed adapter state is synchronized with the active feed adapter state and administering by the backup feed adapter operation of the backup feed adapter in dependence upon whether the backup feed adapter state is synchronized with the active feed adapter state. The example of is also similar to the example of in that the active feed adapter of is characterized by an active feed adapter state the active message stream is capable of communicating active application messages to the subscribing client device each active application message is characterized by an active source stream sequence number and an active message sequence number the backup feed adapter of is characterized by a backup feed adapter state the backup message stream is capable of communicating backup application messages representing duplicates of the active application messages to the subscribing client device and each backup application message is characterized by a backup source stream sequence number and a backup message sequence number .

In the example of the active feed adapter state includes an active message conversion application state of an active message conversion application of the active feed adapter. As mentioned above the active message conversion application state represents an aggregation of values stored in computer memory of the active feed adapter used by an active message conversion application to convert source stream messages received in the feed adapter to application messages for transmission to the subscribing client device An example of an active message conversion application may include the conversion module of the active feed adapter discussed above with reference to . The active message conversion application may add the values of the active message conversion application state to source stream messages to create application messages or may use the values of the active message conversion application state to perform administrative services. Often the active message conversion application state includes calculated values derived from a series of source stream messages. In a financial market data environment for example the active message conversion application state may include values that represent the daily trading volume of a security the highest price at which a security traded for the day or the lowest price at which a security traded for the day.

In the example of the backup feed adapter state includes a backup message conversion application state of a backup message conversion application of the backup feed adapter. Similar to the active message conversion application state the backup message conversion application state represents an aggregation of values stored in computer memory of the backup feed adapter used by an backup message conversion application to convert source stream messages received in the feed adapter to application messages for transmission to the subscribing client device An example of a backup message conversion application may include the conversion module of the backup feed adapter discussed above with reference to .

In the method of determining by the backup feed adapter whether the backup feed adapter state is synchronized with the active feed adapter state may be carried out by determining whether the values for the active message conversion application state match the values for the backup message conversion application state . Determining whether the values for the active message conversion application state match the values for the backup message conversion application state according to the method of may be carried out by receiving by a backup message conversion application from the backup messaging middleware of a backup feed adapter the active message conversion application state and comparing by the backup message conversion application the values for the active message conversion application state with the values for the backup message conversion application state . If the values for the active message conversion application state are equal to the values for the backup message conversion application state then the backup feed adapter state is synchronized with the active feed adapter state . The backup feed adapter state is not synchronized with the active feed adapter state if the values for the active message conversion application state are not equal to the values for the backup message conversion application state .

In the method of administering by the backup feed adapter operation of the backup feed adapter in dependence upon whether the backup feed adapter state is synchronized with the active feed adapter state includes setting the values for the backup message conversion application state to match the values for the active message conversion application state if the backup feed adapter state is not synchronized with the active feed adapter state . Setting the values for the backup message conversion application state to match the values for the active message conversion application state according to the method of may be carried out by updating by the backup message conversion application the values of the backup message conversion application state with the values of the active message conversion application state .

As mentioned above some exemplary embodiments of the present invention may include a plurality of backup feed adapters in which each backup feed adapter is capable of transmitting backup application messages to the subscribing client device on a backup message stream. When one of the backup feed adapters repeatedly determines that the backup feed adapter state is not synchronized with the active feed adapter state the backup messaging middleware of the backup feed adapter may operate to fail the backup feed adapter. That is the backup messaging middleware of the backup feed adapter takes the backup feed adapter off line so that the backup feed adapter is no longer available to provide redundancy. Often however another backup feed adapter is performing worse than the backup feed adapter whose backup feed adapter state is repeatedly out of sync with the active feed adapter state. The backup messaging middleware may therefore consider the health of the other backup feed adapters before failing the repeatedly unsynchronized backup feed adapter. For further explanation therefore sets forth a flowchart illustrating a further exemplary method for synchronizing an active feed adapter and a backup feed adapter in a high speed low latency data communications environment according to embodiments of the present invention that includes failing one of the backup feed adapters in dependence upon the backup message conversion application health state of each backup feed adapter if the backup feed adapter state is not synchronized with the active feed adapter state.

The example of includes a plurality of backup feed adapters . Each backup feed adapter represents a computer device having the capabilities of converting backup source stream messages on backup feed adapter source streams having a first format to backup application messages on a backup feed adapter output stream having a second format and transmitting the backup application messages to subscribing client devices on a backup message stream. Each backup feed adapter is characterized by a backup feed adapter state . As mentioned above the backup feed adapter state represents an aggregation of values in computer memory that a backup feed adapter uses to perform data processing at any given moment.

The backup feed adapter state of includes a backup message conversion application health state . The backup message conversion application health state represents one or more metrics of the backup feed adapter used by the backup feed adapter to evaluate the relative performance of the backup feed adapter compared to the other feed adapter. The backup message conversion application health state may be implemented as a measurement of the available computer memory on the backup feed adapter the processor usage on the backup feed adapter the error count for the backup feed adapter message transmission rate for the backup feed adapter or any other metric as will occur to those of skill in the art.

The method of includes receiving in backup messaging middleware of each backup feed adapter the backup message conversion application health state of each backup feed adapter . Receiving in backup messaging middleware of each backup feed adapter the backup message conversion application health state of each backup feed adapter may be carried out by retrieving by the backup messaging middleware of each backup feed adapter the backup message conversion application health state from the backup message conversion application of the each backup feed adapter . The backup messaging middleware may retrieve the backup message conversion application health state by calling a function exposed by an API of the backup message conversion application or by requesting the backup message conversion application health state when polled by the backup message conversion application. Receiving in backup messaging middleware of each backup feed adapter the backup message conversion application health state of each backup feed adapter may further be carried out by transmitting from the backup messaging middleware of each backup feed adapter to the backup messaging middleware of the other backup feed adapters the backup message conversion application health state through a data communications channel implemented using for example member methods of an RMI object member methods of a CORBA object web services or any other implementation as will occur to those of skill in the art.

In the method of administering by the backup feed adapter operation of the backup feed adapter in dependence upon whether the backup feed adapter state is synchronized with the active feed adapter state includes failing one of the backup feed adapters in dependence upon the backup message conversion application health state of each backup feed adapter if the backup feed adapter state is not synchronized with the active feed adapter state. Failing one of the backup feed adapters in dependence upon the backup message conversion application health state of each backup feed adapter according to the method of may be carried out by removing the backup feed adapter from communication with the messaging middleware of the other feed adapters if the value for the backup message conversion application health state of the backup feed adapter being administered is the lowest among the backup message conversion application health states received from each of the other backup feed adapters.

Readers will note that removing the backup feed adapter from communication with the messaging middleware of the other feed adapters if the value for the backup message conversion application health state of the backup feed adapter being administered is the lowest among the backup message conversion application health states received from each of the other backup feed adapters is for explanation and not for limitation. In fact failing one of the backup feed adapters in dependence upon the backup message conversion application health state of each backup feed adapter according to the method of may also be carried out by removing the backup feed adapter from communication with the messaging middleware of the other feed adapters if the value for the backup message conversion application health state of the backup feed adapter being administered is only lower than one of the values of the backup message conversion application health states received from the other backup feed adapters or in any other manner as will occur to those of skill in the art.

In view of the explanations set forth above in this document readers will recognize that practicing synchronization of an active feed adapter and a backup feed adapter in a high speed low latency data communications environment to embodiments of the present invention provides the following benefits 

Exemplary embodiments of the present invention are described largely in the context of a fully functional computer system for synchronizing an active feed adapter and a backup feed adapter in a high speed low latency data communications environment. Readers of skill in the art will recognize however that the present invention also may be embodied in a computer program product disposed on recordable media for machine readable information including magnetic media optical media or other suitable media. Examples of recordable media include magnetic disks in hard drives or diskettes compact disks for optical drives magnetic tape and others as will occur to those of skill in the art. Persons skilled in the art will immediately recognize that any computer system having suitable programming means will be capable of executing the steps of the method of the invention as embodied in a program product. Persons skilled in the art will recognize immediately that although some of the exemplary embodiments described in this specification are oriented to software installed and executing on computer hardware nevertheless alternative embodiments implemented as firmware or as hardware are well within the scope of the present invention.

It will be understood from the foregoing description that modifications and changes may be made in various embodiments of the present invention without departing from its true spirit. The descriptions in this specification are for purposes of illustration only and are not to be construed in a limiting sense. The scope of the present invention is limited only by the language of the following claims.

