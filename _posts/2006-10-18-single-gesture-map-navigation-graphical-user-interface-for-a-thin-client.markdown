---

title: Single gesture map navigation graphical user interface for a thin client
abstract: An application on a thin client displays a map. A graphical user interface permits the application to receive single gesture inputs of a stylus. If the single gesture input comprises a drag of the stylus a minimum distance, the map is panned such that the map is shifted to a new center view. The displayed map may contain one or more map objects. If the input comprises a single tap on a specific map object, the map object under the tap may be selected and highlighted. Further, a ToolTip for the map object may be displayed. A further tap of the ToolTip may result in the navigation to a link or URL associated with the map object selected. One or more zoom buttons may also be displayed. If a zoom button is tapped by the user, the map may be displayed in a different level of detail.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07439969&OS=07439969&RS=07439969
owner: Autodesk, Inc.
number: 07439969
owner_city: San Rafael
owner_country: US
publication_date: 20061018
---
This application is a continuation of and claims the benefit under 35 U.S.C. Section 120 of the following co pending and commonly assigned U.S. utility patent application which is incorporated by reference herein 

Utility application Ser. No. 09 795 890 filed Feb. 28 2001 by Nemmara Chithambaram Robin Warner Dandridge and John Ricardo Deaguiar entitled SINGLE GESTURE MAP NAVIGATION GRAPHICAL USER INTERFACE FOR PERSONAL DIGITAL ASSISTANT which application claims the benefit under 35 U.S.C. 119 e of the following co pending and commonly assigned U.S. Provisional patent application which applications are incorporated by reference herein 

U.S. application Ser. No. 60 193 142 entitled INTERPROCESS API AND GRAPHICAL USER INTERFACE FOR PERSONAL DIGITAL ASSISTANT PDA DEVICES AND APPLICATIONS filed on Mar. 29 2000 by Nemmara Chithambaram et. al. 

U.S. application Ser. No. 60 193 141 entitled SHARABLE SERVER UPLOADABLE REDLINING FOR PERSONAL DIGITAL ASSISTANT PDA filed on Mar. 29 2000 by Nemmara Chithambaram et. al. 

U.S. application Ser. No. 60 193 153 entitled INDEXED RASTER VECTOR SCHEMA FOR PERSONAL DIGITAL ASSISTANT PDA DATABASES filed on Mar. 29 2000 by Nemmara Chithambaram et. al. and

U.S. application Ser. No. 60 193 862 entitled MAPGUIDE FOR MOBILE DEVICES SERVER filed on Mar. 30 2000 by Nemmara Chithambaram et. al.

Utility application Ser. No. 09 795 890 also claims the benefit under 35 U.S.C. 120 and 35 U.S.C. 363 of the co pending and commonly assigned international patent application number PCT US00 26436 entitled GEOGRAPHIC MAPS ON A PERSONAL DIGITAL ASSISTANT PDA AND SERVER filed on Sep. 26 2000 by Autodesk Inc. which application claims the benefit under 35 U.S.C. 119 e of U.S. application Ser. No. 60 159 069 entitled MAPGUIDE PERSONAL DIGITAL ASSISTANT filed on Oct. 12 1999 by Nemmara Chithambaram et. al. U.S. application Ser. No. 60 193 141 entitled SHARABLE SERVER UPLOADABLE REDLINING FOR PERSONAL DIGITAL ASSISTANT PDA MAPS filed on Mar. 29 2000 by Nemmara Chithambaram et. al. U.S. application Ser. No. 60 193 153 entitled INDEXED RASTER VECTOR SCHEMA FOR PERSONAL DIGITAL ASSISTANT PDA DATABASES filed on Mar. 29 2000 by Nemmara Chithambaram et. al. U.S. application Ser. No. 60 193 142 entitled INTERPROCESS API AND GRAPHICAL USER INTERFACE FOR PERSONAL DIGITAL ASSISTANT PDA DEVICES AND APPLICATIONS filed on Mar. 29 2000 by Nemmara Chithambaram et. al. and U.S. application Ser. No. 60 193 862 entitled MAPGUIDE FOR MOBILE DEVICES SERVER filed on Mar. 30 2000 by Nemmara Chithambaram et. al. and which international application is a continuation in part of U.S. patent application Ser. No. 09 629 115 entitled METHOD AND APPARATUS FOR PROVIDING ACCESS TO MAPS ON A PERSONAL DIGITAL ASSISTANT PDA by Nemmara Chithambaram et al. filed on Jul. 31 2000 U.S. patent application Ser. No. 09 628 851 entitled GEOGRAPHICAL DATA MARKUP ON A PERSONAL DIGITAL ASSISTANT PDA by Edward J. Connor et al. filed on Jul. 31 2000 U.S. patent application Ser. No. 09 628 850 entitled GENERALIZED DIFFERENTIALLY ENCODED INDEXED RASTER VECTOR DATA AND SCHEMA FOR MAPS ON A PERSONAL DIGITAL ASSISTANT by Nemmara Chithambaram et al. filed on Jul. 31 2000 and U.S. patent application Ser. No. 09 629 117 entitled METHOD AND APPARATUS FOR OBTAINING A SET OF MAPS by Howard Marantz et al. filed on Jul. 31 2000.

Utility application Ser. No. 09 795 890 further is a continuation in part of the following co pending and commonly assigned U.S. Patent Applications which are incorporated by reference herein 

U.S. patent application Ser. No. 09 629 115 entitled METHOD AND APPARATUS FOR PROVIDING ACCESS TO MAPS ON A PERSONAL DIGITAL ASSISTANT PDA by Nemmara Chithambaram et al. filed on Jul. 31 2000 which application claims the benefit of U.S. application Ser. No. 60 159 069 entitled MAPGUIDE PERSONAL DIGITAL ASSISTANT filed on Oct. 12 1999 by Nemmara Chithambaram et. al. U.S. application Ser. No. 60 193 141 entitled SHARABLE SERVER UPLOADABLE REDLINING FOR PERSONAL DIGITAL ASSISTANT PDA filed on Mar. 29 2000 by Nemmara Chithambaram et. al. U.S. application Ser. No. 60 193 153 entitled INDEXED RASTER VECTOR SCHEMA FOR PERSONAL DIGITAL ASSISTANT PDA DATABASES filed on Mar. 29 2000 by Nemmara Chithambaram et. al. U.S. application Ser. No. 60 193 142 entitled INTERPROCESS API AND GRAPHICAL USER INTERFACE FOR PERSONAL DIGITAL ASSISTANT PDA DEVICES AND APPLICATIONS filed on Mar. 29 2000 by Nemmara Chithambaram et. al. and U.S. application Ser. No. 60 193 862 entitled MAPGUIDE FOR MOBILE DEVICES SERVER filed on Mar. 30 2000 by Nemmara Chithambaram et. al. 

U.S. patent application Ser. No. 09 628 850 entitled GENERALIZED DIFFERENTIALLY ENCODED INDEXED RASTER VECTOR DATA AND SCHEMA FOR MAPS ON A PERSONAL DIGITAL ASSISTANT by Nemmara Chithambaram et al. filed on Jul. 31 2000 which application claims the benefit of U.S. application Ser. No. 60 159 069 entitled MAPGUIDE PERSONAL DIGITAL ASSISTANT filed on Oct. 12 1999 by Nemmara Chithambaram et. al. U.S. application Ser. No. 60 193 141 entitled SHARABLE SERVER UPLOADABLE REDLINING FOR PERSONAL DIGITAL ASSISTANT PDA filed on Mar. 29 2000 by Nemmara Chithambaram et. al. U.S. application Ser. No. 60 193 153 entitled INDEXED RASTER VECTOR SCHEMA FOR PERSONAL DIGITAL ASSISTANT PDA DATABASES filed on Mar. 29 2000 by Nemmara Chithambaram et. al. U.S. application Ser. No. 60 193 142 entitled INTERPROCESS API AND GRAPHICAL USER INTERFACE FOR PERSONAL DIGITAL ASSISTANT PDA DEVICES AND APPLICATIONS filed on Mar. 29 2000 by Nemmara Chithambaram et. al. and U.S. application Ser. No. 60 193 862 entitled MAPGUIDE FOR MOBILE DEVICES SERVER filed on Mar. 30 2000 by Nemmara Chithambaram et. al. 

U.S. patent application Ser. No. 09 628 851 entitled GEOGRAPHICAL DATA MARKUP ON A PERSONAL DIGITAL ASSISTANT PDA by Edward J. Connor et al. filed on Jul. 31 2000 which application claims the benefit of U.S. application Ser. No. 60 159 069 entitled MAPGUIDE PERSONAL DIGITAL ASSISTANT filed on Oct. 12 1999 by Nemmara Chithambaram et. al. U.S. application Ser. No. 60 193 141 entitled SHARABLE SERVER UPLOADABLE REDLINING FOR PERSONAL DIGITAL ASSISTANT PDA filed on Mar. 29 2000 by Nemmara Chithambaram et. al. U.S. application Ser. No. 60 193 153 entitled INDEXED RASTER VECTOR SCHEMA FOR PERSONAL DIGITAL ASSISTANT PDA DATABASES filed on Mar. 29 2000 by Nemmara Chithambaram et. al. U.S. application Ser. No. 60 193 142 entitled INTERPROCESS API AND GRAPHICAL USER INTERFACE FOR PERSONAL DIGITAL ASSISTANT PDA DEVICES AND APPLICATIONS filed on Mar. 29 2000 by Nemmara Chithambaram et. al. and U.S. application Ser. No. 60 193 862 entitled MAPGUIDE FOR MOBILE DEVICES SERVER filed on Mar. 30 2000 by Nemmara Chithambaram et. al. and

U.S. patent application Ser. No. 09 629 117 entitled METHOD AND APPARATUS FOR OBTAINING A SET OF MAPS by Nemmara Chithambaram et al. filed on Jul. 31 2000 which application claims the benefit of U.S. application Ser. No. 60 159 069 entitled MAPGUIDE PERSONAL DIGITAL ASSISTANT filed on Oct. 12 1999 by Nemmara Chithambaram et. al. U.S. application Ser. No. 60 193 141 entitled SHARABLE SERVER UPLOADABLE REDLINING FOR PERSONAL DIGITAL ASSISTANT PDA filed on Mar. 29 2000 by Nemmara Chithambaram et. al. U.S. application Ser. No. 60 193 153 entitled INDEXED RASTER VECTOR SCHEMA FOR PERSONAL DIGITAL ASSISTANT PDA DATABASES filed on Mar. 29 2000 by Nemmara Chithambaram et. al. U.S. application Ser. No. 60 193 142 entitled INTERPROCESS API AND GRAPHICAL USER INTERFACE FOR PERSONAL DIGITAL ASSISTANT PDA DEVICES AND APPLICATIONS filed on Mar. 29 2000 by Nemmara Chithambaram et. al. and U.S. application Ser. No. 60 193 862 entitled MAPGUIDE FOR MOBILE DEVICES SERVER filed on Mar. 30 2000 by Nemmara Chithambaram et. al.

This application is related to the following co pending and commonly assigned patent applications which applications are incorporated by reference herein 

Utility application Ser. No. 10 642 857 filed Aug. 18 2003 by Gregory A. Roy Osman H. Bux Kevin G. Robinson and Roderick G. Munro entitled VECTOR BASED GEOGRAPHIC DATA which application is a continuation of Utility application Ser. No. 10 008 625 filed Dec. 6 2001 by Gregory Andrew Roy Osman Hamid Bux Kevin Glen Robinson and Roderick Gaetan Munro entitled VECTOR BASED GEOGRAPHIC DATA now U.S. Pat. No. 6 642 925 issued on Nov. 4 2003 which patent is a continuation of commonly assigned patent application serial no. 09 411 506 filed Oct. 4 1999 by Gregory Andrew Roy Osman Hamid Bux Kevin Glen Robinson and Roderick Gaetan Munro entitled VECTOR BASED GEOGRAPHIC DATA now U.S. Pat. No. 6 337 693 issued on Jan. 8 2002 which application is a continuation of commonly assigned patent application Ser. No. 08 757 706 filed on Oct. 30 1996 by Gregory Andrew Roy Osman Hamid Bux Kevin Glen Robinson and Roderick Gaetan Munro entitled VECTOR BASED GEOGRAPHIC DATA now U.S. Pat. No. 5 966 135 issued on Oct. 12 1999.

U.S. application Ser. No. 09 795 719 entitled INTERPROCESS APPLICATION PROGRAMMING INTERFACE FOR PERSONAL DIGITAL ASSISTANT APPLICATIONS filed on Feb. 28 2001 herewith by Timothy John Nelson et. al.

The present invention relates generally to electronic maps and geographic information and in particular to a method apparatus and article of manufacture for navigating a map displayed on a personal digital assistant PDA .

Computer implemented geographic information systems GIS are known in the art. Such GIS provide for the retrieval and display of geographic information e.g. maps . A GIS is a system of software hardware and data that delivers geographic data street maps property boundaries power transmission lines etc. along with any associated attribute information. It can show you where a street is and also tell you the street name when it was last paved whether it is a one way street etc. Using a GIS a user can perform complex queries from a web browser to a server to discover such things as how many people live near the street what their income level is and what the zoning laws are. A GIS can operate on a network internet wherein the geographic information is stored on a server and transmitted to a client user where the information map picture and other data is displayed on a web browser.

For the client to properly display the geographic information a computer system with the appropriate processing capabilities software and memory is required. For example a client may be required to utilize a computer with a web browser such as INTERNET EXPLORER or NETSCAPE NAVIGATOR and have a minimum of 10 megabytes of available memory. Additionally to display the geographic data such that a user does not have to wait an inordinate amount of time to retrieve and load the data an appropriate Internet connection e.g. a 28.8 Kbps kilo bits per second modem and a computer system with significant processing power e.g. a minimum speed of 100 megahertz may be required.

Field utility technicians such as gas company employees salespersons plumbers insurance adjusters or any type of employment that requires travel to different locations often utilize or require access to maps and geographic information. Further such technicians often need to interact with a map to obtain relevant information. For example a plumber contractor may want to determine where the main gas line or water line on a street is located. However while out in the field the technicians often do not have a network connection and carrying a laptop or desktop computer is cumbersome and impractical. Thus it is desirable to have a small handheld portable computing device with the capabilities to display and interact with geographic information both online and offline.

Prior art handheld computing devices also referred to as palm PCs or personal digital assistants PDAs are often used to access and utilize personal information. Many handheld computing devices are available in today s marketplace. Typically handheld computing devices are only slightly larger than the size of one s palm hence the name palm PC and have a small display screen for viewing a plethora of items. Software can be installed on a PDA to provide enhanced functionality. For example a personal productivity tool may be installed to provide access to a calendar contacts email Internet browsing audio books and audio recording capabilities. Card slots may also be available to provide additional memory or other functions e.g. a modem . Additionally some PDAs have infrared IR ports for communication.

Field technicians using a PDA need to view interact and navigate maps displayed. The PDA environment however poses several challenges for geographic information systems in terms of map navigation memory storage processor speeds wireless transmission rates and display attributes. For example the screen area of PDAs is typically small 160 160 pixels and PDAs commonly only maintain 96K or less of memory 2 Mb megabytes or less storage a 13 MHz processor speed and a black and white or gray scale display mechanism. Additionally a stylus takes the place of a multi button mouse. Map navigation may be particularly difficult on a PDA since technicians in many instances work in trenches or other places where a user s range of motion and vision are significantly limited.

Thus there is a need for a geographic information system that overcomes the above described deficiencies on a portable handheld electronic device such as a PDA.

One or more embodiments of the invention provide for an interactive geographic information system on a personal digital assistant PDA . The system enables the viewing interaction and navigation of maps on a PDA.

A graphical user interface GUI on the PDA displays a map requested by a user. A user may navigate the displayed map using movements of a stylus. When a single gesture input is received from a stylus various functions and or actions may be invoked. When a user drags a stylus more than a minimum distance the system interprets the dragging as an attempt to pan the displayed map. Accordingly the map is panned based on the stylus drag.

If the stylus was not dragged a minimum distance it indicates that the user has tapped the map with a possible attempt to select a map object or button. If a zoom button was selected the single tap gesture results in either zooming out or in on the map depending on the button selected.

If the user has tapped and selected a map object a ToolTip associated with the map object may be displayed. The ToolTip may contain text or a link to a URL or file associated with the selected map object. If the ToolTip contains a URL or link the text displayed in the ToolTip may be underlined or differentiated from standard text to indicate further action is possible.

Once a ToolTip containing a link has been displayed the application may wait for further action from the user. Further if the user taps the link or ToolTip containing the link the application may navigate the user to the link associated with the ToolTip if any. Such navigation may comprise invoking another application e.g. a web browser application .

In the following description reference is made to the accompanying drawings which form a part hereof and which is shown by way of illustration several embodiments of the present invention. It is understood that other embodiments may be utilized and structural changes may be made without departing from the scope of the present invention.

One or more embodiments of the invention provide for a graphical user interface for navigating maps on a personal digital assistant PDA . In the graphical user interface a single gesture by a user using a stylus may result in a continuous pan a zoom in or out of a map a selection of a single object on the map or the viewing of a report associated with a selected map object.

Embodiments further provide the use of the MAPGUIDE geographical information system available from the assignee of the present invention on a PDA. Software on the PDA is enabled to provide such functionality. Further a servlet that provides enhanced server functionality may interface between the web server and the PDA to accommodate any additional processing needed.

Raster maps provide multiple zoom levels with each zoom level comprising multiple tiles that allow for virtual roaming across a map. Further selectable vector geometry for interacting and highlighting with user objects geo referencing information for map navigation meta data in the form of layer definitions visibility display attributes etc. links to object attributes in databases links to object reports generated by corporate web servers uploadable sharable redlining data created from scribbles on the field and access to geographical information both online and offline on the PDA are provided. Accordingly users will maintain the ability to access maps and other geographical information while offline and not connected to a network or server.

The use on a PDA of a modified MAPGUIDE GIS currently available from the assignee of the present invention is provided. The existing MAPGUIDE GIS is more fully described in co pending U.S. patent application Ser. No. 09 411 506 entitled VECTOR BASED GEOGRAPHIC DATA by Gregory Andrew Roy et. al. filed on Oct. 4 1999 which is a continuation patent application of U.S. Pat. No. 5 966 135 issued on Oct. 12 1999 Application Ser. No. 08 757 706 filed on Oct. 30 1996 by Gregory A. Roy et al. entitled VECTOR BASED GEOGRAPHIC DATA .

A thick client as utilized in the existing MAPGUIDE GIS may comprise a computer with a web browser enhanced with a plugin or viewer connected to a web server that communicates with a MapGuide server to retrieve data e.g. raster data spatial data format SDF data attribute data etc. .

A thin client includes three classes of devices handheld personal computers HPC palm held personal computers PPC or PDA and smart phones. Using these devices a thin client may not provide the full processing and memory capabilities as a thick client . For example as described above with respect to PDAs thin clients often have memory less than 100K storage of less than 2 4 MB processor speeds of 13 MHz and limited display attributes. Consequently additional server side support e.g. more generalized display data simplified project files de cluttering services and possibly server management of user state may be utilized. A typical combination of resources may include a network Internet comprising the Internet LANs WANs SNA networks or the like clients and that are PDAs personal computers or workstations and servers that are personal computers workstations minicomputers or mainframes.

The network Internet connects client computers and executing the appropriate software applications to server computers executing Web servers MapGuide servers and servlets . MagGuide servers and servlets may be located within or part of web server . The server and its components may also be referred to as a back office system. Such a back office system maintains access to corporate databases synchronization utilities etc. The Web server is typically a program such as an Apache Web Server or Microsoft s Internet Information Server. The servlet communicates with thin client through web server such that any additional processing required by a thin client may be performed by the servlet . Servlet communicates with MapGuide server to obtain needed map data information. Additionally servlet accesses map windows files MWF to obtain relevant data. The servers may also execute a Common Gateway Interface CGI or Netscape Application Programming Interface NSAPI Internet Server Application Programming Interface ISAPI etc. which interfaces between the Web server and a database management system DBMS that may be utilized to retrieve relevant geographical data such as SDF data raster data Open DataBase Connectivity ODBC data etc. from database .

Generally components and all comprise logic and or data that is embodied in or retrievable from a device medium signal or carrier e.g. a data storage device a data communications device a remote computer or device coupled to the computer via a network or via another data communications device etc. Moreover this logic and or data when read executed and or interpreted results in the steps necessary to implement and or use the present invention being performed.

Thus embodiments of the invention may be implemented as a method apparatus or article of manufacture using standard programming and or engineering techniques to produce software firmware hardware or any combination thereof. The term article of manufacture or alternatively computer program product as used herein is intended to encompass logic and or data accessible from any computer readable device carrier or media.

Those skilled in the art will recognize many modifications may be made to this exemplary environment without departing from the scope of the present invention. For example those skilled in the art will recognize that any combination of the above components or any number of different components including different logic data different peripherals and different devices may be used to implement the present invention so long as similar functions are performed thereby. Specifically those skilled in the art will recognize that the present invention may be applied to any database associated database management system or peripheral device.

In accordance with the hardware descriptions thick clients are complete computer systems with web browsers and full processing capabilities. However the hardware limitations of a PDA device necessitate software limitations. Accordingly to enable a geographic information system on a PDA a thin client executing an application is provided. To accommodate the thin client additional support on server may be utilized. For example server may provide more generalized display data simplified project files de cluttering services and possibly server management of the user state.

The architecture of the invention includes a data model that combines static raster layers static raster data for multiple layers with live vector objects to deliver good display and download performance and also provides interactive selectable objects.

Vector based maps also referred to as map layer data consisting of geographic information data for one or more layers are served by a servlet and are an encoded and spatially indexed vector representation of the geographic data. Such vector maps provide for a more interactive display with flexible zooming on the client highlighting etc. Alternatively the Scalable Vector Graphics SVG representation as proposed by the WorldWideWeb Consortium W3C may be utilized. SVG allows for three types of graphic objects vector graphic shapes e.g. paths consisting of straight lines and curves images and text. Graphical objects can be grouped styled transformed and composited into previously rendered objects.

A display background that is raster based for the geographic data and display layers is managed as a multi level library of raster tiles. The raster layers are composed from multiple vector layers on servlet resulting in better download and display performance. The raster map on the PDA allows panning virtual roaming paradigm and zooming across multiple levels. A smart cache on thin client allows the swapping of compact tiles from the database to memory in a manner appropriate to the device. A single workspace per map provides the definition of the map and the display attributes for the layers on the thin client .

PDA users e.g. technicians can make scribbles and annotations on the map using a paper and pencil metaphor. To accommodate such markup embodiments provide a markup object that consists of geometric scribbles points lines polygons symbols GPS global positioning system input coordinates annotations positioned text with font information etc. and a geo reference system that allows the markup object to be integrated into a spatial database using server and displayed on other maps. The markup system captures user input and allows for markup objects to be uploaded to server . Further the level of sharing on the server side is configurable e.g. personal group global etc. .

The user of a thin client such as a PDA displays geographical information e.g. maps using application . The architecture of the invention accommodates various thin clients such as Palm OS devices WINDOWS CE 2.x devices and or smart phones with bitmapped graphics e.g. SYMBIAN MOTOROLA NOKIA PSION . The startup time for the GIS on the PDA is comparable to other applications on the PDA. Further the thin client and application is enabled to store non spatial data gathered from within the GIS application in a format suitable for uploading to or synchronizing with major relational database management system RDBMS vendors.

Thin client supports a variety of net access patterns. For example thin client can have a connection to the back office system e.g. server periodically e.g. at the beginning and or the end of the day on demand e.g. through a wireless modem or continuously.

To initialize the PDA thin client with the appropriate map data a user starts up the synchronization application . Synchronization application is the application on the PDA thin client responsible for synchronizing information and map data stored in a database on PDA thin client with the relevant map data. Synchronization application utilizes net services to communicate with servlet through web server and to obtain the relevant map data. Net services component provides services for two way communication and exchange of data with servlet i.e. following the link to . Accordingly synchronization application may communicate with servlet to obtain the location of the map data. Thereafter synchronization application retrieves obtains the map data from the identified location.

Upon receipt of the map data in the synchronization application persistent services is utilized store the data by performing various I O operations in PDA catalog database . Thereafter the synchronization process is complete. Such synchronization can be performed as often as desired depending on the configuration of the PDA thin client . For example if thin client has a wireless modem the synchronization operation can be performed whenever desired. If however a direct connection is required synchronization can only occur when the thin client is connected to network or to server .

The MapGuide PDA component is the main application that provides the user interface UT and responds to events. The user interface component is the placeholder for the user interface controls that are specialized for the PDA. Accordingly once the relevant map data has been retrieved using synchronization application the MapGuide PDA application may be initialized started by the user. Details of the UT and map navigation are described below.

MapGuide PDA component requests the persistence services component to load the active workspace . The active workspace provides creates the definition of the map model . Thus the active workspace may be seen as a minimized version of the traditional map file referred to as a map window file MWF for the PDA . The map model provides the services related to maintaining and manipulating map layers and map objects.

The persistent services component loads the workspace by providing object based database management services ODBMS using the local PDA database PDA CatalogDB . The PDA catalogDB is the local database of geographic information that is resident on the PDA. Thus the PDA catalogDB encapsulates the local PDA catalog database and provides the application programming interface API for record manipulation.

View component listens to changes in the map model and updates the map display when necessary. The business attributes services manager component provides services related to managing non spatial business attributes.

Client resident viewer services interact with map model component . The client resident viewer services component provides a flexible architecture that allows viewer service components to reside on either the client or the servlet . These services may be represented by two components the client resident viewer services component of and the servlet resident viewer services component of . The services performed by client resident viewer services and servlet resident viewer services may be combined and reside entirely on client or server . All client components send requests for viewer services to the client resident viewer services . The client resident viewer services component will perform the service if the required components are locally available on the client . If not the request may be delegated to the servlet resident viewer services through synchronization application . For example for a given client configuration polyline drawing services may be available on client whereas buffering services may be available on servlet .

At step any downloaded data may be optionally cached in the local database using persistent services . The model notifies listeners including the view of the change at step . View updates itself by getting display attributes from the workspace and updating the map display at step .

After viewing the map a user on thin client may markup or redline the map i.e. the map and attribute data as desired using a stylus. Markup data comprises pixel data for a markup entity. Application provides the ability to obtain markup data from the user through user interface . Application then creates a file comprised of the markup data and provides for uploading the file from thin client to server . The file is uploaded to the server by obtaining a socket connection obtaining an inventory of resident mapsets searching for markup data associated with the resident mapsets on thin client and uploading all resident markup data to the server .

As described above the markup entity may comprise a markup object that provides various mechanisms for marking up a map. For example the user may draw a redline line wherein the markup object is a redline object. To draw a redline line the application determines when a new redline object has been selected and captures the stylus movements in a redline object while the stylus remains in contact with the screen of thin client .

In another example the markup data is a note and the application is configured to obtain the markup data in a note object. To insert draw a note application determines when a new note object has been selected accepts a user selection of an anchor point in a display of a map on the thin client displays a text entry screen on the thin client accepts text user input in the text entry screen and displays an icon representative of the note at the anchor point.

To accommodate the markup data on server server is configured to obtain a file comprised of markup data for the map and attribute data convert the markup data to coordinate data and use the coordinate data to obtain a standard data format SDF file that can be used to superimpose the markup data on the map and attribute data. Any component on server including servlet may provide such functionality.

In addition to redline functionality one or more embodiments of the invention provide a GUI for navigating a map. Map navigation may be accomplished using a variety of single gestures such as selecting a menu tapping and or dragging with the stylus.

A map screen may include one or more of the following elements a map a menu and Zoom In and Zoom Out navigation buttons on a title bar. Various navigation buttons may be provided on a map display screen including Zoom In and Zoom Out. The Zoom In and Zoom Out buttons may function in the same way as Zoom In and Zoom Out menu items. If the menu is dropped down visible the buttons may not be available as they may be covered up by the menu. The buttons may also not be available during a Redline operation as all or a portion of menu items except Finish Redline may be disabled during a Redline operation.

The GUI enables a user to pan a map across the PDA s display screen. To pan the user holds down the stylus and drags the stylus to the desired new view. A minimum distance of movement before a pan operation begins may be required. By requiring a minimum distance the drag operation may be distinguished from a selection tap operation e.g. a press release without moving more than the threshold distance . In a drag operation the map may be constrained from panning beyond the halfway mark of the view area. In other words the user may not be allowed to pan the edge of any map beyond the center of the view. In such an embodiment the center point of the PDA screen may always be required to fall inside of the map.

The GUI may also provide a means by which the user can return pan to a designated target point. In such an embodiment the zoom factor may not be affected.

A user may be presented with the option of zooming in closer or zooming away from a currently displayed map. Depending on the availability of zooming in or out from the current level of detail a zoom in or zoom out button may be displayed on the PDA screen.

For example an overview map may currently be displayed. If a more detailed view of the overview map is available the Zoom In item may appear in the menu and a Zoom In button may be displayed on the screen. Further if a less detailed view of the overview map is available a Zoom Out item may appear in the menu and a Zoom Out button may be displayed on the screen. Both the Zoom Out and Zoom In items may be displayed simultaneously. To zoom in or zoom out the user may select Zoom In or Zoom Out from the Map menu or may use a single tap gesture on either the Zoom In or Zoom Out button.

Once the user elects to zoom in or out the map view immediately zooms navigates to the requested map level level of detail while maintaining the existing view center. A mapset consists of an array of maps up to 9 zoom levels not including the initial map . The Zoom In menu choice and button will be displayed if there is a more detailed view available and removed from the menu otherwise. Similarly the Zoom Out menu choice and button will be displayed if there is a less detailed view available and removed otherwise. All of the zooms implicitly reference the MWF of the initial map. The user doesn t zoom between different MWF files only between scales and centers within an MWF file.

A user may not be allowed to zoom in if a more detailed map does not cover the geographical point corresponding to the center of the view. illustrates an example of a level of detail displayed on a PDA wherein the edge of the map extends just beyond the center of the view. Additionally in a more detailed map of the area in the center of the view is not available. Accordingly the user is not presented with the option of zooming in.

The GUI may also provide the ability to support a single level for a raster zoom. pixel replication . For example the GUI may provide a magnifying glass icon on both an overview and detail level map to enable viewers to look at the same map in a larger view. Such an icon may be activated using a single gesture such as a tap of the stylus on the magnifying glass or the area that the user desires to magnify. A similar icon with similar functionality may be used to zoom out or display a less detailed view of a map.

As described above a map may comprise one or more map objects. A map object may have numerous non graphical attributes. For example a map object may have an object type a key value for linking to database records a simple text attribute e.g. a road name for display in a ToolTip as discussed below or a URL to a web page e.g. maintenance information for the selected object or to another map drawing or image e.g. detailed schematic diagram .

In the GUI map objects and their attributes graphical and non graphical may provide various functions when selected by a user. For example the selection of a map object may link a user to the URL specified in the URL attribute. The selection of a map object may also permit the display of a ToolTip that contains the text from the simple text attribute.

When one or more map objects are selected the GUI may highlight the selected objects using a ToolTip icon. Such functionality combines selection representation with that of ToolTips. The text within a ToolTip may comprise the value of the key attribute the simple text attribute or the URL attribute for the selected object. Where a link e.g. a link to a file or a URL is present the ToolTip text may be displayed and underlined. This underlined text may effectively act as a button. If the object has an URL but no ToolTip text the string More Info . . . may be displayed.

The user may navigate to the file or URL identified by the link via the ToolTip. To navigate the user may merely tap on the ToolTip with the stylus and be transported to the URL or file. Depending on the value of the link the appropriate application may be invoked initialized. For example if the link is to a mapset the mapset may be opened in a GIS application. However if the link is to a URL an AvantGo application may be initialized.

To indicate that a selection has been made e.g. that a user s tap is being processed when the user taps on the ToolTip the ToolTip text may change to reverse video while the link is loading.

A ToolTip may not be displayed if there is no text or URL associated with the object. Additionally an audible click may sound when the user taps a selectable object menu item or ToolTip with a link. An audible error tone may sound if the user taps an area where there is no selectable data or if the user taps a tool tip that has no link associated with it.

ToolTips may behave differently depending on various factors such as where the selected object is located on the map. For example a ToolTip may be displayed near but not on a point on the selected object closest to the pick point. The selected object may flash blink on and off as a highlighting mechanism. The ToolTip may also expand to cover the selected object wherein the blinking object may be visible through the ToolTip text. Additionally the text within a ToolTip may wrap to keep the ToolTip within the size of the screen. The PDA application may restrict the ToolTip to a maximum width that is roughly 80 of the screen width.

The text string in a ToolTip may have a maximum length. When the maximum length has been reached or exceeded the text may be truncated. For example the text may be truncated with ellipsis when the text length causes the height of the ToolTip to reach fifty percent 50 of the screen height.

Referring to when a ToolTip is displayed any other activity on the map screen may cancel the display of the ToolTip . Alternatively certain additional activities may invoke various functions. For example the ToolTip may be moved by dragging the ToolTip to reposition it. The user may have the ability to indicate which objects the user is interested in for a subsequent operation e.g. zoom selected objects report generation etc. A script writer may also be able to select an object and thus highlight it on a map. Further the user may specify a layer object ID etc. to be displayed in a later cycle.

If a zoom button was not tapped the ToolTip of the map object tapped is displayed at step . As described above the ToolTip may contain the text or URL of the map object tapped. The map object closest to the tapped point may be utilized. If no map object is within a predefined distance of the tap step may not be performed.

Once a ToolTip has been displayed the application may wait for further user action at step . Thus at step a determination is made regarding whether the user has tapped the map again. If a tap is received the application determines whether the tap was on the displayed ToolTip or not at step . If the tap or user input was not on the ToolTip processing may continue at step . Alternatively the ToolTip may disappear from the display and processing may continue at step . If the tap was on the displayed ToolTip the system may navigate the user to the link associated with the ToolTip if any.

Referring back to a servlet accommodates any additional processing needed by PDA thin client and application . To take advantage of existing web servers and servlet technology servlet may be implemented using the Java programming language. Alternatively any programming language that performs provides Java servlet like functionality may be utilized. Accordingly a single code stream is utilized to implement the servlet on multiple platforms. A minimum set of constraints beyond those provided by web server and the servlet framework provide scalability. For example each client request may be self contained in that it is responded to by a different instantiation of the servlet .

Servlet may reside in a web server and responds to requests for spatial and attribute data related to map objects from multiple thin clients . Servlet processes the requests performs the visualization and encoding and places the results in a location that is accessible to the thin clients . Additionally servlet may identify one or more maps included in a mapset obtain the map data for the one or more maps identified from the server and create the mapset comprised of the map data prior to receiving a request for the map data from a client . Such map data retrieval and mapset creation may be performed by servlet in response to receiving a request relating to a work order e.g. a request to modify delete or add a work order .

Additionally servlet may support the retrieval and creation of a mapset i.e. map data using multiple central processing units in parallel. To provide such parallel processing support servlet identifies one or more maps in a mapset instantiates separate threads on multiple central processing units to obtain map data for the one or more maps from the server in parallel assembles a transient database comprised of the map data and creates a mapset comprised of the map data using the transient database.

Map data on server is comprised of multiple raster tile and vector object data for an object of the map data. Visualizer component performs configurable decluttering of data in a manner that is appropriate to the display of thin client . Accordingly visualizer generalizes the shape of a vector object by filtering out some of the vector object data. Encoder component compacts and encodes the objects being retrieved by thin client . Encoder component differentially encodes a location of an object by encoding an offset for the location of the object with respect to an origin of the raster tile where the object is located. Further encoder component spatially indexes the vector object data by encoding the bounds of the object.

The raster tiles are stored in row major format. An index for each raster tile is stored following the raster tiles in an order corresponding to the storage of the raster tiles. The index comprises a reference to a record containing the generalized vector object data and the offset and bounds for each raster tile.

By generalizing encoding and spatially indexing the map data the thin client may determine an object identified by a point by evaluating the bounds of one or more raster tiles to determine the raster tile containing the point and evaluating the bounds of objects within the raster tile containing the point to determine which object contains the point.

Servlet resident viewer services components represents the servlet resident part of viewer services as described above with respect to and communicates with mapguide server . The map guide server may be web server or a component of server .

For local reports the business attributes for the selected objects are read from the PDA database at step and the report is formatted and displayed at step . For reports that require more extensive formatting services e.g. COLD FUSION Application Server or require data not stored in the local PDA database a request is issued to net services through synchronization application to obtain the report at step .

After the user is finished viewing the report and possibly other reports linked to it the mapguide PDA application is re started at step at which time the application restores itself to its last saved state.

This concludes the description of one or more embodiments of the invention. The following describes some alternative embodiments for accomplishing the present invention.

For example any type of personal digital assistant or computer such as a mainframe minicomputer or personal computer or computer configuration such as a timesharing mainframe local area network standalone personal computer WINCE device etc. could be used with the present invention.

The foregoing description of one or more embodiments of the invention has been presented for the purposes of illustration and description. It is not intended to be exhaustive or to limit the invention to the precise form disclosed. Many modifications and variations are possible in light of the above teaching. It is intended that the scope of the invention be limited not by this detailed description but rather by the claims appended hereto.

