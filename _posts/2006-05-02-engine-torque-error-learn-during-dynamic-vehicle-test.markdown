---

title: Engine torque error learn during dynamic vehicle test
abstract: A method of regulating gear shifts of a transmission driven by an engine includes calculating a first torque error and calculating a second torque error. A compensation torque is determined based on the first torque error and the second torque error. The gear shifts are regulated based on the compensation torque.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07544150&OS=07544150&RS=07544150
owner: GM Global Technology Operations, Inc.
number: 07544150
owner_city: Detroit
owner_country: US
publication_date: 20060502
---
This application claims the benefit of U.S. Provisional Application No. 60 683 578 filed on May 23 2005. The disclosure of the above application is incorporated herein by reference.

The present invention relates to engine systems and more particularly to engine torque error learning TEL during a dynamic vehicle test DVT .

Internal combustion engines combust a fuel and air mixture within cylinders driving pistons to produce drive torque. The engine drives a transmission through a coupling device. In the case of an automatic transmission the coupling device includes a torque converter. The transmission transfers the drive torque to a driveline through one of a plurality of gear ratios. The transmission shifts between gear ratios based on a shift schedule and vehicle operating conditions.

The transmission typically includes a plurality of clutches that are selectively engaged to establish a desired gear ratio. When shifting between gear ratios clutch to clutch shifts occur. More specifically at least one clutch is disengaged i.e. off going clutch while another clutch is concurrently engaged i.e. on coming clutch . Control of the clutch to clutch shift is based on an estimated engine torque T . Tis determined using a torque estimating calculation that is based on engine operating conditions. However Tis not always sufficiently accurate to provide the desired clutch to clutch shift quality. More specifically the transmission is sensitive to error in T which reduces the shift quality of the transmission.

Accordingly the present invention provides a method of regulating gear shifts of a transmission driven by an engine. The method includes calculating a first torque error and calculating a second torque error. A compensation torque is determined based on the first torque error and the second torque error. The gear shifts are regulated based on the compensation torque.

In one feature the compensation torque is determined from a look up table based on the first torque error and the second torque error.

In another feature the method further includes determining an estimated engine torque and correcting the estimated engine torque based on the compensation torque to provide a corrected estimated engine torque. The gear shifts are regulated based on the corrected estimated engine torque.

In still other features the method further includes determining a first estimated engine torque at a first engine speed and determining a first measured engine torque at the first engine speed. The first torque error is calculated based on the first estimated engine torque and the first measured engine torque. A second estimated engine torque is determined at a second engine speed and a second measured engine torque is determined at the second engine speed. The second torque error is calculated based on the second estimated engine torque and the second measured engine torque.

In yet another feature the method further includes engaging a plurality of clutches of the transmission to provide a tie up condition of the transmission. The first torque error and the second torque error are calculated based on operating conditions during the tie up condition.

Further areas of applicability of the present invention will become apparent from the detailed description provided hereinafter. It should be understood that the detailed description and specific examples while indicating the preferred embodiment of the invention are intended for purposes of illustration only and are not intended to limit the scope of the invention.

The following description of the preferred embodiment is merely exemplary in nature and is in no way intended to limit the invention its application or uses. For purposes of clarity the same reference numbers will be used in the drawings to identify similar elements. As used herein the term module refers to an application specific integrated circuit ASIC an electronic circuit a processor shared dedicated or group and memory that execute one or more software or firmware programs a combinational logic circuit and or other suitable components that provide the described functionality.

Referring now to an exemplary vehicle system is schematically illustrated. The vehicle system includes an engine that combusts a fuel and air mixture within cylinders not shown to drive pistons slidably disposed within the cylinders. The pistons drive a crankshaft not shown that drives a transmission through a torque converter . Air is drawn through a throttle and into an intake manifold that distributes air to the individual cylinders. Exhaust generated by the combustion process is exhausted to an after treatment system not shown through an exhaust manifold .

The torque converter is a fluid coupling that enables the engine to spin somewhat independently of the transmission . Although not illustrated the torque converter includes a pump a turbine and a stator. The pump is a centrifugal pump that is driven by the engine . Fluid pumped by the pump drives the turbine which in turn drives the transmission . The stator redirects fluid returning from the turbine before it hits the pump again to increase the efficiency of the torque converter . In a torque converter stall condition the pump is turning but the turbine is not.

A control module regulates operation of the vehicle system . More specifically the control module operates the engine and transmission based on signals from operator input devices including but not limited to a range selector and a brake pedal . The range selector enables the operator to put the transmission into one of a plurality of ranges including but not limited to a drive range D a reverse range R a neutral range N and a park range P . The control module also regulates engine operation based on signals from various sensors including but not limited to an engine RPM sensor .

Referring now to an exemplary transmission is illustrated. The exemplary transmission is a six speed automatic transmission that is disclosed in commonly assigned U.S. Pat. No. 6 308 125 issued on Oct. 23 2001 and entitled Adaptive Clutch Control of a Closed Throttle Downshift the disclosure of which is expressly incorporated herein by reference. It is appreciated that the specific transmission described herein is merely exemplary in nature and that the torque error compensation control of the present invention can be implemented with various other transmissions.

The transmission includes an input shaft an output shaft and three inter connected planetary gear sets A B and C respectively. The planetary gear sets A B C include respective sun gears A B C carriers A B C planetary gears A B C and ring gears A B C. The transmission further includes clutches C C that are selectively engaged to establish a desired gear ratio of the transmission . More specifically the input shaft continuously drives the sun gear A of the gear set A selectively drives the sun gears B C of the gear sets B C via the clutch C and selectively drives the carrier B of the gear set B via the clutch C. The ring gears A B C of the gear sets A B C are selectively grounded via the clutches C C and C respectively.

As diagrammed in Table 1 below the state of the clutches C C i.e. engaged or disengaged can be controlled to provide six forward speed ratios 1 2 3 4 5 6 a reverse speed ratio R or a neutral condition N .

The control module regulates operation of the vehicle system based on a compensated torque T that is determined using the TEL routine of the present invention. More specifically prior to entering the marketplace the vehicle system undergoes a dynamic vehicle test DVT . The DVT is a functional verification of the vehicle performance and is conducted on a roll test machine. The DVT operations may include but are not limited to emission control engine operation transmission brakes ABS traction control cruise control and final drive ratio. During the DVT the operator stays in the vehicle and performs the each operation according to a pre determined test schedule.

The present invention incorporates the TEL routine into the DVT. More specifically Tis determined from a multi dimensional look up table based on a high torque error T and a low torque error T that are calculated based on operating conditions monitored during the TEL. Tand Tare based on an estimated engine torque T and a measured engine torque T .

Tis calculated by the control module using a torque estimation calculation that is based on engine operating conditions. An exemplary engine torque estimator is disclosed in commonly assigned U.S. Pat. No. 6 704 638 issued on Mar. 9 2004 and entitled Torque Estimator for Engine RPM and Torque Control the disclosure of which is expressly incorporated herein by reference. Tis the amount of torque measured at the torque converter pump and is determined according to the following relationship RPM where k is a unit less quantity that is determined based on a torque converter speed ratio i.e. turbine RPM to engine RPM . More specifically k is a relative measure of the tightness of the torque converter. The lower the value of k the tighter the torque converter i.e. engine RPM is lower at torque converter stall . Tis also disclosed and discussed in further detail in U.S. Pat. No. 6 704 638.

The TEL control initiates a tie up condition of the transmission. More specifically a plurality of the clutches C C are engaged to inhibit torque transfer through the transmission i.e. inhibiting rotation of the input shaft while the transmission is in the D range. In this manner the torque converter pump rotates while the turbine is inhibited from rotating. While in the tie up condition and with the brake applied the engine RPM is commanded to a first or low level RPM . When at or sufficiently near RPM a plurality of samples of an estimated low engine torque T and a measured low engine torque T are calculated. A low torque error T is determined as the difference between an average value of T i.e. average of the plurality of samples taken and an average value of T i.e. average of the plurality of samples taken .

The engine RPM is next commanded to a second or high level RPM . When at or sufficiently near RPM a plurality of samples of an estimated high engine torque T and a measured high engine torque T are determined. A high torque error T is determined as the difference between an average value of T i.e. average of the plurality of samples taken and an average value of T i.e. average of the plurality of samples taken .

Tis determined based on Tand T. More specifically a multi dimensional look up table is provided and is pre programmed in the memory of the control module . The look up table includes an x axis corresponding to Tand a y axis corresponding to Tand is calibrated based on the engine torque converter and transmission specifications. An exemplary look up table is provided in Table 2 below 

It is anticipated that Tis implemented during early shifts of the transmission. That is to say Tis preferably used for shifts occurring within the first few days of the life of the transmission. It is further anticipated that a shift adapt routine concurrently runs and gradually adjusts Tto correct for any error. The shift adapt value is then used over the remaining life of the transmission. In this manner Tis integrated into the shift adapt value over time.

Referring now to exemplary steps executed by the TEL control of the present invention will be described in detail. In step control determines whether TEL is enabled. If TEL is not enabled control loops back. If TEL is enabled control determines whether the transmission is in the D range and whether the brake is applied in step . If the transmission is not in the D range or the brake is not applied control loops back. If the transmission is in the D range and the brake is applied control actuates a plurality of the clutches C C to provide a tie up condition of the transmission in step . More specifically three or more of the clutches C C are engaged to inhibit torque transfer through the transmission i.e. inhibiting rotation of the input shaft .

In step control commands the engine RPM to a low RPM range RPM e.g. 1000 RPM . In step control determines whether the engine RPM is sufficiently near RPM by determining whether the engine RPM is between a lower low threshold RPMand an upper low threshold RPM. If RPM is not greater than RPMand is not less than RPM control loops back. If RPM is greater than RPMand is less than RPM control continues in step . In step control collects n samples of Tand T.

In step control commands the engine RPM to a high RPM range RPM e.g. 2500 RPM . In step control determines whether the engine RPM is sufficiently near RPM by determining whether the engine RPM is between a lower high threshold RPMand an upper high threshold RPM. If RPM is not greater than RPMand is not less than RPM control loops back. If RPM is greater than RPMand is less than RPM control continues in step . In step control collects m samples of Tand T. In step control commands the engine RPM to an idle RPM RPM .

In step control determined whether TEL is complete. If TEL is not complete control loops back. If TEL is complete control calculates Tand Tbased on the n samples of Tand Tand the m samples of Tand T. In step control determines Tbased on Tand T. Control determines whether the DVT is complete in step . If the DVT is not complete control loops back. If the DVT is complete control sets a DVT flag equal to TRUE in step and control ends.

Those skilled in the art can now appreciate from the foregoing description that the broad teachings of the present invention can be implemented in a variety of forms. Therefore while this invention has been described in connection with particular examples thereof the true scope of the invention should not be so limited since other modifications will become apparent to the skilled practitioner upon a study of the drawings the specification and the following claims.

