---

title: Controlling user experience
abstract: A client-side advertising application may work with an advertising back-end and a content downloading system to perform one or more of the following functions: download advertising content, manage the downloaded advertising content, define the user experience, facilitate the dynamic insertion of the downloaded advertising content into or around downloaded programming content, and ensure auditing messages are sent to an auditing server.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08682722&OS=08682722&RS=08682722
owner: Advertising.com LLC
number: 08682722
owner_city: Dulles
owner_country: US
publication_date: 20060130
---
This application claims priority under 35 USC 119 e to U.S. patent application Ser. No. 60 647 456 filed on Jan. 28 2005 and to U.S. Patent Application Ser. No. 60 709 450 filed on Aug. 19 2005 both of which are hereby incorporated by reference.

Dynamic content may be delivered across packet based networks such as the Internet and presented to users by a media player. Dynamic content generally refers to content that continuously or nearly continuously changes over time that is content with a temporal dimension such as audio and or visual content.

A media player may operate to present such content in at least two general ways. First the media player can begin playing the content while the content is sent over the network. This is generally referred to as streaming and the associated content may generally be referred to as streaming content. Streaming content may present certain advantages to the end users such as reducing the time between the content s selection and display and removing the need for client side storage of media files.

Streaming content typically falls into two general categories broadcast and on demand. To a streaming server a broadcast source is usually any external video or audio feed such as a television or radio station whereas an on demand source is usually a multimedia file chosen by the user.

Broadcast streams are generally entered in progress by users. Each client connects to a single pushed stream so all clients experience the same portion of the media at the same time. Advertising and other marketing messages may be inserted into or around the content at spot breaks also termed spot sets or pods .

On demand streams are generally discrete pulled multimedia segments such as individual songs or video clips that are delivered to each client upon request. Each client starts at the beginning of the clip. Unlike broadcast streams in on demand streams advertising and marketing messages are usually put before and after the content however advertising and other marketing messages can be placed in between two on demand streams to achieve a similar effect as spot breaks in broadcast streams .

Second as an alternative to streaming the content may be completely downloaded in advance of play by the media player. The content associated with this method of operation may generally be referred to as downloaded content. The download approach may allow for delivery of higher definition content than what the user s network connection might otherwise support when streaming and may allow for offline viewing of content. Additionally allowing the user to download high definition content in advance of play may reduce the content publisher s reliance on more expensive streaming technologies.

Downloaded content may be handled through a download manager that resides on the user s PC or other media playing platform. A download manager may let a user explicitly specify the content of interest or it may pre fetch content that it anticipates will be viewed at some point in the future.

The techniques described below may be particularly advantageous in a downloaded content environment. Downloaded content may present difficulties in relation to the insertion of advertising content and or marketing messages into or around editorial content. In a streaming environment the media player is connected to the network hence the player or supporting software working with the player can contact an ad server in real time to select appropriate advertising media files and stream those files as needed from remote servers. In a downloaded content environment however the network connection may not be present during playback. Additionally for a consistent user experience downloaded high definition content may need similar quality advertising content. The similar quality advertising content may preclude streaming because the network doesn t have the available bandwidth needed to stream the higher quality advertising content.

Also in a downloaded content environment because a network connection may not be present during playback the user platform may not be able to send real time auditing messages to an ad audit server indicating that a specific ad was presented to the user. However it may be desirable to insure that auditing messages are sent to the ad audit server so that advertisers can be appropriately billed.

This document describes among other things implementations of a client side advertising application. One implementation of the client side advertising application works with an advertising back end and a content downloading system to download advertising content to manage the downloaded advertising content to define the user experience to facilitate the dynamic insertion of the downloaded advertising content into or around downloaded programming content and to insure auditing messages are sent to an auditing server. Advertising content or media is generally any other content besides the editorial or programming content and is typically content that promotes particular services or goods. Advertising content may be for example previews for programming content being offered in the future referred to as previews an indication of the source of programming content referred to as branding or promotions to buy or otherwise acquire specific products or services referred to as advertisements . Specific examples of such content include channel ids notification of upcoming programming in the playlist and cross promotions of similar editorial content. Furthermore while this document describes inserting advertising content the additional content inserted may more generally be any interstitial elements.

The client side advertising system may integrate with a content delivery management system for operation in an on line or off line environment. In one implementation when the client system is connected to a network it contacts the backend ad system for ad decisions that may be used in the future. It downloads advertising media files using the delivery management system so these files are available when a user plays downloaded editorial content. At the point when the user plays the editorial content the client side advertising system also communicates with the media player to specify which advertising media files to insert and in which order the files should be played all without the need to communicate with the ad server. Finally when a network connection is available the client side advertising system sends audit records of all ad plays to the backend ad system for billing and reporting purposes.

Generally in one aspect a client side content presentation system includes an interface component and an experience manager. The interface component is configured to present an interface that allows a user to select a piece of editorial content for presentation. The experience manager is configured to obtain a set of rules and select at least one piece of additional content based on the rules when the user selects the piece of editorial content for presentation. In addition the experience manager is configured to provide a playlist to the user interface component when the user selects the piece of editorial content for presentation. The playlist includes the piece of editorial content and the selected piece of additional content. The user interface component is configured to use the playlist to present the piece of editorial content and the selected piece of additional content.

Implementations of this aspect may include one or more of the following features. For example the additional content may be advertising content and the rules may include business rules. The business rules may include campaign business rules and user experience business rules. The playlist manager may be configured to receive auditing messages from the interface component when a network connection to an ad auditor is unavailable and to send the stored auditing messages to the ad auditor when the network connection to the ad auditor is available.

Alternatively or additionally the interface may allow the user to select a piece of editorial content for download. The system may include a download manager configured to download the piece of editorial content when the user selects the piece of editorial content for download and to download a set of additional content. The experience manager may be configured to select at least one piece of additional content from the set of downloaded additional content based on the rules when the user selects the downloaded piece of editorial content for presentation. The playlist may be provided to the user interface component when the user selects the downloaded piece of editorial content for presentation and the playlist may include the downloaded piece of editorial content and the selected piece of additional content.

In another aspect a system includes an interface component a content manager a download manager and a playlist manager. The interface component is configured to present an interface that allows a user to select a piece of editorial content for download. The content manager is configured to select a piece of additional content and to associate the selected piece of additional content with the piece of editorial content. The download manager is configured to download the piece of editorial content when the user selects the piece of editorial content for download and to download the piece of additional content. The playlist manager is configured to provide a playlist to the user interface component when the user selects the downloaded piece of editorial content for presentation. The playlist includes the downloaded piece of editorial content and the downloaded piece of additional content. The user interface component is configured to use the playlist to present the downloaded piece of editorial content and the downloaded piece of additional content.

Implementations of this aspect may include one or more of the following features. For example the piece of additional content may be advertising content. To select the piece of additional content the content manager may be configured to obtain an indication of a set of additional content the set of additional content including the piece of additional content obtain campaign business rules for the set of additional content obtain user experience business rules and select the piece of additional content from the set of additional content based on the obtained campaign business rules and the obtained user experience business rules.

The content manager may be configured to select the piece of additional content when a network connection to an ad selector is unavailable. The content manager may be configured to communicate with an ad selector to receive the indication of a set of additional content the campaign business rules and the user experience business rules. To select the piece of additional content the content manager may be configured to communicate with an ad selector to obtain an indication of the piece of additional content. To associate the piece of additional content with the piece of editorial content the content manager may be configured to insert an identifier of the piece of additional content into a content list that includes an identifier for the piece of editorial content.

The campaign business rules indicate one or more of the following including one or more content categories of editorial content timing of when the additional content should be presented percentage of users to whom the additional content should be presented frequency with which the additional content should be presented number of times the additional content should be presented in a period of time or geographic locations. The user experience business rules may indicate one or more of the following including one or more ratios of additional content presented to editorial content presented one or more types of additional content that should be presented and one or more orders in which additional content and editorial content should be presented.

The user interface component may be configured to send an auditing message to the playlist manager when the user interface component presents the piece of additional content while a network connection to an ad auditor is unavailable. The playlist manager may be configured to send the auditing message to the ad auditor when a network connection to the ad auditor is available.

In another aspect a method includes presenting an interface that allows a user to select a piece of editorial content for download selecting a piece of additional content associating the selected piece of additional content with the piece of editorial content and downloading the piece of editorial content when the user selects the piece of editorial content for download. The method also includes downloading the piece of additional content providing a playlist to the user interface component when the user selects the downloaded piece of editorial content for presentation the playlist including the downloaded piece of editorial content and the downloaded piece of additional content and presenting the downloaded piece of editorial content and the downloaded piece of additional content using the playlist.

Implementations of this aspect may include one or more of the following features. For example the piece of additional content may be a piece of advertising content. Selecting the piece of additional content may include obtaining an indication of a set of additional content the set of additional content including the piece of additional content obtaining campaign business rules for the set of additional content obtaining user experience business rules and selecting the piece of additional content from the set of additional content based on the obtained campaign business rules and the obtained user experience business rules.

Selecting the piece of additional content may include selecting the piece of additional content from the set of additional content when a network connection to an ad selector is unavailable. Obtaining the indication of a set of additional content the campaign business rules and the user experience business rules may include communicating with an ad selector to receive the indication of a set of additional content the campaign business rules and the user experience business rules. Selecting the piece of additional content may include communicating with an ad selector to obtain an indication of the piece of additional content. Associating the piece of additional content with the piece of editorial content may include inserting an identifier of the piece of additional content into a content list that includes an identifier for the piece of editorial content.

The method may include storing an auditing message when the piece of additional content is presented while a network connection to an ad auditor is unavailable. The method also may include sending the auditing message to the ad auditor when a network connection to the ad auditor is available.

Implementations of the described techniques may include hardware a method or process and computer software on a computer accessible medium.

The details of one or more implementations are set forth in the accompanying drawings and the description below. Other features will be apparent from the description and drawings and from the claims.

Various implementations of a advertising application are described. Implementations may perform various functions such as for example defining the user experience and facilitating the dynamic insertion of downloaded advertising content into or around downloaded editorial content whether a network connection is available or not. Implementations of the advertising application may reside on the user s client system and communicate with an ad server when a network connection is available download advertising media files to the user s client system insert advertising content into or around editorial content when the editorial content is played by the user and record auditing messages for communication back to the ad server when a network connection is available.

User interface includes a content category section a content selection section and a content presentation section . The content category section displays a hierarchy of content categories from which the user can select. In the example shown top level categories include U.S. News International News Sports Entertainment Health Politics and Science. Also in the example shown there are sub categories underneath the top level category of Sports. The sub categories shown are Top Stories NFL NBA NHL NCAA BB Other U.S. and World Sports.

When a user selects a top level category or a sub category the editorial content available in the selected category is displayed in the content selection section . The content selection section indicates the status of editorial content in the selected category and allows the user to select editorial content for downloading. For example a button associated with each piece of content may switch states depending on the status of the associated content. As shown in the example of the content described by label is indicated as downloaded and available for presentation because button is labeled Delete while the content described by label is indicated as downloading because the section indicates the content described by label is 75 downloaded. The content described by label is indicated as available for downloading because the button is labeled as Download. 

By selecting button the user can delete the downloaded editorial content described by label . By selecting button the user can initiate a download of the editorial content described by the label . Also play buttons associated with each piece of content allow the user to initiate a presentation of the associated content. For instance by selecting play button the user can initiate a presentation of the editorial content described by label .

When a user selects editorial content for presentation the editorial content itself and or information associated with the content is presented by content presentation section . For example when the content is video the video may be presented in a video playback section . If the content is audio for instance the audio may be played on speakers connected to the users client system and video content associated with the audio e.g. a visualization may be presented in video section . Content presentation section also may have controls that allow the user to control the presentation of the content and may include a section that provides additional information about the content such as a summary or description of the content.

In addition to presenting the editorial content user interface presents advertising content associated with the downloaded content. For example if the editorial content is video content with or without accompanying sound that is presented in section video advertising content with or without accompanying sound may be presented in video section before after or during the presentation of the editorial content in video section . Alternatively or additionally logos brand names or other advertising material may be presented in the areas surrounding video section while the editorial content is being presented in video section . If the editorial content is audio only e.g. music then video advertising content with or without accompanying sound may be presented in video section before during or after the audio only content is presented. Alternatively or additionally audio only advertising content may be presented before during or after the audio only editorial content and or logos brand names or other advertising material may be displayed in the areas surrounding the video section during presentation of the audio only editorial content.

The presentation of content may at least in part be implemented by a separate media player application accessed through a set of Application Programming Interfaces APIs . For example Windows Media Player may be embedded as part of a web page or used by a stand alone application through an ActiveX control. On the other hand the media player may be integral to the application providing the user interface that is the media presentation functions may be coded into the application.

Referring to in one implementation a system for associating and coordinating the playback of advertising content with downloaded editorial content includes client side components and server side components . The client side components include a user interface component that produces an interface such as interface a playlist manager a cache manager a content cache a content list and metrics cache and a content selection and status list . The server side components include an ad selector a content manager a content list a content media server available content and an ad auditor

With respect to the client side components the content selection and status list generally contains a list of the available content categories the content available in each of the categories and indicates the current status of the available content e.g. downloaded available for download or in the process of downloading . The content selection and status list is used by the playlist manager to coordinate the cache manager and the user interface component

The user interface component generates an interface that displays the available content categories the available content associated with those categories and the status of the available content e.g. in the local cache downloading etc. . The user interface component also allows the user to select content for downloading and allows the user to select content for presentation. The user interface component builds the interface based on the information in the content selection and status list provided by the playlist manager . The user interface component also sends updates to the playlist manager based on user actions such as selecting content for download or deletion.

In addition when the advertising content is presented the user interface component generates auditing messages and then sends those auditing messages to the ad auditor . In general as described further below the auditing messages indicate that a particular piece of advertising content was presented to the user and may indicate the user s behavior while the advertising content was being presented. In some implementations the user interface component may generate and send the auditing messages to the ad auditor if a network connection to the ad auditor is available when the auditing message is generated and may send the auditing messages to the playlist manager if a network connection to the ad auditor is not available. The playlist manager may store the auditing messages in the content list and metrics cache and then send the stored auditing messages to the ad auditor when a network connection to the ad auditor becomes available.

The cache manager controls the downloading of selected editorial content and associated advertising content which is then stored in the content cache . The cache manager uses the content selection and status list to select and download the media files for the selected editorial content and associated advertising content. The cache manager controls the downloads based on user preferences such as network or processor idle time and bandwidth limits. Also based on the content selection and status list the cache manager deletes files based on content expiry times specified in the content selection and status list or indications in the content selection and status list that the user has selected the content for deletion. The cache manager also may delete content based on user preferences such as maximum length of time content should be retained.

In general the playlist manager coordinates the user interface component and the cache manager through the content selection and status list . The playlist manager initially generates the content selection and status list based on the content list obtained from the content manager . For example if the content selection and status list and the content list use the same data structure the content list may simply be used as the content selection and status list . Alternatively the information contained in the content list may be extracted and used to create a new list for the content selection and status list

The playlist manager provides the content selection and status list to the user interface component which uses the content selection and status list to generate the interface that displays the content categories and available content along with the current status of the available content e.g. downloaded available for download or in the process of downloading . When the user uses the interface to select a piece of content for download or to delete a piece of downloaded content the user interface component communicates this to the playlist manager . The playlist manager updates the content selection and status list to reflect the user selections or deletions and sends the updated content selection and status list to the cache manager . Based on the content selection and status list the cache manager downloads the media files for the selected editorial content and associated advertising content and deletes the media files for the deleted editorial content and associated advertising content.

In addition when the cache manager completes the download of selected editorial content and associated advertising content the cache manager communicates this information to the playlist manager . The playlist manager updates the content selection and status list with this information and sends the updated content selection and status list to the user interface component . The user interface component updates the interface to reflect the updated information in the content selection and status list

With respect to the server side components the ad selector and ad auditor may be part of an advertising back end system. The back end advertising system may be a hosted platform for selecting inserting and managing advertising and marketing messages into or around editorial content both streaming and downloaded. The backend system may support a variety of delivery mechanisms including broadband video on demand VOD interne protocol television IPTV media center PCs mobile streaming media and downloaded video content.

In general the backend system may perform five primary functions as well as various other functions 1 Planning creation and management of targeted campaigns campaign management 2 Managing the subscriber experience the type and sequence of message delivery experience management 3 Business intelligence campaign performance analysis and audience analytics 4 Selecting advertising content for insertion within and around content and 5 Confirming and counting ad deliveries auditing .

The first function campaign management lets advertising operations managers specify for example business rules associated with an advertising campaign. The business rules regarding an advertising campaign generally define the parameters under which the associated advertising content should be presented such as one or more content categories of the editorial content the timing that the advertising content should be presented for example at night or mid afternoon the percentage of the population to whom the advertising media should be presented the frequency with which the advertising media should be presented the number of times the associated advertising content should be presented in a period of time and or the geographic location s of the users to whom the advertising media should be presented. The campaign management function also may include advertising inventory forecasting and reservation. Techniques and a system for defining campaign business rules as well as performing advertising forecasting is described in U.S. application Ser. No. 11 088 262 titled Managing Advertising Inventory filed on Mar. 24 2005 and incorporated herein by reference.

The second function experience management lets advertising operations managers specify for example business rules associated with the overall user experience such as the ratio of advertising content presented to editorial content presented what type of advertising content is presented e.g. branding advertisements preview and the order that advertising content and editorial content is presented. These various user experience rules may be applied for example on a per editorial content basis a per content category basis or may be applied for the overall set of editorial content or some other logical grouping of editorial content . For example advertising operations managers may set a ratio of advertising content to editorial content for a specific category or type of editorial content such as sports related content or popular content. As another example advertising operations managers may also designate that for a particular category of content a preview is presented first then an advertisement and then the editorial content is presented. Techniques and a system for defining user experience business rules is described in U.S. application Ser. No. 11 023 638 titled Advertising Content Delivery filed on Dec. 29 2004 and incorporated herein by reference.

The third function business intelligence gives advertising operations managers insight into for example the campaign performance audience metrics and audience behavior. The fourth function selecting advertising content is generally performed based on the business rules both campaign rules and user experience rules and information obtained in requests to the advertising back end for the selection of advertising content to be presented with the editorial content.

The auditing function may provide advertisers with information about which ads were actually delivered to users along with information about the user s actions while the advertising content was presented. To enable the auditing function the client systems may send auditing messages to the back end advertising system. The auditing messages indicate which advertising content was presented to the user and may additionally include information about the user s behavior during the presentation of the advertising content along with other information. Auditing messages and techniques related to auditing messages is described in U.S. application Ser. No. 11 023 631 titled Auditing of Content Related Events filed on Dec. 29 2004 and incorporated herein by reference.

In general based on the campaign business rules and the user experience business rules the ad selector selects one or more appropriate pieces of advertising content to be associated with a particular piece of editorial content. At times depending on the business rules the ad selector may actually select zero pieces of advertising content.

The ad auditor receives auditing messages from the client system. The auditing messages generally may help in appropriately billing advertisers for the advertising content that is presented. In general the auditing messages indicate that a particular piece of advertising content was presented to the user and may indicate the user s behavior while the advertising content was being presented e.g. whether the user minimized the interface whether the user paused the media player or whether the media player was in full screen mode . The auditing messages also may contain other information such as the category of editorial content associated with the advertising content present an identifier of the editorial content and the time that the editorial content is being presented. The auditing message may contain a unique identifier for the user such as a globally unique identifier GUID .

The content manager serves available content lists to the client systems. The content lists include metadata describing the content categories and the available editorial content. The content lists generally may be managed and made available by a content provider not shown . For example a content provider may make the content lists available as a web service with the content manager accessing the web service to obtain a copy of the content list

When the playlist manager requests the content list the playlist manager may pass an identifier e.g. GUID of the user to the content manager which passes the identifier along with other information such as the content categories included in the content list or identifiers of the editorial content included in the content list to the ad selector . Based on the this information and the business rules the ad selector selects particular advertising content and returns identifiers of the advertising content along with indications of which editorial content each piece of advertising content should be associated with. The content manager then updates the content list to include the indicators of the advertising content and then sends the updated content list to the playlist manager . As described above depending on the business rules the ad selector may at times actually select zero pieces of advertising content to be associated with a piece of editorial content. In this case the ad selector indicates that no advertising content should be associated with the editorial content and the content list is updated or not as appropriate.

When a user uses the interface to select a piece of editorial content to be presented the user interface component sends a request to the playlist manager for the playlist associated with the selected editorial content. The playlist manager uses the content list to develop a playlist that contains the media files for the editorial content and the associated advertising content and sends the playlist to the user interface component . The user interface component then presents the editorial and advertising content according to the playlist.

The content media server is a file server that sends media files to client machines at a time and bandwidth dictated by the client s cache manager . Transmission can be interrupted and restarted if for example the cache manager determines that the computer is being actively used or that extra bandwidth is required for other user operations.

In general data structure is a hierarchy i.e. tree of content categories and content items where each ContentItem structure may contain a list of one or more MediaItem structures that represent media files to be played in order for the ContentItem. Generally the ContentItem represents the editorial content that the user can select for download. The MediaItem structures in a ContentItem are those for the editorial media files and associated advertising media files that will be presented when the user selects the editorial content for presentation. The data structure may be in the eXtensible Mark up Language XML format with the fields illustrated in representing XML tags. The tags illustrated in may have the following meanings 

Referring particularly to the playlist manager sends a request for the content list to content manager . The request includes an identifier e.g. GUID associated with the end user or the client system . Prior to sending the content list to the playlist manager the content manager inserts entries for advertising content into the content list such that the advertising content is associated with particular editorial content. For example the content list may include a ContentItem that represents the editorial content. A MediaItem structure that represents the editorial medial files may be included in the ContentItem and the mediaURL of that MediaItem may include the URL for downloading the editorial media file. To insert entries for advertising content associated with that editorial content the content manager may insert additional MediaItem structures that represent the advertising media files into the ContentItem structure. The mediaURL of the MediaItems includes the URL for downloading the advertising media file from the content media server . The content manager may insert the advertising content MediaItem structures before or after the editorial content MediaItem structure. Alternatively or additionally if the editorial content is composed of multiple media files the content manager may insert the advertising content MediaItem structure in between editorial content MediaItem structures.

To obtain the information needed to insert the entries for the advertising content the content manager sends one or more requests for advertising content information to ad selector . The ad selector selects the appropriate piece s of advertising content and sends identifiers for the advertising content to the content manager . The content manager then updates the content list to include the identifiers for the advertising content and sends the updated content list to the playlist manager .

When the user invokes the user interface component the user interface component requests the local copy of the content list from the playlist manager . Once invoked the user interface component also may periodically or aperiodically request the content list from the playlist manager and receive the local copy of the content list . This allows the user interface component to update the interface based on updates to the playlist that for example result from cache manager completing downloads.

The playlist manager responds to the request from the user interface component by sending the local copy of the content list to the user interface component which uses the received content list to build the interface shown to the user. When a user makes selections in the interface e.g. selecting a piece of editorial content for download the user interface component sends a request to playlist manager to update the content list . The playlist manager updates the content list to reflect the user selections. For example the playlist manager may flag selected editorial content and associated advertising content for download. The playlist manager responds to the request by sending the updated content list to the user interface component which updates the interface based on the updated content list.

The cache manager also periodically or aperiodically requests the content list from the playlist manager . The playlist manager responds by sending the content list to the cache manager . The cache manager reviews the received content list to determine which editorial content and advertising content to download. The cache manager then requests the editorial content and advertising content from the content media server . The content media server responds by sending the media files corresponding to the editorial content and the advertising content . As described above the cache manager may cooperate with the content media server to control the downloads so as to comply with user preferences regarding bandwidth and processing time usage.

Once selected editorial content and associated advertising content has been downloaded from the content media server the cache manager sends a request to the playlist manager to update the content list to reflect the completed downloads and to include an indication of their location at the client system e.g. by modifying the mediaURL attribute to a URL for the local file . The playlist manager then updates the content list to reflect the downloaded status of the editorial content and advertising content and sends the updated content list to the cache manager .

Referring to when a user uses the user interface component to select a piece of editorial content to be presented the user interface component sends a request to the playlist manager for the playlist associated with the selected editorial content . The playlist manager uses the content list to develop a playlist that contains the media files for the editorial content and the associated advertising content and sends the playlist to the user interface component . For example the playlist manager may generate a playlist that includes the media files represented by the MediaItem structures included in the ContentItem structure that corresponds to the selected editorial content.

The user interface component then uses the playlist to access and present the editorial content and the advertising content. In particular for each media file in the playlist the user interface component sends a request to the content cache for the media file . The content cache responds with the media file which the user interface component then presents to the user. When the user interface component presents the advertising media the user interface component sends an auditing message to the ad auditor if a network connection to the ad auditor is available. Otherwise the user interface component sends the audit message to the playlist manager which stores the audit message in the content list and metrics cache . When a network connection to the ad auditor is available the playlist manager sends any audit messages that may have been stored in the content list and metric cache to the ad auditor .

Referring to in another implementation the content manager functionality is implemented on the client side and is modified to more dynamically select which specific piece or pieces of advertising content to present when a piece of editorial content is presented. Accordingly in the implementation of system shown in the client side components include a user interface component that produces an interface such as interface an experience manager system that includes the playlist manager and the client side content manager a download cache manager a content cache a content selection and status list and a content list and metrics cache . The server side components include an ad selector a content provider a content list a content media server available content and an ad auditor

With respect to the server side components the ad selector the content media server the set of available content and the ad auditor generally operate in the same manner as the corresponding components in the implementation shown in except as discussed below. In addition the content provider operates in a similar manner as the content provider described with respect to the implementation shown in but not shown in . Specifically the content provider makes available the content list which includes meta data describing the content categories and the available editorial content. The content provider makes the content list available to the client side content manager . For example the content provider may make the content list available as a web service with the client side content manager accessing the web service to obtain a copy of the content list . The content list may the data structure as described with respect to .

With respect to the client side components the content selection and status list the user interface component and the playlist manager generally operate as described with respect to the implementation shown in . More specifically the user interface component builds and updates the interface based on the content selection and status list and the cache manager selects downloads and deletes the media files for the selected editorial content based on the content selection and status list . The playlist manager coordinates these functions of the user interface component and the cache manager through updates to the content selection and status list . The playlist manager stores a copy of the most recent content selection and status list in the content list and metrics cache

The client side content manager operates in a similar manner as the server side content manager except that the client side content manager obtains a set of advertising content appropriate for the downloaded editorial content and or the editorial content available for downloading along with information regarding the business rules used by the ad selector for selecting advertising content e.g. the campaign business rules and or the user experience business rules and uses the business rules to select and associate one or more particular pieces of the advertising content with a piece of editorial content when the editorial content is selected for presentation. To do so the client side content manager contacts the ad selector when a network connection to the ad selector is available. When the content manager contacts the ad selector the content manager downloads from the ad selector 1 an initial selection of a set of advertising content that is appropriate for the editorial content that is available for download or has been downloaded 2 the campaign business rules for the selected set of advertising content and 3 the user experience business rules applicable to the editorial content that is available for download or has been downloaded.

In addition when the user selects a piece of editorial content for presentation the content manager selects the advertising content to be presented with the editorial content. At times depending on the business rules the content manager may actually select zero pieces of advertising content to be associated with a piece of editorial content. For example no advertising content may be selected in order to maintain a ratio of advertising content presented to editorial content presented.

In some implementations when the user selects a piece of editorial content to be presented the content manager may attempt to contact the ad selector to have the ad selector select one or more pieces of the downloaded advertising content to be presented with the selected editorial content. If a network connection to the ad selector is not available then the content manager selects the advertising content based on the downloaded campaign and user experience business rules. In other implementations the content manager may not attempt to contact the ad selector when the user selects a piece of editorial content for presentation and instead may simply uses the downloaded campaign and user experience business rules to select advertising content. Alternatively in other implementations the content manager may not download campaign business rules or user experience business rules and therefore may contact the ad selector each time the user selects a piece of editorial content for presentation.

The content manager also receives auditing messages generated by the user interface component when the advertising content is presented and a network connection to the ad auditor is not available. In general as described above the auditing messages indicate that a particular piece of advertising content was presented to the user and may indicate the user s behavior while the advertising content was being presented along with other information. The content manager stores the auditing messages in the content list and metrics cache . Periodically or aperiodically the content manager transmits the auditing messages to the ad auditor when a network connection to the ad auditor is available. In some implementations the user interface component may generate and send the auditing messages to the ad auditor if a network connection to the ad auditor is available when the auditing message is generated and send the auditing messages to the content manager when a network connection to the ad auditor is not available so that the content manager can send the auditing messages to the ad auditor when the network connection becomes available.

For example the content manager may send to the ad selector an identifier of the user e.g. a GUID and a list of the content categories in the content selection and status list . The ad selector may then select a set of advertising content that is appropriate to the user and the content categories e.g. it may select advertising content that is appropriate for the demographic of the user and that has associated campaign business rules that target one or more of the content categories . The ad selector then returns identifiers for the selected advertising content along with the campaign business rules applicable to the selected advertising and the user experience business rules applicable to the content categories.

Once the content manager receives the initial selection of advertising content the content manager instructs the cache manager to download the selected advertising content and the cache manager confirms that it receives those instructions . The cache manager then downloads the advertising content from the content media server and .

The rest of the communications and actions of playlist manager user interface component cache manager are the same as the corresponding communications and actions shown in except that the cache manager downloads the editorial content and not the advertising content in communications and

Referring to when the user selects a piece of editorial content to be presented the user interface component sends a request to the playlist manager for the playlist associated with the selected editorial content . The playlist manager accesses the content list and sends the content list to the content manager with a request to the content manager to select advertising content and insert the selected advertising content into the appropriate position in the content list .

To select the advertising content the content manager attempts to contact the ad selector to have the ad selector select one or more pieces of the downloaded advertising content to be presented with the selected editorial content and appropriate place for the advertising content in the content list and hence the playlist . If the ad selector is available the ad selector returns a selection of advertising content . The content manager may initially attempt to contact ad selector because the campaign business rules or the user experience business rules may have changed between the time they were downloaded by the content manager and the time when the user selects the editorial content for presentation.

If a connection to the ad selector is unavailable the content manager uses the downloaded set of campaign business rules and user experience business rules to select one or more pieces of advertising content to be presented with the editorial content and to determine the positions of the advertising content in the content list and therefore in the playlist . In either event the content manager updates the content selection and status list to include the advertising content and passes the updated list to the playlist manager which develops a playlist that includes the editorial content and advertising content and provides the playlist to the user interface component .

The rest of the communications and actions of playlist manager user interface component and ad auditor are the same as the corresponding communications and actions shown in except that the cache manager downloads the editorial content and not the advertising content in communications and

The above described implementations have generally indicated that the editorial content is downloaded across a network such as the Internet. In other implementations however the client side advertising application may control the insertion of advertising content into or around editorial content that is already resident at the client system as opposed to content that is downloaded to the client system from e.g. a content provider website . The content may be for example content on a DVD or recorded using a personal video recorder. For example with respect to the implementation shown in the playlist manager or cache manager system may identify the editorial content at the client system e.g. when a DVD is inserted or when the content is stored on a hard drive and send an identification to the content manager so that the content manager can assemble a content list that includes the editorial content and e.g. advertisements. Then when the user indicates that he or she wants the content to be played the items on the content list are presented which includes the content . As another example with respect to the implementation of the experience manager system may identify the editorial content at the client system and request a set of ads from the ad selector . When the editorial content is then presented the experience manager system may then select which advertising content to present with the editorial content. Doing so for example may allow different advertisements or movie previews each time a movie on a DVD is presented.

Referring to a user interface such as a web page displayed by a web browser may generally provide a user with access to on demand streaming media. As shown the web page may include one or more hyperlinks . Each of the hyperlinks link to an on demand video or audio stream. When the user selects one of the hyperlinks a stand alone media player or a media player embedded in the web page or another web page connects to and presents the on demand media stream.

Referring to a system may supplement some of the remote low definition content linked to by hyperlinks on the web page with high definition content downloaded to the user s computer. In general in the system higher definition versions of some of the content linked to by hyperlinks are downloaded to the user s computer and are presented instead of the low definition versions. Which pieces of content are downloaded may be inferred based on explicit user preferences and previous user behavior.

The system includes client side components and server side components . The server side components include a web server one or more web pages low definition content and high definition content . The web pages include hyperlinks to the low definition content . The high definition content includes versions of the low definition content that are higher definition than what can be supported by the network bandwidth or at least higher definition than the low definition versions . That is the higher definition content includes versions that have better video quality than the low definition content . The video quality may be measured using an objective measure such as the peak signal to noise ratio PSNR or a subjective measure such as one of those described in ITU T recommendation BT.500.

The client side components include a web browser a reference manager a cache manager and a high definition content cache . The user interface is a standard browser that requests and renders web pages . Web pages include code that invoke local functions that enable the browser to pass an identifier of the web page to reference manager and when a user selects a hyperlink forwards the user request for content to the reference manager . Communication between the browser and the reference manager may be implemented using a local web service a browser plug in or an ActiveX control. If the reference manager is not installed or some other component of the system is not available the code causes the hyperlinks in web pages to simply point to the low definition content with the web page and browser operating as normal to access the low definition content

The reference manager controls whether a remote low definition file or a local high definition file is accessed when the user selects a piece of content. As described above when the user selects a hyperlink the user s request for content is sent to reference manager . In response the reference manager provides a remote URL or a local URL to the browser in response to the user request for content. The reference manager provides a remote URL when a high definition version is not stored locally in the high definition content cache . The remote URL points to the remote low definition version of the selected content. The reference manager provides a local URL when a high definition version of the content has been downloaded and is stored in the high definition content cache . The local URL points to a high definition version of the content in high definition cache . Thus when a high definition version of the content exists locally the user is presented with the high definition version instead of the low definition version.

The reference manager also controls which high definition content is downloaded to high definition cache . Reference manager may infer which content linked to by hyperlinks is of most interest to the user and cause the high definition versions of that content to be pre fetched prior to the user selecting the content for presentation. Reference manager may infer which content is of most interest to the user based on explicit user preferences and or user behavior. For instance if the user designates that sports is a category of high interest to the user then high definition versions of the content linked to by a sports web page may be pre fetched. Alternatively or additionally the reference manager may track which web pages the user requests and cause the cache manager to pre fetch high definition versions of the content on the web pages most frequently visited by the user.

The reference manager may periodically access the web pages for which high definition content is pre fetched to determine which content is linked to by those pages and to cause the high definition versions be downloaded. For example the reference manager may periodically or aperiodically access the sports web page and determine which content is linked to by the sports web page. The reference manager then causes high definition versions of the content to be downloaded so that it is available when the user accesses the sports web page and selects a piece of content linked to by the sports web page.

The cache manager controls the downloading of the content selected by the reference manager for pre fetching. The cache manager controls the downloads based on user preferences such as network or processor idle time and bandwidth limits. Also the cache manager controls the deletion of high definition content in high definition content cache

The browser sends a request for a web page to the web server which responds with the web page . The web page includes a mechanism e.g. Javascript plug in ActiveX that passes the URL and a copy of the page to the reference manager which acknowledges receipt of the URL and web page content . The reference manager keeps track of how often the user visits this particular web page.

When the user selects a hyperlink in the web page that corresponds to a piece of content a request is sent to the reference manager to determine whether a local high definition version of the content exists and . When a local high definition version does not exist the reference manager responds with the URL to the remote low definition version of the content which causes the browser to request and receive a web page that presents the low definition version of the content. On the other hand when the local high definition file exists the reference manager responds with the URL that points to the local high definition version of the content which the browser then accesses and presents to the user.

The reference manager builds an inferred content download list from the web pages visited most often by the user. The reference manager sends this list to the cache manager which returns the status of all files being downloaded or finished downloading and available . The cache manager also requests and receives the media files corresponding to the list items from the web server

The reference manager also periodically or aperiodically updates the list by fetching web pages that the user visits often. To that end the reference manager requests the frequently visited web pages from web server which returns the requested web pages to the reference manager . The reference manager then uses the new versions of the web pages to update the list.

While the implementation described with respect to describe changing links to low definition content to links to high definition content other implementations more generally may change links from less desirable content to more desirable content. The desirability of content may be based on a number of mean metrics such as the content being available as a locally cached file whether in high definition of not being a higher quality file whether local or remote being available from a network connection that has better bandwidth than others or being available from a network connection that has a better quality of service than others.

The techniques described above are not limited to any particular hardware or software configuration. Rather they may be implemented using hardware software or a combination of both. The methods and processes described may be implemented as computer programs that are executed on programmable computers comprising at least one processor and at least one data storage system. The programs may be implemented in a high level programming language and may also be implemented in assembly or other lower level languages if desired.

Any such program will typically be stored on one or more computer usable storage media or devices for example CD ROM RAM or magnetic disk . When read into the processor of the computer and executed the instructions of the program cause the programmable computer to carry out the various operations described above.

A number of implementations have been described. Nevertheless it will be understood that various modifications may be made. For example elements of one or more implementations may be combined deleted supplemented or modified to form further implementations. In addition while the foregoing techniques have been described with respect to downloaded content the techniques can be adapted for streaming content. Accordingly other implementations are within the scope of the following claims.

