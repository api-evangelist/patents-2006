---

title: Systems and methods for disabling an array port for an enterprise
abstract: Systems and methods are provided for disabling an array port in an enterprise storage system. In one embodiment, a system comprises a storage area network (SAN), a plurality of hosts, an array controller comprising a plurality of array ports, and a management server. The management server receives a request to disable an identified one of the plurality of array ports and identifies, from a configuration table stored in the management system server, one or more of the plurality of hosts having at least one path to the identified array port. The management server transmits an instruction to the one or more of the plurality of hosts to disable paths to the identified array port.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07962567&OS=07962567&RS=07962567
owner: EMC Corporation
number: 07962567
owner_city: Hopkinton
owner_country: US
publication_date: 20060627
---
The present invention generally relates to the field of enterprise path management. More particularly the invention relates to systems and methods for disabling an array port for an enterprise.

Enterprise storage systems store data in large scale environments and differ from consumer storage systems in both the size of the environment and the types of technologies that store and manage the data. A large scale environment that stores data is typically referred to as a storage area network SAN . SANs are commonly used in enterprise storage systems to transfer data between computer systems and storage devices. A typical SAN provides a communication infrastructure including physical connections between devices and a management layer which organizes the connections storage devices and computer systems.

In a SAN environment one or more servers provide services to other systems e.g. clients over the network. Servers in a SAN environment are typically referred to as hosts. Each host connects to the SAN via one or more host bus adapters. In the case of a Fibre Channel SAN the hosts may use special Fibre Channel host bus adapters and optical fiber for connections between devices.

An enterprise storage system may include multiple disk drives that combine to form a disk array. A typical disk array includes a disk array controller a cache disk enclosures and a power supply. Examples of disk arrays include the SYMMETRIX Integrated Cache Disk Array System the CLARIION Disk Array System both available from EMC Corporation of Hopkinton Mass. A disk array controller is a piece of hardware that provides storage services to computer systems that access the disk array. The disk array controller may attach to a number of disk drives that are located in the disk enclosures. For example the disk drives may be organized into RAID groups for efficient performance. RAID redundant array of inexpensive disks is a system that uses multiple disk drives that share or replicate data among the drives. Accordingly in a RAID system instead of identifying several different hard drives an operating system will identify all of the disk drives as if they are a single disk drive.

Disk array controllers connect to a SAN via a port. A port serves as an interface between the disk array controller and other devices in the SAN. Each disk array controller typically includes two or more ports. Disk array controllers may communicate with other devices using various protocols such as the SCSI Small Computer System Interface command protocol over a Fibre Channel link to the SAN. In the SCSI command protocol each device is assigned a unique numerical identifier which is referred to as a logical unit number LUN . Further communication using the SCSI protocol is said to occur between an initiator e.g. a host and a target e.g. a disk drive via a path. For example a path may include a host bus adapter an associated SCSI bus or Fibre Channel cabling and a single port of a disk array controller.

Path management software is frequently used to manage SANs and among other things can detect load imbalances for disk array controllers in a SAN and can select alternate paths through which to route data. An example of path management software is EMC POWERPATH by EMC Corporation of Hopkinton Mass.

When a disk array controller or port of a disk array controller needs maintenance the disk array controller or port must be taken offline. Taking a disk array controller or port offline will cause input output errors and path failures across a SAN for any hosts accessing logical units through the offline disk array controller or port. These errors are often difficult to diagnose and may cause unnecessary corrective actions to occur. It is instead preferred to take a disk array controller or port offline with respect to an enterprise before the disk array controller or port is placed in an offline state in the array. However typical path management software does not provide functionality for disabling array controllers and array ports with respect to an entire enterprise. Therefore conventional techniques are limited and suffer from one or more drawbacks.

In view of the foregoing there is a need for improved systems and methods for disabling a port or an array controller.

Consistent with an embodiment of the present invention a system is provided for disabling an array port in an enterprise storage system. The system may comprise a storage area network SAN a plurality of hosts an array controller comprising a plurality of array ports and a management server. The management server may receive a request to disable an identified one of the plurality of array ports. The management server may also identify from a configuration table stored in the management system server one or more of the plurality of hosts having at least one path to the identified array port. The management server may transmit an instruction to the one or more of the plurality of hosts to disable paths to the identified array port.

Consistent with another embodiment of the present invention a computer implemented method is provided for disabling an array port in an enterprise storage system. A request may be received to disable an identified one of a plurality of array ports included in an array controller connected to a storage area network SAN . One or more of a plurality of hosts having at least one path to the identified array port may be identified from a configuration table stored in a management server connected to the SAN. A command may be transmitted to the identified one or more of the plurality of hosts to disable paths to the identified array port.

Consistent with another embodiment of the present invention a computer readable medium is provided for disabling an array port in an enterprise storage system according to a method. The method may implement the steps discussed above.

Consistent with yet another embodiment of the present invention an apparatus is provided for disabling an array port in an enterprise storage system. The apparatus may comprise a data storage. The data storage may comprise a notification module for receiving a request to disable an identified one of a plurality of array ports included in an array controller. The data storage may further comprise an identifier module for identifying from a configuration table stored in the data storage one or more of a plurality of hosts having at least one path to the identified array port. The data storage may also comprise a transmitter module for transmitting an instruction to the one or more of the plurality of hosts to disable paths to the identified array port.

It is to be understood that both the foregoing general description and the following detailed description are exemplary and explanatory only and are not restrictive of the invention or embodiments thereof as claimed.

The following detailed description refers to the accompanying drawings. Wherever possible the same reference numbers are used in the drawings and the following description to refer to the same or similar parts. While several exemplary embodiments and features of the invention are described herein modifications adaptations and other implementations are possible without departing from the spirit and scope of the invention. For example substitutions additions or modifications may be made to the components illustrated in the drawings and the exemplary methods described herein may be modified by substituting reordering or adding steps to the disclosed methods. Accordingly the following detailed description does not limit the invention. Instead the proper scope of the invention is defined by the appended claims.

The methods and apparatus of the present invention are intended for use in storage area networks SANs that include data storage systems such as the SYMMETRIX Integrated Cache Disk Array System or the CLARIION Disk Array System available from EMC Corporation of Hopkinton Mass. and those provided by vendors other than EMC Corporation.

The methods and apparatus of the present invention may take the form at least partially of program code i.e. instructions embodied in tangible media such as floppy diskettes CD ROMs hard drives random access or read only memory or any other machine readable storage medium including transmission medium. When the program code is loaded into and executed by a machine such as a computer the machine becomes an apparatus for practicing the invention. The methods and apparatus of the present invention may be embodied in the form of program code that is transmitted over some transmission medium such as over electrical wiring or cabling through fiber optics or via any other form of transmission. When implemented on a general purpose processor the program code combines with the processor to provide a unique apparatus that operates analogously to specific logic circuits. The program code software based logic for carrying out the method is embodied as part of the system described below.

Systems and methods consistent with the present invention provide functionality for disabling an array port or an array controller for an enterprise. A disable tool may allow an administrator to disable the array port or the array controller for all hosts in the enterprise that have established paths to the disabled array port or array controller. For example one or more hosts in a SAN may use software e.g. EMC POWERPATH by EMC Corporation for load balancing. Furthermore the host may communicate with a management server. The management server may use software e.g. EMC SMARTS by EMC Corporation to identify and handle errors and to identify path failures from hosts. EMC SMARTS also provides functionality to model components and their relationships across networks applications and storage.

An administrator at a host may access the management server via for example a graphical user interface GUI . Furthermore the administrator may transmit a notification to the management server that a particular array port or a particular array controller is no longer available. The management server may then access a configuration table to determine which host or hosts have paths established to the unavailable array port or array controller. The management server may transmit a command to the identified hosts to disable all paths to the unavailable array port or array controller. Furthermore the management server may transmit a re enable command to the identified hosts in order to re enable the disabled array port or array controller.

Storage area network SAN provides communications between the various entities in system such as management server hosts and array controller . SAN may be a shared public or private network and encompasses a wide area or local area. SAN may be implemented through any suitable combination of wired and or wireless communication networks. Furthermore SAN may include a local area network LAN a wide area network WAN an intranet or the Internet.

Management server may comprise a general purpose computer e.g. a personal computer network computer server or mainframe computer having a processor that may be selectively activated or reconfigured by a computer program to perform one or more methods consistent with the present invention. Management server may also be implemented in a distributed network. Alternatively management server may be specially constructed for carrying out methods consistent with the present invention. Furthermore management server may include a data storage for storing a configuration table and program modules that implement a program for disabling an array port or an array controller for an enterprise. Program modules for implementing the program are discussed in further detail with respect to .

Array controller is connected to SAN via ports and . Ports serve as interfaces between array controller and other devices in SAN . Array controller is also connected to disk drives and which may be enclosed in one or more disk enclosures not shown . Each of disk drives and may be uniquely identified by a LUN. Array controller may communicate with other devices using various protocols such as the SCSI command protocol over a Fibre Channel link to SAN .

Hosts may be any type device for communicating with management server over SAN . For example hosts may be personal computers handheld devices servers or any other appropriate computing platform or device capable of exchanging data with SAN . Hosts may each include a processor i.e. processors and and a data storage i.e. data storages and . Further each of hosts may include one or more host bus adapters not shown to connect with SAN .

Hosts may execute program modules that provide one or more graphical user interfaces GUIs for interacting with management server . Users may access management server via SAN through a web browser or software application running on for example any one of hosts . For example a web portal may include options for allowing a user to log onto a secure site provided by management server by supplying credentials such as a username and a password. Once logged onto the site the web portal may display a series of screens prompting the user to make various selections for disabling an array port or an array controller. Since embodiments of the present invention may be implemented using an HTTPS hypertext transfer protocol secure environment data transfer occurs in a secure fashion.

Consistent with an aspect of the present invention a web interface generated by management server that is displayed to users of hosts may provide various options. For example a user may select using the web interface a tool for disabling an array port or an array controller. In other embodiments users of hosts may select the disable tool from a GUI generated by software executing on one of hosts .

Consistent with an embodiment of the present invention the disable tool is made available to management server by a remote application programming interface API executing on any one of hosts . An API is an interface that an application on a host implements in order to allow other computer programs to request a service. Further an API allows data to be exchanged between the application and the other computer program. Using one of hosts an administrator for example may transmit a notification to management server indicating that a particular array port or array controller is unavailable.

Furthermore management server may use a configuration table stored in data storage to identify hosts that have paths to an array port or an array controller that a user has identified as being unavailable. In particular a port or controller may be identified by its port or controller number product identification number array serial number and array vendor name. Management server may transmit a command to the identified hosts indicating that paths to the unavailable array port or array controller should be disabled. Furthermore management server may reverse the process by transmitting a re enable command to the identified hosts indicating that the paths to the array port or array controller should be re enabled.

To implement the disable tool program may include instructions in the form of one or more software modules . Software modules may be written using any known programming language such as C XML etc. As shown in software modules include GUI module notification module identifier module transmitter module and update module . Each of modules is discussed below in further detail.

GUI module may provide processing to display data and receive data selections from users of hosts . For example GUI module may generate a GUI used by an administrator at one of hosts to select one or more ports or array controller . The GUI may provide drop down lists or check boxes for selecting an array port or an array controller included in SAN .

Notification module may receive a user notification that one or more ports or an array controller is unavailable. For example an administrator at one of hosts may send a notification that a particular array port is unavailable. Accordingly any hosts having a path to the unavailable array port or array controller should be disabled.

Identifier module may identify hosts that have paths to a particular array port or array controller that an administrator identified as being unavailable in the notification. To determine which of hosts have one or more paths to an unavailable array port or array controller identifier module may examine data stored in configuration table included in data storage . Configuration table may store status information of hosts in a SAN such as which hosts have established parts to a particular array port or array controller. For example configuration table may indicate for each host all paths that the host has established and the target array port or target array controller of each path.

Transmitter module may transmit a command to one or more of hosts indicating that paths to a particular array port or an array controller should be disabled. An array port or array controller may be identified by its port or controller number product identification number array serial number and array vendor name. The command may include the identification information and indicate that the host should disable all paths to the array port or array controller specified by the identification information. Furthermore transmitter module may transmit a command to one or more of hosts in order to re enable paths to an array port or array controlled. For example the command may include the identification information discussed above and may indicate that a particular host or hosts should re enable all paths to an array port or array controller specified by the identification information.

Update module may save updates of hosts that have established new paths to configuration table . For example update module may receive information indicating new paths that have been established to certain ports and or certain array controllers. Accordingly update module may store current host configuration data in configuration table in order to reflect newly established paths.

While the example provided in shows program modules and configuration table as being resident in data storage of management server one of ordinary skill in the art will appreciate that program modules and or configuration table may be stored in data storages and of any one of hosts or for example.

Referring now to a flow diagram is provided of an exemplary method for disabling an array port for an enterprise consistent with an embodiment of the present invention. The method describes a process for disabling an array port based on a configuration table stored by a management server. The configuration table is used to identify one or more hosts having a path to an array port that a user has indicated is unavailable. Accordingly the management server may transmit a disable command to the hosts having paths to the unavailable array port.

At the start of the process a user may transmit a notification from one of hosts to management server . Step . The notification may specify one of ports of array controller which has become unavailable. For example the port may have experienced a failure or an administrator may wish to take the port offline. The notification may identify the port by port number product identification number array serial number and array vendor name. The process then proceeds to step .

In step management server may identify which of hosts have paths to the port that is unavailable. As part of this step management server may examine data stored in configuration table that indicates which hosts are connected to which array ports. For example configuration table may store status information of hosts such as the paths from each of hosts to ports .

Next management server may transmit a command to one or more of hosts that were identified in step . Step . For example the command may indicate that paths from the identified hosts to the unavailable array port should be disabled. In order for the host to identify the port the command may identify the port by port number product identification number array serial number and array vendor name. The one or more hosts having paths to the unavailable array port may then disable appropriate paths. The process then ends.

In other implementations of the above process in step the notification may specific an array controller such as array controller which should have all of its ports disabled i.e. ports and . Furthermore during the above process when a user specifies that a particular port should be disabled management server may optionally prompt the user to indicate whether to also disable all ports of the array controller having the specified port. For example referring again to a user at host may disable port of array controller . Management server may then transmit a notification to host indicating that port is part of array controller . Furthermore the notification may ask the user at host to respond whether the user wishes to disable the entire array controller i.e. also disable ports and . When a user responds affirmatively in step management server may transmit a command to all hosts having paths to the array controller indicating that ports should be disabled. One of ordinary skill in the art will appreciate that these and other modifications to the process are consistent with the spirit and scope of the present invention.

In still other implementations of the present invention the above process may be reversed through the use of a re enable command. For example in step the notification transmitted by a user from one of hosts to management server may specify one of ports of array controller that should be re enabled. Further in step management server may instead identify which of hosts previously had paths to the specified port. Accordingly in step the command transmitted to one or more of the identified hosts may indicate that paths from the identified hosts to the unavailable array port should be re enabled. disabled.

Accordingly systems and methods consistent with the present invention provide a tool for disabling an array port or an array controller for an enterprise. For example in one implementation a system disables an array port in an enterprise storage system. The system comprises a storage area network SAN a plurality of hosts an array controller comprising a plurality of array ports and a management server. The management server receives a request to disable an identified one of the plurality of array ports and identifies from a configuration table stored in the management system server one or more of the plurality of hosts having at least one path to the identified array port. The management server transmits an instruction to the one or more of the plurality of hosts to disable paths to the identified array port. Subsequently the management server may transmits an instruction to the one or more of the plurality of hosts to re enable paths to the identified array port.

The foregoing description has been presented for purposes of illustration. It is not exhaustive and does not limit the invention to the precise forms or embodiments disclosed. Modifications and adaptations of the invention will be apparent to those skilled in the art from consideration of the specification and practice of the disclosed embodiments of the invention. For example the described implementations include software but systems and methods consistent with the present invention may be implemented as a combination of hardware and software or in hardware alone. Examples of hardware include computing or processing systems including personal computers servers laptops mainframes micro processors and the like. Additionally although aspects of the invention are described for being stored in memory one skilled in the art will appreciate that these aspects can also be stored on other types of computer readable media such as secondary storage devices for example hard disks floppy disks or CD ROM the Internet or other propagation medium or other forms of RAM or ROM.

Computer programs based on the written description and methods of this invention are within the skill of an experienced developer. The various programs or program modules can be created using any of the techniques known to one skilled in the art or can be designed in connection with existing software. For example program sections or program modules can be designed in or by means of Java C HTML XML or HTML with included Java applets. One or more of such software sections or modules can be integrated into a computer system or browser software.

Moreover while illustrative embodiments of the invention have been described herein the scope of the invention includes any and all embodiments having equivalent elements modifications omissions combinations e.g. of aspects across various embodiments adaptations and or alterations as would be appreciated by those in the art based on the present disclosure. The limitations in the claims are to be interpreted broadly based on the language employed in the claims and not limited to examples described in the present specification or during the prosecution of the application which examples are to be construed as non exclusive. Further the steps of the disclosed methods may be modified in any manner including by reordering steps and or inserting or deleting steps without departing from the principles of the invention. It is intended therefore that the specification and examples be considered as exemplary only with a true scope and spirit of the invention being indicated by the following claims and their full scope of equivalents.

