---

title: Method and system for data entry of handwritten symbols
abstract: A method and system for data entry of handwritten text into a computer program that is not designed to accept handwritten text is provided. In preferred embodiments, the computer program is designed to operate in a windowing environment. A data entry program receives handwritten data, recognizes the data, and sends the recognized data to the computer program. The computer program processes the recognized data as if it had been entered from the keyboard. According to the present invention, the data entry program overlaps the window of the computer program with an invisible window. To the user, it looks as if the computer program is accepting handwritten data directly.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07305130&OS=07305130&RS=07305130
owner: Microsoft Corporation
number: 07305130
owner_city: Redmond
owner_country: US
publication_date: 20060828
---
This application is a continuation of U.S. patent application Ser. No. 10 611 489 filed Jun. 30 2003 now U.S. Pat. No. 7 116 822 which is a continuation of U.S. patent application Ser. No. 09 908 113 filed Jul. 17 2001 now U.S. Pat. No. 6 594 390 which is a continuation of U.S. patent application Ser. No. 09 386 248 filed Aug. 31 1999 now U.S. Pat. No. 6 269 187 which is a continuation of U.S. patent application Ser. No. 08 179 813 filed Jan. 10 1994 now U.S. Pat. No. 5 956 423 which is a continuation of U.S. patent application Ser. No. 07 716 723 filed Jun. 17 1991 now abandoned.

This invention is related to a method and computer system of data entry of handwritten characters and in particular data entry in a windowing environment.

Handwriting recognition systems are being developed to allow users to input handwritten data into a computer. An electronic tablet allows a user to hand write data that the computer can recognize. The user writes data on the electronic tablet with a special pen. As the user moves the pen across the tablet the tablet displays ink. The tablet senses the position of the pen as the user writes and sends the position data to the computer. The computer receives this position data and converts it to recognized symbols such as letters or numbers in a convenient format such as ASCII format. The computer then processes the formatted characters.

Some handwriting recognition systems recognize no only characters letters and punctuation but also gestures. Gestures are handwritten symbols that are typically used to represent editing commands or to produce non printing text. For example a handwritten backlash over a letter may mean delete the letter a caret in between two letters may mean insert text or a vertical line with an arrow to the left may mean insert a carriage return. Gestures are used extensively when printed documents are edited. During recognition these gestures are converted to a convenient format for use by the computer.

These handwriting recognition systems use algorithms to map handwritten data to symbols. Typically these systems internally store a prototype for each symbol that can be recognized. A prototype is a picture of a handwritten symbol that is used to map handwriting to a symbol. A system that recognizes just capital letters may have only 26 prototypes one for each capital letter. Recognition systems use recognition algorithms to map handwritten data to a prototype. As long as the user writes like the prototypes the handwritten data is successfully recognized. Conversely the more dissimilar the handwritten data and the prototype are the more likely it is that the handwriting styles and legibility of the handwriting. For example the handwritten word dear may be misrecognized as the word clear depending the way the user writes a d and the prototypes for the letters d c and l. 

Although some computer programs are written to accept handwritten data most computer programs are designed to receive data typed by a user at a computer keyboard. Such programs are call non pen programs that is the programs are not designed to support handwritten data entry. It is often desirable to allow users the option to input data through a keyboard or by handwriting. Many people are not proficient at typing. They shun using computers because it is burdensome to enter data. These people however would use a computer if the computer program would accept handwritten data entry. Also there are many situations where the use of a keyboard is impractical and where the use of handwritten data entry would be practical.

Many of the non pen application programs are written for a windowing environment. One such windowing environment is Windows by Microsoft Corporation of Redmond Wash. Several operating systems also have integrated windowing environments. In a windowing environment each application program is assigned a window. The windows for several programs can be shown on the computer display simultaneously. Typically the windowing environment supports multitasking that is multiple programming may be operating concurrently. The windowing system controls the positioning and size of the windows on the screen. Typically the user has considerable flexibility in arranging the windows. In most windowing systems the windows can overlap. The window that logically overlaps obscures the overlapped window.

It would require extensive redesigning and reprogramming to adapt non pen programs to accept handwritten data. In some situations it may not be economically feasible to adapt a non pen program. The costs of the adaptations may not be offset by increased revenue resulting from the program accepting handwritten data. It would be desirable if these non pen application programs could receive handwritten data without the need to adapt the non pen application program. It would be desirable if the non pen program could also receive handwritten gestures.

The methods of the present invention provide for the data entry of handwritten data into a computer program that is not designed to accept handwritten data. According to the methods a non pen application program operates in a windowing environment. A handwriting data entry program detects when a user wants to input handwritten data. The data entry program creates an invisible window which preferably overlaps the application window. An invisible window is a window that when created and displayed has no visual effect on the display. The windowing environment internally treats the creating and displaying of an invisible window like a visible window. However when the user writes with the pen the data entry program inputs the handwritten data converts the data to recognized symbols and erases the handwritten data from the display. The data entry program then sends the recognized symbols to the application program as virtual keyboard or mouse events. The application program then processes the virtual keyboard or mouse events as if the events were enter from the keyboard or mouse.

In preferred embodiments the methods automatically detect when the user wants to input handwritten data to a non pen application. The data entry program monitors all pen down events. The user starts entering handwritten data by writing over a data entry area of the application window. When the data entry program detects a pen down within a data entry area of the application window the data entry program starts the collection and recognition process. When the user stops writing for a period of time the data entry program assumes that the user has finished the handwritten data entry.

In a preferred embodiment the data entry program inputs gestures from the user. The data entry program converts a recognized gesture to keyboard or mouse events or other standard messages that will effect the function of the gesture. The data entry program then sends these events to the application program as virtual events. When the application program receives the virtual events it processes them as if they came from the keyboard or mouse.

It is an object of the present invention to provide a method and system for allowing non pen application programs to receive handwritten data entry.

It is another object of the present invention to provide a method and system for using an invisible window to input handwritten data and send the recognized symbols to an application program.

It is another object of the present invention to provide a method and system for detecting when a non pen application program is in a data entry mode.

It is another object of the present invention provide a method and system for allowing a non pen application program to process gesture data entry.

The methods of the present invention allow the user to input data from a tablet into an application program that is not designed to receive handwritten data a non pen application . Although the methods are described as implemented with the Windows system by Microsoft one skilled in the art would recognize that the methods can be implemented on other windowing systems and some methods can be implemented on non windowing systems. show a typical user interface employing the methods of the present invention. shows a typical display of the word processing package Microsoft Word for Windows. Display is displayed on the display surface . A user of Word typically enters text into data entry window through a keyboard. Text comprises sample text data. Insertion pointer indicates the position at which newly entered text will be inserted into the word processing document. The cursor is an I beam shape. shows the display surface after the user has handwritten the text The End which is to be inserted into the document. With the pen the user writes the text The End onto the tablet . When the user completes writing the text the text is inserted as shown in . A recognizer converts the handwritten text to the ASCII format. The recognized text is then sent to the word processor for insertion at the insertion pointer . The insertion pointer is repositioned at the end of the newly entered text The End . The handwritten text is removed from the display before the text is sent to the word processor.

In a preferred embodiment of the present invention an invisible window is used to capture handwritten data. The handwritten data is recognized and the recognized data is sent to a non pen application. An invisible window is a window with no frame title bar et. When an invisible window is displayed the data in the overlapped windows is not overwritten. Rather the overlapped windows show through the invisible window. Thus it is not possible to visually detect an invisible window until data is sent to the invisible window. For example in once a pen down contact with the input grid is detected the word processing window is overlapped by an invisible window that covers the entire word processing window. shows the effect of handwritten data sent to the invisible window. The handwritten data is the only indication that an invisible window exists. To the user it seems as though the word processing window is accepting the handwritten data directly. However the word processor is a non pen application. The handwritten data is actually sent to the invisible window which is created by a handwriting data entry program.

In a preferred embodiment the start of handwriting is detected by the pen contracting the input grid pen down . The end of handwriting is detected when the pen is not in contact with the input grid pen up for a period of time which may be predetermined or may vary depending on the pace of user handwriting. Alternately the start and stop of handwriting can be detected by selection of a menu item in a visible window of the data entry program.

In block if the message is not equal to WM RCRESULT then the procedure processes other messages as indicated by the ellipsis else the procedure continues at block . In block the procedure converts any gestures in the recognized symbols to equivalent events or messages. The methods of the present invention convert gestures into corresponding virtual events or messages. For example the caret gesture which means insert is converted to a mouse movement event indicating the point of the caret and a left mouse button down event. When an application such as a word processor receives these events it moves the insertion pointer to the caret and is ready to insert data entry. In another example a copy selection gestures which means copy the selection to a clipboard is converted to keyboard events such as control insert or a standard system message such as WM COPY in Windows. One skilled in the art will recognize that other gestures can be similarly converted to virtual events for processing by non pen applications. In block the procedure posts virtual mouse and keyboard events corresponding to the recognized symbols to Windows and returns.

Although the present invention has been described in terms of preferred embodiments it is not intended that the invention be limited to these embodiments. Modifications within the spirit of the invention will be apparent to those skilled in the art. The scope of the present invention is defined by the claims that follow.

