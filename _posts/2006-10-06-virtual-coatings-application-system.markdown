---

title: Virtual coatings application system
abstract: A virtual coatings application system has several features to enhance the realism of simulated spray painting. The system generally includes a display screen on which is defined a virtual surface (such as a truck door) that is intended to be virtually painted or coated by the user. Alternatively, the system includes a head-mounted display unit that displays a virtual spray painting environment in which the virtual surface is defined. The user operates an instrumented spray gun controller that outputs one or more signals representing data as to the status of the controls on the spray gun controller. The system also has a motion tracking system that tracks the position and orientation of the spray gun controller with respect to the virtual surface. Simulation software generates virtual spray pattern data in response to at least the data from the spray gun controller and the position and orientation data received from the tracking system. Virtual spray pattern images are displayed in real time on the virtual surface in accordance with the accumulation of virtual spray pattern data at each location on the virtual surface.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07839417&OS=07839417&RS=07839417
owner: University of Northern Iowa Research Foundation
number: 07839417
owner_city: Cedar Falls
owner_country: US
publication_date: 20061006
---
This application is a Continuation In Part of application Ser. No. 11 372 714 filed on Mar. 10 2006 and entitled Virtual Coatings Application System .

The invention relates to spray gun training and performance analysis methods and systems. In particular the invention relates to the use of computer simulation and virtual reality systems for training and analyzing proper spray techniques.

It can be difficult for a person using a spray gun to keep the spray nozzle at the optimum distance and orientation from the surface being painted or coated while at the same time applying the proper thickness of finish to the surface. This is especially difficult for novices. As an example of the difficulties facing novices consider that merely placing the nozzle too close to the surface can cause an uneven wet film build as well as runs. The quality and uniformity of coverage typically improves as the distance between the spray nozzle and the surface increases however it is not desirable that the spray distance between the nozzle and the surface be substantially larger than an optimum spray distance. Letting the spray distance be too large can cause overspray paint fogging or otherwise decrease the efficiency of paint or coating transfer onto the surface. Having the nozzle too far from the surface not only increases the number of coats necessary to provide a sufficient wet film build for proper paint coverage but also increases the cost of complying with environmental regulations. High levels of overspray and fogging increases the amount of volatile organic compounds that can escape from the spray booth and also increases the amount of hazardous waste that must be disposed of from spray booth air filtering systems.

Training and practical experience help novices improve their skills. Hands on training has been very successful in improving coating efficiency and reducing environmental impacts. However hands on training is time consuming labor intensive and expensive. These factors have made training of large groups such as military personnel complicated. In addition hands on training of finishing techniques with the actual finishing equipment and materials has other drawbacks including the generation of harmful emissions waste of finishing material and limited ability to measurement performance criteria such as transfer efficiency or build efficiency. As a practical matter hands on training tends to limit the number of techniques that can be practiced and evaluated especially with respect to multiple finishing materials and surfaces.

The use of computer simulations and virtual reality systems to foster practice and training of proper spray painting techniques is known in the prior art. For example the application of liquid coatings in industrial paint booths has been simulated by the Johnson Center for Virtual Reality located at Pine Technical College in Minnesota. This system uses an electromagnetic six degree of freedom tracking system to track the position and orientation of a spray gun controller with respect to a projection screen. Computer models are used to display a virtual spray pattern on the screen in accordance with signals from the tracking system. The goal of this virtual reality system is to provide the user with a realistic training environment to learn proper spray techniques. Another system from Pine Technical College uses a head mounted display unit instead of a display screen. A virtual three dimensional spray painting environment is displayed to the user wearing the head mounted display unit such that the user perceives him or herself being immersed within the virtual environment.

Because application of the liquid coating is simulated no material is expended and a harmful emissions and waste are not produced. Also user performance data can be stored in a database for print out and later monitoring. To the extent that computer simulation and virtual reality systems provide a realistic experience these systems can be a worthy supplement to hands on training.

One object of the present invention is to develop a virtual coating application system that provides a more realistic simulation of the spray painting experience for the user. The invention as described herein provides several features contributing to improvements in this respect. Another object of the invention is to provide a virtual coating application system that is able to monitor performance data such as total finishing time transfer efficiency build efficiency amount of finish used and approximate mil thickness and provide the user and the instructor with meaningful feedback which in some cases can be immediate.

The invention is a virtual coatings application system which has several features that enhance the realism of simulated spray painting. In one embodiment the system generally includes a display screen on which is defined a virtual surface such as a truck door that is intended to be virtually painted or coated by the user. The user operates an instrumented spray gun controller that outputs one or more signals representing data as to the status of the controls on the spray gun controller. The system also has a motion tracking system that tracks the position and orientation of the spray gun controller with respect to the virtual surface defined on the display screen. Simulation software in a computer preferably a desk top or laptop PC generates virtual spray pattern data in response to at least the data from the spray gun controller and the position and orientation data received from the tracking system. A virtual spray pattern image is displayed in real time on the display screen in accordance with the accumulation of virtual spray pattern data at each location on the virtual surface.

In another embodiment the display screen is replaced by a head mounted display unit that displays to the user a three dimensional virtual spray painting environment which contains a depiction of a virtual surface. The display is preferably stereoscopic in order to enhance the three dimensional nature of the virtual environment. Such three dimensional systems are sometimes referred to as immersive systems. The system monitors the position and orientation of the head mounted display unit and uses this information to generate the graphics data sent to the head mounted display unit. Preferably the three dimensional virtual spray painting environment also contains a depiction of the spray gun controller such that the user can receive visual feedback of the position and orientation of the spray gun controller with respect to the virtual surface. In addition the system s software is preferably programmed to detect collision of the simulated spray gun with the virtual surface within the virtual environment and alert the user when such a collision is imminent or has been detected.

The preferred embodiment of the invention simulates spray painting with a high volume low pressure spray gun which is typically used in automotive or military applications. In one aspect of the preferred embodiment of the invention the simulation software includes a paint model that outputs virtual spray pattern data to characterize the resulting pattern of virtual spray as a function of time at least in response to the standoff distance and angle of the spray gun controller relative to the virtual surface as well as data representing maximum virtual flow rate through the spray gun controller spray fan size and air pressure. In addition the paint model also receives information regarding the position of the trigger on the spray gun controller thus allowing realistic simulation of partial triggering and hence partial spraying by the user. This allows the user to move the spray gun controller closer to the virtual surface and apply a small partial spray to a discrete area on the virtual surface.

The paint model is preferably based on actual data collected from spray patterns generated for various spray gun settings. The preferred model simulates coverage distribution in an elliptical pattern in which the inner elliptical radii for width and height define an area of constant rate finish coverage and the outer elliptical radii for width and height define the outer extent to which the rate of finish coverage becomes negligible. The area between the inner and outer radii is a spatter coverage region and in accordance with the preferred embodiment of the invention finish coverage falls off linearly between the inner and outer radii throughout this region. Realism in the spatter region is dependant in part on the ability of the system to effectively simulate the extent of atomization for the range of the various spray gun settings. The total finish flow rate per unit time i.e. per software timing cycle is determined by the settings for the maximum virtual flow rate for finish through the spray gun controller the position of the trigger and preferably other relevant parameters or air pressure for high volume low pressure spray gun applications as well as a shear effect transfer efficiency parameter as determined or predicted from experimental data. The mass of finish deposited per unit time is then distributed over the elliptical spray pattern in accordance with the elliptical model. Note that the elliptical radii as well as the mass of droplets in the spatter region are preferably selected using an algorithm based on fluid flow rate i.e. fluid pressure for a spray gun having a needle valve fan size and air pressure. The algorithm is based on actual data collected for spray patterns generated at various spray gun settings. Preferably each location on the virtual surface has an associated alpha channel which controls transparency of the coating at that location e.g. pixel based on accumulation of virtual spray at the given location thus realistically simulating fade in or blending for partial coverage on the virtual surface.

In another aspect of the preferred embodiment of the invention the spray gun controller is a high volume low pressure spray gun instrumented with a variable positionable trigger and a trigger sensor preferably a potentiometer detecting the position of the trigger and generating a signal representing the position of the trigger. The trigger signal is sent to the computer. In addition the spray gun controller has a flow rate control knob that allows adjustment of the maximum virtual fluid flow rate for the spray gun controller. A sensor again preferably a potentiometer senses the position of the control knob and generates a signal which is sent to the computer and is used to scale trigger position data. In this way controls on the instrumented spray gun control the rate of virtual fluid flow onto the virtual surface in a manner that is similar to controls on actual high volume low pressure spray guns in the field. The preferred instrumented spray gun controller also includes a fan size adjustment knob that allows for adjustment of the virtual fan size for the spray gun controller as well as a sensor again a potentiometer that senses the position of the knob and generates a signal that is sent to the computer. Thus allowing the user to adjust the fan size of the virtual spray in a manner similar to an actual high volume low pressure spray gun.

The preferred tracking system is a hybrid inertial and ultrasonic six degree of freedom tracking system. Preferably a combined inertial and ultrasonic sensor is mounted on the instrumented spray gun controller to sense linear and angular momentum as well as ultrasonic signals generated by a beacon of ultrasonic transmitters mounted above or adjacent the virtual work space in front of the display screen. The preferred tracking system provides accurate six degree of freedom x y z pitch yaw and roll tracking data and is well suited to avoid interference that can tend to corrupt data with other types of tracking systems. The signals from the sensors on the spray gun controller are preferably sent to the computer via a USB connection for use by simulation software and or graphics engine software. The cable can be housed within a hose to further simulate a compressed air hose which would typically be attached to a high volume low pressure spray gun controller.

In another aspect of the preferred embodiment of the invention the system has a graphical user interface that allows the user to select training set up parameters and settings for the instrumented spray gun controller as well as view performance criteria and toggle on or off various optional features of the system. For example the user can select finish color for virtual paint using the graphical user interface and in accordance with the preferred embodiment of the invention can change the color during a training session. This feature allows the user to paint an undercoat having a first color on the virtual surface and then change the color for an overcoat or the user could change colors during the application of a coat perhaps multiple times such as would be necessary to paint camouflage. The invention can also be programmed to overlay an electronic stencil over the image of the virtual surface thus preventing accumulated spray from accumulating on the blocked regions of the virtual surface.

The graphical user interface also preferably allows the user to select whether overspray is displayed on the screen or within the three dimensional virtual spray painting environment in embodiments using a head mounted display unit. Overspray is virtual paint that misses the virtual surface of the part. Preferably overspray is shown in a color distinct from the color of the virtual surface of the part and the color of the paint chosen by the user. The preferred graphical user interface also allows the user to select whether virtual paint accumulation is shown in single color mode as described above with respect to the paint model or in multi color accumulation mode in which multiple colors are used to depict the depth of accumulated paint thickness. Both of these features effectively provide immediate visual feedback to the user and his or her instructor.

In systems using a display screen the preferred configuration for the screen on which the virtual surface is displayed also includes one or more icons set apart from the displayed virtual surface which can be activated by the user pointing the spray gun controller at the icon and pulling the trigger. While toggle icons can be provided in this manner for various features the preferred embodiment includes a toggle icon for pausing the training session and a toggle icon for selecting whether to show virtual paint accumulation in multicolor accumulation mode or in the single color mode.

In systems using a head mounted display unit the preferred configuration of the display viewed by the user contains a menu icon that can be activated by the user with the instrumented spray gun controller to display menu options for system control settings or performance references. The user sets the system control settings by controlling the menu with the instrumented spray gun controller.

The preferred graphical user interface also allows the user to select whether to play audio simulating the noise of compressed air. The preferred system includes loudspeakers that are driven by the simulation software if this feature is toggled on to simulate the sound of compressed air when the trigger on the spray gun controller is activated thus simulating sound expected in an actual high volume low pressure spray gun painting environment. Preferably the simulation software uses digital recordings of actual compressed air taken at various air pressure settings. The volume of the compressed air sound preferably varies with respect to the air pressure setting which is entered by the user via the graphical user interface and also varies optionally in response to the trigger position.

In another aspect of the preferred embodiment of the invention various performance data for the current training session and past training sessions is preferably displayed on the graphical user interface for the logged in user. The graphical user interface displays real time data and analysis for the current training session such as total finishing time transfer efficiency build efficiency amount of finish used and approximate mil thickness thus providing the user and the instructor with meaningful feedback. It is preferred that the color of the displayed value for accumulated mil thickness change to indicate when the average has exceeded the selected target thickness in order to alert the user. Moreover as mentioned the GUI preferably displays a table summarizing the scores of previous training sessions for the logged in user thus allowing easy reference for progress analysis. The display on which the virtual surface is displayed may also display the student s performance data or spray gun settings so that this information is within the user s scope of vision during the training session thus providing immediate feedback of the displayed information.

In yet another aspect of the invention the system can simulate the use of a laser targeting and positioning system such as is disclosed in U.S. Pat. Nos. 5 598 972 5 857 625 and 5 868 840 all incorporated herein by reference. These systems propagate two converging light or laser beams from a spray gun onto a surface being painted in order to provide a visual aid for positioning the spray gun at the proper standoff distance and orientation from the surface being painted. In the present invention the graphical user interface preferably allows the user to select whether the system should simulate the use of such a targeting and positioning system.

Hands on performance is often monitored in the field using a magnetic overlay which is laid over the painted part after finishing. These magnetic overlays typically cover the entire surface painted except for the placement of several openings which define points at which mil thickness is measured. The invention can also be configured to provide an electronic version of these electronic overlays once the training session is complete in order to monitor the accumulated mil thickness at various points on the virtual surface. Preferably the monitoring openings in the electronic overlay will mimic the location of the openings in magnetic overlays typically used in the field.

Various other aspects and features of the invention should be apparent to those skilled in the art upon reviewing the following drawings and description thereof.

The virtual coatings application system includes a display screen preferably on a large projection screen television although other types of display screens can be used. A 72 screen measured on the diagonal provides a suitable amount of virtual work area although an 86 screen is preferred. The system defines a virtual surface on the front surface of the display screen. The user is holding an instrumented spray gun controller and is operating the controller to apply a virtual coating or layers of coatings to the virtual surface defined on the screen surface . shows a virtual spray being applied to the virtual surface on the screen surface . Note that the virtual spray is imaginary.

The position and orientation of the spray gun controller is monitored using a tracking system preferably a six degree of freedom tracking system that monitors translation in the x y and z direction as well as pitch yaw and roll. The preferred tracking system is a hybrid inertial and ultrasonic tracking system as described in more detail hereinafter although many aspects of the invention may be implemented using other types of tracking technologies. The preferred inertial and ultrasonic tracking system is desired because it minimizes electrical interference present with other types of commercially available tracking systems. schematically depicts an arrangement of ultrasonic transmitters which are mounted to a frame extending over the space in front the virtual surface . The space in front of the virtual surface is referred to herein as the virtual workspace .

The instrumented spray gun controller is connected to a computer preferably via a USB cable connection . A monitor keyboard and mouse are connected to the computer as well as one or more loudspeakers . The virtual coatings application system includes a graphical user interface that is displayed on the computer monitor .

The instrumented spray gun controller also includes a flow rate control knob . The user turns the flow rate control knob to adjust the maximum virtual flow rate for the spray gun controller . In actual high volume low pressure spray guns a needle valve is typically used to adjust fluid pressure and hence fluid flow rate. In head of knob is shown in phantom. also shows a bushing that receives the knob and a rod and spring leading from the bushing to potentiometer . The potentiometer or sensor senses the position of the flow rate knob and generates a signal representing maximum virtual fluid flow rate which is sent via wires in cable to the computer . The maximum virtual flow rate is used by simulation software in the computer to scale the trigger position data. The maximum virtual flow rate can also be adjusted using the graphical user interface see . In many high volume low pressure spray guns adjustment of the flow rate knob also restricts the range of motion of the trigger. The instrumented spray gun controller may include this feature as well to best simulate actual usage in the field.

The spray gun controller also includes a fan size adjustment knob . The user can rotate the fan size adjustment knob to adjust the fan size of the virtual spray in a manner similar to that on an actual high volume low pressure spray gun. In the head of the fan size control knob is shown in phantom. The fan size control knob screws into a bushing that is mounted inside the spray gun controller housing . A rod and spring mechanism leads from the bushing to a sensor or potentiometer . The stem of the fan size control knob pushes on the rod and the potentiometer monitors the tension on the spring in order to detect the desired fan size for the virtual spray . The fan size can also be adjusted on the graphical user interface see . A signal generated by potentiometer is sent through wires in cable to the computer .

As mentioned above the preferred spray gun controller is also instrumented with a hybrid inertial and ultrasonic sensor which is mounted to the top surface of the controller . The preferred inertial and ultrasonic sensor is supplied along with the other components of the tracking system from Intersense Inc. of Bedford Mass. The preferred sensor is the Intersense IS 900 PC Tracker device. The sensor includes accelerometers and gyroscopes for inertial measurement and a microphone for measuring ultrasonic signals from the beacon of ultrasonic transmitters . The preferred arrangement of ultrasonic transmitters consists of a SoniFrame emitter with two six foot SoniStrips and one four foot SoniStrip from InterSense and provides a tracking volume of approximately 2.0 m 2.0 m 3.0 m for the virtual work space . The tracking system uses hybrid inertial and ultrasonic tracking technologies substantially disclosed in U.S. Pat. No. 6 176 837 which is incorporated by reference herein. The ultrasonic transmitters receive timing signals from tracking software in the computer . The sensor microphone detects high frequency signals from the ultrasonic transmitters and the sensor accelerometers and gyroscope devices generate inertial position and orientation data. As mentioned inertial measurements provide smooth and responsive sensing of motion but accumulation of noise in these signals can cause drift. The ultrasonic measurements are used to correct such drift. The sensor located on the spray gun controller outputs a six degree of freedom signal namely x y z for linear directions and pitch yaw and roll for angular directions. The signals from the sensor are transmitted through a cable which is fed through the controller housing and exits the bottom of the housing through bushing similar to cable . Cable along with cable are sent to the computer . The position and orientation of the sensor is determined based on software in the computer thus determining the position and orientation of the spray gun controller in the virtual work space in front of the display screen surface . While it is possible for the connections from the spray gun controller to the computer to be wireless connections it is preferred to use an actual hose to house the cables and in order to simulate a compressed air hose feeding an actual spray gun. In a similar manner a hose can be mounted to a bushing on the underside of the spray gun controller that would normally accept a tube that supplies the material being supplied to the spray gun or alternatively a container could be attached to simulate spray guns which store paint in a container.

Those skilled in the art will recognize that the spray gun controller allows the user to make the typical adjustments that would be made using a high volume low pressure spray gun in the field.

Based on the six degree of freedom signal that is transmitted to the tracking software via line the tracking software outputs position and orientation data to the simulation software . As described in more detail in U.S. Pat. No. 6 176 837 incorporated herein by reference the tracking software determines the position and orientation data with advanced Kalman filter algorithms that combine the output of the inertial sensors with range measurements obtained from the ultrasonic components. Arrow depicts the six degree of freedom position and orientation data being sent from the tracking software to the simulation software . The simulation software also receives the information arrow directly from the instrumented spray gun as well as information from the graphical user interface see arrow . Generally speaking the simulation software feeds calculated information to a performance database arrow and to graphic engine software arrow . In practice the preferred system actually involves several separate flows of information from the simulation software to the graphical engine software and the performance database . The graphic engine software outputs data that drives images on the projection screen depicted by arrow as well as data that drives loudspeakers depicted by arrow .

Still referring to the simulation software includes a paint model that models the amount and pattern of paint virtually deposited on the virtual surface for a slice of time as will be discussed in more detail below. The simulation software also includes a target model which models a two dimensional image to be displayed on projection screen as the virtual surface of the part being painted. Preferably the models for the virtual painting surfaces are supplied in the 3 D Studio Max 3DS format. For two dimensional images the models are flat along the z axis. Software can be developed for this application in the C programming language using Microsoft Visual Studio .

The graphics engine also includes an audio component . The spray gun controller uses the audio component to load and play audio. In addition the graphics engine preferably includes support for the six degree of freedom tracking system as depicted by box and support for receiving data regarding the settings and trigger position on the spray gun controller is depicted by box . In addition the graphics engine software includes matrix and vector libraries that are used to calculate positions orientations model transformations intersections projections formats and other such datum.

Referring now to the preferred graphical user interface prompts the user to login see login box in order to start the training session. The user is also required to select certain training set up parameters such as finish type finish color target thickness slide preferably 1 mil. to 20 mil. surface type . The interface also requires the user to select settings for the instrumented spray gun controller such as spray gun type fan size air pressure and flow rate . Note that the user is allowed to adjust fan size and flow rate on the instrumented gun controller as well using knobs . Also as discussed more specifically with respect to the user is allowed to change the finish color during the middle of a session. This can be useful for example when the user desires to virtually paint an undercoat using a first color e.g. white then paint an overcoat in a second color e.g. blue or as mentioned previously to virtually paint a coat with multiple colors. Referring briefly to a window on the projection screen display depicts the virtual surface in the form of a door. The door has been virtually painted using different finish colors to develop a camouflage pattern. Color is the original color on the door . Regions depict paint colors that have been chosen by the user during the course of the training session.

Although not specifically shown in the drawings it may be desirable for the software to provide one or more electronic stencils. If the system incorporates this feature the user can select one or more of the stencils to overlay the virtual surface being painted thereby blocking accumulation of the paint over the respective area. Regions depict overspray as described below in connection with . Note that the overspray is depicted in a color different than the original color or the paint colors selected by the user.

Box in entitled Show Overspray enables the user to choose whether or not virtual overspray is indicated on the projection screen . Referring to the virtual surface of a two dimensional image is shown in a window displayed on projection screen . The virtual surface shown in is a two dimensional view of a truck door. Typically the initial color of the door is a solid color such as white or brown before the user begins virtually painting the virtual surface during the training session. Using the spray gun controller the user virtually applies paint to the part . The accumulated paint on the door is depicted by region . Regions labeled in depict overspray that is regions in which the spray pattern missed the part being virtually painted. When the user chooses to show overspray on the display window by checking box on the graphical user interface overspray regions is displayed as well as accumulation region on the virtual surface of the part . Preferably overspray is depicted in a color different than the color of the initial part and different than the color of accumulated paint on the part.

The graphical user interface also includes several toggle switches. Toggle box labeled Play Audio allows the user to determine whether the simulation will include simulated air compressor noise in accordance with data from the audio component in the simulation software. In this regard the system includes one or more speakers and the software interactively generates an output sound signal in response to whether the trigger sensor on the spray gun controller has been activated. The output sound signal is provided in real time to drive the one or more loudspeakers to simulate the sound of compressed air coming from the spray gun controller . The simulation software includes digital sound files of actual compressed air noise recordings. It has been found that the volume of the compressed air varies proportionately to the air pressure of the compressed air supplied to the spray guns in the field. Therefore the software controls the volume of the sound generated by the loudspeakers in accordance with the air pressure setting on the graphical user interface .

The box entitled Show Efficiency enables the user to choose whether certain performance data for the session such as transfer efficiency build efficiency average thickness and amount of paint sprayed are displayed on the projection screen along with the virtual images. Box entitled Show Settings likewise allows the user to choose whether current controller settings are displayed on the projection screen such as maximum flow rate air pressure and fan size. Referring to arrow indicates the display of performance data including values for transfer efficiency build efficiency average thickness and amount of paint sprayed for the training session. Arrow on the other hand indicates display of the current spray gun controller settings namely flow rate air pressure and fan size. Having this information displayed on the projection screen puts this information within the scope of vision of the user and provides immediate feedback in a non distracting manner. Note that it is preferred to allow the user to select whether the information is displayed on the projection screen . illustrate situations in which the information is not displayed in that manner.

Box in entitled Show Accumulation allows the user to choose whether accumulated mil thickness is displayed in single color mode or in a multiple color accumulation mode. Multiple color accumulation mode is illustrated in . Referring to the virtual work surface B of a door is displayed in the window opened on the projection screen . The virtual work surface B has been virtually painted at least partially and accumulation levels both above and below the target thickness are shown by multiple colors. Region in represents an unpainted region on the door B. The remainder of the door has been virtually painted and mil thickness is indicated over surface of the door by the various different colors and . Each color represents a mil thickness being within a certain defined range for that color thus illustrating the topography of accumulated paint thickness. When in accumulation display mode in the preferred system the surface color is used to represent an area with no paint. For example shades of blue represent paint thickness under the target thickness by more than mi shades of green are used to represent value within 1 mil of the target thickness and shades of red represent thickness levels that exceed the target by more than mil. The accumulation display is created using the accumulation shader . The accumulation shader is a .cg file. Note that the user can virtually paint the part B on the projection screen surface without being in accumulation mode and can then change the settings to show accumulation display mode on the projection display . Note also that overspray is not depicted in although it is of course possible to depict overspray while in the accumulation display mode.

Referring now generally to and the windows opened on the projection screen surface included one or more icons that are set apart from the image of the virtual surface being painted. The icons can be activated by the user by pointing the controller at the icon or on the screen and pulling the trigger on the controller . These icons are typically always present when a window is opened. Icon is a pause icon which the user can activate in order to pause the training session. Icon is a toggle for the accumulation display mode. It is possible in accordance with the invention to include other or additional toggle icons on the screen .

Referring again to box entitled Show LaserPaint on the user interface enables the user to select whether the simulation software should model a light or laser targeting and positioning system by illuminating two dots on the screen thus helping the user position the spray on the virtual surface and maintain the spray gun controller at the appropriate distance from the virtual surface and at the appropriate orientation. Preferably the software generates data to illuminate an image on the projection screen simulating a reference beam hitting a painted surface as well as the image on the display screen of the gauge beam illuminating a spot on the surface. The image for the reference beam is preferably set to be in the center of the virtual spray pattern whereas the image for the gauge beam depends on the standoff distance and orientation of the spray gun controller with respect to the screen surface on which the virtual surface is displayed. Preferably the image of the reference beam and the image of the gauge beam will converge to a single point at the middle of the spray pattern when the spray gun controller is located at the appropriate distance and orientation with respect to the virtual surface defined by the display screen . However the image of the gauge beam on the display screen will depart from the image for the reference beam if the gun controller is moved too far or too close to the surface or tilted inappropriately. Since the standoff distance between the spray gun controller and the display screen is known by the tracking system as well as the offset between the sources of the imaginary reference beam and the imaginary gauge beam and the angle of incident of the imaginary gauge beam with respect to the imaginary reference beam via settings on the mocked up laser guide or assumed default settings the system can easily calculate the location of the illuminated images for the imaginary reference beam and the imaginary gauge beam on the surface using fundamental trigonometric expressions.

The graphical user interface in also includes a button to activate calibration of the tracking system and another button that the user can click to start the timer for the training session .

In addition as previously mentioned the graphical user interface shown in displays one or more performance monitoring statistics for the current training session as well as data summaries for previous training sessions. Note that the display box displays the following information for the current training session time of the training session transfer efficiency build efficiency average mil thickness and total finish used. Preferably average mil thickness is displayed in an alternative color such as red when the value for a session exceeds the target thickness selected using the slide on the graphical user interface . This occurs both on the graphical user interface and the display surface . The performance computations are based on the position and angle of the spray gun controller and preferably includes the effects of both shear effect which in the painting trade is commonly called bounceback and overspray which simply misses the part. The effects of bounceback are described hereinafter with respect to . Transfer efficiency is calculated using the following formula Transfer Efficiency Mass of Finish Deposited Mass of Finish Sprayed 100 Eq. 1 Build efficiency is calculated using the following formula Build Efficiency Average Mils Applied Area Sprayed Mass of Finish Sprayed 100 Eq. 2 

For both of these equations the mass of finish sprayed is determined for each timing cycle in relation to the setting for the maximum virtual flow rate by prompt on the graphical user interface or the flow control knob on the spray gun controller as well as the position of the trigger on the spray gun controller . Transfer efficiency is a measure of the amount of finish that is actually transferred or deposited on the virtual part in relation to the total amount of finish sprayed. The mass of finish deposited is calculated by totaling or accumulating the mass of all of the virtual paint that is accumulated on the virtual part on the screen. The build efficiency BE is the measure of how close and consistent the actual film applied to a part is to the desired dry film thickness. A BE of 100 percent is perfect values greater than 100 percent represent wasted coatings and excessive emissions of Volatile Organic Compounds VOC s Hazardous Air Pollutants HAP S and increased production costs. For example if the target dry film build for a part is 1 mil and 1.25 mils are actually applied to the part at a TE of 100 percent the BE would be 125 percent which is 25 percent more paint used and emissions then are necessary.

Box on graphical user interface in shows summaries of previous performance scores for the logged in user. This performance data is stored and recalled using the performance database as previously discussed.

The graphical user interface can also include drop down menus such as drop down menus labeled File Display and Tools . Under the drop down menu for File the preferred system includes a restart command which restarts the training session and resets all the performance data a save to database command which saves the current student scores to the database a save as file command which saves the current user scores to a specified file and an exit command which exits from the VCAS application. The Display drop down menu preferably includes a show gun setting command which toggles the display of the controller settings on the display surface a show efficiency data command which toggles the display for efficiency data on the screen a play sounds command which toggles the spray gun sound cues a show overspray command which toggles the display of overspray on the display a show accumulation command which toggles the accumulation display mode on the display and a show laser command which toggles the display of the simulated laser paint dots on the display. The Tools menu preferably includes a calibrate tracker command which starts a tracker calibration mode.

The paint model in the simulation software simulates the flow and transfer of finishing material e.g. paint based on standoff distance and angle of the spray gun controller relative to the virtual surface fluid flow rate air pressure and fan size. To do this it is necessary to model the amount of virtual paint flow through the spray gun controller. Table 1 lists empirically obtained data regarding fluid flow rate ounces per second for a high volume low pressure spray gun as simulated in . The data in Table 1 is for an aliphatic polyurethane CARC 1.5 VOC MIL C 53039A with a density of 1.4379 grams per milliliter and a weight of 12.0 pounds per gallon.

Referring now to the preferred paint model accounts for shear effect which can be significant in real world spray paint applications thus contributing to the realism of the simulation. The term shear effect relates to the transfer efficiency of paint or finish when the pattern is directed completely onto the surface. Even under such conditions a significant amount of finish does not transfer onto the surface. shows a plot in which transfer efficiency is plotted with respect to standoff distance for an actual high volume low pressure spray gun as determined experimentally using a standard barrel test. Note that transfer efficiency is calculated in as the amount of dry finish on the surface divided by the total mass of the finish sprayed both solids and solvent . The results of this test show that transfer efficiency is much higher at closer standoff distances than at farther standoff distances. It is possible although does not appear to be necessary for accurate simulation to use other parameters besides standoff distance to model the transfer efficiency.

By way of background solvents are critical in the composition of liquid coatings using high volume low pressure spray gun as well as other types of spray guns. First the solvent provides the proper viscosity for the liquid coating to be sprayed. Second the solvents used in liquid coating contribute to the coating s final performance properties. Third solvent evaporation enables the formation of the coating s film on the substrate to which it is applied. It has been found that spray gun distance is a significant factor in the percentage of solvent evaporating from the coating before the coating droplets reach the target. The solvents are evaporating from the coating droplets in flight to the part. The greater the distance the coating droplets have to travel to the part the more solvent is evaporated and the coating droplet mass loss is increased. As the coating droplets decrease in mass the droplets have difficulty penetrating the shear forces generated by the atomizing air thus decreasing transfer efficiency onto the workpiece surface and increasing overspray. Some in the art believe that an air layer develops adjacent the surface of the work piece and the paint droplets either pass through the shear layer or are swept away as overspray. Research has shown that increasing the spray distance from the surface of the workpiece for example from 6 to 12 can reduce transfer efficiency by as much as 50 using high volume low pressure spray guns.

The actual test results shown in were done using coatings that contained a lower percentage of solids than that of the coatings simulated in the preferred embodiment of the coatings application system described herein. More specifically the barrel test from which was derived was based on an automotive coating namely PPG Deltron universal base coat. The preferred simulated finish type however was a chemical agent resistant coating CARC . In order to provide the simulation with the appropriate look and feel of a CARC coating the transfer efficiency curve shown in was shifted upwardly 30 . Transfer efficiency percentage points can be adjusted to reflect various types of coatings and the solid contents of the coating by manipulation of the software parameters.

The paint model models the distribution of the deposited finish over a virtual spray pattern based on data collected from spray patterns generated from actual spray guns at various spray gun settings. illustrates fundamental aspects of this portion of the paint model . For an unrotated pattern with any given combination of air pressure flow rate fan size and standoff distance the preferred paint model includes the following parameters to completely characterize the resulting pattern see 

Referring still to reference number refers to the area of constant finish coverage and surrounding area refers to the spattered area. The preferred paint model assumes that finish coverage average density falls off linearly between the inner and outer radii at all points. Coverage at the outer radius is always equal to zero. The actual distribution is based on a random number generator. The overall pattern dimensions are modified linearly with standoff distance since the pattern source is assumed to be a point and the model ignores gravity. Coverage rates for uniform spray and for spatter vary inversely with standoff distance however spatter size is constant since spatter size is based on droplet volume which is invariant with respect to standoff distance.

As mentioned for each timing cycle the mass of finish sprayed is determined using the values in Table and interpolating for the current fluid pressure and air pressure as well as the trigger position. The model then uses the determined transfer efficiency based on the standoff distance and optionally tilt determined by the tracking system . Then the paint model distributes the virtual mass of finish deposited i.e. mass virtually sprayed scaled by the corresponding transfer efficiency value over a spray pattern as depicted in having an inner area of constant finish coverage and an outer spatter area. The inner and outer radii for the pattern r r r r as well as spatter density and size are determined in accordance with an algorithm which models spray pattern data collected for actual high volume low pressure spray gun settings. For a high volume low pressure spray gun this can be accomplished by painting spray paint patterns onto paper suitable for spray paint training purposes with the spray gun set to various settings for air pressure fluid pressure and fan size. For example twenty seven patterns can be made by setting each parameter at a low medium and high setting such as air pressure 5 psi 50 psi 100 psi fluid pressure 10 psi 20 psi 40 psi and fan size closed half open 100 open . These patterns should be generated with the spray gun at the recommended distance e.g. 6 standoff for a high volume low pressure spray gun with the preferred CARC coating and care should be taken so that the standoff distance does not vary from pattern to pattern and that the spray direction is orthogonal to the surface. The use of a light beam targeting and positioning system as described in U.S. Pat. Nos. 5 598 972 5 857 625 and 5 868 840 is quite helpful to ensure consistent orientation and standoff distance among patterns. Preferably some patterns should be generated with varying spray gun angles as well. Then the spray patterns are analyzed to determine the inner and outer radii for the pattern r r r r as well as spatter size for the various spray gun settings and this information is the basis for the spray pattern distribution in the paint model . The paint model uses interpolation to accommodate the actual settings for air pressure fluid pressure maximum fluid scaled by trigger position and fan size during operation of the virtual coatings application system .

The paint model compensates for the rotation of the spray gun controller by displacing and rotating the coverage pattern and modifying the coverage density according to the collected data. Generally speaking for high volume low pressure spray gun applications the pattern as a whole exhibits reduced coverage due to pitch and yaw. For pitch and yaw changes through 15 to 20 degrees the total average density variation only approaches about 4 . Note however that the standoff distance will probably change with tilt.

In the preferred system each location e.g. texel on the projection screen on which the virtual surface is projected has an associated alpha channel. The alpha channel controls transparency of the coating at that location based on the mathematical accumulation of virtual spray at the given location thus realistically simulating fade in for partial coverage on the virtual surface. For each timing cycle the total mass deposited is distributed over the spray pattern generated by the paint model at the locations that the spray pattern would impinge on the virtual surface. Thus depending on the settings on the spray gun controller and the position of the trigger as well as the standoff distance and orientation of the spray gun with respect to the virtual surface the software maintains accumulation values at each location via the alpha channel . The virtual paint on the work piece is displayed according to the alpha channel information and the display or color modes selected by the user on the graphical user interface .

Preferably the instrumented spray gun controller is configured and operates the same as the instrumented spray gun shown and discussed with respect to . Likewise the overall configuration of the system is similar in many respects to that described in with respect to the system of the first embodiment as is the graphical user interface shown in as well as the paint model. One of the primary differences being that system requires tracking of the position and orientation of the head mounted display unit . In addition many of the features desirable for the display containing the virtual surface in the first embodiment such as those shown in connection with and are also desirable in the 3 D virtual environment of this second embodiment.

Referring now to as the user of the head mounted display unit moves and turns within the virtual spray painting environment the tracking system monitors these changes in position and orientation and changes the view and perspective provided to the head mounted display unit. In turn the computer system generates changing views of the virtual environment. shows the view within the spray painting environment with the user facing roughly the forward left side of the spray paint booth. Note that the depiction of the virtual spray painting booth includes a depiction of a spray gun . The position and orientation of both the head mounted display unit and the spray gun controller are monitored and this information is used by the computer software to generate the appropriate images including the position and orientation of the spray gun image within the virtual environment.

Referring to this view shows the virtual surface of a truck door hanging vertically within the virtual spray painting environment. The user virtually paints the virtual surface with the spray gun controller in the manner similar to that described in connection with the first embodiment. In particular it is desired that the computer software be able to provide many or all of the same features described with respect to virtually painting the virtual surface in the first embodiment of the invention as in this second embodiment.

As with the first embodiment of the invention the preferred graphics engine is a scene graph based rendering engine and in particular the GraIL graphics engine developed by and available from Southwest Research Institute San Antonio Tex. The GraIL graphics engine is capable of providing three dimensional graphic data suitable for operating the head mounted display.

The display of virtual paint on the virtual surface is preferably accomplished in much the same manner as that described in connection with the first embodiment including the choice of single color mode or multiple color accumulation mode over sprayed mode or other features described previously. In the three dimensional immersion system however it may be desirable to show virtual spray being sprayed from the image of the spray gun to the virtual surface .

Referring to when using the immersive system it is desirable to provide a collision detection system which detects when the spray gun image collides with the virtual surface within the virtual environment. FIG. shows the spray gun image from the rear as it virtually approaches the virtual surface . When a virtual collision occurs or is imminent the system preferably provides either a visual alert an audio alert or both. More specifically the computer software calculates the position and orientation of the spray gun controller within the virtual environment and provides an alert to the user when the image of the spray gun within the virtual environment would collide with the virtual surface being painted.

In as mentioned the menu icon has been activated by the user by pointing the spray gun controller at the icon and pulling the trigger. Upon activating the icon the menu appears on the screen.

It should be apparent to those skilled in the art that the preferred virtual coatings application systems described herein includes many features designed to enhance the realism of spray painter or technician training as well as performance monitoring of training sessions. For example it displays overspray uses sound to simulate actual pressurized air coming from the spray gun allows for pressure fan size and fluid flow rate adjustments displays real time performance data on the graphical user interface and on the projection screen allows many visual feedback mechanisms to be toggled on and off displays an accurate spray pattern that realistically simulates real life painting allows for paint mil thickness to be defined uses color to alert the user that too much or not enough paint has been applied to a particular area of the part. Because the paint model is based on spray patterns collected from actual spray painting as well as mass transfer the model realistically simulates actual spray painting. Moreover the instrumented spray gun controller allows the user to adjust settings on the gun with the turn of a knob as they would if they were in the field painting a real part. In addition the variable trigger allows for realistic partial sprays thus again adding to the overall realism provided by the system.

Importantly the systems can be modified to include additional models for other types of spray gun controllers in addition to a controller simulating a high volume low pressure spray gun as disclosed in accordance with the preferred embodiment of the invention.

Those skilled in the art should appreciate that the embodiments of the invention disclosed herein are illustrative and not limiting. Since certain changes may be made without departing from the scope of the invention it is intended that all matter contained in the above description and shown in the accompanying drawings be interpreted as illustrative and not in a limiting sense.

