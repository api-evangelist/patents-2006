---

title: Over-the-air delivery of metering certificates and data
abstract: Metering is enabled through an arrangement in which a metering certificate is communicated to a mobile device using an over-the-air protocol. A metering trigger provides the metering certificate that includes a location to which metering data is posted by the mobile device and a public key of a public-private key pair, or alternatively provides a link to such metering certificate. A metering helper passes the metering certificate to a DRM system on the mobile device which collects metering data associated with the metering ID and uses the public key to encrypt the metering data into a metering challenge. The metering helper posts the metering challenge to the location. The metering service extracts the metering data from the metering challenge using a private key and generates a metering response that is received by the metering helper which prompts the DRM system to reset at least a portion of a data store in which the metering data is stored.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07917440&OS=07917440&RS=07917440
owner: Microsoft Corporation
number: 07917440
owner_city: Redmond
owner_country: US
publication_date: 20060707
---
Metering is a technology that enables digital media content providers to track the usage of protected media content. Metering is not generally used to track the listening habits of individual users but is rather a tally of how many times a particular piece of media content item is used for example how often the media content is played or copied . Thus metering can serve a number of possible business models such as a fee for use model or a subscription model where users pay a periodic fee for example every month to enjoy limited use of media content selected from an online catalog. If the user chooses not to continue his or her subscription the licenses for any content simply expire disabling playback.

A media content provider commonly enables a media player running on a personal computer PC or mobile device with the capability to collect and report metering data for media content that has been protected with copy protection like digital rights management DRM technology. Such metering capability may be developed for such platforms for example through use of a software development kit SDK that is licensed from a system developer. Metering provides several benefits one of which is to reduce royalty fees for those content provider services that license content and then resell it to their customers. Royalty fees are based on the type of sale such as whether the sale is a permanent transfer or a metered single play. Since the cost of a metered single play is much less than the cost of a permanent transfer metering content is often much more economical for the content provider. Metering also provides other benefits. By metering content a content provider can determine which content is more popular identify and pay the artists whose content is played and track the number of times an advertisement is viewed for example.

Current metering arrangements while satisfactory in many applications are typically dependent on a proxy device such as a PC that functions as an intermediary between a metering service and a mobile device using for example a docking type connection. The PC is used to deliver a metering certificate which identifies the location to which metering data is to be reported to the mobile device as well as trigger a metering event. However the mobile device is thus unable to receive a metering certificate and report metering data when it is not coupled to the proxy device.

Metering is enabled through an arrangement in which a metering certificate is communicated to a mobile device using an over the air protocol. In various illustrative examples a metering service sends to a mobile device a metering trigger that includes a metering certificate or alternatively a link to a metering certificate. The metering certificate includes a location to which metering data is to be posted by the mobile device a metering ID and a public key of a public private key pair.

The mobile device is provisioned with a metering helper application which is started upon receipt of the metering trigger. The metering helper application passes the metering certificate to a DRM system on the mobile device. The DRM system collects metering data associated with the metering ID and uses the public key to encrypt the collected metering data into a metering challenge. The DRM system passes the metering challenge to the metering helper application which posts it to the location identified in the metering certificate. The metering service extracts the metering data from the metering challenge using a private key of the public private key pair. The metering service generates a metering response that is received by the metering helper application which prompts the DRM system to reset at least a portion of a data store in which the metering data is stored.

The present arrangement advantageously enables media content to be readily accessed and consumed by a consumer using a mobile device in preferred locations without the need for a proxy device to receive a metering certificate or enable reporting of metering data to the metering service.

Turning to the drawings where like numerals designate like components or elements is a block diagram of an illustrative arrangement for delivering a metering certificate and reporting metering data over the air. As shown in a mobile device is provided with over the air communications with a metering service . Over the air as used herein means an arrangement in which any type of wireless communication using open space as its transmission medium is utilized for communications between the mobile device and metering service . Over the air communication may be enabled for example between the mobile device and metering service with the Short Messaging Service SMS using the Wireless Application Protocol WAP . For example as described in detail below the metering service may send a WAP Push SMS message to the mobile device although Direct Push i.e. IP push messaging arrangements may also employ over the air communications.

Mobile device in this illustrative example is selected from any one of a variety of mobile devices that are commonly used by consumers to select access and consume media content such as music video audio news ring tones games data or the like. Accordingly mobile device is selected from one of portable media player personal digital assistant pocket PC music player mobile phone smart phone handheld game device or the like. However it is emphasized that this list of devices is merely illustrative as the benefits and features of over the air delivery of metering certificates and metering data may be realized by many types of electronic devices that are configured to render or otherwise consume media content when arranged to implement the features described herein.

Metering service is representative of a service that collects and processes metering data. Metering service may be provided for example by a metering aggregation service that is contracted by a media content provider e.g. a media content licensor or subscription service provider or a media content owner as indicated by line in . Alternatively metering service is provided directly by the media content provider to the mobile device this alternative arrangement is not shown in . Metering service in this illustrative example is implemented using an application or data server that is configured to send and receive communications to and from mobile device to thereby implement a server client type architecture.

Media content provider is typically arranged to provide media content to mobile device as indicated by line . Such media content is deliverable using a variety of mechanisms including the transfer of a physical media i.e. an optical disc such as CD DVD high definition disc Flash memory card etc. to the mobile device or via download from the media content provider . In addition although not mandatory in the present arrangement media content provider commonly provides a license such as a DRM license to mobile device from a license server or rights management server not shown . Such license generally provides the usage rules rights or restrictions that the media content provider imposes on the use of the delivered media content. The license also commonly includes a metering ID that is associated with the delivered media content so that metering data for that particular media content may be tracked and reported separately from media content delivered by another media content provider for example a consumer may subscribe to two music services and download metered media content from each . In this illustrative example the delivered media content and the license are deliverable over the air or alternatively using a proxy device such as a PC.

As shown in system developer also provides a software development kit SDK to a licensee . In some applications of over the air delivery of metering certificates and metering data the licensee is the media content provider or media content owner. Alternatively licensee is metering service or another entity. In the present arrangement the licensee typically utilizes the SDK to create a metering helper application that is configured to run on the mobile device and which facilitates over the air delivery of metering certificates and metering data. The metering helper application is described in detail in the text accompanying .

As shown in the licensee provides a metering helper application to the mobile device . The metering helper application is pre provisioned to the mobile device in some settings of over the air delivery of metering certificates and metering data. In other settings the metering helper application is arranged to be downloaded by the mobile device as an application or plug in as needed or on demand.

URL provides the address to which metering data is to be reported by the mobile device . In this illustrative example metering data is posted to the URL using the HTTP POST command. HTTP or hypertext transfer protocol is an open internet protocol used to implement asynchronous communications between a client and a server. Typically the URL shares a common domain name with the license source such as the license server or rights management server described above in the text accompanying .

Helper applications may include one or more applications that are configured to perform a variety of tasks depending on the specific configuration of the mobile device . Helper applications are used in settings where browsers do not include enough functionality to interact directly with a DRM system as is often the case with browsers that are arranged to operate on mobile devices. Typically the helper applications reside at the native level of the mobile device and act as a proxy between the browser and the DRM system . Accordingly helper applications have interfaces to both the browser and DRM system and are identified as trusted entities to each.

In this illustrative example helper applications include metering helper application as shown. Metering helper application is used by the mobile device to implement the message flow shown in and described in the accompanying text. Helper applications may also include a license acquisition helper for example.

DRM system in is used to implement the secure receipt of media content from the media content provider and further enables use and playback of the media content on the media player in accordance with the usage rules rights or restrictions imposed by the license associated with the media content. In addition DRM system records and stores metering data for metered media content typically by metering ID that is stored on and later reported by the mobile device . DRM system thus includes a metering data store that is used to store metering data recorded by DRM system .

As shown in the WAP Push may include a particular WAP AppID that is configured so that upon receipt by browser a specific helper application among the helper applications disposed on mobile device is triggered. In an illustrative example shown in the WAP AppID contained in WAP Push SMS message is set to trigger metering helper application among the remaining helper applications . . . N as indicated respectively by reference numerals and .

Returning back to the metering trigger in optionally if a direct data push e.g. an IP Push is able to be used with mobile device then a WAP Push in not necessary. Instead metering service may send a message to mobile device which incorporates the metering certificate itself rather than a URL for the metering certificate as described above in the body of the message. In this case the metering helper application is invoked through the message MIME type Multipurpose Internet Mail Extension as described below but the metering helper application skips to step four collect metering data .

As indicated by reference numeral upon receipt of the metering trigger e.g. the WAP Push SMS message the metering helper application in mobile device follows the URL contained in the metering trigger to obtain the metering certificate typically using HTTP. The metering service returns the metering certificate to the mobile device as shown by reference numeral . As noted above in cases where a Direct Push message is utilized steps and are not required as indicated by the dashed rectangle in .

It is further noted that there is no requirement that the mobile device begins collecting the requested metering data or send back its metering report immediately upon receiving the metering trigger . Depending on the requirements of a specific application of over the air delivery of metering certificates and metering data the mobile device is arranged to perform the collecting and reporting at some later time.

As shown in the messages sent by the metering service to mobile device are configurable with a set one of a plurality of MIME types. The MIME type is included in the content type field in the HTTP header. Upon receipt by browser of a particular MIME type the appropriate helper application may be triggered if required and the message is passed to the helper application for handling. Table 1 shows two illustrative MIME type names and associated description that are configured to direct an incoming message to the metering application helper . Of course other helper applications would use MIME types other than those listed in Table 1.

In an illustrative example shown in the MIME type of an incoming message packet is set so that the message packet is delivered to the metering helper application among the remaining helper applications . . . N as indicated respectively by reference numerals and .

Returning again to the illustrative message flow continues with collection of metering data at the mobile device as indicated by reference numeral . Here the metering helper application passes the metering certificate received from the metering service to the DRM system . In particular metering helper application works through its interface to DRM system which exposes an API application programming interface to thereby access and collect the requested metering data. In most applications in which a consumer has stored metered media content from more than one content provider DRM system collects metering data that is associated with a particular metering ID.

Next the DRM system generates a metering challenge message . The metering challenge incorporates the collected metering data that the DRM system encrypts using the pubic key included in the metering certificate passed from the metering helper application . Depending on the amount of metering data contained in metering data store and the size of the buffer utilized more than one metering challenge may be utilized to report all of the appropriate metering data to the metering service . DRM system passes the metering challenge to the metering helper application . The metering helper application in turn posts the metering challenge to URL typically using HTTP POST as noted above.

An optional arrangement may be utilized in cases where the mobile device stores metered content provided by more than one media content provider so that metering data is stored in metering data store using more than one metering ID . In such cases metering helper application is configured to report metering data for each of a plurality of metering IDs from DRM system upon receipt of a report all metering data trigger. In this case mobile device acquires a plurality of metering certificates to thereby collect and report the appropriate metering data. Metering application helper then requests that DRM system prepare a plurality of metering challenges using the metering certificates where each one of the plurality of metering challenges contains metering data associated with a particular metering ID. DRM system passes each respective metering challenge to metering helper application which then posts it to the respective metering service associated with the metering ID. Such collection and reporting may be performed in an iterative manner to thereby implement metering reporting to a plurality of metering services in a batch type arrangement.

Upon receiving the metering challenge the metering service extracts the encrypted metering data contained therein with its private key of the public private key pair shown in and described in the accompanying text. The metering service uses or stores the extracted metering data as necessary for example to identify and pay artists whose content is being played.

Once the metering data is received and extracted the metering service generates a metering response message that is sent to the mobile device . The metering response is utilized by the client to reset that portion of the metering data store used to store the metering data that is contained in the metering challenge. The metering helper application passes the received metering response to the DRM system to thereby prompt it to reset the appropriate portion of the meter store as indicated by reference numeral in .

Although various illustrative arrangements and methods for over the air delivery of metering certificates and metering data have been shown and described it should be understood that the scope of the claims appended hereto shall not necessarily be limited to the specific features arrangements or methods described. Instead the specific features arrangements or methods are disclosed as illustrative forms over the air delivery of metering certificates and metering data as more particularly claimed below.

