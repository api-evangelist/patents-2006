---

title: Determining a route to a destination based on partially completed route
abstract: Techniques are provided for suggesting an intermediate point-of-interest (POI) for a user that is traveling. A series of locations of a ground-based vehicle is received. At least some of the locations are related to at least one travel pattern. A route is identified based on relating at least some of the received locations to at least one travel patterns and an intermediate point-of-interest is identified responsive to a predicted interest of a user based on the route.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07835859&OS=07835859&RS=07835859
owner: AOL Inc.
number: 07835859
owner_city: Dulles
owner_country: US
publication_date: 20060428
---
This application is a continuation in part of U.S. application Ser. No. 11 321 648 filed Dec. 30 2005 and titled DETERMINING A ROUTE TO A DESTINATION BASED ON PARTIALLY COMPLETED ROUTE and U.S. application Ser. No. 11 019 526 filed Dec. 23 2004 now abandoned and titled PREDICTING AN EVENT AT A LOCATION that claims the benefit of U.S. Provisional Application No. 60 622 797 filed Oct. 29 2004 and titled DYNAMICALLY PREDICTING AN EVENT AT A LOCATION all of which are incorporated by reference in their entirety.

This description relates to using a computer system to analyze mapping queries and to using an electronic system to determine a route to a destination based on a partially completed route and to suggest stops along a route.

A traveler may submit a mapping query to request mapping information such as a location map for a location a suggested route between an origin location and a destination location or driving directions to a destination location from an origin location. To generate a route or driving directions for a route mapping computer systems and programs are generally configured to search for one or more optimal paths from the origin to the destination. Moreover mapping computer systems and programs typically optimize such paths based on criteria such as distance road type travel time traffic and user travel preferences.

In vehicle navigation systems also generate routes to a destination or driving directions for a route. Routes are typically generated using a destination entered by a user and a location of a vehicle. Navigation and driving directions to a destination may be provided by the in vehicle navigation system. The in vehicle navigation system may provide a route or driving directions to a point of interest if the user of the vehicle enters the point of interest as a destination address.

In one general sense an intermediate point of interest POI is suggested for a user that is traveling. A series of locations is received for a ground based vehicle. At least some of the locations are related to at least one travel pattern. A route is identified based on relating at least some of the received locations to at least one travel patterns and an intermediate point of interest is identified responsive to a predicted interest of a user based on the route.

Implementations may include one or more of the following features. For example a destination may be predicted based on relating at least some of the received locations to at least one travel patterns. Information related to the destination is used to identify the intermediate point of interest. Using the information related to the destination may include determining that additional fuel is required to travel to the destination. Using the information related to the destination may include determining that travel to the destination occurs during a meal time frame when the user requires a meal stop identifying one or more restaurants anticipated to be proximate to the user during the meal time frame polling the user to specify one of the restaurants and notifying the user when the user is proximate to the specified restaurant.

Identifying the intermediate point of interest responsive to the predicted interest of the user may include referencing historical route information and deriving the predicted interest of the user from the historical route information.

Identifying the intermediate point of interest may include identifying a potential interest of the user prompting the user to confirm the potential interest and using the potential interest as the predicted interest.

A status database configured to provide condition information related to conditions of service locations may be referenced and the condition information may be used to identify the intermediate point of interest. Referencing the status database may include referencing vacancy information for lodging establishments referencing an ability of a fuel service center to provide fuel and or referencing a projected time on station at a service location.

A status database configured to provide traffic information related to traffic conditions may be referenced and the traffic information may be used to identify the intermediate point of interest. An impact of the traffic conditions on a fuel status for the user may be identified and a fuel service center may be suggested based on the impact.

A degree of occupancy or an indication of occupants for a vehicle may be identified and the degree of occupancy or the indication of the occupants may be used to identify the intermediate point of interest. A degree of travel may be determined and the predicted interest for the user may be generated based on the degree of travel.

A message descriptive of conditions to a user feedback database may be transmitted and information descriptive of the conditions from the user feedback database may be received the information based on other messages received from other users also exchanging information with the user feedback database.

Identifying the intermediate point of interest responsive to the predicted interest of the user may include receiving a user request for a particular type of service. Identifying the intermediate point of interest responsive to the predicted interest of the user may include receiving a driver request for a particular type of service.

Identifying the intermediate point of interest responsive to the predicted interest of the user may include receiving a signal from a vehicle in transit for a particular type of service.

Implementations of any of the techniques described may include a method or process an apparatus or system or computer software on a computer accessible medium. The details of particular implementations are set forth below. Other features will be apparent from the description and drawings and from the claims.

Techniques are provided for predicting information related to mapping queries and or a route traveled by a ground based vehicle. One technique involves analyzing mapping queries that are submitted or executed within a limited time period or window and are related to a destination relative to which an event is detected or predicted. Multiple mapping queries may occur for a common destination or nearby destinations during a time threshold. The mapping queries that are related to the destination may be identified and used to detect or predict that an event is occurring or that an event will occur at the destination.

Another technique involves predicting the destination of a vehicle based on a partially completed route. The locations of a vehicle may be monitored and a predicted destination of a vehicle may be generated based on accessed travel patterns. While a vehicle is traveling locations of the vehicle may be compared to travel patterns to generate a predicted destination of the vehicle. Other factors such as the time of day the vehicle is traveling the day of the week the vehicle is traveling and the frequency with which the vehicle travels a particular route may be considered in predicting the destination. After a predicted destination has been generated stops associated with the predicted destination may be presented to a user.

When a predicted destination of a vehicle has been generated based on a partially completed route the predicted destination may be used with other predicted destinations and or mapping queries to predict an event. By enabling the prediction of an event and or a popular location destination which may be referred to as a hotspot based on destination searches and or predicted destinations received during a time window relevant services may be offered based on the emerging event scenario. Such services may include projecting traffic data in advance of actual traffic congestion projecting crowd densities at specific locations and making suggested connections to others separately or in combination with another social networking connection structure. Other types of services based on the provision of timely intelligence related to dynamic events hotspots or a predicted destination also may be provided.

In addition when the destination of a vehicle has been predicted and confirmed by the user the route to the destination may be determined and possible stops along the route may be suggested. An in vehicle navigation system may dynamically suggest points of interest such as a gas station an ATM and or a restaurant as the user travels along the route. The in vehicle navigation system may provide routing information to the suggested stops and may determine what stops to suggest based on many factors such as time of day and preferences of the user. Stops also may be suggested in advance of travel by a mapping system. Referring to a communications system is capable of delivering and exchanging data between client systems A and B and a mapping system through a delivery network . The communications system is able to provide each of the client systems A and B with mapping results and related event information in response to map queries sent by the client systems A and B.

More particularly each client system A B may be a general purpose computer e.g. a personal computer a desktop computer or a laptop computer capable of responding to and executing instructions in a defined manner. Other examples of the client system A B include a special purpose computer a workstation a server a device a component other physical or virtual equipment or some combination thereof capable of responding to and executing instructions. The client system A B also may be for example a personal digital assistant PDA a communications device such as a mobile telephone or a mobile device that is a combination of a PDA and a communications device.

Each client system A B includes a communication application A or B respectively and is configured to use the communication application A B to establish a communication session with the mapping system over the delivery network . The communication application A B may be for example a browser application or another type of communication application that is capable of accessing the mapping system . In another example the communication application A B may be a client side mapping application configured to communicate only with the mapping system .

The client system A B is configured to send to the mapping system a request for a map a suggested route from an origin location to a destination location or driving directions for a route between an origin location and a destination location. The client system A B also is configured to receive from the mapping system a map information about a suggested route and or driving directions for a route. The client system A B also is configured to present the received map information about a suggested route and driving directions for a route.

The delivery network provides a direct or indirect communication link between each of the client systems A B and the mapping system irrespective of physical separation. Examples of a delivery network include the Internet the World Wide Web WANs LANs analog or digital wired and wireless telephone networks e.g. PSTN Public Switched Telephone Network ISDN Integrated Services Digital Network and DSL Digital Subscriber Line including various forms of DSL such as SDSL Single line Digital Subscriber Line ADSL Asymmetric Digital Subscriber Loop HDSL High bit rate Digital Subscriber Line and VDSL Very high bit rate Digital Subscriber Line radio television cable satellite and or any other delivery mechanism for carrying data.

The delivery network also includes communication pathways that enable the client system A B and the mapping system to communicate with the one or more delivery networks . Each of the communication pathways may include for example a wired wireless virtual cable or satellite communications pathway.

As with the client system A B the mapping system may be implemented using for example a general purpose computer capable of responding to and executing instructions in a defined manner a special purpose computer a workstation a server a device a component or other equipment or some combination thereof capable of responding to and executing instructions. The mapping system may receive instructions from for example a software application a program a piece of code a device a computer a computer system or a combination thereof which independently or collectively direct operations as described herein. The mapping system includes a communications application that is configured to enable the mapping system to communicate with the client systems A B through the delivery network .

The mapping system may be a host system such as an Internet service provider that provides a mapping service to subscribers. The mapping system may be a system that hosts a web site that provides mapping servers to the general public. The mapping system may be an on board navigation system that is located in a vehicle and configured to provide driving directions based on the vehicle s current location. In some implementations an on board navigation system also may be capable of communicating with another system such as for example communicating with a host system to receive updated navigation data for use in determining a route or real time routing information such as information about traffic congestion .

In general the mapping system is configured to receive mapping queries from the client systems A B and to predict an event by analyzing mapping queries that are received during a period of time and are related to a particular destination.

The mapping system includes a mapping information store for image and routing data used for maps route determinations and driving directions. The mapping information store may include geographic images such as bit mapped maps for geographic areas e.g. states cities and streets . The mapping information store also may include information related to roads intersection of roads and places of interest within the geographic region. For example the mapping information store may include a information related to a directed graph that represents a network of roads. Links in the directed graph may represent a road and nodes in the directed graph may represent an intersection of two or more roads or a terminal part of a road such as a dead end.

The mapping system also includes code segments configured to determine a route between an origin location and destination location identified by a user. The origin location and the destination location may be referred to as an origin and a destination respectively. The code segments when executed use mapping information in the mapping information store to determine a route such as a shortest path between the origin and destination. In some implementations a generated route to be displayed over bit mapped images.

The mapping system also includes a mapping query store for storing information related to mapping queries. The mapping query store may store information for example related to requests for location maps a route between an origin and a destination and or driving directions from an origin to a destination. The mapping query store may include a origin a destination and a date and time related to the query such as when the query was received by the mapping system a desired date and time of arrival at the destination a desired departure time and date or a travel date that does not include a particular time. The mapping query store also may include a suggested route associated with a query. The mapping query store may be configured to store queries for a predetermined duration e.g. a week three days or twenty four hours . Periodic flushes of mapping query store may help to delete stale information and improve the efficiency of the mapping system .

The mapping system includes code segments configured to compare a mapping query to other mapping queries stored by the mapping query store to determine or predict a potential or an emerging event. The mapping system may compare client queries based on the time constraints. For example the mapping system may predict an emerging event by comparing queries received in the same time window. Hence the mapping system may identify queries arriving within a ten minutes period and or queries requesting maps or driving directions to the same location. In another example the mapping system may relate queries specifying the same day time as the travel date to a given destination. In yet another example the mapping system may predict an event by comparing differences in popularity for a location. Therefore events related to widely popular locations e.g. demonstration in front of White House may be predicted by comparing a level of queries within a particular time period with a historical number of queries for these locations.

The mapping system includes a predicted event store for information about predicted events. For example the stored data may include the type of an event event name predicted time date of an event certainty of event s occurrence and other event information. Additionally the event data stored by the predicted event store may be linked to client query data stored by the mapping query store . This may help provide or offer services related to the predicted event to a user of the client system A B.

The mapping system may use the data stored in the predicted event store to notify the client systems A B about the predicted event. In addition the mapping system may provide information to the client systems A B directly or may obtain the additional information about the event from another source such as an information server and then provide this information to the client systems A B. For example the mapping system may send the client systems A B a notification message indicating that due to television coverage kickoff time for a football game has been moved up by an hour or suggest dining locations open past midnight around a concert arena. In another example the mapping system may supply the client systems A B with the information related to anticipated traffic conditions associated with the event such as an alternative route to or from a concert arena or anticipated parking conditions at a stadium.

The processor receives a mapping query . For example the processor may receive a mapping query sent from a client system. The mapping query may be for example a request for a suggested route and or driving directions between two locations a request for a street map of an address or a request for a map of a general location.

The processor associates a time constraint with the query . For example the processor may associate with the mapping query a time and or date when the mapping query was received. To do so the processor may add a timestamp to a received mapping query when the mapping query is placed in a mapping query store or executed thereafter. The time constraint associated with the query may reflect an expected date and or time of travel that is entered by the user. In one example a mapping system may prompt a user to provide a date and or time constraint related to a planned travel time such as general expected date of travel destination arrival time and or origin departure times. In such a case the time constraint information may arrive as a part of the mapping query or the mapping system may obtain the time constraint from a user through a separate request.

The processor relates the received mapping query to other mapping queries based on the associated time constraint . For example the processor may relate received queries if the queries are related to the same location and are received in the same time window e.g. 10 minutes same day same week . In a more particular example the processor may relate all queries directed to finding a map of a particular dance club that are sent to the mapping system within a short time window e.g. an hour .

The processor then predicts an event based on a relationship of the received mapping query to the other mapping queries . In general the processor may use various well known statistical data processing methods to relate the incoming mapping queries and predict the existence of events. For example the processor may predict events based on thresholding schemes. In one such example the processor may count the number of requests to a certain destination and flag the destination as a location of an upcoming event when the count exceeds some pre determined threshold. Alternatively the processor may predict an event when a percentage of mapping requests among all requests exceeds some pre determined threshold. In yet another example the processor may predict an event by observing the difference in popularity for a well known location during a particular time period. Thus events related to widely popular locations e.g. demonstration in front of White House may be predicted by comparing a level of queries within a particular time window with a historical number of queries for these locations. The processor may also apply different weights to mapping requests. Hence mapping requests to certain public locations such as museums and stadiums may be treated differently for event detection purposes e.g. with higher or lower deference than mapping requests to private residences. In another example the processor may also detect a large number of requests to some private residence predict a social gathering and consequently provide users with the carpooling information to that location.

The processor may provide users with a notification of the predicted event and or make available or known services or information relating to the event . For example the processor may alert users that due to inclement weather or that the start of a football game has been moved up by an hour. In another example the processor may suggest dining locations open past midnight around the concert arena. In yet another example the processor may supply users with information related to anticipated traffic conditions associated with the event such as providing a suggested alternative route to or from the location of the event or providing information related to anticipated parking conditions for the event. The processor may also match users with other people services additional commercial opportunities based on when the user will be traveling. Time of travel prompts also may be presented in response prediction of an event that the user is likely to be attending. One example of a time of travel prompt is an active control that is presented Click here if you will be traveling to this destination this afternoon. In response to the user activating the control a user interface that is configured to provide enhanced services based on confirmation of travel time by the user may be displayed on the client system.

A system may use the mapping queries to predict an emerging event. For example the system may determine that during a forty seven minute window from 3 00 to 3 47 six out of twelve mapping queries i.e. A D E G J and L include a request for information related to the same destination i.e. ABC Stadium . Based on the mapping queries the mapping system may predict that an event is about to occur at ABC Stadium. The prediction may be based for example on the fact that half of the arriving queries in the time period are directed towards the ABC Stadium or may be based on the fact that a predetermined number or threshold of queries arrived within the time period as compared to a historical metric representing search inquires related to ABC Stadium a non historical threshold or a threshold related to the genre of the search e.g. sports theatre performances movies and concerts .

The data structure includes a mapping query identifier that uniquely identifies a particular mapping query entry. The data structure also includes origin and destination identifiers and to specify an origin and a destination of a mapping query. In addition the data structure includes a time constraint field that may specify an arrival time for a mapping query.

The data structure also may optionally store an identifier that identifies a requesting user calculated routing information returned in response to a mapping query and a field linking the data structure to the data structure using link .

The example data structures also includes a data structure for a predicted event entry in a predicted event store such as the predicted event store of . The data structure includes a predicted event identifier that uniquely identifies an entry a destination identifier that identifies destination of the predicted event an event name and a predicted date time of the event . The data structure may include a congestion indicator field to specify a degree of possible traffic congestion on route to the predicted event. Additionally the data structure may include a certainty field to specify the predicted likelihood certainty of the event. The data structures and are related through the use of predicted event identifiers and respectively as shown by link . The relationship of to using link may be useful to allow for incremental updates of the calculated certainty of the predicted events. For example the system may periodically loop over the predicted event entries in the predicted event store and for each entry update the certainty indicator based on the number of mapping query entries linked to that event entry. Typically an increase in the number of mapping queries would increase a certainty likelihood of a predicted event.

The user interface includes a user identification portion identifying a user who is signed on to the mapping system. The user interface also includes a destination selection portion that enables a user to identify a destination for which mapping information is to be provided. The destination selection portion includes a destination name field an address or intersection field a city field a state field and a zip code field . Users may then activate a search control a map control or a directions control to receive mapping information about the destination specified in the destination selection portion .

The user interface also may include a travel time portion that includes a field to which a user may indicate a desired time to arrive at the destination identified in the destination selection portion . The travel time portion includes an optional travel date field to which a user may indicate a desired date to arrive at the destination identified in the destination selection portion . The travel time portion may help a system improve the accuracy of an event predicted by analysis of mapping queries.

The user interface also may include a prediction verification portion to interrogate a user about the possible accuracy of the prediction. For example after making an initial prediction about an event at ABC stadium the mapping system may further question the user Are you traveling to ABC stadium tonight If the user answers affirmatively the mapping system may display information about the upcoming event in field . The information displayed in field may be based on information associated with a predetermined event such as a planned concert at a particular concert venue . Additionally or alternatively the information displayed in field may include a control to present information related to the predicted event. One example of such a control is a hyperlink such as a Hypertext Mark up Language HTML link that displays information e.g. a web page identified by the hyperlink. In a more particular example a link to a web page for a particular venue e.g. a stadium a concert venue or a theater may be presented in the field and when activated the link may be operable to display information related to an event at the venue.

On the other hand if the user indicates that the user is not traveling to ABC stadium the mapping system may attempt to determine an alternative event prediction or it may abort prediction attempts for the subject query to avoid user inconvenience.

The user interface includes a user identification portion and a destination selection portion described previously with respect to . The user interface also includes an origin portion that enables a user to identify an origin or starting address for which the driving directions are to be provided. The origin portion includes an origin address or intersection field a city field a state field and a zip code field to identify the origin.

The user interface also includes a driving direction control operable to cause the generation of a route between the origin specified in the origin portion and the destination specified in the destination selection portion .

The user interface also includes a travel time portion having a arrival time field and an optional travel date field . The travel time portion also includes an optional departure time field . The travel time portion may help to increase the accuracy of an event prediction based on the mapping query identified in the user interface .

The user interface also includes a prediction verification portion to interrogate a user about the possible accuracy of the prediction and an information field to display information about the predicted event.

The event detection service receives mapping query information from the mapping service providers A B and relates multiple user queries to predict a potential or an emerging event. The event detection service may notify the mapping service providers A B about an emerging event. Subsequently mapping service providers may present users A and B with information about the emerging event.

Additionally or alternatively the event detection service may also independently provide a third party computer system with information about the potential or emerging event. The third party computer system enables access to information about the potential or emerging event by a user C. The third party computer system may be operated by a law enforcement organization a public safety organization another type of a government organization or another type of organization that is affiliated with a local state or federal government organization. In such a case the user C may a law enforcement official or other type of public service employee or agent.

In another example the third party computer system may be operated by or affiliated with an organizer or sponsor of the event. In yet another example the third party computer system may be operated by or affiliated with the venue at which the potential or emerging event is taking place or is predicted to take place. In another example the third party computer system may be operated by or affiliated with a traffic information provider service. The use of the event detection service that is independent from the mapping system providers may be useful. For example the event detection service may use dedicated hardware and software that is optimized for event detection the service may be able to offer faster response times and higher system throughputs when compared to the systems where the event detection service shares resources with the mapping services. In addition the accuracy of the dedicated event detection service may be greater than the accuracy of the event detection services tied exclusively to the specific mapping service providers. For example the independent event detection service may receive the combined input from the multiple mapping service providers allowing it to attain more accurate predictions based on the increased number of statistical samples.

The processor accesses more than one mapping query . For example the processor may access multiple mapping queries such mapping queries of . The processor also accesses at least one time attributed associated with each accessed mapping query . For example the processor may access times associated with each mapping query as described previously with respect to . In other examples the time associated with a mapping query also may include a time of intended departure a time of intended arrival and a time of intended arrival at an intermediary destination along a route specified in response to the mapping query. In some implementations the processor may access mapping queries from only people known to a particular user.

The processor determines that an event exists based on commonality among at least two of the accessed mapping queries and between the time attributes associated with the mapping queries . The commonality may be for example a common destination. A common destination may be specified for the accessed mapping query or a common destination may be deemed to exist based on for example a destination of a mapping query that is within a threshold distance of a destination in another mapping query. The commonality also may be a common departure point i.e. origin that is specified or deemed to exist based on a threshold distance of a departure point in another mapping query. The commonality may be based on a comparison of times associated with the mapping queries or a comparison of attributes of mapping queries to a common item such as a time or a place .

In some implementations the processor may determine that an event exists based on comparing location information specified within several mapping queries to one or more predetermined venues such as a stadium a sporting venue a concert venue or a theater and identifying a number of mapping queries that specify the predetermined venue. The processor may determine that an event is occurring at the predetermined venue based on the number of mapping queries identified as specifying the predetermined venue. The number of mapping queries may represent for example a summation a ratio or a frequency.

Additionally or alternatively the processor may determine that an event exists by identifying a region of interest based on commonality among at least two of the accessed mapping queries and between the time attributes respectively associated with the accessed mapping queries and by investigation criteria other than the mapping queries to identify one or more likely events occurring with the region of interest. Examples of investigation criteria include electronic information available from a local newspaper an entertainment service a web site associated with a predetermined venue and a web site associated with a sponsor of or participant in the event such as a sports team a concert organizer a theater a group of performers or an individual performer .

In some implementations different types of events may be predicted based on searches of mapping queries over different periods of time. For example requests for travel submitted from one city to a different city over a longer time period such as three months may be sufficient to predict a particular type of event while requests for local travel over a shorter time period such as less than a day a day or several days may be suggestive of a different type of event. To do so for example a mapping system may associate a time period with each of multiple event categories and analyze mapping queries based on an event category and a time period associated with the event category. Different event categories may be used to predict an event for the same or overlapping group of mapping queries.

Turning now to providing event information that is related to an identity s social network such event information may increase the value of a mapping service or application. For example providing such event information may provide an interface to help coordinate activity of an identity with respect to an event which in turn may increase the perceived value of using a particular mapping service or application.

In general identities who use a mapping service and who do not have a direct relationship to another may nevertheless be linked to one another through intermediate identities based on a personal business or other relationship among the identities and the intermediary identities. For example a user A may have a friend user B who also uses the mapping service and who has a friend user C who also uses the mapping service. Thus user A is linked to user C through user B. Such interpersonal interactions or relationships may generally be referred to as a social network. How many intermediary identities are needed to link one identity with another identity may be referred to as the degree of separation between those two identities.

User contact lists e.g. address books or buddy lists of instant messaging services may be used to determine the links and degree of separation between two identities. For example an identity A may list identity B in identity A s address book identity B may list identity C in identity B s address book and identity C may list identity D in identity C s address book. Here identity D is linked to identity A by two degrees of separation with identity B as the first degree and identity C as the second degree . Identity A is related to identity C by one degree of separation identity B and identity B is separated from identity D by one degree of separation identity C . Identities A and B identities B and C and identities C and D are each respectively separated by zero degrees of separation.

Thus a system may identify a first identity s social network e.g. the entire social network or a portion of the social network up to a designated number of degrees of separation by evaluating the first identity s contact list s evaluating the contact list s of those identities listed in the first identity s contact list and so forth until the desired number of degrees have been reached or the entire social network has been identified. For example an identity A may list identities B and C in identity s A address book. The system may evaluate and determine that identities B and C are so listed and construct a social network map which may be visually displayed and or stored for later use that indicates that identities B and C are linked to identity A. The system may then evaluate identity B s address book and identity C s address book to determine additional identities with whom identity B or identity C are linked. For example the system may evaluate identity B s address book and determine that identities D and E are listed therein and consequently that identity B is linked to identities D and E. The system then may refine the social network to indicate that identity A is linked directly to identities B and C and is also linked to identities D and E through identity B.

In one example a user through interactions with a mapping system may be associated with an event that is occurring or will occur at a location. The existence of the event may be determined or predicted by the mapping system as described previously.

The event with which a user is associated also may be a predetermined event that is otherwise known to exist e.g. was not determined or predicted based on mapping queries . For example the mapping system may include a table a list or another type of data collection of venues venue locations and scheduled events occurring at a particular venue. The collection of predetermined venue information may be stored persistently or determined dynamically when needed for use. To obtain information about a predetermined event for example the mapping system may be able to communicate with an external information source such as information provided by an electronic entertainment guide such as a web site offered to provide entertainment options electronic information provided by a local newspaper such as a web site provided by a local newspaper or electronic information provided by a ticketing service such as a web site operated by the venue itself or a web site operated by a third party .

A user may be associated with an event based on submission of a mapping query used to determine or predict existence of the event. A user also may be associated with an event based on direct user input. For example a user may identify an event e.g. by selecting from a presented list of known events or by entering the name of an event when entering a mapping query or viewing results to a submitted mapping query. A user also may be associated with an event based on information in an electronic calendar or other type of electronic appointment information that is associated with the user.

The mapping system may provide identification information of identities in the user s social network who are also attending or planning to attend the same event. This may be accomplished based on the association of identities with the event. For example a mapping query or results user interface may include a control to indicate a desire by the user to find identities in the user s social network who are also planning to attend the event. In one example a checkbox may be presented by which a user may indicate a desire to find friends or friends of friends who are also attending this event. This may help to enable a user to share transportation to and or from the event enrich the user s experience at the event by sharing the experience with friends or acquaintances within the user s social network and expand the experience by meeting friends before or after the event for an additional social experience e.g. meet for dinner before the event and or meet for drinks after the event .

Turning now to a user in transit a user may be assisted by determining a route to a destination based on a route partially completed by a ground based vehicle. Such a determination may increase the ease of using an in vehicle navigation system and increase the accuracy of predicting an event at a destination. For example if an in vehicle navigation system predicts the destination a user is traveling to the user may be able to select a destination more easily and safely because the user may not have to divert as much attention to the in vehicle navigation system in entering a destination. In addition if the in vehicle navigation system predicts the destination on a trip where the user would not otherwise enter the destination due to route familiarity more data may be available to an event detection service to more accurately predict events.

The operations in flow chart are described generally as being performed on a processor. In one implementation the processor includes an in vehicle navigation system. In another implementation the processor includes a host receiving information from a client in a mobile environment.

Initially travel patterns are accessed . Typically accessing travel patterns includes accessing one or more routes traveled by a user on an earlier occasion. For example a host may access a user profile descriptive of a user s past travel the frequency of the travel the times of the travel and or relations of a user s travel to other user s travels. The travel patterns may be stored locally on a device proximate to the user performing the operations or remotely on a separate system or device e.g. removable storage or a remote host . The travel patterns may be represented in a variety of formats and used in a variety of configurations. For example travel patterns may be based on past routes traveled by the user or the vehicle. Specifically the travel pattern may be based on a sequence of position data such as position data provided by a GPS receiver for a past route traveled by the user. When a route is identified the route may be added to a travel pattern. The travel pattern may be recorded on a historical basis so that common routes that is routes traveled with greater frequency may be identified. Travel patterns based on user provided information may be accessed. For example a user may enter information relating to routes that the user typically travels or plans to travel. The user may specify for example the origin the destination the frequency of travel the likely time of travel and the likely day of travel to increase the accuracy of correctly predicting the route. The user also may enter information relating to the stops the user may make when traveling along a route.

In another example travel patterns may be accessed that are based on predetermined common routes or routes set by a third party. The processor may initially include common travel patterns and related points of interest that are determined to represent frequently visited destinations. For example one predetermined travel pattern may include a route to Disney World because Disney World is a popular attraction and a user traveling unexpectedly in the direction of Disney World may be destined for Disney World.

Travel patterns may be specified by a third party such as a system administrator or municipal authority. For example a third party may realize that a sporting event occurs on a particular day at a particular time and as a result set a travel pattern for the sporting event in anticipation of many people traveling along a common route. Similarly a host may predict the occurrence of an event and identify a travel pattern based on that event. In addition the travel pattern may be associated with a particular vehicle or a particular user. For example a travel pattern may be associated with a vehicle such as a bus or a rental car where the vehicle often travels to a location e.g. a bus follows a particular route and a rental car routinely visits points of interest or hotels even when different users are driving the same vehicle. In this example the different users may benefit from information gleaned from other routes that other users of the vehicle have traveled. Separately or in addition travel patterns may be associated with a user that often travels to a destination using different vehicles. For example a user with multiple vehicles a person not licensed to drive e.g. a blind person and or a person who frequently travels by taxi car service or rides with friends may frequent one or more destinations. In this case the person driving the user can gain the benefit of predicting routes that the user has previously traveled or configured.

After accessing the travel patterns the processor receives a series of location points of the vehicle . The location point of the vehicle may be obtained for example by using satellite location data such as GPS or by starting with a reference location point and determining a location point based on the distance and direction traveled from the reference point. When a host is performing some or all of the operations the vehicle may communicate the location point of the vehicle to the host. Next the processor relates the location point received and past points received for the particular trip with the travel patterns . The comparison analyzes the location point or points received and determines whether the location point or points are found in the travel patterns. The processor determines whether the location point or points received matches any of the travel patterns . If the location point or points received does not match any of the travel patterns another location point of the vehicle may be used for example by returning to operation . If the location point or points received matches one or more of the travel patterns the processor determines whether multiple travel patterns match the location point or points . If only one travel pattern matches the location point or points a detailed analysis of the matched travel pattern may be performed . If multiple travel patterns match the location point or points a preliminary analysis of the matched travel patterns may be performed . Performing the preliminary analysis of the matched travel patterns may include analyzing the matched travel patterns to determine which one of the travel patterns is most likely to be the route traveled by the ground based vehicle. Performing a preliminary analysis may include analyzing many factors such as the number of location points in common with each travel pattern the likely time of day the travel pattern is traveled the likely day the travel pattern is traveled and or the frequency the route is traveled. After performing the preliminary analysis the travel pattern that the vehicle is most likely traveling is selected and the processor performs a detailed analysis of the matched travel pattern .

In order to perform a detailed analysis of the matched travel pattern multiple factors of the travel pattern may be analyzed. For example instead of analyzing multiple travel patterns to determine which travel pattern is most likely to be the pattern the vehicle is following the detailed analysis of the matched travel pattern may determine if the information relating to the single travel pattern analyzed is sufficiently close to the information relating to the current route of the vehicle to be reasonably confident that the particular travel pattern represents the route the vehicle is traveling. For example the analysis may consider the number of location points in common with the travel pattern whether the time of day matches the likely time of day for the travel pattern whether the day matches the likely day for the travel pattern and the frequency with which the travel pattern is traveled. The analysis also may emphasize whether the more recently received locations match the particular travel pattern and also consider whether other events such as known or historic traffic congestion explain deviations from the path of the travel pattern. After analysis the processor determines whether the route of the vehicle is sufficiently close to the information relating to the travel pattern to be reasonably certain that the vehicle has traveled that particular travel pattern . If the analysis is not sufficient the processor gathers more location points of the vehicle in an attempt to predict if the vehicle is following a travel pattern e.g. by returning to operation . If the analysis is sufficient the travel pattern is determined to be the path the vehicle has traveled and further processing may be done to predict a route or destination based on the travel pattern.

Although a particular sequence of operations is described as determining the travel pattern for a vehicle many other examples could be used. For example the processor need not use all of the past location points in a trip when comparing location points to travel patterns . In another example one operation may be used to compare all possible travel patterns together.

After determining the likely travel pattern that a vehicle has traveled a destination based on the travel pattern is predicted . If the travel pattern leads to only one destination the one destination may be selected as the predicted destination of the vehicle. If the travel pattern leads to multiple destinations multiple factors may be analyzed to predict a destination for the vehicle. For example the analysis may determine whether a destination is a likely destination based on day e.g. Sunday or Monday time of day frequency to which a destination is traveled whether a destination is a popular point of interest and or whether a destination is known to be hosting an event. After predicting a destination the predicted destination may be presented to the user for confirmation . After confirming the destination the destination is set and a route to that destination may be determined. If the user does not confirm the destination the destination is not selected . As a result the processor returns to operation to receive more location points in order to better predict the destination . When analyzing travel patterns prior rejection of a destination may be used to predict the destination. A user may confirm for example by selecting a button on a graphical user interface and or using a voice command.

If the travel patterns relate to multiple destinations when trying to predict a destination and a specific destination cannot be determined an operation may be executed to determine the likely route of the vehicle . For example the proximity of different destinations to each other may be analyzed and if a vehicle would travel the same route to reach some or all of the destinations e.g. many destinations may be located within a few blocks in a city where one highway may be used to reach all of the destinations the route of the vehicle may be predicted and presented to the user for confirmation . Similar to confirming the destination as discussed above a user may confirm the predicted route . As a result a processor may be configured to use the predicted route that has been confirmed. While traveling along the predicted route the processor may return to operation and use newly received location points and the predicted route to predict the destination. If the user does not confirm the predicted route the processor may return to operation in attempting to predict the destination and or route. For example a processor may take into account that a previously predicted route has been rejected by the user.

If a predicted destination or predicted route has been selected the processor may offer services based on the predicted destination or predicted route . For example the processor may determine a route to the predicted destination may provide navigation services along the predicted route may provide information about the predicted destination or predicted route and or may suggest stops along the predicted route.

After a predicted destination or predicted route has been determined the predicted destination or predicted route is displayed for user confirmation . The user may confirm or not confirm a predicted destination . Confirming a predicted destination may be performed in a variety of manners such as selecting a button on a graphical user interface or using a voice command. If the user does not confirm the predicted destination the processor returns to the operations shown in flow chart to generate a predicted destination that the user will confirm . The processor may use an indication that a destination has been rejected when subsequently attempting to generate a predicted destination.

If the user confirms the predicted destination the route to the predicted destination is determined . The route to the predicted destination may be displayed to the user and driving directions may be suggested. Optionally a processor may provide the user navigation along the route to the predicted destination . Stops along the route also may be optionally suggested to the user . For example businesses frequented by motorists such as gas stations or restaurants located along the predicted route may be suggested to the user. If the user desires to make the suggested stop a route to the stop may be determined and navigation to the stop may be provided to the user not shown .

In addition information related to the predicted destination may be presented to the user . The information provided may be date specific such as an indication of an event taking place at the destination or near the destination on that date or may be general e.g. interesting facts about the predicted destination or points of interest near the predicted destination . The information for example also may include parking information for the predicted destination or cost of admission to an attraction at the predicted destination.

The predicted route and predicted destination also may be provided to an event detection service . By providing the predicted route and predicted destination information to an event detection service a processor may be able to more accurately predict an event or assess the amount traffic traveling to the predicted destination. Information from the event detection service also may be received . For example the event detection service may provide information that an event is taking place at the predicted destination information relating to the event such as price or parking information information about potential actual traffic congestion to the event alternate routes to the event and or information descriptive of other people in the user s network of friends that are also traveling to the event. A processor may reroute based on the information received from the event detection service . For example if information received from the event detection service suggests that the current route has a large amount of traffic congestion an alternative route may be calculated.

Referring to an exemplary in vehicle navigation system is shown that may be configured to determine a route to a predicted destination based on a route partially completed by a ground based vehicle. In particular shows an exemplary in vehicle navigation system that may perform the operations shown in . Although an in vehicle navigation system is shown may include for example a portable device or storage unit that a user can take from vehicle to vehicle.

The in vehicle navigation system includes a map display navigation and destination prediction system a GPS receiver an electronic compass and a dashboard display device . The system optionally includes a peripheral storage device and a host system . Typically the map display navigation and destination prediction system the GPS receiver the electronic compass the dashboard display device and the optional peripheral storage device are physically located in a vehicle traveling a route as indicated by the dotted line .

The map display navigation and destination prediction system includes a vehicle destination controller storage a GPS interface an electronic compass interface a dashboard display device interface an optional peripheral storage interface an optional wireless communication controller a system bus a vehicle navigation controller a mapping information store and a travel patterns store . The vehicle destination controller and vehicle navigation controller may include central processing units CPU that process executable instructions. The storage unit may store executable instructions and data.

The GPS interface may be configured to exchange messages with GPS receiver through communications pathway . The electronic compass interface may be configured to exchange information with electronic compass through a communication pathway . Dashboard display device interface is capable of sending and receiving communications with the dashboard display device through a communications pathway .

The peripheral storage interface is capable of sending and receiving communications with the peripheral storage device through a communications pathway . In one implementation the peripheral storage interface is used when the map display navigation and destination prediction system includes a peripheral storage device .

The wireless communication controller is capable of exchanging wireless communications with the host system through a wireless communications pathway . The system bus may be configured to enable communications between the vehicle destination controller the storage unit the GPS interface the electronic compass interface the dashboard display device interface the peripheral storage interface the wireless communication controller and the vehicle navigation controller .

The GPS receiver includes a location determination system configured to determine the location of a vehicle for example by longitude and latitude coordinates. The GPS receiver is configured to send the location of the vehicle to the vehicle destination controller and the vehicle navigation controller using the communications pathway the GPS interface and the system bus .

The electronic compass includes a direction indicator configured to determine the direction in which the vehicle is traveling. As shown the electronic compass is configured to send the direction in which the vehicle is traveling to the vehicle destination controller and the vehicle navigation controller using the communications pathway the electronic compass interface and the system bus .

The vehicle destination controller includes a software controller configured to access a route map and travel patterns. As shown the vehicle destination controller is configured to access a route map from the mapping information store and travel patterns from the travel patterns store using the vehicle navigation controller and the system bus . The mapping information store and the travel patterns store may receive a route map and travel patterns from the storage unit using the system bus and the vehicle navigation controller . The mapping information store and the travel patterns store also may receive a route map and travel patterns from the host system using the communications pathway the wireless communication controller system bus and the vehicle navigation controller . The mapping information store and the travel patterns store also may receive a route map and travel patterns from media associated with the peripheral storage device using the communications pathway the peripheral storage interface the system bus and the vehicle navigation controller .

The vehicle destination controller is configured to receive messages from the GPS receiver and the electronic compass and uses the messages to determine on which travel pattern if any the vehicle is currently traveling. The vehicle destination controller may compare information about the current location of the vehicle and the direction in which the vehicle is traveling as received from the GPS receiver and electronic compass respectively with the travel patterns to determine on which travel pattern the vehicle is traveling. When the vehicle destination controller determines on which travel pattern the vehicle is traveling the vehicle destination controller generates the predicted destination the vehicle is traveling to. In determining a predicted destination the vehicle destination controller displays the predicted destination on the dashboard display device and requests the user to confirm the destination. For example the vehicle destination controller may send a representation of the predicted destination through system bus to the dashboard display device interface . The dashboard display device interface then displays the predicted destination using communication pathway on the dashboard display device . If the user confirms the predicted destination the predicted destination is set and the vehicle destination controller sends the correctly predicted destination through system bus to the vehicle navigation controller . If the user does not confirm the predicted destination the vehicle destination controller may be configured to continue generating predicted destinations.

When no predicted destination is set and the vehicle destination controller is attempting to generate a predicted destination the vehicle navigation controller may be configured to display a route map and the position of the vehicle on the dashboard display device . For example the vehicle navigation controller may be configured to receive the route map from the mapping information store as well as information about the current location of the vehicle and the direction in which the vehicle is traveling from the GPS receiver and electronic compass respectively. Using the route map the current location of the vehicle and the direction in which the vehicle is traveling the vehicle navigation controller may be configured to display the route map and vehicle position and sends the display to the dashboard display device through the system bus the dashboard display device interface and the communications pathway .

The vehicle navigation controller may be configured to receive the predicted destination from the vehicle destination controller through the system bus . After receiving the destination the vehicle navigation controller may be configured to determine a route to the predicted destination using information obtained from the mapping information store . The vehicle navigation controller may be configured to display the route information on the dashboard display device and to provide navigation as the vehicle travels along the route. For example the vehicle navigation controller may alert the user when a turn is approaching or re route the user when the user misses a turn or goes off course. In addition the vehicle navigation controller may provide information about the destination to the user. For example the vehicle navigation controller may provide information informing the user about points of interest located near the destination or that an event is taking place at the destination. The vehicle navigation controller may also provide information to the user about parking at the destination or the level of traffic along the route to the destination.

In addition the vehicle navigation controller may be configured to suggest stops to the user. The vehicle navigation controller may recommend stops based on certain factors such as time of day or level of gas in the tank. The vehicle navigation controller may be configured to receive information stored in advance or received in real time. For example the vehicle navigation controller may obtain information relating to the destination from the mapping store information the travel patterns store the storage unit media associated with the peripheral storage or the host system through wireless communication. Moreover information obtained by the vehicle navigation controller may be information generated by a third party information generated by the user or information predicted by another system or device such as the host system . In addition the information provided to the user may be supplied by an event detection service as described above.

Although one configuration for system is shown other configurations may be used. For example the vehicle destination controller and the vehicle navigation controller may be consolidated on a single processor.

The stop record includes a stop identifier field a name field a node identifier field a category of stop field a travel pattern identifier s field a condition field a time day constraints field and a last occurrence field . The stop identifier field includes data that uniquely defines each stop even if the other fields have common data. The node identifier field stores data relating to a node associated with a stop. For example the node identifier may include information relating to a node nearby the stop identified by stop identifier . The node identifier may be used to assist in calculating a route to the stop or as a location where the stop may be suggested to the user. The category of stop field includes information regarding the type of stop. For example a category of stop may include gas for a gas station cash for an ATM or bank or restaurant for a food service establishment. The condition field stores information that signifies that the stop should be suggested when a particular event occurs. For example the condition field may denote that a stop may be suggested at a particular day and time such as Thursday in the evening. The condition field may also include information that the stop should be suggested when a property of the vehicle occurs such as when the level of the gas tank becomes low. When the condition is met the stop is suggested to the user. The time day constraints field stores data relating to the likely time of day that the stop would be made and the likely day that the stop would be made. For example if a user goes out to breakfast only on Saturday mornings the time day constraints field may limit suggestions for a breakfast restaurant when the time is in the morning and the day is Saturday. The last occurrence field includes information about a date that a vehicle last visited a stop.

The data structures are examples of possible data structures that may be used in a system configured to perform the operations shown in such as the in vehicle system shown in . Other data structures may feature different parameters structures values and records.

The node information data structure includes a node identifier directed links a driveable link count and a total link count . The node identifier uniquely identifies the particular node. Directed links identify the directed links that are adjacent to the node. For example directed links may include a list of the directed link identifiers that are adjacent to the node. Directed links also may point to a position in a directed link index that is associated with the first directed link that is adjacent to the node. When the directed link index is organized so that the directed links adjacent to a particular node are linked additional directed links that are adjacent to the node also may be identified. The driveable link count indicates the number of drivable directed links that are adjacent to the node. The total link count indicates the total number of links e.g. driveable directed links and non driveable directed links that are adjacent to the node. In some implementations the node identifier may be determined based on the position information of the node relative to one or more other nodes and or one or more directed links.

The directed link data structure includes a directed link identifier a speed a distance and an end node identifier . The directed link identifier uniquely identifies a particular directed link. The speed identifies an average speed for traversing the directed link. The distance indicates the distance to traverse the directed link. Collectively the speed and the distance may be used to determine a cost to traverse the directed link. Some implementations may include a cost in lieu of or in addition to the speed and the distance . The end node identifier uniquely identifies the particular node that is the end node of the directed link.

Some implementations may include a start node identifier. The ability to traverse between node information such as the node information that uses node information data structure in and directed link information such as directed link information that uses directed link information data structure may be useful in determining a route to a destination. For example a routing process may identify the directed links that are adjacent to a particular node then identify the end node of a particular directed link then identify the directed links from that end node and so on.

Some implementations may use other software engineering techniques to identify a particular node and or a particular directed link. For example a geographic tiling method may be used in which a geographic region such as the United States is overlaid with a grid of blocks or tiles. Each tile may correspond to a portion of the geographic region and may be interlinked. For each tile the latitude and longitude coordinates may be associated with a particular reference point of a tile e.g. the lower left corner of a tile . A particular location e.g. a particular node or a particular directed link may be identified based on an association with a particular tile and the location of the particular location within the tile.

Referring to travel pattern data a travel pattern record may include TP 1004 as a travel pattern identifier To School as a travel pattern name Home as an origin Westbriar Elementary School as a destination RL 21232 as a route links set no data for an alternative route links set High Each Weekday as a frequency Weekday Morning as a time day constraints Vehicle Van as a source and Mar. 5 2005 as a last occurrence. Another travel pattern record may include TP 1005 as a travel pattern identifier To Work as a travel pattern name Home as an origin XYZ Company Springfield Mass. as a destination RL 54433 as a route links set RL 34504 as an alternative route links set High Each Weekday as a frequency Weekday Morning as a time day constraints Vehicle Sedan as a source and Mar. 5 2005 as a last occurrence. A travel pattern record also may include TP 1006 as a travel pattern identifier From Work as a travel pattern name XYZ Company Springfield Mass. as an origin Home as a destination RL 483839 as a route links set RL 493933 as an alternative route links set High Each Weekday as a frequency Weekday Evening as a time day constraints Vehicle Sedan as a source and Mar. 5 2005 as a last occurrence. Another travel pattern record may include TP 1007 as a travel pattern identifier ABC Arena from Work as a travel pattern name Work as an origin ABC Arena as a destination RL 03392 as a route links set RL 49394 as an alternative route links set Infrequent as a frequency Evening as a time day constraints User Kurt as a source and Jan. 5 2005 as a last occurrence. Further a travel pattern record may include TP 1008 as a travel pattern identifier ABC Arena from Home as a travel pattern name Home as an origin ABC Arena as a destination RL 0454 as a route links set RL 78494 as an alternative route links set Infrequent as a frequency Evening as a time day constraints User Kurt as a source and Jun. 5 2004 as a last occurrence. Another travel pattern record may include TP 1009 as a travel pattern identifier Aunt Sally s House as a travel pattern name Home as an origin 1234 Main St. South Haven S.C. as a destination RL 94939 as a route links set RL 04949 as an alternative route links set Low Twice Per Year as a frequency Morning Departure as a time day constraints User Jane as a source and Nov. 23 2004 as a last occurrence.

Travel pattern data illustrates the breadth of the data that may be stored in a travel pattern record e.g. of . For example a travel pattern name may include To Work or From Work a frequency may include High Each Weekday Infrequent or Low Twice Per Year a time day constraint may include Weekday Morning Weekday Evening Evening or Morning Departure and a source may include a Vehicle or a User. 

Referring to stop data a stop record may include ST 4569 as a stop identifier ABC Grocery Store as a stop name N949443 as a node identifier Grocery Store as a category of stop TP 1006 as a travel pattern identifier Reminder Thursday Evening as a condition no entry for Time Day Constraints and Mar. 1 2005 as a last occurrence. Another stop record may include ST 4969 as a stop identifier Organic Grocery as a stop name N95949 as a node identifier Grocery Store as a category of stop TP 1006 as a travel pattern identifier Infrequent as a condition no entry for Time Day Constraints and Feb. 28 2005 as a last occurrence. A stop record also may include ST 4978 as a stop identifier ZYX Gas as a stop name N984849 as a node identifier Gas as a category of stop TP 1006 as a travel pattern identifier Detected Low Fuel as a condition no entry for Time Day Constraints and no entry for last occurrence. Another stop record may include ST 5678 as a stop identifier BCD Travel Plaza as a stop name N34533 as a node identifier Turnpike Service Area as a category of stop TP 1009 as a travel pattern identifier Proximity To N34533 as a condition no entry for Time Day Constraints and Nov. 23 2004 as a last occurrence.

Stop data illustrates the breadth of the data that may be stored in a stop record e.g. of . For example a category of stop may include a Grocery Store Gas or Turnpike Service Area and a condition may include Reminder Thursday Evening Infrequent Detected Low Fuel or Proximity To N34533. 

The UI includes a user identification portion a destination selection portion an origin portion an additional prediction information portion an identify stops button and a suggest stops portion . User identification portion and destination selection portion were described previously with respect to user identification portion and destination selection portion of . Similarly origin portion was described previously with respect to origin portion of . After entering user identification destination and origin information a user may activate a store button not shown to store the information in a travel pattern record e.g. of . The information entered in the user identification portion the destination selection portion and the origin portion may be stored in a travel pattern record e.g. as the source the destination identifier and the origin identifier of respectively . The user configured travel pattern record may then be used to generate a predicted destination based on a route partially completed by a ground based vehicle.

UI also may include an additional prediction information portion . The additional prediction information portion enables users to enter additional information about the particular route to increase the accuracy of a prediction. The additional prediction information portion may include a frequency field a time constraints field and a day constraints field . The frequency field enables a user to enter a probability or likelihood that the route may be traveled. For example a user may label a route to work as high or frequent but a route to the dentist s office that the user typically visits only twice a year as low or infrequent. The frequency may be entered in terms of number of occurrences per unit time. The time constraints field allows a user to enter the likely time a particular route may be traveled. For example a user may label a route to work as traveled between 6 AM to 9 AM or in the morning and route home from work as traveled between 5 PM to 9 PM or in the afternoon. The day constraints field allows a user to specify the likely days the route may be traveled. For example a user may label a route to work as traveled on Monday through Friday and a route to church as traveled on Sunday. Upon activation of the store button not shown the information entered in frequency field time constraints field and or day constraints field may be stored in a travel pattern record e.g. as the frequency and time day constraints of respectively .

The UI also may include a suggest stops portion . The suggest stops portion allows a user to specify categories of stops for which alerts should be generated when traveling along a particular route. The suggest stops portion may include for example the desire for suggestions on where a user can find gas money or a restaurant along the particular route. For example when a route covers a long distance a user may desire suggestions of where the user can obtain gas or find a restaurant when the user will likely need to refuel a vehicle or stop for a meal. Similarly when the destination is a sporting event or amusement park a user may desire suggestions of where the user can obtain cash along the route because the user will likely require cash at the destination. The suggest stops portion allows a user to indicate the information the user desires when traveling a particular route.

UI also may include an identify stops button that allows a user to identify preferred stops along a route. When a user selects the identify stops button a UI for entering information about a preferred stop e.g. UI of is displayed.

The day constraints field enables a user to request notification of a certain category of stops or a specific preferred stop only on a certain day or range of days. For example a user may want suggestions for a bank only on Monday through Friday because the bank is not open on the weekend. When the user activates the store button not shown the information entered into the suggestion information portion may be stored e.g. in a stop record shown in .

The processor receives a route to a destination . For example the route to a destination may be directly entered through a UI on the system or received over a network. The destination received may be entered by a user or predicted based on a partially completed route.

Next a time constraint is associated with the route . The time constraint may include a time a user is making a request a time a user plans to travel to the destination and or a time a user expects to arrive at the destination. For example a time constraint for a destination predicted by a partially completed route may be the current time because the user is currently traveling to the destination. A time also may be the estimated arrival time predicted by an in vehicle navigation system. In one implementation the expected arrival time may represent a more accurate indication of an event since a traveler that lives near an event will likely start traveling at a much different time than a person that lives far away from an event when both travelers from near and afar plan to arrive at approximately the same time.

After associating a time constraint with the received route the route is related to other routes based on the time constraint and destination . Relating a route to other routes may include comparing the received route with routes received previously from other users. For example a first user s route may be received for an expected arrival at a stadium at 7 00 PM on a Saturday night. The first user s route is related to routes previously received from other users to determine if other users are traveling to the stadium s vicinity at that time or approximate time .

When relating a route to other routes to predict a destination of an event a proximity of a route to the destination may be weighted and routes further from the destination may be given less weight. For example a user traveling to a stadium may provide a strong indication that an event is occurring at the stadium. A user traveling to a restaurant near a stadium may provide a moderate indication that an event is occurring at the stadium because users often travel to a restaurant near a stadium before attending an event at the stadium. On the other hand a user traveling to a grocery store far from a stadium may provide no indication that an event is occurring at the stadium because users rarely travel to a grocery store far from a stadium before attending an event at the stadium.

When relating a route to other routes to predict a time of an event a proximity of time of travel to an expected time for an event may be weighted and routes being traveled further from the expected time for an event may be given less weight. For example a user traveling to a stadium at 7 00 P.M. on Saturday may provide a strong indication that an event is occurring at the stadium Saturday night. A user traveling to a stadium at 1 00 P.M. on Saturday may provide a moderate indication that an event is occurring on Saturday night because users often travel to a stadium in advance of an event to participate in other activities such as tailgating. On the other hand a user traveling to a stadium on Tuesday at 3 00 P.M. may provide little indication that an event is occurring at the stadium on Saturday night because users rarely travel a stadium on Tuesday at 3 00 P.M. because the user is attending an event at the stadium on Saturday night.

Based on relating the route to other routes the existence of an event at the destination is predicted . may include determining a number of users traveling to a destination in the same time window and if the number reaches a certain threshold predicting an event at the destination. For example if many users are traveling to the destination within the same time constraint then an event is likely be predicted at the destination. On the other hand if a user is the first person traveling to a destination at that time then an event will likely not be predicted at the destination or at least not until more users are traveling to the destination. As the number of routes received increases the accuracy of event prediction increases.

The event detection service receives mapping query information from the mapping service providers A B and destination information from in vehicle navigation systems A B. Based on the mapping query information and the destination information the event detection service relates multiple user queries and multiple user destinations to predict a potential or emerging event. The event detection service may notify the mapping service providers A B about an emerging event. Subsequently mapping service providers may present users A and B with information about the emerging event. In addition the event detection service may notify the users of the in vehicle navigation systems A B directly with information about an emerging event.

A series of locations of a ground based vehicle is received . For example an in vehicle navigation system with a GPS Global Positioning System may use a wireless transmitter to provide intermittent location updates to a host. In another example a user s wireless phone provides location information as the user travels in a ground based vehicle.

At least some of the locations are related to at least one travel pattern . For example a host may determine whether the locations are located within previously established travel routes. In another example a host translates a current location and direction to a route based vector. The route based vector then is compared to other route based vectors to create a set of potential destinations. Subsequent updates may be used to modify the set of potential destinations. In one implementation each of the potential destinations is associated with a probability or metric indicative of the likelihood of a potential destination being an actual destination relative to other potential destinations .

A route is identified based on relating at least some of the received locations to at least one travel patterns . For example a host may transmit message to an in vehicle navigation system with a description of the most likely potential destination. In another implementation an in vehicle navigation system is configured to manage a list of potential destinations. The in vehicle navigation system then may identify and or select one or more results from within the list.

An intermediate point of interest responsive to a predicted interest of a user is identified based on the route . For example an in vehicle navigation system may determine that the user is on a cross country trip and suggest fuel service centers along the route to the destination. The fuel service centers may be suggested to minimize the number of refueling stops and or reflect other factors e.g. better fuel prices ensure user always has a quarter tank of fuel .

GUI A represents a message suggesting a fuel service location. GUI A states We recommend you stop at the fuel service location in 1.6 miles. You have fuel for 30 miles based on your current fuel efficiency. After the fuel service location in 1.6 miles the next fuel service location is in 20 miles. Note that each of the numerical values are underlined indicating that the underlined value is based on real time information. In some implementations the underlined value or term represents a link that may be selected to retrieve additional information. For example selecting the distances values may be used to retrieve information about the intermediate point of interest. Alternatively the underlined value may be selected to invoke the underlying assumptions and or data upon which the underlined value is based.

GUI B represents a message that may be used to suggest a meal service location. GUI B states We recommend you stop at restaurant Y location in 80 miles. This will enable you to eat lunch at the lunch window. After restaurant Y the next restaurant is 30 miles after restaurant Y. Press HERE to set restaurant Y as a stop. 

GUI B has suggested an intermediate point e.g. RESTAURANT Y based on a determination that the ground based vehicle will be proximate to RESTAURANT Y during the lunch time frame. The user may select HERE to set RESTAURANT Y as a waypoint. Setting a waypoint may be used to set notifications or prioritize alerts as the user approaches RESTAURANT Y. For example GUI C represents one message that may be used to notify the user as the user approaches RESTAURANT Y.

Initially the number of occupants in the vehicle is determined . For example a ground based vehicle may include passenger sensors that detect the presence of an occupant on a seat in a vehicle. The sensors also may be used to control activation of air bags and or control airbag settings e.g. by not activating or fully activating for children . The sensors then may report the number of occupants to an in vehicle navigation system.

The in vehicle navigation system then determines if the number of occupants should be used to adjust a predicted interest . If so the predicted interest is adjusted to reflect number of occupants . For example the in vehicle navigation system may be configured to suggest more frequent stops if more passengers are present. Similarly if hotel accommodations are suggest only hotel accommodations supporting the number of occupants may be suggested. In one implementation the number of occupants may be indicative of occupant demographics. For example the presence of five or six occupants in a minivan may indicate that some children are likely to be present. If not the in vehicle navigation system continues to operation .

Similarly the in vehicle navigation system determines which occupants are in the vehicle . For example the in vehicle navigation system may receive signals from passenger sensors. The in vehicle navigation system then may identify which seating positions are occupied. In one implementation the passenger sensors also provide an indicator of a weight of an occupant which may be used to indicate whether a passenger is an adult or a child. The in vehicle navigation system then determines if the indication of which occupants are in the vehicle should be used to adjust a predicted interest . For example the presence of an occupant in a front passenger seat of a vehicle may be indicative of a presence of a spouse while the presence of occupants in rear passenger seats may be indicative of children and interests that result by their presence e.g. by requiring periodic rest stops or stops at child friendly restaurants .

Therefore if the occupant identification is indicative of a user s predicated interests the predicted interest is adjusted to reflect which occupants are in the vehicle . If not the in vehicle navigation system continues on with identifying an intermediate point of interest responsive to a predicted interest of a user based on the route See operation in .

Historical route information is referenced . For example a processor may retrieve a user s travel patterns from a database. The processor determines whether a series of locations for the ground based vehicle is related to historical route information . For example a processor may determine whether recent locations also are found in the user s previous travels. If so the user s profile may be retrieved . As a result actual points of interest are associated with historical routes may be retrieved . For example intermediate points of interest from previous trips may be retrieved. If the series of locations for the ground based vehicle is not related to historical route information the processor may return to the analysis described previously with respect to .

The processor determines whether the user s predicted interest supports suggesting an intermediate point of interest related to one of the actual intermediate points of interest from a historic route. For example the processor may determine whether a current trip with a current profile e.g. attending a sporting event appears similar to previous trips. If so the processor suggests an intermediate point of interest related to one of the actual intermediate points of interest . In particular the processor suggests similar or even the same intermediate points of interest from earlier trips. If the user s predicted interest does not support suggesting an actual intermediate point of interest from one of the historic routes a processor may return to the analysis described previously with respect to .

GUI represents a message that may be presented to a user in Toledo Ohio traveling westward to Wheaton Ill. approximately 270 miles to the west . GUI notes Your destination is Wheaton Ill. It is currently 6 00 PM and you are in Toledo Ohio. Under normal travel conditions you arrive at 11 30 PM. However it appears that the following conditions have been detected.

We note that the next available lodging on your route is in South Bend Ind. at the GoldDomer Lodge. Select HERE to reserve a room at GoldDomer Lodge.

As shown above if the user were able to travel under normal conditions the user could expect to arrive at a relatively reasonable hours at 11 30 PM. However problematic conditions adversely affect the ability of the user to achieve that the previous estimated time of arrival. In particular the message indicates that heavy snow conditions and a road closure on the anticipated route have been detected. As a result the estimated time of arrival has been delayed until 3 AM. Detecting that a 3 AM arrival is undesirable the processor has retrieved lodging information and configured a message that the user may interact with to reserve a room at the next available location. The message also indicates no lodging is available after the identified location.

Although illustrate systems and operations for predicting an event based on mapping queries and destinations predicting a route to a destination based on a partially completed route and suggesting stops along a route the operations may be applicable in other contexts. For example a mapping system or in vehicle navigation system may make suggestions to the user based on information pertaining to the route the user is taking. The mapping system or in vehicle navigation system may alert the user that high tolls exist along the route and suggest that the user obtain cash prior to reaching the tolls. The system then may suggest stops where the user can obtain cash prior to the tolls and alert the user of the last stop to obtain cash before reaching the tolls. A mapping system or in vehicle navigation system also may suggest possible services to the vehicle that the user may desire based on the route the vehicle may take to reach the destination. For example if the route takes the user through roads that are in poor condition the system may suggest that the user verify a spare tire is in good working order and suggest locations where a spare tire can be purchased. In another example the system may suggest that the user have the engine of a vehicle serviced and or brakes checked prior to traveling through a mountainous route.

In addition a mapping system or navigation system may predict that a user may desire a certain product based on the destination or event the user is traveling to. More precisely an in vehicle navigation system may suggest a particular product or display an advertisement for a particular product to the user and suggest retailers along the route from which the user may purchase the product. For example an in vehicle navigation system may display an advertisement for sun tan lotion if the user enters or the system predicts a destination to a beach. If the user desires to purchase the sun tan lotion the in vehicle navigation system may suggest stops along the route where the user may purchase the lotion. The in vehicle navigation system also may consider other factors in suggesting a product to a user. For example if a user is traveling to a ski resort area in the winter the system may display an advertisement of skis the user may wish to purchase and suggest stops where the user may purchase the skis. However if the user is traveling to a ski resort area in the summer the system likely would not suggest skis to the user instead suggesting hiking boots.

A mapping system or in vehicle navigation system also may provide the user information about the forecasted weather along the route for the time the user is traveling and make suggestions based on the weather. For example if the forecast along a route calls for rain the system may suggest checking to determine if the vehicle s wiper blades need to be changed or give the user suggestions on where an umbrella may be purchased.

Moreover an in vehicle navigation system may predict certain vehicle actions based on the upcoming route and either suggest the action to the user or perform the action. For example when a vehicle is approaching a turn the in vehicle navigation system may predict the use of a turn signal and suggest that the user activate the turn signal or activate the turn signal automatically. In another example the in vehicle navigation system may detect that the upcoming route takes the user through a tunnel. The in vehicle navigation system may suggest that the user turn on the headlights prior to entering the tunnel or turn the headlights on automatically as the vehicle enters the tunnel.

A mapping system or in vehicle navigation system also may suggest other forms of transportation to the user other than a ground based vehicle. For example if a user requests directions to a destination that is far away the system may suggest airports nearby the origin location and the destination. The system may even suggest particular flights or display air fares of particular carriers. In another example an in vehicle navigation system may predict or learn that there is a large amount of traffic congestion along the route the user is traveling and other similar routes to the destination. The in vehicle navigation system may suggest an alternative form of transportation such as taking a nearby subway that could reduce the travel time for the user. The in vehicle navigation system may provide routing information to the other form of transportation and instructions on how to use the other form of transportation.

In one implementation the navigation system may be configured to predict a destination or an event. For example the navigation system may be configured to predict a destination based on a determination that a vehicle is traveling in particular direction on a particular road e.g. a location and a direction . In another example an event may be predicted in response to receiving a user location and an indication that other users proximate to the user are traveling to a destination and or an event. In yet another example an event and or a destination may be determined based on a location and a determination that other users with similar profiles are traveling to a destination and or an event.

A navigation system may be configured to identify a destination and or an event in response to determining a degree of travel. For example local destinations may be suggested in response to determining that a vehicle is traveling in a local environment while significant events may be avoided or disfavored e.g. displayed after local destinations or events are rendered . Similarly a navigation system in a vehicle whose driver is on vacation far away from a routine geographic operating range may suggest more significant points of interest. In one implementation a more significant point of interest includes likely destinations or events for users outside of their local environment such as a national convention.

In one implementation a local environment is based on a geographic reference such as a state a county or a zip code. In another implementation a local environment is based on proximity e.g. within 10 miles to a home address e.g. a location where a vehicle is located before a day s activities begin . In yet another implementation a navigation system dynamically defines a local environment based on where a vehicle or navigation system travels and the frequency of travel. For example a user may transit three jurisdictions during daily commute between home and the office. A navigation system may define the local environment to include a geographic region proximate to a route traveled during the daily commute.

In some environments such as a convention center hosting multiple events a user may be prompted for additional information to distinguish between multiple events occurring within a proximity threshold. For example a navigation system may present a message indicating You appear to be headed to the convention center. There appear to be 3 similar destinations within a two block radius and 5 events at the convention center. Is one of the following destinations and or events of particular interest to you The message then may display destinations and events which a user may select to retrieve additional information responsive to their interests. For example after a user selects one event the user may receive a message indicating that complimentary valet parking is available at a particular entrance.

The described systems methods and techniques may be implemented in digital electronic circuitry computer hardware firmware software or in combinations of these elements. Apparatus embodying these techniques may include appropriate input and output devices a computer processor and a computer program product tangibly embodied in a machine readable storage device for execution by a programmable processor. A process embodying these techniques may be performed by a programmable processor executing a program of instructions to perform desired functions by operating on input data and generating appropriate output. The techniques may be implemented in one or more computer programs that are executable on a programmable system including at least one programmable processor coupled to receive data and instructions from and to transmit data and instructions to a data storage system at least one input device and at least one output device. Each computer program may be implemented in a high level procedural or object oriented programming language or in assembly or machine language if desired and in any case the language may be a compiled or interpreted language. Suitable processors include by way of example both general and special purpose microprocessors. Generally a processor will receive instructions and data from a read only memory and or a random access memory. Storage devices suitable for tangibly embodying computer program instructions and data include all forms of non volatile memory including by way of example semiconductor memory devices such as Erasable Programmable Read Only Memory EPROM Electrically Erasable Programmable Read Only Memory EEPROM and flash memory devices magnetic disks such as internal hard disks and removable disks magneto optical disks and Compact Disc Read Only Memory CD ROM . Any of the foregoing may be supplemented by or incorporated in specially designed ASICs application specific integrated circuits .

It will be understood that various modifications may be made without departing from the spirit and scope of the claims. For example advantageous results still could be achieved if steps of the disclosed techniques were performed in a different order and or if components in the disclosed systems were combined in a different manner and or replaced or supplemented by other components. As another example a screen name is used throughout to represent a unique identifier of an account but any other unique identifier of an account may be used when linking accounts. Accordingly other implementations are within the scope of the following claims.

