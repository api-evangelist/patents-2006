---

title: Systems and methods for recording audio
abstract: Systems and methods for recording audio are provided. In this regard, an representative method comprises: receiving audio information corresponding to an audio communication; receiving parameter information corresponding to a manner in which the audio communication is to be provided to a user in audible form; providing the audio information and the parameter information in the form of Internet Protocol (IP) packets; and recording the audio information and the parameter information provided by the IP packets.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07852994&OS=07852994&RS=07852994
owner: Verint Americas Inc.
number: 07852994
owner_city: Roswell
owner_country: US
publication_date: 20060331
---
A telephony system such as used in a trading room supports a range of equipment. By way of example at each trader s desk of a trading room such equipment can include up to four telephony handsets up to 32 loudspeaker channels and up to two microphones. Unfortunately disputes can arise in a trading room due to over hearing and or mis hearing of communications provided by such equipment. The availability and quality of recordings of such communications therefore can be critical to resolving these disputes.

In a compliance recording environment it can be imperative that everything that could have been heard and therefore acted upon is recorded. This can include recording speech that was not originally intended for the handset microphone from which the speech was heard. For instance recording should be able to accommodate a situation in which a trader hears buy and acts on that communication even though the communication was being shouted into another handset.

Conventionally the stringent recording requirements of a compliance recording environment have produced recording systems that are deliberately over sensitive. As a result such systems tend to record low level audio such as background noise in addition to the communications of interest. This in turn tends to require unnecessarily large amounts of data storage. Correspondingly it can be difficult to locate a particular communication of interest among the numerous recorded communications.

Thus a heretofore unaddressed need exists in the industry to address the aforementioned deficiencies and inadequacies.

Systems and methods for recording audio are provided. In this regard an exemplary embodiment of such a method comprises receiving audio information corresponding to an audio communication receiving parameter information corresponding to a manner in which the audio communication is to be provided to a user in audible form providing the audio information and the parameter information in the form of Internet Protocol IP packets and recording the audio information and the parameter information provided by the IP packets.

An exemplary embodiment of a system for recording audio comprises a communication tap. The communication tap is operative to receive audio information corresponding to an audio communication and to receive parameter information corresponding to a manner in which the audio communication is to be provided to a user in audible form. The communication tap is further operative to provide the audio information and the parameter information in the form of Internet Protocol IP packets.

Computer readable media also are provided. In this regard an exemplary embodiment of a computer readable medium includes a computer program that comprises computer executable instructions for performing the computer implemented steps of receiving audio information corresponding to an audio communication receiving parameter information corresponding to a manner in which the audio communication is to be provided to a user in audible form the parameter information comprising information corresponding to an identification of a communication device used to provide the audio communication to the user in audible form and an indication of volume control settings of the communication device at a time the audio communication was being provided to the user in audible form and providing the audio information and the parameter information in the form of Internet Protocol IP packets.

Other systems methods features and or advantages of this disclosure will be or may become apparent to one with skill in the art upon examination of the following drawings and detailed description. It is intended that all such additional systems methods features and or advantages be included within this description and be within the scope of the present disclosure.

As will be described here with reference to several exemplary embodiments systems and methods for recording audio are provided. In the exemplary embodiments that will be described each is implemented in the context of a compliance recording environment of a trading room in which traders use a telephony system to facilitate trading. However there is no intention to limit the invention to this particular type of environment except as may be expressly set forth in the accompanying claims. Similarly although much of this disclosure pertains to the recording of audio the invention is not limited to the recording of audio as video and other types of data also may be recorded in some embodiments.

In this regard some embodiments can potentially provide one or more perceived advantages over conventional communication systems. By way of example at least some embodiments permit the use of compression algorithms such as G729 and Annex B silence suppression under the input conditions for which those compression algorithms were designed. Thus significant disk storage capacity can be saved without risking audio quality. Additionally higher quality recordings can be provided e.g. no audio input should be able to mask out another input as can be the case with systems that exclusively utilize mixed audio channels.

At least some embodiments allow reconstruction of audio at levels that would have been heard at a trader s desk i.e. in accordance with the volume control settings that the trader applied at the time of recording. In this manner audio corresponding closely to the audio that was actually heard by the trader can be confirmed. Additionally reconstruction of audio levels on each input to a mixed speaker can be provided regardless of the volume settings in effect at a trader s desk at the time. In these embodiments someone replaying the recorded audio can hear everything that the trader could or should have heard had the volume controls at the desk been set differently. At least some embodiments make use of distributed call detail information which allows for scalability fault tolerance and sub second time stamping.

With respect to recording at least some embodiments provide for parallel handling of the audio from the point where it leaves the trading room telephony system to the point where it is stored on multiple media. By way of example a recording system can be used for recording the audio at two recorders which may be collocated or separated thereby potentially eliminating the need for a secondary archival process to copy the data to a secure location.

Another aspect utilized in at least some embodiments pertains to the handling of audio sources when multiple channels of the trading room telephony system are providing multiple copies of the same audio signal to different traders. In this regard lower volumes of recordings can be provided due to the elimination of superfluous recording of the same audio source.

Referring now to the drawings is a flowchart depicting functionality or method steps associated with an exemplary embodiment of a system for recording audio. In this regard the functionality involves receiving audio information corresponding to an audio communication block receiving parameter information corresponding to a manner in which the audio communication is to be provided to a user in audible form block providing the audio information and the parameter information in the form of Internet Protocol IP packets block and recording the audio information and the parameter information provided by the IP packets block . Notably the audio can be compressed and or mixed prior to be directed for recording.

With respect to parameter information such information can include indications of the date time of a communication and or recording thereof the device used to provide communication to a user in audible form. Such parameter information can be used during replay of the recorded communications as will be described in greater detail later.

An exemplary embodiment of a system for recording audio that can be used to implement the functionality depicted in is illustrated schematically in . In particular system is implemented in a trading room environment which is an exemplary environment in which compliance recording of audio typically is conducted. System incorporates central equipment that is operative to route audio to and from users. By way of example the audio inputs can include telephone audio e.g. audio provided by POTS Voice over IP VoIP communications and television audio among others. As such the system can include various components that are not shown in such as servers for example with such various other components being omitted for ease of description. Regardless of the particular implementation details the central equipment is operative to receive audio inputs e.g. input and to provide audio outputs e.g. outputs and for use by one or more users.

In the embodiment of system is configured in several manners for receiving and recording audio. There is however no intention to limit the inventive aspects to the particular configurations shown in .

In this regard central equipment is operative to route audio to various locations. Specifically central equipment routes audio to distribution devices or turrets and each of which typically is located at a different trader s desk. The distribution devices in turn are operative to permit selection and routing of audio to various communication devices such as handsets microphones hands free units and speakers based on user inputs received at the distribution devices. For instance distribution device selectively routes audio to and or from handset microphone and speaker . The distribution devices also permit adjusting of volume levels of the audio and facilitate mixing of the audio by directing multiple channels of audio to designated communication devices.

Particularly relevant to the recording of audio is the use of one or more communication taps. In particular five such taps are depicted in . Specifically communication tap is located at the distribution device communication tap is located at handset communication tap is located at microphone communication tap is located at speaker and communication tap is located with the central equipment of the telephony system. For instance communication tap is associated with a processor not shown of the central equipment.

In operation each communication tap is operative to receive audio and provide audio information for recording. Depending upon the particular location of the communication tap this can be accomplished in different manners. By way of example if a communication tap is configured to receive voice data from a user talking through a communications device such a communication tap can be configured to convert the voice data into data recognizable by a data network such as the Internet. This conversion may include converting the voice data into packets of data for transmission via a data network.

This particular functionality is implemented by the communication tap which is located at the distribution device . In particular responsive to receiving audio from an associated handset or microphone the communication tap converts the audio into packets. Notably the distribution device also receives audio that is to be directed to the various communication devices for output in audible form such as audio that is to be provided to the speaker. The communication tap also converts this audio into packets. The audio information contained in the packets is then directed to the recording system for recording.

Additionally with respect to the audio that is to be directed to the various communication devices for output in audible form the packets can contain information corresponding to various parameters associated with the audio. By way of example the parameters can include a time associated with the audio such as the time the audio was received. Additionally or alternatively the parameters can include a designation of the communication device to and or from which the audio is delivered and or the volume control settings of the communication device. After the audio information contained in the packets has been recorded the audio can be reconstructed by referencing the stored parameter information and audio information.

Of particular interest is the ability to replay the recorded communications in a manner closely corresponding to the manner in which the original communication was perceived by the user. Clearly the manner in which the original communication was perceived is related at least in part to the device used to provide the communication to the user and the volume control settings of such a device. Thus when the original communication was provided in audible form to a user via a desktop speaker the parameter information associated with that speaker can be used to reconstruct the audio characteristics that the user experienced when listening to the communication.

In some embodiments this can be accomplished by correlating the stored parameter information associated with the speaker at the time of the communication with the stored audio information. Such reconstruction can even take place if the device used to replay the communication e.g. a desktop speaker was not the same type of device used when the original communication was being provided in audible form to the user. For instance if the original communication was provided via a handset speaker stored parameter information associated with the communication could be evaluated. Responsive thereto the replay of the communication could be modified to closely correspond to the audio that was provided to the user via the handset speaker. In particular the audio that is to be replayed via a desktop speaker could be modified to be more indicative of audio that is provided via a handset speaker.

Clearly various other scenarios can be accommodated in various embodiments. By way of example although parameter information typically is recorded for later use such information could be disregarded such that the parameter information does not necessarily affect replay. Additionally or alternatively parameter information may be subject to modification to enable alteration of a replay so that the communication can be better understood.

In contrast to a communication tap located at a distribution device the communication tap is located at a communication device. Communication tap is operative to receive audio from a user and to convert that audio into packets. In this case the audio information contained in the packets is directed through the associated distribution device and ultimately to the recording system for recording. Notably communication tap may not have access to all of the parameter information such as the corresponding volume control settings that are adjusted at the distribution device. Thus information corresponding to the volume control settings for example can be acquired by another device. For instance such other device could provide information that can later be correlated with the information provided by communication tap .

As another example several communication taps can be used to acquire different types of audio information. By way of example a communication tap located at a communication device can be used to acquire audio corresponding to voice data input to that device by a user while the communication tap located at the associated distribution device can be used to acquire audio information corresponding to audio that is being directed to the user to be heard in audible form. Thus one or more communication taps can be designated for acquiring inputs from the user and one or more communication taps can be designated for acquiring outputs for the user.

As still another example a single communication tap could be used to acquire all audio information of the telephony system. By way of example communication tap located at the central equipment can be configured to acquire all audio inputs and outputs from the communication devices. Notably communication tap also may not have access to all the parameter information associated with the communication such as the corresponding volume control settings that are adjusted at the various distribution devices. Thus any such parameter information can be acquired by other devices and correlated with the information provided by communication tap .

Regardless of the particular functionality used to acquire the audio information and the parameter information that information is converted into packets which are directed to the recording system for recording. In particular the recording system is operative to receive the packets provided by one or more communication taps and to store the information contained therein so that if need be the audio can be reconstructed by referencing the stored audio information and parameter information.

An exemplary embodiment of a recording system is depicted schematically in in which two recorders are used. In this embodiment each of the recorders stores a copy of the information. Notably the two recorders may be widely separated and hence the two copies provide safety from disruption or total destruction of either site.

In at least some embodiments duplication of the stored information and the consequent protection afforded can be achieved by having a single recorder connected to a Storage Area Network for example. This configuration provides fault tolerant paths resulting in mirrored copies of the information being stored in two locations. In some embodiments the recorders are typically within a few kilometers of each other with the link between the disk arrays being a dedicated optical fiber connection for example.

By sending audio to two recorders ideally via distinct and hence fault tolerant network paths receipt of the information by at least one recorder typically occurs even if a network component or a recorder fails. Notably one or more of the recorders can determine in real time for example what information is to be recorded. In some of these embodiments if at least one of the recorders appears to be recording information that is to be stored one or more of any other recorders may discontinue recording. Additionally or alternatively the decision regarding what to record can involve selective recording of the communications available for recording. That is even if a recorder received information corresponding to a communication for recording a portion of the information may not be recorded by that recorder with such a determination being based at least in part on recording rules for example.

In order to avoid using twice the required storage space it is desirable in some cases not to store the information on both recorders. This is especially true when the ultimate storage location uses a fault tolerant system such as a SAN described above. As long as one of the recorders that receives the information manages to write the information to long term storage e.g. a hard drive then it may be desirable for the recorder not to use its long term storage for storing a copy. However due to multiple layers of buffering it may be difficult for the recording system to determine whether information has been committed to long term storage. It may also be difficult to respond quickly to recorder failures since the network between recorders may take many seconds to re route traffic around a failed routing node. In both cases there is a danger that many seconds of audio can be lost. This inadequacy can be potentially alleviated by having both recorders receive information that is buffered such as in a buffer memory. An example recording system that implements this functionality is depicted schematically in .

As shown in recording system incorporates a first or primary recorder and a second or standby recorder . Each of the first and second recorders incorporates a buffer and a long term storage. In particular recorder includes buffer and long term and recorder includes buffer and long term storage .

The first and second recorders are operative to receive the packets and ensure that the information contained in the packets is recorded. Specifically the recorder writes the information from buffer to long term storage e.g. a hard drive and then discards the information from the buffer. The second recorder maintains the information in buffer until the information is assumed to have been transferred to long term storage of the first recorder. For example the information can be held in the buffer for at least a set time threshold. This threshold can be set to be greater than the sum of the worst case time that information takes to be saved to the long term memory using the standard buffered communication streams and the worst case network transmission time between the primary and standby recorders. Thus at the point where a decision is made that the primary recorder or network path to that recorder has failed all information back to at least that which the primary recorder can safely be assumed to have written to disk is still held in the buffer of the standby recorder. The standby recorder writes to disk all information held that would normally have been recorded by the presumed failed recorder. Responsive to determining that the primary recorder is not properly recording the information the standby recorder can indicates an alarm condition to ensure that the problem is addressed as rapidly as possible before another component fails in the now potentially non fault tolerant fallback system.

In some embodiments the standby recorder may act as such to more than one primary recorder although only one primary recorder is depicted in for ease of description . Since the load imposed on the standby recorder is less than that on the primary recorders i.e. the standby recorder is only buffering information as long as the primary recorders appear to be operating properly the standby recorder can process incoming information from more than one primary recorder. This provides a more economical fallback methodology. However when the standby recorder does take over from a presumed failed primary recorder it may then be unable to continue receiving and processing the incoming information that is also being directed to the other still healthy primary recorders. In this case the standby recorder can communicate with the telephony system components that are sending the information to the standby recorder. For instance the standby recorder could instruct the telephony system to stop sending the information associated with the operative primary recorders thereby leaving the standby recorder with the information that is being sent to the presumed failed recorder. The load on the standby recorder is then comparable to that on the primary recorder for which it is acting as a backup.

In some alternative embodiments the standby recorder can be configured to write all information received to long term storage. However the standby recorder can be further configured to delete information after it is confirmed that the information also has been committed to long term storage of one or more primary recorders. By way of example if the information is older than a specified threshold e.g. 1 hour or 1 day the information can be deleted from long term storage of the standby recorder so long as the standby recorder receives status information indicating that the primary recorder s are operating properly. If however it is determined that a primary is no longer operating properly the standby recorder can stop deleting information from long term storage thus ensuring an overlap period with the primary recorder that is suspected to have failed.

Note that none of the above results in information transmission to any of the primary recorders being affected. Thus the decision to begin covering for a primary that may have failed does not impact that primary recorder nor does it impact the telephony system. There is thus potentially no adverse affect on the telephony system or the primary recorder which may still be perfectly healthy but unable to communicate status information to the standby recorder.

The processor can be any custom made or commercially available processor a central processing unit CPU an auxiliary processor among several processors associated with the recorder a semiconductor based microprocessor in the form of a microchip or chip set a macroprocessor or generally any device for executing software instructions. Examples of suitable commercially available microprocessors are as follows a PA RISC series microprocessor from Hewlett Packard Company an 80 86 or Pentium series microprocessor from Intel Corporation a PowerPC microprocessor from IBM a Sparc microprocessor from Sun Microsystems Inc or a 68xxx series microprocessor from Motorola Corporation.

The memory can include any one or combination of volatile memory elements e.g. random access memory RAM such as DRAM SRAM SDRAM etc. and nonvolatile memory elements e.g. ROM hard drive tape CDROM etc. . Moreover the memory may incorporate electronic magnetic optical and or other types of storage media. Note that the memory can have a distributed architecture where various components are situated remote from one another but can be accessed by the processor . Additionally long term memory can also include an operating system as well as instructions associated with a fault tolerant recording system .

The software in memory may include one or more separate programs each of which includes an ordered listing of executable instructions for implementing logical functions. In this regard a nonexhaustive list of examples of suitable commercially available operating systems is as follows a a Windows operating system available from Microsoft Corporation b a Netware operating system available from Novell Inc. c a Macintosh operating system available from Apple Computer Inc. d a UNIX operating system which is available for purchase from many vendors such as the Hewlett Packard Company Sun Microsystems Inc. and AT T Corporation e a LINUX operating system which is freeware that is readily available on the Internet f a run time Vxworks operating system from WindRiver Systems Inc. or g an appliance based operating system such as that implemented in handheld computers or personal data assistants PDAs e.g. PalmOS available from Palm Computing Inc. and Windows CE available from Microsoft Corporation . The operating system can be configured to control the execution of other computer programs and provides scheduling input communication control file and data management memory management and communication control and or related services.

A system component embodied as software may also be construed as a source program executable program object code script or any other entity comprising a set of instructions to be performed. When constructed as a source program the program is translated via a compiler assembler interpreter or the like which may or may not be included within the memory so as to operate properly in connection with the operating system .

When the recorder is in operation the processor is configured to execute software stored within the memory to communicate data to and from the memory and to generally control operations of the recorder pursuant to the software. Software in memory in whole or in part is read by the processor perhaps buffered and then executed.

It should be noted that control of the aforementioned functionality can be facilitated by a device other than a recorder. By way of example a designated recording controller could be used to monitor the recording of information and provide the requisite control signals to the recorders for causing information to be stored and or discarded as appropriate.

In at least some embodiments recording channels can be optimized such that for each distinct audio stream that is received fewer copies of such a signal are recorded than are actually present. By way of example an optimized implementation may only record one copy of each distinct audio signal. In some embodiments a recorder can perform this functionality locally and can optionally advise a communication tap that a particular audio stream is redundant. Although potentially recording only one copy of each distinct audio input parameters that affect the processing of these inputs such as current connections with the inputs and volume settings applied should be recorded to enable proper reconstruction.

If an audio input is designated as redundant and thus not to be recorded again the corresponding communication tap could continue to send information regarding the connections of that redundant audio input. Therefore should the connections change audio could once again be provided for recording if necessary. In this way each new audio input can be recorded without risk of losing the first few packets of information. In some embodiments the recorders can communicate information between themselves about which audio inputs are being recorded and can thus determine which inputs are redundant. The recorders could then advise the communication taps of this fact to reduce the load on the tap and the intervening network as an audio input is suspended from being recorded.

In at least some embodiments should N copies of a recorded audio input be required N n inputs could be kept active at any one time. Only N of these could be recorded to long term memory with the other n being recorded in buffer memory. Should one of the N inputs being recorded terminate this gives the recording system time to start storing one of the n spare copies. Only if all connections terminated at the same time or before further copies of the input could be restarted would information corresponding to the audio inputs be lost. Note that the former case does happen where the audio input actually ends but in this case there is no further data to be stored.

By passing this information to the recorder in the same stream and hence via the same network path s as the audio packets the system obtains information in a distributed fashion with that reaching each recorder being in proportion to and relevant to the audio streams that recorder is storing. If audio information is being received there is a very high degree of probability that the call detail information associated with it is also being received. The time correlation of the two streams can be quite good. Having traveled the same path and being sequence numbered together the audio and call detail information are processed by the recorder in the same order as they occurred in the telephony system. Together these attributes allow the recorder to rely on the presence of the call details and to act on them in real time tagging the audio accurately with the information known to be relevant to it regardless of the transmission and buffering delays between the telephony system and the recorder.

In other embodiments redundancy of recording can be provided by operating recording systems in parallel. In such embodiment all communications could be recorded by each recording system e.g. twice in the case of two such systems. Additionally there need not be a real time linkage between the recording systems or requirements for any sophisticated recording error management.

In some of these embodiments the recording systems could post recording of the communications in a database in which redundant recordings can be identified. Thus if a communication is recorded more than once the communication can be marked e.g. tagged as such. Thereafter an archive system could pulls the communications not marked as duplicates to its own storage to be retained or archived for replay as is appropriate. Therefore in operation communications can be pulled from whichever of the parallel recorders records the communications.

Once pulled to an archive system the corresponding recordings of the parallel recorders can be deleted. In such an embodiment if a recorder fails the communication can be pulled from the other recorder. This potentially reduces the need for the local recorders to implement a RAID format and hence could be cheaper. Additionally failure modes are covered including those that occur post recording of the communication i.e. if the archive system is unable to pull a recording from one recorder because the recorder fails during the pull it can pull the corresponding recording or missing portion thereof from another recorder.

It should be noted that the flowcharts included herein show the architecture functionality and or operation of implementations that may be configured using software. In this regard each block can be interpreted to represent a module segment or portion of code which comprises one or more executable instructions for implementing the specified logical function s . It should also be noted that in some alternative implementations the functions noted in the blocks may occur out of the order. For example two blocks shown in succession may in fact be executed substantially concurrently or the blocks may sometimes be executed in the reverse order depending upon the functionality involved.

It should be noted that any of the executable instructions such as those depicted functionally in the accompanying flowcharts can be embodied in any computer readable medium for use by or in connection with an instruction execution system apparatus or device such as a computer based system processor containing system or other system that can fetch the instructions from the instruction execution system apparatus or device and execute the instructions. In the context of this document a computer readable medium can be any means that can contain store communicate propagate or transport the program for use by or in connection with the instruction execution system apparatus or device. The computer readable medium can be for example but not limited to an electronic magnetic optical electromagnetic infrared or semiconductor system apparatus or device. More specific examples a nonexhaustive list of the computer readable medium could include an electrical connection electronic having one or more wires a portable computer diskette magnetic a random access memory RAM electronic a read only memory ROM electronic an erasable programmable read only memory EPROM or Flash memory electronic an optical fiber optical and a portable compact disc read only memory CDROM optical . In addition the scope of the certain embodiments of this disclosure can include embodying the functionality described in logic embodied in hardware or software configured mediums.

It should be emphasized that the above described embodiments are merely possible examples of implementations merely set forth for a clear understanding of the principles of this disclosure. Many variations and modifications may be made to the above described embodiment s without departing substantially from the spirit and principles of the disclosure. All such modifications and variations are intended to be included herein within the scope of this disclosure.

