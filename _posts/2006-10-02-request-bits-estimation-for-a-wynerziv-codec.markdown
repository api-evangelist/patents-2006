---

title: Request bits estimation for a Wyner-Ziv codec
abstract: Request bits estimation for a Wyner-Ziv codec is described. In one aspect, and prior to communicating Wyner-Ziv parity bits to a Wyner-Ziv decoder, an estimated total number of parity bits to send to the Wyner-Ziv decoder are determined. This estimated number of parity bits allows the Wyner-Ziv decoder to reconstruct a frame of different coded content using the Wyner-Ziv parity bits such that the reconstructed frame will meet particular quality criteria. This estimated number of parity bits is determined independent of a request-bits feedback loop between the Wyner-Ziv coder and the Wyner-Ziv decoder. The estimated number of parity bits is communicated to the Wyner-Ziv decoder for reconstruction and presentation of the frame to a user.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07388521&OS=07388521&RS=07388521
owner: Microsoft Corporation
number: 07388521
owner_city: Redmond
owner_country: US
publication_date: 20061002
---
Wyner Ziv s theorem on source coding with side information available only at the decoder provides for an asymmetric video codec where individual frames are coded separately in view of the side information but decoded conditionally. Without such decoder provided side information a Wyner Ziv coder is unable to estimate the number of Wyner Ziv bits to send to the decoder. This is because the number of Wyner Ziv bits depends on a correlation between an input frame and a corresponding side information frame which has not been able to be estimated at the coder. As a result and without additional information being provided to the coder rate allocation at the coder is typically not accurate. In view of this conventional Wyner Ziv source coding schemes typically employ a feedback loop between the coder and decoder for the decoder to request additional refinement bits from an coder to enhance decoded video quality. shows a conventional Wyner Ziv codec that implements a conventional request bits feedback loop between the decoder and the encoder. Through this feedback loop the decoder sends the coder the needed number of bits. However such a feedback loop often results in unacceptable latency of video playback during real time video streaming operations.

Request bits estimation for a Wyner Ziv codec is described. In one aspect and prior to communicating Wyner Ziv parity bits to a Wyner Ziv decoder an estimated total number of parity bits to send to the Wyner Ziv decoder are determined. This estimated number of parity hits allows the Wyner Ziv decoder to reconstruct a frame of different coded content using the Wyner Ziv parity bits such that the reconstructed frame will meet particular quality criteria. This estimated number of parity bits is determined independent of a request bits feedback loop between the Wyner Ziv coder and Wyner Ziv decoder. The estimated number of parity bits is communicated to the Wyner Ziv decoder for reconstruction and presentation of the frame to a user.

This Summary is provided to introduce a selection of concepts in a simplified form that are further described below in the detailed description. This Summary is not intended to identify key features or essential features of the claimed subject matter nor is it intended to be used as an aid in determining the scope of the claimed subject matter.

Use of Wyner Ziv coding using turbo codes is generally considered to be impractical due to the process of the decoder requesting additional bits from the coder via a feedback loop to improve visual quality of the decoded bitstream. The systems and methods for request bits estimation for a Wyner Ziv codec overcome this limitation directly at where the bits are being encoded that is at the Wyner Ziv coder portion of a Wyner Ziv codec. This is accomplished in several implementations that are directed to switching between different non Wyner Ziv bitstreams X and X using a Wyner Ziv switching frame. For each X the Wyner Ziv coder generates a Wyner Ziv switching correlation frame. For each pair of X and corresponding side information Y the Wyner Ziv coder uses a request bits estimator to analyze statistical dependencies between distributions of differential signals. Based on the analysis the request bits estimator determines the total number of Wyner Ziv parity bits that the decoder will need to reconstruct a frame of regularly encoded content X from Y such that X will meet a target arbitrary decoded frame quality. Such a quality determination can be made using any of numerous known decoded frame quality criteria. At a switching point n a corresponding Y which is a previously reconstructed frame derived from regular coded bitstream is transmitted to the decoder. Subsequent to transmitting Y the estimated number of Wyner Ziv parity bits are transmitted to the decoder for decoding and reconstruction of respective X from Y and the additional parity bits. This is accomplished independent of the conventional request bit feedback loop required by existing Wyner Ziv codecs.

These and other aspects of the systems for request bits estimation for a Wyner Ziv codec are now described in greater detail.

Although not required systems and methods for request bits estimation for a Wyner Ziv codec are described in the general context of computer executable instructions executed by a computing device such as a personal computer. Program modules generally include routines programs objects components data structures etc. that perform particular tasks or implement particular abstract data types. While the systems and methods are described in the foregoing context acts and operations described hereinafter may also be implemented in hardware.

In this implementation server and client implement a turbo code based Wyner Ziv coding scheme to facilitate bitstream switching at any desired frame of regularly coded video data i.e. non Wyner Ziv coded video data without affecting coding efficiency of the transmitted bitstreams. One reason for this is because server and client switching operations are independent of a conventional request bits feedback loop between the Wyner Ziv decoder please see client and the Wyner Ziv coder . Additionally for any one input frame X the server s turbo code based Wyner Ziv coding operations provide for use of a same embedded Wyner Ziv bitstream of switching frames to switching from any regularly coded non Wyner Ziv bitstream to a new regularly coded bitstream.

To these ends server and client include one or more respective processors coupled to a system memory comprising computer program modules and program data. Each respective processor is configured to fetch and execute computer program instructions from respective ones of the computer program modules and obtain data from program data. For example server includes processor coupled to system memory . Processor may be a microprocessor microcomputer microcontroller digital signal processor etc. System memory includes for example volatile random access memory e.g. RAM and non volatile read only memory e.g. ROM flash memory etc. . System memory comprises program modules and program data . Program modules include for example video coding modules coders and other program modules such as an Operating System OS to provide a runtime environment a video streaming application that leverages operations of coder bitstream transmission modules a conventional frame decoder and a Wyner Ziv frame decoder a media player device drivers and or so on.

In one implementation coders include for example a conventional coder e.g. an H.264 coder etc. and a Wyner Ziv coder. For a video streaming application to switch between different non Wyner Ziv coded bitstreams X and X using a Wyner Ziv switching correlation frame for input signal X i.e. input video data the conventional coder produces multiple streams of regular coded media content e.g. as per the implementation of the conventional coder . Each regularly coded stream of coded media content is generated from a same piece of input video data and coded according to a different respective bit transmit rate.

The Wyner Ziv coding portion of coder implements any known Wyner Ziv coding scheme to produce multiple Wyner Ziv side bitstreams of coded media content i.e. Wyner Ziv bits corresponding to the multiple regularly coded streams. These multiple side streams are also shown as respective portions of coded media content which collectively encapsulates regular coded media content and Wyner Ziv side bitstreams . Each side bitstream represents the switching correlation frames one switching frame per frame of the input signal X. That is for at least a subset of frame s of X the Wyner Ziv coder produces Wyner Ziv bits for the coding of X at a bitstream switching point at time n the time corresponds to a time in a video presentation timeline . For a frame of X the corresponding Y represents the same content of the frame but with a different reconstruction or quality based on different coding parameters. As a result X and Y are statistically dependent correlation frames. There is no motion between the correlation frames. This can be simplified as X Y D where D represents the residue or mutual dependency between the X and Y.

In contrast to conventional Wyner Ziv coding techniques Wyner Ziv coder also embeds modules of reconstruction and relevance parameters into respective Wyner Ziv Side bit streams . For purposes of exemplary illustration such modules of reconstruction and relevance parameters are shown as a respected portion of other program data . As described below in the section titled Request Bits Estimation Wyner Ziv coder extracts such embedded information from the Wyner Ziv side bit streams corresponding to both X and side information frame Y at a switch point for communicating to request bits estimator module . Request bits and estimator module uses this communicated information to determine the number of extra bits from Wyner Ziv side bitstreams for Wyner Ziv coder to send to decoder independent of a conventional request bits feedback loop.

More particularly a conventional coder or a video streaming application leveraging operations of the conventional coder communicates frames of the regularly coded bitstreams to client . Exemplary video transmission module s are shown as respective portions of other program modules . Responsive to receiving frames from a regularly coded bitstream decoder utilizes a conventional decoder to decode the coded frames to generate respective portions of decoded content frames . During media content streaming operations a conventional coder or a video streaming application leveraging the conventional coder determines that a first regular coded bitstream being streamed to client should be switched out with a different regular coded bitstream . Such a determination can be made in view of multiple different criteria such as in view of network bandwidth data throughput and corresponding coded data bit rate considerations responsive to user input etc. .

Responsive to a determination to switch between regular coded bitstreams at a switching point Wyner Ziv coder uses request bits estimator to derive embedded modules of reconstruction and relevance parameter s from the Wyner Ziv side bitstreams corresponding to both X and side information Y at the switching point. Request bits estimator module uses this extracted information to estimate the number of parity bits to send to Wyner Ziv decoder to allow decoding of side information Y to arrive at an X with a target level of quality. This is accomplished independent of a conventional request bet feedback loop. Wyner Ziv coder allocates this extra number of parity bits from Wyner Ziv side bitstreams . At a switching point n a video streaming application or Wyner Ziv coder transmits the allocated Wyner Ziv parity bits to the Wyner Ziv decoder for decoding and presentation of X to a user. Such extra parity bits are shown as a respective portion of other program data .

Responsive to receiving the Wyner Ziv parity bits the Wyner Ziv decoder decodes and reconstructs a respective X according to one or more exemplary bitstream switching schemes. At the client decoded content frames are presented to a user by media player via display device . In one implementation a first bitstream switching scheme such as the one described below in the section titled A First Exemplary Bit Switching Scheme is used by the Wyner Ziv codec to switch from a first regular coded bitstream to a second regular coded bitstream . In another implementation a second bitstream switching schemes such as the one described below in the section titled A Second Exemplary Bit Switching Scheme is used by the Wyner Ziv codec to switch from a first regular coded bitstream to a second regular coded bitstream .

Referring to Wyner Ziv encoder includes scalar quantization and turbo encoder . Encoder transmits only Wyner Ziv bits parity bits in terms of the switching point to the turbo decoder until the Wyner Ziv frame can be decoded correctly with side information frame . Please note that in this example codec does not implement a request bits feedback loop e.g. please see the request bits feedback loop of between the Wyner Ziv decoder and the Wyner Ziv coder . Rather Wyner Ziv coder provides an estimated number of request bits to the parity buffer portion of the Wyner Ziv turbo coder independent of any request bits feedback loop between Wyner Ziv decoder and Wyner Ziv encoder . As described above this is accomplished through use of request bits estimator shown in to analyze statistical dependencies of X and Y at a bitstream switching point and there from provide decoder with enough bits to generate reconstruction a quality decoded frame from the decoded Wyner Ziv bits and a decoder generated side information frame . Exemplary operations of Wyner Ziv coder and request bits estimator to estimate request bits are described in greater detail below in the section titled Request Bits Estimation .

For each input frame X Wyner Ziv coder uses request bits estimator to estimate the total number of Wyner Ziv bits to send the decoder . This estimate is shown as the estimated number of request bits . Request bits estimator analyzes statistical dependencies between distributions of differential signals between a corresponding original frame of video data X input video data that is a reconstructed frame of a regular coded bitstream and side information Y that is a reconstructed frame based on another regular coded bitstream . Based on the analysis the request bits estimator determines the number of total actual number of Wyner Ziv parity bits that the decoder will need to reconstruct a frame of regularly encoded content X from Y such that X will meet a target arbitrary quality criteria. This total number of parity bits value is shown in as estimated number of requests bits . Responsive to this determination the Wyner Ziv coder generates total number of parity bits independent of request bits feedback loop between the Wyner Ziv coder and the Wyner Ziv decoder to obtain a target quality for a finally decoded frame . Side information Y is only used at decoder to decode and reconstruct X .

To analyze statistical dependencies between distributions of differential signals between an original frame X of input video content and a corresponding reconstructed Y request bits estimator first derives several parameters from X and the reconstructed Y. The derived parameters are modules of reconstructions which are generated from regular coded streams and relevance parameters both of which are produced by Wyner Ziv coder while Wyner Ziv encoding. The values of reconstructed frames of coded media content and original input video content can be viewed as vectors. The parameters include the modulars of these vectors and the relevancy parameter between the vectors of reconstructed frame and original video data. These parameters are stored in the corresponding Wyner Ziv Side Bitstreams . When the bitstream switching occurs Wyner Ziv encoder derives the parameters of relative bitstreams and calculates the Laplacian model parameter var. Based on the correlation model the actually needed number of bits is estimated by request bits estimation module using var. Wyner Ziv coder then transmits the punctured parity bits according to the estimation to Wyner Ziv decoder .

The number of request bits depends on both a correlation model including the model parameters between an input frame X and a corresponding side information frame Y and the efficiency of Wyner Ziv coder . It is assumed that the correlation between the X and Y complies with Laplacian model. In view of this and in one implementation request bits estimator estimates the Laplacian model parameter. In another implementation when the Laplacian model parameter is available request bits estimator derives the theory bound of the number of request bits . Also based on statistics and analysis a conclusion is drawn that the actual number of request bits is closely related to the theory bound of the number of bits depending on the particular operations employed by encoder . Therefore for a particular Wyner Ziv coder the relationship between the actual number of request bits and the one in theory is trained in advance. With respect to training for example for a series of frame sequences both the actual number of request bits and number of request bits in theory are obtained. Then the relationship between the two and the Laplacian model parameter var is modeled. In one implementation this model i.e. the correlation model is verified with a series of test sequences.

To merge the two above described steps assuming that the Laplacian model parameters are available in terms of a Wyner Ziv frame the actual number of request bits is directly derived as follows. In particular and in one implementation for a general Wyner Ziv codec the relationship between the actual number of requested bits i.e. num bits required and the Laplacian model parameter var is represented as follows. num bits required a var 1 where a and b are constants decided by the employed Wyner Ziv codec please see codec of . For example in one implementation the Wyner Ziv codec has 16 level quantization a 8120.977 and b s t var where s 0.3883 and t 0.00035418. These values relate to the efficiency of Wyner Ziv coder and they are independent of video content. Therefore as for one Wyner Ziv coder such values are derived from training with a series of video sequences.

Techniques used by request bits module to estimate Laplacian model parameter var in terms of a Wyner Ziv switching frame are now described. The var to be estimated is the variance of the distribution of residue between the X and Y. In this example both X and Y are reconstructions of coded media data . Laplacian model parameter var also denotes the variance of the residues between the input frame X and the side information frame Y. Let N denote the number of pixels in the frame X. Let recand recdenote the reconstructed i.e. rec values of the ipixel in a high bit rate bitstream and at the low bit rate bitstream respectively. Therefore 

Decoder reconstructs frame Fusing a Wyner Ziv methodology with the exception that Wyner Ziv decoder does not implement a conventional request bits feedback loop with the Wyner Ziv coder . The Wyner Ziv coded parity bits i.e. side stream associated with of bitstream are denoted as W. When the bit streaming operations arrive at the switching point coder or a video streaming application that leverages output of coder transmits P. Then decoder reconstructs Fusing Fas the reference frame. Subsequently Ware transmitted to inform decoder for the purpose of switching. Decoder decodes Wusing Fas the side information. The decoded frame a bitstream transition frame F should be identical or very close to Fdepending on the quantization step size in the Wyner Ziv coding. Following this coder transmits subsequent frames P P. . . to decoder . In summary in this first exemplary scheme for bitstream switching coder transmits Wand Pin total at the switching point to decoder . Wyner Ziv coding is used only at a switching point E.g. switching occurs at time n and therefore conventional coding and decoding is used until P .

Since bitstream is coded at a lower rate than bitstream the described switch operation represents up switching from a lower bit rate to a higher bit rate. Wyner Ziv bits of bitstream i.e. the parity bits generated by coder are not needed for up switching.

Referring to at block coder individually codes i.e. without data exchange multiple regularly coded bitstreams of a same piece of input video data. Each coded bitstream is coded at a different bit rate independent of data exchange. For example in one implementation coder individually codes multiple regularly coded bitstreams based on H.264 or other non Wyner Ziv coding standard. At block Wyner Ziv portion of coder generates Wyner Ziv switching correlation frames for each frame X in the regularly coded bitstreams . The switching frames are collectively shown as Wyner Ziv side bitstreams . At block coder or a video streaming application that leverages output of coder streams frames of a current coded bitstream to a receiving computing device for presentation to a user. The operations of block determine whether there are more frames of the current coded bitstream to stream to the remote computing device. If not the operations of procedure are complete. Otherwise operations of procedure continue at block .

Operations of block determine whether to switch from a first regularly coded bitstream to a second different regularly coded bitstream . Such a determination can be made in view of multiple criteria for example a change in network bandwidth throughput condition responsive to user direction etc. If the currently streaming bitstream is not to be switched operations continue at block . Otherwise operations of procedure continue at block . Operations of block for a switching frame i.e. a respective frame from a Wyner Ziv side bitstream that corresponds to a frame X of the bitstream presently being streamed estimates a total number of Wyner Ziv parity bits to send to the decoder . In one implementation this is accomplished by operations of request bits estimation module as described above in the section titled Request Bits Estimation .

Operations of block at a switching point A transmit the switching frame comprising the estimated number of parity bits to the decoder . At block and responsive to receiving the switching frame decoder decodes a frame X of the different regularly coded bitstream using the switching frame and side information generated at the decoder . This is accomplished independent of any conventional request bits. The decoding operations associated with decoding X represents a transition from streaming the current regularly coded bitstream to streaming the different regularly coded bitstream . A video playback application that leverages output of decoder presents these decoded bits to a user operations of block begins streaming frames from the different bitstream for presentation to the user the different bitstream now being the current bitstream . Operations of procedure continue at block as represented by on page reference A .

Although request bits estimation for a Wyner Ziv codec has been described in language specific to structural features and or methodological operations or actions it is understood that the implementations defined in the appended claims are not necessarily limited to the specific features or actions described. For example shows that Wyner Ziv portion of coder encapsulates logic of request bits estimator . However in a different implementation coder logic of request bits estimator is not encapsulated inside of coder . Instead a separate computer program module encapsulates request bits estimator . In such an implementation request bits estimator implements and exposes an application programming interface for Wyner Ziv encoder to determine an estimated number of bits to send to decoder . Thus the specific features and operations discussed above with respect to are disclosed as exemplary forms of implementing the claimed subject matter.

