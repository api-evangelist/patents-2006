---

title: Method and system for the electronic provision of services for machines via a data communication link
abstract: With this invention, expert knowledge from machine manufacturers is applied quickly at any time to a machine via the Internet, by providing a main computer (host) for the production and provision of machine-related data and/or services and a machine-side working computer (client), which is connected to the main computer via a data communication link and by means of which (client) machine state data can be acquired in real time and transmitted to the main computer, and by means of which machine-related data and/or services generated by the main computer as a function of such machine state data can be received by means of an analysis and evaluation unit.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07567853&OS=07567853&RS=07567853
owner: Siemens Aktiengesellschaft
number: 07567853
owner_city: Munich
owner_country: DE
publication_date: 20061023
---
This application is a continuation under 35 U.S.C. 120 of U.S. patent application Ser. No. 11 205 703 filed on Aug. 17 2005 now U.S. Pat. No. 7 127 322 B2 incorporated herein by reference which is a divisional under 35 U.S.C. 121 of U.S. patent application Ser. No. 10 052 293 filed on Jan. 18 2002 now U.S. Pat. No. 6 954 680 incorporated herein by reference which claims the benefit under 35 U.S.C. 119 e of the priority date of U.S. Provisional Patent Application No. 60 305 199 filed on Jul. 13 2001.

The invention relates to a system for computer aided handling and management of a numerically controlled industrial processing machine and an apparatus and a corresponding method for computer aided provision of machine related data and or services.

In the area of industrial automation technology and in particular in the field of numerically controlled processing machines manufacturers offer service in the form of control technology and corresponding software components for other manufacturers of original accessories Original Equipment Manufacturer OEM who manufacture and market industrial processing machines.

Such OEMs generally have good relationships with their end customers who are often themselves manufacturers of accessories and operate the machines and their accessories acquired from the OEMs.

Such OEMs not only develop and market goods such as machine tools but going beyond this also offer service for the products which they and others sell to end customers. Since the marketed products are generally highly complex there are high requirements for and difficulties in the provision of such services for which a large amount of information is needed with reference to the operation of their machine tools.

The significant difficulties in the provision of such services consist in obtaining access to information needed for the service of the machines to be maintained. In this case this also concerns to a great extent items of information that have to be obtained directly from the processing process of the machine tools. Appropriate software components for such machine tools or other industrial processing machines are generally highly specialized in terms of the implementation of the actual control task. With regard to the acquisition of machine data going beyond this however for the reasons mentioned above beyond the immediate control of the machine no further machine information is conventionally provided.

For these and other reasons manufacturers of numerical control systems and corresponding software components for industrial processing machines were not in a position to supply performance improvements on such machines to their end customers directly or via OEMs on the basis of knowledge based information.

For this reason there is a great need on the basis of such ongoing machine state data primarily for maintenance and service purposes to make services and machine related know how available to end customers as quickly as possible and at any location. As a result the availability of such machines their lifetime and their productivity may be decisively improved.

Previously no methods or apparatus have been disclosed on the basis of which either services or software components could be developed that would permit services based on collected machine data. These would also permit automated services that were formerly not possible to implement. Moreover it has not previously been possible to provide services tailored specifically to the processing machine of an end customer within a reasonable time frame since the capacities of the service providers are generally inadequate to do so.

For this reason it is conventional for service personnel with corresponding know how to be dispatched to the end customer in order to analyze the machine physically and manually while on site and therefore primarily in response to specific requirements of the end customers to obtain appropriate machine data on site and on this basis to offer the corresponding maintenance or services.

In this way however it is not possible to offer real time related or particularly computationally intensive services such as axis analyses for example or other optimization machine calibration software services machine data management or other dynamic intervention in the machine.

It is precisely this however that would be particularly important for end customers in order for them to shorten their development times to increase their market presence and to ensure maximum availability of the machines.

It is therefore an object of the present invention to provide a method and a corresponding apparatus which without a physical presence on site also make available particularly computationally intensive data or services from a manufacturer or provider of accessories for the machine of an end customer.

According to the present invention this object is achieved by a system for computer aided handling and management of a numerically controlled industrial processing machine having the following features 

In this case it has proven to be beneficial if the main computer has a communication link to a higher order computer system of a machine manufacturer or a manufacturer of machine components via which access to system data of the main computer can be granted to the higher order computer system by the main computer. In this way service routines in particular software components and the computing capacity of such a computer can be used for the analysis of captured the machine data.

If the machine side working computer client has a unique identification means with respect to the main computer host in particular an identification code then the main computer host can associate machine state data received from this working computer with this working computer. In this way comprehensive archives with machine related data from various end customers and machines can be generated which can be used for example for statistical purposes or to construct a fault history.

The data communication link between the main computer host and the working computer client is advantageously a connection via an Internet or Intranet.

Here it is possible for the determination of machine state data on the part of the working computer client to be controlled via instructions received from the main computer host via the Internet or Intranet.

This succeeds particularly effectively if Internet pages or Intranet pages for the user aided selection of options provided therein can be transmitted from the main computer host to the working computer client .

Furthermore the object of the invention is also achieved by a method for computer aided production and provision of machine related data and or services for a numerically controlled industrial processing machine a main computer host and a machine side working computer client communicating via a data communication link having the following method steps 

Here it has proven to be particularly beneficial if machine state data are acquired in real time on the part of the working computer client .

Here too the advantages already mentioned with regard to data archiving can be achieved by a unique identification means in particular an identification code associated with the machine side working computer client being transmitted to the main computer host . To this end the main computer host associates machine state data received from a working computer to this working computer by using the identification means.

In this way the creation of a database with machine related data for a plurality of industrial processing machines is enabled whereby a common main computer host performing computer aided generation and provision of machine related data and or services as described above for a plurality of working computers clients is associated with the industrial processing machines and whereby a data set with the machine state data from one of the working computers clients is generated in a storage means and the unique identification code associated with this working computer is determined and an item of information corresponding to the identification code is appended to the data set.

The machine state data preferably comprise program data servo data motor data converter data position data or sensor data. Furthermore however depending on the application additional machine state data can also be determined.

According to a further advantageous refinement of the method of the present invention the working computer client buffers the acquired machine state data in a storage means before the data are transmitted to the main computer host .

Such a transmission of machine state data stored in the storage means is preferably carried out via the data communication link to the main computer host under time control or event control. Furthermore it is advantageous if automatic analysis or evaluation of received machine state data is carried out on the part of the main computer host .

The object of the invention is further achieved by a method for computer aided provision of machine related data and or services from a main computer of a service provider to a working computer of a processing machine of a customer via a network the working computer of the processing machine of the customer having a system for the control and or monitoring of the processing machine and a suitable sensor for acquiring machine state data and being connected to the network having the following method steps 

In order to register the cost incurred by the services provided it is further advantageous if the main computer receives and stores information with respect to a payment for requested machine related data and or services from the working computer. In order to register price information for payment the following further method steps have additionally proved to be beneficial 

For the computer aided provision of services for optimization purposes according to a further advantageous embodiment of the invention the following further method steps are carried out 

Furthermore the object of the invention is achieved by an apparatus for computer aided provision of machine related data and or services on a main computer of a service provider for a working computer of a processing machine of a customer via a network in particular with a system for computer aided handling and management of a numerically controlled industrial processing machine as outlined above the working computer of the processing machine of the customer having a system for the control and or monitoring of the processing machine and a suitable sensor for acquiring machine state data and being connected to the network having the following further main computer features 

This may be implemented particularly effectively if the means for generating the machine related data requested by the working computer and or the requested service by means of the main computer comprises an Internet web server and the main computer is suitably programmed to use it to produce Internet web pages.

Here too it is advantageous if the working computer of the customer has a unique identification means in particular an identification code for the processing machine and if the main computer has a storage means in particular a database to accommodate information from the working computer in conjunction with the identification code.

Finally the object of the invention is also achieved by means of an apparatus for computer aided provision of services for an automation system via a network in particular with a system described above for computer aided handling and management of a numerically controlled industrial processing machine having the following features 

Here it has proved to be beneficial if a means for providing a selection of options of the service is provided on the automation system of the customer via the network. This likewise applies to a means for selecting one of the options of the service on the part of the automation system of the customer.

Further advantages are obtained if the automation system has a network interface for communication via the network and for receiving the service information and a means machine agent is provided for generating machine executable program sequences on the basis of the received services the network interface and the means for generating machine executable program sequences exchanging data via a predefined data format. This succeeds particularly effectively if the network interface comprises an Internet browser.

The above described method according to the invention may be used particularly well for remote commissioning or remote maintenance of an industrial working machine.

Such an online service according to the invention also referred to below as an ePS network electronic production services improves the machine availability for the manufacturers and increases the availability of the machines for the users.

The E business infrastructure according to the invention permits the machine manufacturers to maintain the machines of their customers significantly more simply and more efficiently. All ePS services are carried out with high online safety.

ePS services which are offered to the machine users are based on minimizing the operating costs increasing the lifetime of the machine improving the product quality increasing productivity and ensuring maximum availability of the production means.

The representation according to shows at a high level of abstraction how on the basis of an Internet connection automatic services AS or data contents or software components required for this purpose are made available to a plurality of end customers having machines S . . . SN with which information is exchanged bi directionally. In addition a conventional provider MS of manual services or engineering services e.g. OEM is shown who likewise communicates with the final customers and their machines S . . . SN but in a conventional way. The drawback with such an arrangement or such a system is that no communication takes place between the provider of the Internet based automatic services and the provider of conventional manual services. As a result it is not possible for the technical expertise available on both sides to be used.

The representation according to shows in the left hand area of the figure the conventional production chain or supplier chain of machine tools. A supplier of an automation product who accepts responsibility for the control hardware and software markets his products and services to a customer as a rule a machine tool OEM . The OEM for his part constructs the actual machine tool on the basis of the control systems acquired with additional self manufactured or purchased components. This machine tool is normally marketed to end customers as they are known who are generally fabrication companies.

A provider of the automated services according to the invention on the basis of a network in particular an Internet connection is generally in mutual communication with all three of the aforementioned parties. A provider of automated services according to the invention is preferably also in contact with further providers of software tools or specific services and also with further Internet partners cf. right hand area of the figure .

A further interactive user on the side of the OEM partner can in this way profit from access to the aforementioned customer data or the customer database as will be explained in more detail later. This preferably takes place by means of communication by means of a main computer or host on the side of the OEM partner via a network connection for example an Internet connection . For this purpose measures are preferably used for secure communication for example encryption methods channel encryption or asymmetric document encryption and also methods of securing data integrity for example generation of hash values .

On the end customer side via appropriate interfaces components to are connected to the network for example the Internet connection and therefore to the systems of the service provider and the OEM partner . These components on the end customer side may be both components to be maintained and components that supply data for example CNC PLC systems peripheral devices or sensors controllers workstation computers or PCs or main computers hosts .

The representation according to now shows the structural and functional relationship according to the present invention between a client system or working computer belonging to an end customer and a main computer of a service provider and also an exemplary machine tool . In this case particular emphasis is placed on the technical implementation on the part of the client working computer of an end customer. The client system or the working computer of the end customer comprises inter alia a controller with a human machine interface HMI that is to say the area of the controller with which a machine operator interacts. Via this interface access to various applications is granted. In addition a numerical controller NC is provided which comprises a control unit NCU and a control core NCK.

The controller of the human machine interface of the working computer has a bidirectional communication link to the main computer of the provider of automated services via a network preferably via an Internet connection . This is preferably provided via an Internet browser which runs on the software layer of the operating system of the working computer and via which Internet pages web pages as they are known can be loaded from the main computer .

A machine operator can in a conventional way access an Internet page in order to request specific data contents from the main computer. The main data transfer takes place from the main computer to the Internet browser . Stimulated by reactions of a machine operator the selection of specific options or parameters for example associated information is then transported back to the main computer via the Internet connection for example the world wide web WWW . In this phase of the communication between working computer and main computer however no control related data are as yet transmitted to the main computer .

Furthermore the working computer client also has a machine service program or machine agent which likewise executes in the context of the human machine interface and the numerical control and is in a position to accept command instructions from the main computer side and to generate machine executable jobs as they are known which can be executed directly by the numerical controller. For this purpose the machine agent is connected to the actual machine tool a robot or the like via a control interface NC interface .

The machine agent and the browser communicate via a machine agent interface which converts services or data loaded from the main computer via the browser into a machine executable format. Machine executable jobs generated in this way can include both instructions to execute one or more machine tool commands to be carried out by the numerical controller and also instructions to acquire available machine state data or other control related data. Data acquisition can be carried out on the basis of already existing sequence tracking as it is known or trace functionality of known machine tool systems. Within the scope of the present invention however improved trace functionalities for acquiring machine state data can also be imagined and will be presented at a later point.

For safety reasons it is also possible to imagine that the initiation of machine tool commands assumes some manual release by a machine operator. Acquired machine state data can then be transmitted to the main computer from the machine agent in conjunction with a job and the sequence of such jobs to be processed. Such a data transfer is indicated in the context of by the upper arrows which run only from left to right. Such a transfer is therefore preferably unidirectional and does not necessarily have to comprise a communication link via the Internet instead it is also possible to imagine any desired other network link for example by means of a remote access as it is known to a local network LAN belonging to the service provider .

In this connection the object is primarily to select a secure and above all also a fast communication link. This is because it is not always possible to ensure that machine state data which are primarily acquired in real time and only arrive at the service provider with a considerable delay on the side of the main computer can be processed quickly enough to generate the requested data or services in good time and transmit them back to the working computer .

On the part of the main computer of the service provider a large number of various types of associated data or services can be produced for the owner or operator of the working computer as a function of the received machine state data. Possible examples are listed below.

For this purpose a concrete implementation of an ePS service mentioned at the beginning and based on the present invention will be described.

The CNC PLC machine equipment PLC stands for programmable logic controller is connected to the ePS server via the Internet. Machine data from the production process are depicted in real time via the ePS server and are compressed analyzed and assessed there. The results obtained from these data with respect to machine condition machine utilization process stability workpiece quality and the long term state changes in the machine that are to be derived are transmitted to the customer via the Internet.

The ePS system offers an open programming interface API for user and manufacturer. As a result ePS customers can also integrate their own application machine know how in the form of an e service. ePS customers can activate their desired e services online from the ePS service range via the machine controller or via a PC.

The ePS service machine services supports the commissioning CAR computer aided runoff and fault analysis in the event of service.

Via the machine performance service the variance of the results of the cyclically repeated CAR messages can be shown. The e service workpiece services secures the process stability and the workpiece quality via the real time acquisition of the machine data. Furthermore with this service early detection of weak points is made possible by way of visualizing NC programs and their processing in the controller. The weak points thus detected even before processing can be eliminated.

Data management is a web based archiving and management service for control data such as NC programs machine data and parameters. These data are useful in particular to customers who do not have their own EDP infrastructure. This service makes it possible for the customer to resume production quickly with high data integrity in the event of their own data losses.

Given the increasing complexity of machines and higher dependence between machine components and electrical equipment components machine users end customers and even machine manufacturers rapidly run up against their limits when it is a case of increasing the productivity the accuracy the quality or the process stability of the machine plant.

To increase the productivity the accuracy the quality or the process stability of a machine plant a person with expert knowledge in a special field is typically sent to the machine site. In rare cases a point to point connection from the automation component for example a controller via a modem to a computer at the machine manufacturer is made and the expert at the machine manufacturer attempts to perform the optimization or elimination of faults via a remote human machine interface .

The following business models then solve this described problem on the basis of the present invention using the previously described system. In this case a distinction can be drawn between a business model A and the provision of services B via a business model for example business model A .

Via such or similar business model for example business model A the following services B can then be provided.

By evaluation analysis and measurement of these data in a computer for example the following are meant 

An example of such a circular shape test which is carried out via the described ePS system according to the invention is represented in to whereby in each case the machine state data being acquired and present on the side of the main computer and communicated to the provider of the automatic service circular shape test via the Internet are produced graphically. In this way either a specialist at the manufacturer can perform the required actions on the machine manually or this can preferably likewise be carried out automatically via an electronic service via the Internet connection such that if required appropriate correction parameters are transmitted to the working computer.

To this end the measurement method and then the plane to be tested x y x z or z y is first selected cf. with selection of the x y plane . Further on the parameters for performing the circular shape test are predefined. These are in particular the diameter D center C tolerance band T feed speed F and direction in the clockwise or counterclockwise direction which defines the predefined circular path P cf. .

On the basis of the irregularities determined in this way it is then automatically possible by means of appropriate software from the manufacturer to generate corrective measures and as an automatic service to perform an adaptation or compensation of the causative parameters or components of the machine.

Irregularities of the axle guidance systems can be detected by means of an irregular current waveform or speed waveform waviness measurements . Instabilities of the position controller resulting from altered frictional conditions can be discerned by observing dynamic positional behavior overshooting . The object of the measurements is for example to avoid wear induced stoppages of the machine as a result of the fact that the wear is detected early and in an automated manner long term wear diagnosis and affected parts can be procured in good time for example by means of automatic orders via e sales and can be replaced during planned maintenance periods.

If external measuring means are used for example a ball bar or laser measuring system a further object is to calibrate internal measuring systems in order to be able to dispense with external measuring means in the case of repeated measurements.

For example in the case of a circular shape test which uses only the motor measuring system looseness in gearboxes or in the recirculating ball screw cannot be readily detected in this way but can be seen very easily by using a ball bar. If a plurality of parameters are recorded simultaneously for example overrun and currents in additional to the measuring system looseness can nevertheless be detected assuming appropriate inertial conditions.

From the comparison between one and the same measured variable from different sources for example external distance measured signal linear scale or motor measuring system far reaching conclusions may be drawn as to the machine state.

The construction of expert networks via ePS host about the processing problems in extremely different areas can be exchanged. For instance in the event of problems requests to a defined group of other experts can be addressed directly by the machine.

Monitoring of overhaul plans by means of appropriate data exchange with the host. If appropriate in the event of non compliance the machine can be temporarily blocked. This can be controlled by appropriate acknowledgement functions.

Visualization of the NC program in the form of tool paths points and their linking to form a virtual workpiece surface surface feedback which can be investigated via various illuminations from different directions and sources.

Visualization of the control behavior interpolated points position controller behavior in the same way.

The product data for automation components controllers drives and other machine components parts lists product descriptions etc. are available at any time via the ePS host.

It is not necessary for any person with expert knowledge to be dispatched to the machine in order to perform the above described improvements optimizations etc. It is often even possible without the system according to the invention for a number of persons with expert knowledge to be sent to the machine. With this invention the expert knowledge is brought to the machine via the Internet and at the machine only the machine operator is available in order to confirm possible machine travel commands.

The use of a browser cf. is not absolutely necessary a direct connection to the Internet or to another communication network may also be made. With regard to the abovementioned trace functionality mention should also be made of the fact that such a function generally supplies control and drive data in a particularly optimal fashion. However whether such a functionality is provided directly or with the inclusion of additional services or modules generally depends on the application. A distinction is generally drawn between a normal trace functionality as it is known in which a trace is started and ended at fixedly defined times or events. A transfer of acquired machine state data is then initiated only as soon as the trace has been ended. As an alternative to this there is the possibility of providing an endless trace functionality as it is known. In this case the trace runs as an application in the background and a continuous transfer of acquired data away from the working computer is carried out for example to an HMI .

A trace functionality is generally given only read access to the control core NCK. Write access for example by means of a function generator is inconsistent with the conventional definition of a trace functionality and therefore generally has to be added as an additional function to the usual trace functionality. This is necessary for example when a function generator and a trace functionality have to be implemented as an externally coupled function for specific automated procedures.

A trace functionality can generally be configured offline. However as soon as a trace has been initiated the conditions in the running operation may not be changed. For this purpose the trace must first be stopped or broken off.

Possible functions for a trace in the context of the present invention are for example the commissioning of a machine fault detection problems with applications above all in the case of complex applications with a plurality of channels and synchronous actions sporadic problems relating to the running time of the machine tool breakage or logical analyses such as those from telescope or tachometer functions.

Depending on the application there is a large number of items of information to be acquired for the machine state data to be acquired. These include inter alia 

All these data mentioned by way of example can be used as a trigger for the sequence tracking or trace functionality.

Under certain circumstances there may be specific requirements for carrying out sequence tracking or trace functionality for example in connection with PLC data. For access to PLC peripherals or signals or flags in a user program it can be advantageous if this is possible without any influence on the PLC itself. Above all access to user program data I O flags etc. and the possibility of synchronizing the starting point for recording machine state data via a user program is advantageous in accordance with a further embodiment of the invention. Another advantageous embodiment of the invention includes up to 32 PLC signals which can be monitored at the same time within the context of sequence tracing or trace functionality. To this end available buffer data in a user program can also advantageously be stored.

The acquisition of machine state data is advantageously carried out in a manner tailored to the automatic service operated. This is carried out particularly effectively if only the requisite items of information are acquired and this is done no more often than necessary. In addition a clear distinction should be drawn between continuous signals and sporadic events. If possible data compression is carried out during its acquisition while taking run time effects into account. The entire spectrum of machine information is acquired only if the purpose for which the data will be acquired is not known or defined. Depending on the application preference is given for example to ring buffer memories in which according to their operating principle the oldest items of information or those lying furthest back are overwritten while in the case of a wait loop memory or a queue as it is known it is always the newest information that is overwritten when the wait loop is full.

There could be further supplementary information for example in a time stamp or values from timers etc. In the case of the analysis of the causes of critical errors the sequence tracking or trace functionality will be carried out as independently as possible from the malfunction. This means that during continued operation after a fault data acquired before the fault will be stored safely. In the ideal case every variable to be acquired in connection with the machine state data will be provided as a dedicated function with its own time characteristic in order to keep the occurrence of data as low as possible.

According to a further advantageous refinement of the invention the acquisition of machine state data is carried out under time control or event control. In addition an additional file or an additional archive can be generated automatically which can also preferably contain subprograms. In a trace file a reference for example a pointer to this archive or this file is then sent. In this way it is possible for possible inconsistencies in connection with a manual implementation of such a function to be prevented from the start. For example manual archiving can even be carried out several days after the data acquisition since it is possible for the configuration already to have changed during this time. This can also be specified by means of a specific application such that conditions do not have to be satisfied by internal interfaces.

According to a further advantageous refinement of the present invention changes in the configuration of distributed components are made automatically. This also applies to the acquisition and provision of available meta information data about data . The human machine interface HMI can be used in this connection as an interface for an internal configuration. As a result a simpler cost effective expansion for new signals can also be provided by the latter being linked with sequence tracking or trace functionality in a straightforward way via the HMI interface merge as it is known .

One possible procedure for controlling what has been outlined above preferably provides the following functions 

Starting conditions manual NC program PLC synchronized time controlled continuous or via external signals and stop trigger conditions manual NC program PLC synchronized time controlled overflow from internal summations or via external signals .

Nested conditions are likewise possible such as condition A must be satisfied then condition B or condition C and if condition E is satisfied data are acquired until condition F occurs.

Following an accident for example tool breakage or a stoppage it is ensured that all the necessary resources are available as far as possible and as soon as data are transmitted. As soon as a critical fault has occurred it is important that a condition associated with this fault is defined so that automatic restarting is ruled out.

Suitable preparation of data is preferably carried out at the human machine interface HMI . In addition depending on requirements it is possible to bind an application exclusively to one file. Otherwise a serial COM link is possible in order to permit blockwise access via a continuous data stream without buffering in the file . Among others three different use classes could and should be operated 

A sequence trace preferably has a structure that is open to the user. Open and freely accessible interfaces for the configuration include controls start stop and analysis possibilities data format for OEMs.

According to a further advantageous embodiment of the invention the display of a sequence trace is carried out in a manner comparable with a logic analyzer oscilloscope. This can be used to display signals from various sources. In addition references to a specific program module can be displayed. Cursor and zoom functions are advantageously also provided. It is beneficial if at least four signals can be made visible at the same time. In addition filters are preferably provided which permit the selection of signals. Furthermore differential signals can be output or important events can be assigned by which means users with little knowledge gain a better understanding of the information or machine state data acquired.

In order to ensure high robustness during the data acquisition the following possibilities are particularly suitable 

The above description of preferred embodiments according to the invention is given for the purpose of illustration. These exemplary embodiments are not exhaustive. Nor is the invention restricted to the precise form indicated instead numerous modifications and changes are possible within the context of the technical teaching specified above. One preferred embodiment was selected and described in order to indicate the basic details of the invention and practical applications in order to place those skilled in the art in a position to implement the invention. A large number of preferred embodiments and further modifications come into consideration in the case of specific areas of application.

