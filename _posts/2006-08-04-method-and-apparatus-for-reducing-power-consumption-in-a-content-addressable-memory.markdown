---

title: Method and apparatus for reducing power consumption in a content addressable memory
abstract: Power consumption in a multi-level hierarchical Content Addressable Memory (CAM) circuit is reduced without adversely impacting performance. According to one embodiment of a multi-level hierarchical CAM circuit, the CAM circuit includes a plurality of lower-level match lines, a plurality of higher-level match lines and match line restoration circuitry. The lower-level match lines are configured to be restored to a pre-evaluation state during a pre-evaluation period. The higher-level match lines are configured to capture an evaluation state of respective groups of one or more of the lower-level match lines during an evaluation period and to be restored to a pre-evaluation state during the pre-evaluation period. The match line restoration circuitry is configured to prevent at least one of the lower-level match lines from being restored to the pre-evaluation state responsive to corresponding enable information, e.g., one or more bits indicating whether match line search results are to be utilized.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07616468&OS=07616468&RS=07616468
owner: QUALCOMM Incorporated
number: 07616468
owner_city: San Diego
owner_country: US
publication_date: 20060804
---
The present invention generally relates to Content Addressable Memories CAMs and particularly relates to reducing CAM power consumption without adversely impacting CAM performance.

Unlike Random Access Memory RAM in which the RAM returns a data word stored at an address supplied to the RAM a Content Addressable Memory CAM searches its entire memory for a data pattern that matches a search word input to the CAM. If the data pattern is found the CAM returns a list of one or more storage addresses where the word was found. In some CAMs the data word or other associated data is also returned. Thus CAMs are often used an associative array.

CAMs comprise a plurality of entries each entry having a number of CAM cells configured to store data. The CAM cells may be binary store binary data or ternary store binary data or a don t care state . Each CAM cell is coupled to a match line. During a CAM search operation a search field is provided to the CAM. In response to the search field input each match line indicates whether its respective CAM cell contains data matching some portion of the search field. After the search operation completes match lines are conventionally restored to a pre evaluation state to improve CAM performance during a subsequent search. For example match lines are conventionally pre charged high to a logic one value during a pre evaluation period.

During a subsequent CAM search operation match lines associated with CAM cells that do not contain matching data are discharged. Only those match lines coupled to CAM cells that store matching data remain charged high. As such only one CAM cell associated with an entry need contain mismatching data for the entry to be identified as containing a mismatched data pattern. This is referred to as a miss. Conversely if each cell in an entry yields a match the entry is identified as containing a matching pattern which is referred to as a hit.

Some conventional CAMs contain multiple levels of hierarchical match lines for reducing capacitive loading on the match lines which affects CAM performance and power consumption. In such multi level hierarchical CAMs local match lines serving a group of CAM cells are coupled to a single global match line. A mismatch indicated by one or more local match lines is reflected by the corresponding global match line. As such a global match line indicates a miss if any one of its corresponding local match lines indicates a miss. Conversely the global match line indicates a hit if all of its corresponding local match lines indicate a hit. Depending on CAM size one or more intermediary levels of match lines may be included between local match lines and a corresponding global match line to further reduce capacitive loading.

Regardless of the particular CAM architecture some applications that process CAM search results may only need the search results for a subset of the CAM entries. For example some applications may discard or ignore hit miss search results for certain portions of particular CAM entries while using the search results associated with other portions of the entries. One conventional approach for ignoring hit miss search results for particular CAM cells is to disconnect CAM cells not of interest from their respective match lines. For example a transistor device may be placed in series between the output node of a CAM cell and its respective match line. When the transistor is switched off the CAM cell is decoupled from its match line. As such the content of the CAM cell does not affect the state of the CAM cell s match line. That is the match line remains in its pre evaluation state e.g. pre charged high state regardless of whether its corresponding CAM cell contains matching data or not. However power is consumed pre charging the CAM cell s match line during the pre evaluation period even though the search results associated with that CAM cell will be ignored. In addition when the gating transistor is switched on the transistor couples the output node of the CAM cell to the match line. Such a configuration adds additional capacitance to the output node of CAM cells thus slowing match line operations and consuming additional power.

Another conventional approach for ignoring particular search results in multi level hierarchical CAMs is to disable the global match line enable circuitry associated with local match lines not of interest. For example the clock signal that controls whether a pre charged global match line may be discharged is gated by an enable signal. If the clock signal is disabled the global match line remains in its pre charged state regardless of the state of the local match lines coupled to it. As a result only global match lines that are enabled during a CAM evaluation period are affected by the state of their corresponding local match lines. Power is still consumed pre charging the corresponding global and local match lines when the global match line enable circuitry is disabled.

According to the methods and apparatus taught herein a multi level hierarchical Content Addressable Memory CAM circuit includes match line coupling circuitry for reducing power consumption without adversely affecting CAM operation. The match line coupling circuitry reduces power consumption by preventing restoration of CAM match lines not of interest to a pre evaluation state e.g. by preventing match line pre charging. Thus during a pre evaluation period of a CAM access cycle only those match lines of interest are restored to their pre evaluation state.

Enable information received or otherwise acquired by the match line coupling circuitry indicates which match lines are not of interest. In one embodiment the enable information directly indicates which match lines are not of interest. In another embodiment the enable information indirectly indicates which match lines are not of interest e.g. by identifying match lines of interest. Regardless the enable information may comprise any information suitable for indicating whether particular CAM match lines are of interest or not e.g. a care don t care indicator one or more masking bits one or more valid invalid bits etc.

In addition to preventing restoration of certain match lines and thereby saving power the match line coupling circuitry also decouples corresponding higher level match lines from match lines identified as not being of interest. This prevents unpredictable behavior when particular lower level match lines are not restored to their pre evaluation state as part of the above power saving operations.

According to one embodiment of reducing power consumption in a multi level hierarchical CAM circuit enable information associated with one or more CAM match lines included in the multi level hierarchical CAM circuit is acquired. Individual ones of the CAM match lines are prevented from being restored to a pre evaluation state responsive to the enable information. According to one embodiment of a multi level hierarchical CAM circuit the CAM circuit comprises a plurality of lower level match lines a plurality of higher level match lines and match line restoration circuitry. The lower level match lines are configured to be restored to a pre evaluation state during a pre evaluation period. The higher level match lines are configured to capture an evaluation state of respective groups of one or more of the lower level match lines during an evaluation period and to be restored to a pre evaluation state during the pre evaluation period. The match line restoration circuitry is configured to prevent at least one of the lower level match lines from being restored to the pre evaluation state responsive to corresponding enable information such as where the match line is recognized as corresponding to don t care masked or invalid content.

The multi level hierarchical CAM circuit may be included in or associated with various kinds of memory devices such as caches and buffers. According to one embodiment of a Translation Lookaside Buffer TLB the TLB comprises a multi level hierarchical CAM circuit having a plurality of entries and corresponding match lines. The multi level hierarchical CAM circuit is configured to store enable information associated with the entries and to translate virtual memory addresses to corresponding physical memory addresses. The enable information in the present TLB context corresponds to one or more bits that indicate the validity of the TLB entries. The multi level hierarchical CAM circuit is configured to prevent individual ones of the match lines from being restored to a pre evaluation state responsive to the enable information.

Of course the present invention is not limited to the above features and advantages. Those skilled in the art will recognize additional features and advantages upon reading the following detailed description and upon viewing the accompanying drawings.

Regardless of the number of match line levels the match line coupling circuitry comprises match line restoration circuitry and match line decoupling circuitry . For ease of explanation only the match line coupling circuitry is next described with reference to coupling LMLs to GMLs. However those skilled in the art will readily recognize that the coupling circuitry described herein may couple any hierarchically lower level of match lines to a higher level match line.

With this in mind the match line restoration circuitry determines whether particular LMLs are to be restored to a pre evaluation state after a CAM search operation. That is not all LMLs may be of interest during a particular CAM search operation. For example the content one or more CAM entries not shown or portions of CAM entries may be marked as invalid or masked during evaluation. LMLs corresponding to these entries or partial entries are not of interest. Search results provided by LMLs not of interest are conventionally ignored or discarded during a CAM search operation. Enable information e.g. one or more valid or masking bits associated with each CAM entry is provided to the match line restoration circuitry for indicating which LMLs are not of interest. In one embodiment the enable information directly indicates which match lines are not of interest. In another embodiment the enable information indirectly indicates which match lines are not of interest e.g. by identifying match lines of interest. Regardless the match line restoration circuitry uses the enable information to identify the match lines that will be ignored during a CAM search operation.

If a particular match line restoration circuit determines that its corresponding LMLs are not of interest it prevents those LMLs from being restored to a pre evaluation state essentially disabling the LMLs. In one embodiment the match line restoration circuit prevents the LMLs from being pre charged. In another embodiment the match line restoration circuit prevents the LMLs from being pre discharged. Because the search results associated with these LMLs are not of interest preventing their restoration to a pre evaluation state reduces power consumption without adversely affecting operation of the CAM circuit . The enable information used by the match line restoration circuitry may be stored within the CAM circuit e.g. as one or more valid bits included in each entry in the CAM circuit or may be provided to the CAM circuit .

The enable information is also used by the match line decoupling circuitry . The match line decoupling circuitry uses the enable information to prevent LMLs not of interest from affecting their corresponding GMLs. Decoupling an LML not of interest from its GML ensures that the LML will not affect the state of its GML. Instead only enabled LMLs coupled to the GML may affect the state of the GML e.g. by discharging it. This prevents unstable CAM circuit behavior while reducing power consumption.

In one embodiment the match line decoupling circuitry prevents a group of LMLs that have been disabled by the match line restoration circuitry from affecting the state of the GML to which they are coupled. If the enable information indicates that a group of LMLs associated with a particular GML are to be ignored during a CAM search operation then the match line decoupling circuitry decouples the group of LMLs from that GML. As such the match line decoupling circuitry prevents individual groups of LMLs from affecting the state of corresponding GMLs when the LMLs are not of interest.

The following is a non limiting example based on the CAM circuit shown in for demonstrating how the match line restoration and decoupling circuitry functions during a CAM search operation. During a pre evaluation period of the CAM search operation the CAM circuit acquires match line enable information as illustrated by Step of . In one embodiment the CAM circuit accesses a location in each entry of the CAM circuit to acquire a corresponding valid bit that indicates validity of the entries. In the present example the enable information indicates that all LMLs except for LML are of interest. Based on the enable information the match line restoration circuit associated with LML prevents LML from being restored to its pre evaluation state while the other match line restoration circuits enable restoration of their corresponding LMLs as illustrated by Step of . In addition the match line decoupling circuit associated with LML prevents LML from affecting the state of GML during the subsequent evaluation period. Thus the state of GML may be affected by each LML except LML.

The enable signal indicates whether the LML is of interest or not. When the enable signal is a logic one it causes pre charging of the LML to be disabled and causes the LML to be decoupled from its GML. Particularly if the enable signal indicates that the search results associated with the LML are of interest the match line restoration circuit is activated e.g. p FET transistor T is switched on . When activated the match line restoration circuit enables the LML precharge circuit and the inverter by charging their respective source nodes to a logic one value V . This enables the LML precharge circuit to pre charge the LML to a logic one value in response to an active restore signal RESTORE during a pre evaluation period. Unlike some conventional circuit techniques the match line restoration circuit does not adversely impact performance of the CAM circuit when activated. Particularly the match line restoration circuit does not add additional capacitance to the output node of the CAM cell not shown coupled to the LML when activated. Because the match line restoration circuit is not placed in the active signal path coupling the LML to the output node of the CAM cell no additional capacitive loading results.

When the LML is of interest the enable signal also causes the match line decoupling circuit to be deactivated e.g. n FET transistor T is switched off . When the match line decoupling circuit is deactivated the state of the GML is affected by the LML. As a result when the n FET transistor T of the GML evaluation circuit is activated in response to an enabled clock signal GML CLK the state of the LML controls whether the n FET transistor T of the GML evaluation circuit is switched on or off. If the n FET transistor T is switched on the GML discharges to ground. Conversely the GML remains unaffected by the LML irrespective of the LML s state when the n FET transistor T is switched off. As a result the match line decoupling circuit does not affect the GML state when deactivated. Instead the state of the GML reflects that of only the enabled LMLs.

If the LML is not of interest the match line restoration circuit is deactivated e.g. p FET transistor T is switched off . When deactivated the match line restoration circuit decouples the source nodes of the LML precharge circuit and the inverter from the power source. The LML precharge circuit is unable to pre charge the LML when the power source is removed from its source node thus reducing unnecessary power consumption. Further the LML is disabled when the match line restoration circuit is deactivated.

In addition the enable signal causes the match line decoupling circuit to be activated when the LML is disabled. The match line decoupling circuit drives the gate input to the n FET transistor T of the GML evaluation circuit to a logic low value V . When the gate input of the n FET transistor T is low the state of the LML does not affect that of the GML and thus the LML is decoupled from its GML. Particularly the n FET transistor T cannot conduct sufficient current when its gate input is low. As such the GML which had been pre charged during a prior non evaluation period cannot be discharged by this particular GML evaluation circuit regardless of the LML s state. When activated the match line decoupling circuit also prevents unpredictable behavior by the CAM circuit by pulling down the gate input of the n FET transistor T of the GML evaluation circuit. If the gate input of the n FET transistor T is not pulled down the output node of the inverter lml sns could adversely affect the GML state. For example the output node of the GML s inverter may float or otherwise act unpredictably when the power source has been removed from its source node. The match line decoupling circuit prevents such sporadic behavior from adversely affecting the GML by preventing the LML from affecting the state of the GML when the LML is not of interest.

The match line restoration and decoupling circuitry may be included in or associated with various kinds of memory devices such as caches and buffers. illustrates one embodiment of a microprocessor having CAM or CAM like circuitry that includes one or more instances of the match line restoration and decoupling circuitry . In more detail the microprocessor includes an instruction unit one or more execution units a bus interface unit a data cache an instruction cache and a higher level L2 cache . The instruction unit provides centralized control of instruction flow to the execution units . The execution units execute instructions dispatched by the instruction unit . The bus interface unit provides a mechanism for transferring data instructions addresses and control signals to and from the microprocessor . The data and instruction caches store data and instructions respectively. The L2 cache provides a high speed memory buffer between the data and instruction caches and memory not shown external to the microprocessor .

The caches and have respective Translation Lookaside Buffers TLBs and for performing address translation during cache access operations. Each TLB and has one or more instances of the match line restoration and decoupling circuitry . Alternatively a unified TLB not shown may perform address translation for the caches and . Regardless the TLBs and are CAM based in that a virtual address of interest is provided to the TLBs and and the TLBs and yield corresponding hit or miss results in response. In the event of a hit a physical address is produced corresponding to the virtual address search field. In the event of a miss a page table transaction occurs.

The TLBs and have entries not shown that contain information for use in translating virtual address to physical addresses. In one embodiment each TLB entry comprises a virtual address field a corresponding physical address field and a valid bit. If a virtual address search field matches an entry in one of the TLBs and the corresponding physical address field is output. Otherwise a page table transaction occurs. The valid bit determines whether a particular TLB entry is valid or not. If invalid the entry contents are ignored or discarded during address translation. Other enable bits such as page size bits may determine whether corresponding portions of virtual address bits should participate in address translation.

According to this embodiment the LML is decoupled from its GML when the p FET of the match line decoupling circuitry drives the input to the GML inverter circuit p FET T and n FET T to a logic low value V . When the match line decoupling circuit drives the inverter input to a logic low state the LML is effectively decoupled from its GML. That is the LML no longer has an affect on the state of the GML since the inverter outputs a logic one irrespective of the LML state. By driving the inverter input to a logic low state the GML discharges when its clock input signal GML CLK is active. When the GML is discharged it is interpreted as a mismatch. Thus this embodiment of the coupling circuitry prevents false hits from being processed when a TLB and entry is invalid. Alternatively the coupling circuitry embodiment illustrated in may be included in the TLBs and for preventing restoration of invalid LMLs and decoupling invalid LMLs from their corresponding GMLs.

With the above range of variations and applications in mind it should be understood that the present invention is not limited by the foregoing description nor is it limited by the accompanying drawings. Instead the present invention is limited only by the following claims and their legal equivalents.

