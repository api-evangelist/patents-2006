---

title: Information processing device and information processing method, image processing device and image processing method, and computer program
abstract: An image processing device  includes an image information input unit  for inputting three-dimensional image information to be processed in the format of an incidence graph, an incidence graph evaluation unit  for evaluating and sorting the edges of the input incidence graph, an image region mesh growing unit  for extracting pairs of image regions sandwiching edges in the sorted order and evaluating and performing mesh growing thereof based on a statistical processing algorithm, and a minute node processing unit  for processing minute regions remaining as a result of the image region mesh growing.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08224089&OS=08224089&RS=08224089
owner: Sony Corporation
number: 08224089
owner_city: Tokyo
owner_country: JP
publication_date: 20060605
---
The present invention relates to an information processing device which handles massive amounts of data and relates to an information processing device which causes raw data made up of a great number of nodes which cannot be individually perceived to be grown into perceivable increments of a smaller number called segments.

Specifically the present invention relates to an image processing device and image processing method and computer program for generating and displaying two dimensional images of physical objects and particularly relates to an image processing device and image processing method and computer program for handling objects as an assembly of a great number of nodes such as minute polygons or the like so as to perform two dimensional image processing of objects.

More specifically the present invention relates to an image processing device and image processing method and computer program for performing processing mesh segmentation processing such as dividing image regions and merging divided regions so that a polygonal mesh is adjusted to a suitable coarseness and relates to an image processing device and image processing method and computer program for performing progressive mesh segmentation processing in accordance with an application using two dimensional or three dimensional computer graphics for example.

Various media besides text format files such as audio images natural language and so forth can be digitized on a computer and handled mathematically whereby higher level and wide ranging data processing can be performed such as editing processing accumulating managing transmitting sharing and so forth of information. For example image processing technology wherein a computer is used to subject an image to digital image processing such as alteration of shape alteration of color image quality enhancement re encoding and so forth is in widespread use. This image processing technology includes special effects wherein objects such as unsightly utility poles are removed from a scenic photograph morphing wherein a human face is smoothly changed into an animal face and so forth. Image processing technology is also applied to various specialized fields in science and medicine and so forth such as processing photograph pictures transmitted from a satellite processing of diagnosis images read in with a CT scanner and so forth.

For example image processing technology wherein an image of a two dimensional or three dimensional physical object is generated and displayed is called computer graphics CG and has received much attention. Generally graphic systems of this type are configured of a geometric sub system serving as the front end and a raster sub system serving as the back end. Of these the geometric sub system handles an object as an assembly of a great number of minute polygons normally triangles with geometric calculations being performed regarding the vertices defining the polygons such as coordinate transformation clipping light source calculation and so forth.

Now the coarseness of the mesh obtained by region division of the original object greatly affects the processing load and image quality. Region division of the original object into finer image regions proportionately increases the number of vertices to be processed so the amount of processing increases. Also larger sized polygons result in the final product having a coarser image quality. Accordingly processing such as merging the divided regions is performed to adjust the polygonal mesh into a suitable coarseness for the application using the CG which is called mesh segmentation.

Mesh segmentation is a basic technique for growing raw data into a small number of perceivable increments called segments . Research of mesh segmentation began from an early period in computer image processing in the 1970 s e.g. see Non Patent Document 1 and the field is still active. From the start mesh segmentation has handled color images moving images distance images known as depth image or range image three dimensional data three dimensional mesh and so forth. Hierarchical segmentation can be realized by creating multiple polygonal meshes having differing coarseness in the mesh segmentation processing. Also performing hierarchical mesh segmentation in a progressive that is a smooth manner enables the range of applications using the images to be increased.

For example a proposal has been made regarding mesh segmentation processing wherein hierarchical mesh decomposition is performed using fuzzy image clustering and image cutting e.g. see Non Patent Document 2 .

Mesh segmentation is basically processed based on the degree of similarity between neighboring image regions. For example color signals of an input picture is converted into a predetermined color space initial picture division is performed wherein the input picture is divided into multiple regions in accordance with the positions of color pixels in the input picture within the color space the divided regions are separated into multiple layers in accordance with the horizontal neighboring relation between the divided regions and the vertical inclusive relation thereof neighbor regions within each layer are grouped to form region groups of which the vertical inclusive relations are extracted so as to structure regions the order of joining of the regions is determined based on the horizontal relation between the regions and the vertical inclusive relation between the region groups feasibility of joining is determined for neighbor regions based on the determined joining order and in the event that determination is made that the evaluated regions are regions which have substantially the same picture properties the regions can be joined e.g. see Non Patent Document 1 .

However conventional mesh segmentation processing primarily performs region growing or hierarchical iterative spectral clustering. That is to say algebraic operations using arrays are repeatedly performed so processing speed is slow. For example processing around 400 polygons takes 1 to 57 seconds so progressively generating multiple mesh segmentations with differing coarseness is difficult. Also the system has no scalability and increase in the number of polygons markedly increases the processing time. Accordingly calculation with common calculators such as personal computers PC is difficult and is inapplicable to interactive applications where the real time aspect is required. There are also problems such as original information relating to the original image is lost a great number of parameter values must be adjusted and so forth.

It is an object of the present invention to provide a superb image processing device and image processing method and computer program capable of growing raw data made up of a great number of nodes which cannot be individually perceived into perceivable increments of a smaller number called segments.

It is a further object of the present invention to provide a superb image processing device and image processing method and computer program capable of processing two dimensional images of objects by handling physical objects as assemblies i.e. segments of a great number of minute nodes and growing segments by mesh growing among the nodes.

It is a further object of the present invention to provide a superb image processing device and image processing method and computer program capable of performing processing mesh segmentation processing such as dividing image regions and merging divided regions to grow the regions so that a polygonal mesh is adjusted to a suitable coarseness.

It is a further object of the present invention to provide a superb image processing device and image processing method and computer program capable of performing progressive mesh segmentation processing in accordance with an application using two dimensional or three dimensional computer graphics with high speed and high accuracy for example.

The present invention has been made in light of the above problems and accordingly a first aspect thereof is an information processing device for handling data in which a topology has been formed of a plurality of nodes each having attribute values the information processing device comprising 

a topology evaluation unit for obtaining weighting factors of edges connecting nodes based on attribute values which neighboring nodes on the topology each have and sorting edges based on the weighting factors and

a node merging processing unit for extracting pairs of nodes connected by edges following the sorted order evaluating whether or not to merge the nodes based on a predetermined statistical processing algorithm and performing merging processing of node regions.

According to the first aspect of the present invention whether or not to merge neighboring nodes is determined based on a predetermined statistical processing algorithm and merging of nodes is repeatedly performed so as to be grown into perceivable increments of a smaller number called segments from the raw data made up of a great number of nodes which cannot be individually perceived. With the statistical processing algorithm as referred to here determination is made regarding whether or not neighboring nodes are similar i.e. whether or not the nodes can be merged based on a predicate derived from the phenomenon of concentration inequality in attribute information which each of the nodes has for example.

Mesh growing of nodes based on such statistical processing is realized by the simple calculations of statistical processing of the attribute information which each node has and accordingly high speed can be attained. For example a common calculator such as a personal computer can be used to process one million polygons per second. Also the system has scalability since adjusting the parameter value included in the predicate allows the standard for merging nodes one with another to be freely set so segments can be grown to a desired coarseness.

That is to say according to the first aspect of the present invention the topology of multiple nodes configuring raw data is taken as input values and node merging processing is performed recursively following the statistical processing algorithm i.e. mesh growing is performed whereby segments of an arbitrary coarseness can be generated.

A second aspect of the present invention is an information processing device for performing image processing handling an object as a polygonal mesh made up of a plurality of polygons the information processing device comprising 

an incidence graph evaluation unit for comparing attribute values which each of image regions connected by edges has and appropriating weighting factors to the edges based on the comparison results and sorting edges in the incidence graph based on weighting values and

an image region mesh growing unit for extracting pairs of image regions sandwiching an edge in the sorted order evaluating whether or not to merge the image regions based on a statistical processing algorithm and performing mesh growing of the image regions.

The second aspect of the present invention relates to an image processing device for generating and displaying a two dimensional image of a two dimensional or three dimensional object. In the field of computer graphics normally a two dimensional or three dimensional physical object to be processed is handled as an assembly of a great number of minute polygons normally triangles i.e. as a polygonal mesh to perform image processing. The coarseness of the polygonal mesh greatly affects the processing load and image quality. Accordingly mesh segmentation processing such as dividing image regions and merging divided regions so that a polygonal mesh is adjusted to a suitable coarseness in accordance with the application using the 3DCG is necessary. Also performing hierarchical mesh segmentation in a progressive that is a smooth manner enables the range of applications using the images to be increased.

However with conventional techniques processing speed is slow so realizing progressive mesh segmentation with a common calculator is difficult and further application cannot be made to interactive applications.

Compared with this with the second aspect of the presents invention determination is made regarding whether or not to merge neighboring image regions using a statistical processing algorithm whereby merging of image regions is repeatedly performed from a great number of minute polygons into which a three dimensional object has been divided thereby generating a polygonal mesh having a desired coarseness. With the statistical processing algorithm determination is made regarding whether or not to merge neighboring image regions based on a predicate derived from the phenomenon of concentration inequality in area in a polygonal mesh serving as an image region. With the statistical processing algorithm as referred to here determination is made regarding whether or not neighboring nodes are similar i.e. whether or not the nodes can be merged based on a predicate derived from the phenomenon of concentration inequality in area of the polygons configuring the image regions for example.

Mesh growing of image regions based on such statistical processing is realized by the simple calculations of statistical processing of the area of polygons and accordingly high speed can be attained. For example a common calculator such as a personal computer can be used to process one million polygons per second. Also the system has scalability since adjusting the parameter value included in the predicate allows the standard for merging image regions to be freely set so a polygonal mesh having a desired coarseness can be generated.

That is to say according to the present invention groups of a great number of minute polygons into which the physical object to be processed has been divided are taken as input values and mesh growing processing of image regions made up of polygonal meshes is performed following the statistical processing algorithm i.e. mesh growing is performed whereby polygonal meshes of an arbitrary coarseness can be generated. Also changing the parameter value of the predicate based on the statistical processing algorithm enables multiple polygonal meshes of differing coarsenesses to be smoothly generated. That is to say this can be applied to various interactive applications which can realize progressive mesh segmentation.

Applications of the mesh segmentation processing according to the present invention includes parameterization and texture mapping morphing multi resolution modeling image editing image compression animation shape matching and so forth.

In the field of image processing a polygonal mesh serving as an image region is commonly represented in the format of an incidence graph describing the relation of multiple polygons which are the components thereof. The mesh segmentation method according to the present embodiment uses an incidence graph described handling each of the polygons making up the polygonal mesh as nodes using edges equivalent to sides of adjacent polygons in contact so as to connect the corresponding nodes.

With the mesh segmentation method according to the second aspect of the present invention first the edges of the input incidence graph are evaluated and sorted. With edge evaluation specifically attributes which each of the image regions connected by edges have are compared and weighting factors are appropriated to the edges based on the comparison results. Image region as used here includes polygons which are the smallest increment and an image region configured as a polygonal mesh wherein multiple polygons have been merged.

Attribute value as used here uses area which the image region has the average area of all polygonal meshes merged into the image region is used as an attribute value and the difference in area between image regions connected by edges can be appropriated as the weight value of the edges. In this case the smaller the difference in area between image regions is the smaller the weight value is and the higher the processing order is in the following image mesh growing. Alternatively besides the area of the polygons making up the image region edge weighting can be appropriated using the normal direction of image regions or color and like pixel attribute information average color of the image region regarding at least one component of RGB that is in the case of polygonal mesh having texture .

With the mesh segmentation method according to the second aspect of the present invention determination is made regarding whether or not to merge pairs of image regions connected by edges extracted in sorted order based on the statistical processing algorithm derived from the statistical concentration inequality phenomenon in the area of polygons making up an image region specifically the two image regions Rand Rconnected by edges are determined to be merged when satisfying the following predicate based on statistical algorithm. Note that in the following expression the image region Rhas area Sand is configured of npolygons and the image region Rhas area Sand is configured of npolygons A is the largest area of the polygons and Q is a parameter for controlling the coarseness of segmentation.

The predicate derived from the statistical processing algorithm above includes the parameter Q for controlling the coarseness of segmentation so a parameter Q value such that a desired segmentation coarseness can be obtained can be externally provided. Also an arrangement may be made such that upon a desired segmentation coarseness or number of divided image regions being provided externally this is converted into a corresponding parameter Q value which is then provided to the system. Such flexible parameter Q setting enables progressive mesh segmentation to be realized making application to various interactive applications easier.

A node in the initial state is a polygon which is the smallest increment of the incidence graph but as mesh growing of the image progresses the nodes grow into an image region configured of a polygonal mesh made up of multiple polygons. The area and number of polygons regarding each node are calculated as information necessary for determining whether or not to merge nodes i.e. image regions by the predicate based on the statistical processing algorithm and held as node statistical information. Also in the event that image regions have been merged the area and number of polygons are calculated for the image region newly generated by merging.

Now after image region merging has progressed the grown image regions have a great area and the number of polygons is great. In such a case regardless of the fact that the information of polygons closer to the boundary is more important the processing ends up being affected unnecessarily from the center portion of the image regions. That is to say there is a problem that accurate boundary determination cannot be made with the above predicate based on the statistical processing algorithm.

Accordingly an arrangement may be made wherein when merging image regions determination regarding subsequent merging of image regions is performed only with polygons around the region boundary left which corresponds to the Crust of the newly generated image region. In this case the area and the number of polygons of the region which corresponds to the Crust is calculated instead of the entire image region newly generated by merging and the node statistical information is updated step S .

For a crust an arrangement may be made wherein the polygons near the boundary over the entire circumference of the image region newly generated by merging i.e. a Circular Crust alone is left for subsequent image region mesh growing. Updating processing of the node statistical information generated at the time of leaving the Circular Crust involves a relatively small amount of calculations and also the subsequent determination regarding whether or not to merge image regions can be performed accurately.

Alternatively for a crust an arrangement may be made wherein the polygons near the boundary where the image regions to be merged come into contact i.e. a Border Crust alone is left for subsequent image region mesh growing. Using this Border Crust enables the subsequent determination regarding whether or not to merge image regions to be performed more accurately than with a case of using the Circular Crust. However in the case of using the Border Crust not only the node statistical information but also the incidence graph must be updated and accordingly the amount of calculations is great.

Also a third aspect of the present invention is a computer program described in a computer readable format so as to execute on a computer processing for handling data in which a topology has been formed of a plurality of nodes each having attribute values the program causing the computer to execute 

a topology evaluation step for obtaining weighting factors of edges connecting nodes based on attribute values which neighboring nodes on the topology each have and sorting edges based on the weighting factors and

a node merging processing step for extracting pairs of nodes connected by edges following the sorted order evaluating whether or not to merge the nodes based on a predetermined statistical processing algorithm and performing merging processing of node regions.

Also a fourth aspect of the present invention is a computer program described in a computer readable format so as to execute on a computer processing for handling an object as a polygonal mesh made up of a plurality of polygons the program causing the computer to execute 

an incidence graph evaluation step for comparing attribute values which each of image regions connected by edges has and appropriating weighting factors to the edges based on the comparison results and sorting edges in the incidence graph based on weighting values and

an image region mesh growing step for extracting pairs of image regions sandwiching an edge in the sorted order evaluating whether or not to merge the image regions based on a statistical processing algorithm and performing mesh growing of the image regions.

The computer programs according to the third and fourth aspects of the present invention define computer programs described in a computer readable format so as to execute predetermined processing on a computer system. In other words by installing the computer programs according to the third and fourth aspects of the present invention in a computer system cooperative effects are manifested on the computer system whereby advantages the same as those of the information processing device according to the first aspect and the image processing device according to the second aspect of the present invention can be obtained.

According to the present invention a superb image processing device and image processing method and computer program can be provided capable of growing raw data made up of a great number of nodes which cannot be individually perceived into perceivable increments of a smaller number called segments.

Also according to the present invention a superb image processing device and image processing method and computer program can be provided which at the time of handling two dimensional or three dimensional physical object to be processed as an assembly of a great number of minute polygons normally triangles and processing the two dimensional images can suitably perform mesh segmentation for adjusting the polygonal mesh to a suitable coarseness. That is to say progressive mesh segmentation processing can be performed at high speed with high precision in accordance with applications using the computer graphics.

The image processing device according to the present invention can perform high speed mesh growth of image regions based on a statistical processing algorithm and is capable of realizing progressive mesh segmentation even with common calculators.

Also with the mesh segmentation processing according to the present invention adjusting the parameter value included in the predicate allows the standard for merging image regions to be freely set so a polygonal mesh having a desired coarseness can be generated. Also the system has scalability and can be applied to various interactive applications such as parameterization and texture mapping morphing multi resolution modeling image editing image compression animation shape matching and so forth.

Other objects features and advantages of the present invention will become apparent from detailed description made by way of later described embodiments and the attached drawings.

The present invention relates to an information processing device which handles raw data wherein a topology has been formed by a great number of minute nodes which cannot be individually perceived and is configured such that attribute information which each node holds is subjected to a predetermined statistical processing algorithm so as to determine whether or not to merge neighboring nodes based on the statistical processing algorithm and merging of nodes is repeatedly performed so as to be grown into perceivable increments of a smaller number called segments from the great number of nodes which cannot be individually perceived.

This type of image processing device can be designed as a dedicated hardware device but can be realized in the form of activating application programs for executing processing equivalent to functional modules through on a common calculator system such as a personal computer PC . A common calculator system uses a Pentium IV 1.6 GHz manufactured by Intel Corporation of USA for a processor and has 1 GB of RAM for example. Application programs can be coded in C language using the API application programming interface provided by the operating system OS .

Data to be processed which is input to the node input unit has a topology formed of multiple nodes. A topology is configured of multiple nodes and edges connecting nodes with each node having attribute information. Attribute information relating to new nodes is also calculated when nodes are merged by the mesh growing unit .

The topology evaluation unit evaluates and sorts edges connecting neighboring nodes included in the input data. Evaluation of the edges is performed more specifically by appropriating weighting factors to edges based on comparison results of comparing attribute values which the nodes connected by edges have and sorting the edges in the topology based on the weight values. The weight values appropriated to the edges serve as indicators of degree of similarity among image regions connected by the edges.

In the event that a node has area area is used as the attribute information thereof the average value of the area of all original nodes merged into this node the difference in area between nodes connected by an edge is appropriated as a weight value for the edge and sorting is performed in increasing order of the weight value. In this case the smaller the difference in area between nodes is the smaller the weight value is and the processing order in the subsequence mesh growing is higher. Alternatively in the event that a node has color as attribute information edge weight values can be evaluated using image attribute information the average color of at least one component of R G and B .

Subsequently the mesh growing unit extracts pairs of nodes sandwiching edges in the sorted order and performs mesh growing so as to grow the segmentation. Edges have appropriated thereto weighting serving as indicators of degree of similarity among image regions connected by the edges so performing mesh growing in the increasing order of weight means that mesh growing is performed with higher priority among similar nodes.

The mesh growing unit determines whether or not to merge pairs of nodes based on the statistical processing algorithm. Specifically determination is made that neighboring nodes f i and f j should be merged in the event that the nodes f i and f j satisfy a predicate based on the following statistical algorithm regarding statistical information Stats.f i and Stats.f j held respectively as attribute values. Note that in the following expression node f i includes N i nodes and node f j includes N j nodes function b x represents b x logx Q K x K is a constant and Q is a parameter for controlling the coarseness of the segmentations grown by merging nodes. Expression 2 Stats. Stats. 2 

The above predicate is derived from statistical concentration inequality which is a phenomenon manifested in the area of polygons making up an image region. This phenomenon is commonly known as the central limit theorem. The central limit theorem stipulates the margin between a sample mean and true mean and regardless of the distribution of the sample the margin approximately follows a normal distribution if the number of samples is great.

The Q at the right hand side of the above expression is a parameter for controlling the coarseness of segmentation. Increasing Q reduces the value of the right side and as a result of satisfying the predicate being more difficult node merging is suppressed. Reducing Q increases the value of the right side and as a result of satisfying the predicate being easier node merging i.e. segmentation growth is promoted.

Each node Vi and Vj is configured of a general information portion such as the number of nodes Ni and Nj included in the node and identification information IDi and IDj and a media data portion for storing attribute information. In an initial state a node only has itself and accordingly the number of nodes N is 1 but the number of nodes N of the V obtained by merging is Ni Nj. Also the new identification information ID is generated from the original identification information IDi and IDj using disjoint sets having Union Find data structure. Also attribute information in the media portion is obtained based on statistical computation from the attribute information of the nodes Vi and Vj. For example in the event that the color information that the nodes have is the attribute information the average color of the nodes Vi and Vj become the attribute information of the new node. Or in the event that the area information that the nodes have is the attribute information the average area of the nodes Vi and Vj become the attribute information of the new node. Also regarding Union Find algorithms see A class of algorithms which require nonlinear time to maintain disjoint sets by R. E. Tarjan J. Comput. Syst. Sci. 18 2 110 127 1979 for example.

Finally the minute node processing unit processes the remaining minute noise which did not grow into segmentations of a sufficient size as a result of the node merging processing. For example minute noise remaining between or within nodes which have grown into large segmentations are merged into one of the neighboring segmentations regardless of whether or not the predicate is satisfied thereby improving the appearance of the processing results.

First raw data to be processed is input at the node input unit Step S . Raw data is made up of nodes forming a topology. The node input unit performs initialization processing such as scanning the topology of the input data appropriating an identification information IDi to each node Vi and registering the identification information and attribute information stored in the media portion of the node as node statistical information.

Next the topology evaluation unit evaluates and sorts each of the edges connecting neighboring nodes Step S . Specifically differences in attribute information between nodes connected by edges are appropriated as weight values and sorting is performed in increasing order of weight value.

Next the parameter Q for controlling the coarseness of segmentation is set by way of the parameter setting unit step S .

The mesh growing unit extracts pairs of nodes connected by edges in the sorted order Step S . Mesh growing is then performed based on whether or not the nodes satisfy a predicate based on a statistical algorithm step S . The predicate used here is derived from statistical concentration inequality which is a phenomenon manifested in the area of polygons making up an image region discussed above and uses the parameter Q set in step S.

Upon merging nodes the mesh growing unit generates a new node V appropriates a new ID for identifying this node calculates the attribute information newly generated by the merging and performs updating processing of the node statistical information step S .

Next the mesh growing unit performs node updating processing Step S . That is to say the weighting factors of the edges between the neighboring nodes are recalculated and the edges are re sorted based on the magnitude of the weight values. The flow then returns to step S pairs of nodes connected by edges are extracted in the sorted order and node merging processing based on the statistical processing algorithm is repeatedly performed.

Such recursive repetition of node merging and node statistical information updating processing accompanying the merging eventually reaches a point where there can be found no node combinations satisfying the predicate wherein the threshold has been set with the parameter Q. That is to say when there are no more unprocessed edges in the topology No at step S the minute region processing unit processes the remaining minute nodes which did not grow into segmentations of a sufficient size step S . For example minute nodes remaining between or within large segmentations are merged into one of the neighboring segmentations regardless of whether or not the predicate is satisfied thereby improving the appearance of the processing results.

The present invention can be applied to an image processing device for generating and displaying a two dimensional image of a two dimensional or three dimensional object. In the field of computer graphics normally a two dimensional or three dimensional physical object to be processed is handled as an assembly of a great number of minute polygons normally triangles i.e. as a polygonal mesh to perform image processing. The coarseness of the polygonal mesh greatly affects the processing load and image quality. Accordingly mesh segmentation processing such as dividing image regions and merging divided regions so that a polygonal mesh is adjusted to a suitable coarseness in accordance with the application using the computer graphics is necessary. Also performing hierarchical mesh segmentation in a progressive that is a smooth manner enables the range of applications using the images to be increased.

With the mesh segmentation used with embodiments of the present invention determination is made regarding whether or not to merge neighboring image regions using a statistical processing algorithm whereby merging of image regions is repeatedly performed from a great number of minute polygons into which a three dimensional object has been divided thereby generating a polygonal mesh having a desired coarseness. With the statistical processing algorithm determination is made regarding whether or not to merge neighboring image regions based on a predicate derived from the phenomenon of concentration inequality in area in a polygonal mesh serving as an image region.

Mesh growing based on such statistical processing is realized by the simple calculations of statistical processing of the area of polygons and accordingly high speed can be attained. For example a common calculator such as a personal computer can be used to process one million polygons per second. Also the system has scalability since adjusting the parameter value included in the predicate allows the standard for merging image regions to be freely set so a polygonal mesh having a desired coarseness can be generated.

This type of image processing device can be designed as a dedicated hardware device but can be realized in the form of activating application programs for executing processing equivalent to functional modules through on a common calculator system such as a personal computer PC . A common calculator system uses a Pentium IV 1.6 GHz manufactured by Intel Corporation of USA for a processor and has 1 GB of RAM for example. Application programs can be coded in C language using the API application programming interface provided by OpenGL for example.

In the field of image processing a polygonal mesh serving as an image region is commonly represented in the format of an incidence graph Incidence Graph or Region Adjacent Graph RAG describing the relation of multiple polygons which are the components thereof. Several specific description methods of incidence graphs can be given. While an incidence graph is configured of multiple nodes and edges connecting the nodes what to use for the nodes and edges varies widely. For example in the case of taking polygons as nodes the sides or vertices can serve as edges. Alternatively in the case or taking sides of polygons as nodes the vertices or the polygons can be taken as edges. Or in the case of taking the vertices as nodes the side of the polygons or the polygons can be taken as edges.

The image processing device according to the present embodiment uses an incidence graph configured using polygons as nodes and the sides of the polygons as edges. That is to say the image processing device takes as input data an incidence graph described using edges equivalent to sides of adjacent polygons in contact so as to connect the corresponding nodes.

First polygons Tbelonging to an image region to be handed are correlated with nodes N. In the event that there is a single side between the nodes Nand nodes Nbelonging to polygons Tand Tcorresponding to both edges connecting the nodes are generated as edges e.

An incidence graph can be directly constructed from an index array of vertices and planes by sorting polygons according to the ends of edges. The sides i.e. edges belonging to each of the polygons are divided into edges serving as boundaries of the polygonal mesh that is to say the image region boundary edge and edges in contact with other neighboring polygons within the polygonal mesh rather than with the polygonal mesh interior edge . An edge serving as a boundary of the image region only belongs to one polygon so only non boundary edges i.e. within the image region are to be processed. This processing can be performed as long as there is an index array of vertices and planes and there is no need for complex data structures such as half edge quad edge and so forth.

Also shows a configuration of a somewhat complicated incidence graph. The polygonal mesh shown to the left in the drawing is configured of seven triangles Tthrough T wherein Tis in contact with T Tis in contact with T T and T Tis in contact with Tand T Tis in contact with Tand T Tis in contact with Tand T and Tis in contact with T T and T. The incidence graph describing this polygonal mesh is configured connecting nodes corresponding to the triangles with the sides that is to say edges belonging to both of the neighboring triangles as shown to the right in the drawing.

Note that a node is a polygon which is the smallest increment of the polygonal mesh in the initial state. Alternatively individual pixels in a two dimensional image or a voxel in a three dimensional image is a single node. As mesh growing of the image progresses the nodes grow into an image region configured of a polygonal mesh made up of multiple polygons or pixels or voxels . The image processing device holds therein with regard to each node N identification information id N for uniquely identifying the area area N which the image area a single polygon at first has and the number n N of polygons making up the image region that is to say the polygonal mesh initial value is 1 as node statistical information . The reason that each node holds the area and the number of polygons is that this is information necessary for determination processing regarding whether or not to merge nodes i.e. image regions made by the predicate based on the statistical processing algorithm.

The incidence graph evaluation unit evaluates and sorts the edges of the input incidence graph. With edge evaluation specifically attributes which each of the image regions connected by edges have are compared and weighting factors are appropriated to the edges based on the comparison results and the edges in the incidence graph are sorted based on the weight values. Image region as used here includes polygons which are the smallest increment and an image region configured as a polygonal mesh wherein multiple polygons have been merged.

For example area which the image region has the average value of the area of all polygons merged into the image region is used as an attribute value the difference in area between image regions connected by edges is appropriated as the weight value of the edges and sorted in increasing order of the weight values. In this case the smaller the difference in area between image regions is the smaller the weight value is and the higher the processing order is in the following image mesh growing.

Alternatively besides the area of the polygons making up the image region edge weighting can be appropriated using the difference in various attributes of neighboring vertices such as normal direction of image regions color and like pixel attribute information average color of at least one component of RGB that is in the case of polygonal mesh having texture and so forth.

For example in an RGB color image having a width of w and a height of h the node of a pixel at the i th row and j th column is taken as V and the identification information as RegID V i w j. Internal pixels each have four neighbor nodes with the total m of edges being 2wh w h. A weighting factor between nodes Vand V can be expressed with the following expression for example. Expression 4 max 4 

The image region mesh growing unit extracts pairs of image regions sandwiching edges in the sorted order and performs mesh growing. Edges are appropriated weighting serving as an indicator of degree of similarity between the image regions connected by the edges so performing mesh growing in increasing order means that mesh growing is executed with higher priority between similar image regions.

The image region mesh growing unit determines whether or not to merge pairs of image regions connected by edges extracted in sorted order based on the statistical processing algorithm.

Specifically in the event that the edge weight is calculated based on the area information as with the Expression 3 above the two image regions Rand Rconnected by edges are determined to be merged when satisfying the following predicate based on statistical algorithm. Note that in the following expression the image region Rhas area Sand is configured of npolygons and the image region Rhas area Sand is configured of n polygons. Also A is the largest area of the polygons and Q is a parameter for controlling the coarseness of segmentation.

The above predicate is derived from the phenomenon of statistical concentration inequality in area in a polygonal mesh serving as an image region. This phenomenon is common as the central limit theorem in the field of statistics even if a parent population is of an arbitrary distribution increasing the size of samples will cause the distribution of the sample mean to eventually converge on the normal distribution .

The Q at the right hand side of the above expression is a parameter for controlling the coarseness of segmentation. Increasing Q reduces the value of the right side and as a result of satisfying the predicate being more difficult image region merging is suppressed. Reducing Q increases the value of the right side and as a result of satisfying the predicate being made easier image region merging is promoted so coarser mesh segmentation results can be obtained.

Alternatively in the event that the edge weight is calculated based on RGB color information as with the Expression 4 above the image nodes are determined to be merged regarding the neighboring nodes Vand V connected by edges when satisfying the following predicate based on statistical algorithm. Expression 6 max 6 

In the above expression nand n represent the number of pixels included in the relevant nodes. Also Q is a parameter for controlling the segmentation coarseness.

In its initial state a node is a polygon which is the smallest increment of the polygonal mesh but as mesh growing of the image region proceeds grows into an image region configured of a polygonal mesh configured of multiple polygons. The node statistical information is provided with a record holding with regard to each node N identification information id N for uniquely identifying the area area N which the image area a single polygon at first has and the number n N of polygons making up the image region that is to say the polygonal mesh initial value is 1 . Upon nodes being merged the image region mesh growing unit provides a new id for identifying the new node calculates the area of the image region newly generated by merging and calculates the number of polygons and updates the node statistical information. The Union Find algorithm can be used for generating the new identification information.

The minute region processing unit processes the minute regions remaining as a result of the image region mesh growing. For example minute polygonal meshes remaining between or within large image regions are merged into one of the neighboring image regions regardless of whether or not the predicate is satisfied thereby improving the appearance of the processing results. The term minute region as used here is a polygonal mesh having an area of less than a few percent of the entire mesh surface for example.

First image information of the three dimensional object to be processed is input at the image information input unit Step S . With the present embodiment image information is described in an incidence graph configured with polygons as nodes and the sides of the polygons as edges see above description and .

The image information input unit scans the input incidence graph appropriates identification information id N to each node N obtains the area of corresponding polygons and registers the identification information area and number of polygons initial value is 1 for each node in the node statistical information initialization . A mock program code of initializing node statistical information is shown below. Note here that id is an array which stores node identification information indicated by an argument area is an array which stores the area of the node of the identification information indicated by an argument and no is an array which stores the number of polygons configuring the node of the identification information indicated by an argument. Expression 8 area area 1 8 

With respect to the node Nextracted the i th from the incidence graph i is substituted into the identification information id N the area area T of the corresponding polygon is substituted into the area i of the node N and the initial value 1 is substituted into the number n i of polygons.

Next at the incidence graph evaluation unit the edges of the input incidence graph are evaluated and sorted step S . Specifically the difference in area between image regions connected by edges are appropriated as edge weight values and sorting is performed in the increasing order of weight values. The smaller the difference between image regions is the smaller the weight value is and the higher the processing order in the subsequent image merging processing is.

Next the parameter Q for controlling the coarseness of segmentation is set from the parameter setting unit step S .

The image region mesh growing unit extracts pairs of image regions sandwiching edges in the sorted order step S . Mesh growing is then performed based on whether or not these image regions satisfy a predicate based on a statistical algorithm step S . The predicate used here is derived from the statistical concentration inequality which is a phenomenon occurring in area of polygons serving as an image region described above using the parameter Q set in step S.

The node statistical information is provided with a record holding with regard to each node N identification information id N for uniquely identifying the area area N which the image area a single polygon at first has and the number n N of polygons making up the image region that is to say the polygonal mesh initial value is 1 described above . Upon image regions being merged the image region mesh growing unit generates a new node provides a new id for identifying the new node calculates the area and the number of polygons of the image region newly generated by merging and updates the node statistical information step S .

A mock program code of merging image regions and subsequently updating the node statistical information is shown below. Note here that Merge is a function for performing mesh growing of the image regions indicated by arguments. Expression 9 Merge area area area 9 

First mesh growing of the nodes Nand Nindicated by the arguments of the Merge function is performed. The nodes Nand Nare provided with the same new identification information id N id N indicating that the image regions have been merged and a new node has been generated. With the present embodiment the old identification information of one or the other of Nand Nis used as the new node identification information. The Union Find algorithm described earlier devised by Robert Endre Tarjan can be used for providing new nodes with identification information.

Next the sum of the area of the original image regions area N area N is substituted into the area area id N and also the sum of the number of polygons of the original image regions n id N n id N is substituted into the number of polygons of the new node n id N . The new identification information id N and id N is provided to the nodes Nand Nrespectively thereby ending updating of the node statistical information.

Upon ending processing for all edges within the incidence graph step S the minute region processing unit processes minute regions remaining as the result of mesh growing of image regions step S . For example minute polygonal meshes remaining between or within large image regions are merged into one of the neighboring image regions regardless of whether or not the predicate is satisfied thereby improving the appearance of the processing results. The term minute region as used here is a polygonal mesh having area of less than a few percent of the entire mesh surface for example.

Mesh growing based on such statistical processing is realized by the simple calculations of statistical processing of the area of polygons and accordingly high speed can be attained. For example a common calculator system described above can be used to process around one million polygons per second. Also the system has scalability since adjusting the parameter value Q included in the predicate allows the standard for merging image regions to be freely set so a polygonal mesh having a desired coarseness can be generated.

The user can interactively set the value of Q via the parameter setting unit for example. For example a slide bar can be provided on the display screen such that Q can be input with this bar. illustrates examples of segmentation results obtained interactively by the user setting the multi scale parameter Q using a slide bar. Inputting a different Q requires the image region mesh growing unit and the minute region processing unit to repeat their processing but the processing thereof has general linearity. Increasing Q reduces the value of the right side and as a result of satisfying the predicate being more difficult image region merging is suppressed. Reducing Q increases the value of the right side and as a result of satisfying the predicate being made easier image region merging is promoted so coarser mesh segmentation results can be obtained.

It should be noted that almost all meshes are either scanned or generally re meshed so highly precise segmentation can be performed simply by processing the area of polygons following the statistical algorithm. That is to say a mesh implicitly encodes surface properties such as normal line and curvature in the area of polygons. An arrangement may be made wherein at the pre processing stage re meshing is performed such that an arbitrary mesh matches such conditions.

Now after image region merging has progressed see the grown image regions have a great area and the number of polygons is great. In such a case regardless of the fact that the information of polygons closer to the boundary is more important the processing ends up being affected unnecessarily from the center portion of the image regions. That is to say there is a problem that accurate boundary determination cannot be made with the above predicate based on the statistical processing algorithm.

Accordingly an arrangement may be made wherein when merging image regions determination regarding subsequent merging of image regions is performed only with polygons around the region boundary left which corresponds to the Crust of the newly generated image region. In this case the area and the number of polygons of the region which corresponds to the Crust is calculated instead of the entire image region newly generated by merging and the node statistical information is updated step S .

For a crust an arrangement may be made wherein the polygons near the boundary over the entire circumference of the image region newly generated by merging as shown in for example i.e. a Circular Crust alone is left for subsequent image region mesh growing. Updating processing of the node statistical information generated at the time of leaving the Circular Crust involves a relatively small amount of calculations and also the subsequent determination regarding whether or not to merge image regions can be performed accurately.

First the image information input unit inputs image information of a three dimensional object to be processed step S . The image information is described in incidence graph format configured of polygons as nodes and the sides the polygons as edges see above description and .

The image information input unit scans the input incidence graph appropriates identification information id N to each node N obtains the area of corresponding polygons and registers the identification information area and number of polygons initial value is 1 for each node in the node statistical information initialization . Initialization processing of the node statistical information is the same as the case described with so description here will be omitted.

Next the incidence graph evaluation unit evaluates and sorts the edges of the input incidence graph step S . Specifically the difference in area between image regions connected by edges are appropriated as edge weight values and sorting is performed in the increasing order of weight values.

Next the parameter Q for controlling the coarseness of segmentation is set from the parameter setting unit step S .

The image region mesh growing unit extracts pairs of image regions sandwiching edges in the sorted order step S . Mesh growing is then performed based on whether or not these image regions satisfy a predicate based on a statistical algorithm step S . The predicate used here is derived from the statistical concentration inequality which is a phenomenon occurring in area of polygons serving as an image region described above using the parameter Q set in step S.

Upon image regions being merged the image region mesh growing unit generates a new node provides a new id for identifying the new node calculates the area and the number of polygons of the image region newly generated by merging and updates the node statistical information step S .

A mock program code of merging image regions leaving only a Circular Crust and subsequently updating the node statistical information is shown below. Note here that Merge is a function for performing mesh growing of the image regions indicated by arguments Extract is a function for extracting image regions corresponding to the identification information indicated by arguments and Create Crust is a function for performing processing for leaving only the circular Crust of multiple regions indicated by arguments. Expression 10 Merge Extract Extract Create Crust Compute area Crust Compute Crust area area Crust Crust 10 

First mesh growing of the nodes Nand Nindicated by the arguments of the Merge function is performed. Image regions Rand Rcorresponding to the nodes Nand Nare respectively extracted using the function Extract. Note that the image region Ris all nodes Nhaving the same node identification id N i.e. R N id N id N .

Next the function Create Crust is used to generate a Circle Crust for the sum of sets R R. This processing is realized by applying processing such as morphology or the like to the image region.

The area area Crust R R and the number of polygons making up the region n Crust R R are then obtained regarding the obtained image region Crust R R .

Next the original nodes Nand Nare provided with the same new identification information id N id N indicating that the image regions have been merged and a new node has been generated. The Union Find algorithm described earlier devised by Robert Endre Tarjan can be used for providing new nodes with identification information.

Next the area Crust R R obtained above is substituted into the area area id N and also n Crust R R is substituted into the number of polygons of the new node n id Ni . The new identification information id N and id N is provided to the nodes Nand Nrespectively thereby ending updating of the node statistical information.

Upon ending processing for all edges within the incidence graph step S the minute region processing unit processes minute regions remaining as the result of mesh growing of image regions step S . For example minute polygonal meshes remaining between or within large image regions are merged into one of the neighboring image regions regardless of whether or not the predicate is satisfied thereby improving the appearance of the processing results. The term minute region as used here is a polygonal mesh having area of less than a few percent of the entire mesh surface for example.

For a crust an arrangement may be made wherein the polygons near the boundary where the image regions to be merged come into contact as shown in for example i.e. a Border Crust alone is left for subsequent image region mesh growing. Using this Border Crust enables the subsequent determination regarding whether or not to merge image regions to be performed more accurately than with a case of using the Circular Crust. However in the case of using the Border Crust not only the node statistical information but also the incidence graph must be updated and accordingly the amount of calculations is great.

First the image information input unit inputs image information of a three dimensional object to be processed step S . The image information is described in incidence graph format configured of polygons as nodes and the sides the polygons as edges see above description and .

The image information input unit scans the input incidence graph appropriates identification information id N to each node N obtains the area of corresponding polygons and registers the identification information area and number of polygons initial value is 1 for each node in the node statistical information initialization . Initialization processing of the node statistical information is the same as the case described with so description here will be omitted.

Next the incidence graph evaluation unit evaluates and sorts the edges of the input incidence graph step S . Specifically the difference in area between image regions connected by edges are appropriated as edge weight values and sorting is performed in the increasing order of weight values.

Next the parameter Q for controlling the coarseness of segmentation is set from the parameter setting unit step S .

The image region mesh growing unit extracts pairs of image regions sandwiching edges in the sorted order step S . Mesh growing is then performed based on whether or not these image regions satisfy a predicate based on a statistical algorithm step S . The predicate used here is derived from the statistical concentration inequality which is a phenomenon occurring in area of polygons serving as an image region described above using the parameter Q set in step S.

Upon image regions being merged the image region mesh growing unit generates a new node provides a new id for identifying the new node calculates the area and the number of polygons of the image region newly generated by merging and updates the node statistical information step S .

A mock program code of merging image regions leaving only a Border Crust and subsequently updating the node statistical information is shown below. Note here that Merge is a function for performing mesh growing of the image regions indicated by arguments Extract Boundary is a function for extracting boundaries of image regions corresponding to the identification information indicated by arguments and Create Crust is a function for performing processing for leaving only the Border Crust of multiple regions indicated by arguments. Expression 11 Merge Extract Bundary Extract Boundary Create Crust Compute area Compute area area 11 

First mesh growing of the nodes Nand Nindicated by the arguments of the Merge function is performed. A boundary in contact with the image region of the node Nwithin the image region Rof the node N and a boundary in contact with the image region of the node Nwithin the image region Rof the node N are respectively extracted using the function Extract Boundary.

Next the function Create Crust is used to generate a Border Crust for the sum of sets R R. This processing is equivalent to cutting out a region Bof a certain width number of pixels from the boundary portion of the one image region Rthat is in contact with the image region R cutting out a region Bof a certain width number of pixels from the boundary portion of the other image region Rthat is in contact with the image region R and generating a sum of sets B Bof the cut out image regions see .

The area area B B and the number of polygons making up the region n B B are then obtained regarding the obtained image region B B.

Next the nodes Nand Nare provided with the same new identification information id N id N indicating that the image regions have been merged and a new node has been generated. The Union Find algorithm described earlier devised by Robert Endre Tarjan can be used for providing new nodes with identification information.

Next the area B B obtained above is substituted into the area area id N of the new node. Also n B B is substituted into the number of polygons of the new node n id Ni . The new identification information id N and id N is provided to the nodes Nand Nrespectively thereby ending updating of the node statistical information.

Next the image region mesh growing unit performs incidence graph updating processing Step S . That is to say the weighting factors of the edges in the incidence graph are recalculated and the edges are re sorted based on the magnitude of the weight values. The flow then returns to step S pairs of image regions sandwiching edges are extracted in the sorted order and merging processing of image regions based on the statistical processing algorithm is repeatedly performed.

First the identification id N of the image regions Rand Rregarding which a Border Crust is to be generated and all image regions Radjacent thereto is searched. In the event that there are edges eand ebetween the nodes Ncorresponding to the found image region and the nodes Nand Nto be processed the weighting thereof is recalculated.

Such recursive repetition of image region merging and node statistical information updating processing accompanying the merging eventually reaches a point where there can be found no image region combinations satisfying the predicate wherein the threshold has been set with the parameter Q. That is to say when there are no more unprocessed edges in the incidence graph No at step S the minute region processing unit processes the remaining minute regions left as a result of the image region mesh growing step S . For example minute polygonal meshes remaining between or within large image regions are merged into one of the neighboring image regions regardless of whether or not the predicate is satisfied thereby improving the appearance of the processing results. The term minute region as used here is a polygonal mesh having area of less than a few percent of the entire mesh surface for example.

Note that the predicate described above used by the image region mesh processing unit includes the parameter Q for controlling the coarseness of segmentation so a value of the parameter Q such that a desired coarseness of segmentation can be provided from the parameter setting unit . Also an arrangement may be made such that upon the user providing a desired segmentation coarseness the parameter setting unit converts this into a corresponding parameter Q value which is then provided to the system. The user can provide the number of image regions at the time of performing mesh segmentation and image region mesh growing based on the statistical processing algorithm is fast so the number of image regions can be changed dynamically i.e. freely. Such flexible parameter Q setting enables progressive mesh segmentation to be realized making application to various interactive applications easier.

For example let us say that Q is set to a certain default value and performing mesh segmentation processing therewith to display the results thereof on a screen yields the original three dimensional object having been divided into N image regions. In the event that the user responds to the effect that I want results divided into M regions the parameter setting unit obtains a Q such that the number of image regions is M and provides this to the image region mesh growing unit which re executes the mesh segmentation processing. Of course an arrangement may be made wherein a conversion reference table is prepared beforehand instead of calculating the conversion processing each time.

With the image processing device according to the present embodiment continuously inputting multiple Qs from the parameter setting unit enables progressive segmentation to be performed and hierarchical segmentation to be realized. Image region mesh growing based on the statistical processing algorithm is fast so the user can change the number of image regions dynamically i.e. freely at the time of performing mesh segmentation.

The present inventor considers shape matching as one application of hierarchical segmentation. For example shape matching can be performed by providing keywords to each segmented image region for example see Modeling by example In Proc. SIGGRAPH 2004 . Vol. 23 Issue 3 pp. 652 663 .

According to the present invention keywords are provided to each hierarchical level of the mesh segmentation so keyword information of the hierarchical structure can be constructed for an image of the original three dimensional object. In such a case applying a search that is shape matching to the same three dimensional object yields different search results for each hierarchical level. Alternatively an arrangement may be made wherein the value of Q is controlled at the parameter setting unit such that desired search results are obtained.

It should be noted that the image region mesh growing based on the statistical processing algorithm is fast so the number of image regions can be changed dynamically i.e. freely when performing mesh segmentation. That is to say the user can freely change the number of parts immediately in accordance with the search results simply by performing an operation to reset the Q value via the parameter setting unit whereby similarity control of the search results can be freely operated.

This might be carried out in the form of a slide bar being provided on the screen and the parameter setting unit reading the Q value according to the position to where the user has moved the slider described above . through illustrate the way in which the number of image regions to be divided into is adjusted by setting the Q value by operating the slide bar. As shown in setting a relatively high Q value with the slide bar shown to the left side suppresses merging of image regions so the number of image regions is great i.e. there are many small segments. In this drawing the number of merged regions is 116 as displayed to the upper right. On the other hand as shown in and setting a relatively high Q value with the slide bar promotes merging of image regions so the number of image regions is small i.e. there are many relatively large segments. In these drawings the number of merged regions is 10 as displayed to the upper right. Image region mesh growth based on the statistical processing algorithm is fast so the system can quickly obtain mesh segmentation results for a different number of image regions in response to such slide bar operations and present the results to the user. That is to say the user can dynamically i.e. freely change the number of image regions.

The present invention has been described in detail with reference to specific embodiments. However it is self evident that one skilled in the art could make modifications and substitutions to the embodiments without departing from the essence of the invention.

The mesh segmentation processing according to the present invention enables the standard for merging image regions to be freely set so that polygonal meshes can be generated with a desired coarseness the system has scalability and can be applied to various interactive applications such as parameterization and texture mapping morphing multi resolution modeling image editing image compression animation shape matching and so forth.

That is to say the present invention has been disclosed exemplarily and the descriptions in the present specification should not be interpreted restrictedly. The claims should be referenced to determine the essence of the present invention.

