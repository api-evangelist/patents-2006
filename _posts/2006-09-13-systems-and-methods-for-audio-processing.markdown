---

title: Systems and methods for audio processing
abstract: Systems and methods for audio signal processing are disclosed, where a discrete number of simple digital filters are generated for particular portions of an audio frequency range. Studies have shown that certain frequency ranges are particularly important for human ears' location-discriminating capability, while other ranges are generally ignored. Head-Related Transfer Functions (HRTFs) are examples response functions that characterize how ears perceive sound positioned at different locations. By selecting one or more “location-critical” portions of such response functions, one can construct simple filters that can be used to simulate heating where location-discriminating capability is substantially maintained. Because the filters can be simple, they can be implemented in devices having limited computing power and resources to provide location-discrimination responses that form the basis for many desirable audio effects.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08027477&OS=08027477&RS=08027477
owner: SRS Labs, Inc.
number: 08027477
owner_city: Santa Ana
owner_country: US
publication_date: 20060913
---
This application claims the benefit of priority under 35 U.S.C. 119 e of U.S. Provisional Application No. 60 716 588 filed on Sep. 13 2005 and titled SYSTEMS AND METHODS FOR AUDIO PROCESSING the entirety of which is incorporated herein by reference.

The present disclosure generally relates to audio signal processing and more particularly to systems and methods for filtering location critical portions of audible frequency range to simulate three dimensional listening effects.

Sound signals can be processed to provide enhanced listening effects. For example various processing techniques can make a sound source be perceived as being positioned or moving relative to a listener. Such techniques allow the listener to enjoy a simulated three dimensional listening experience even when using speakers having limited configuration and performance.

However many sound perception enhancing techniques are complicated and often require substantial computing power and resources. Thus use of these techniques are impractical or impossible when applied to many electronic devices having limited computing power and resources. Much of the portable devices such as cell phones PDAs MP3 players and the like generally fall under this category.

At least some of the foregoing problems can be addressed by various embodiments of systems and methods for audio signal processing as disclosed herein. In one embodiment a discrete number of simple digital filters can be generated for particular portions of an audio frequency range. Studies have shown that certain frequency ranges are particularly important for human ears location discriminating capability while other ranges are generally ignored. Head Related Transfer Functions HRTFs are examples response functions that characterize how ears perceive sound positioned at different locations. By selecting one or more location critical portions of such response functions one can construct simple filters that can be used to simulate hearing where location discriminating capability is substantially maintained. Because the filters can be simple they can be implemented in devices having limited computing power and resources to provide location discrimination responses that form the basis for many desirable audio effects.

One embodiment of the present disclosure relates to a method for processing digital audio signals. The method includes receiving one or more digital signals with each of the one or more digital signals having information about spatial position of a sound source relative to a listener. The method further includes selecting one or more digital filters with each of the one or more digital filters being formed from a particular range of a hearing response function. The method further includes applying the one or more filters to the one or more digital signals so as to yield corresponding one or more filtered signals with each of the one or more filtered signals having a simulated effect of the hearing response function applied to the sound source.

In one embodiment the hearing response function includes a head related transfer function HRTF . In one embodiment the particular range includes a particular range of frequency within the HRTF. In one embodiment the particular range of frequency is substantially within or overlaps with a range of frequency that provides a location discriminating sensitivity to an average human s hearing that is greater than an average sensitivity among an audible frequency. In one embodiment the particular range of frequency includes or substantially overlaps with a peak structure in the HRTF. In one embodiment the peak structure is substantially within or overlaps with a range of frequency between about 2.5 KHz and about 7.5 KHz. In one embodiment the peak structure is substantially within or overlaps with a range of frequency between about 8.5 KHz and about 18 KHz.

In one embodiment the one or more digital signals include left and right digital signals to be output to left and right speakers. In one embodiment the left and right digital signals are adjusted for interaural time difference ITD based on the spatial position of the sound source relative to the listener. In one embodiment the ITD adjustment includes receiving a mono input signal having information about the spatial position of the sound source. The ITD adjustment further includes determining a time difference value based on the spatial information. The ITD adjustment further includes generating left and right signals by introducing the time difference value to the mono input signal.

In one embodiment the time difference value includes a quantity that is proportional to absolute value of sin cos where represents an azimuthal angle of the sound source relative to the front of the listener and represents an elevation angle of the sound source relative to a horizontal plane defined by the listener s ears and the front direction. In one embodiment the quantity is expressed as Maximum ITD Samples per Sampling Rate 1 sin cos .

In one embodiment the determination of time difference value is performed when the spatial position of the sound source changes. In one embodiment the method further includes performing a crossfade transition of the time difference value between the previous value and the current value. In one embodiment the crossfade transition includes changing the time difference value for use in the generation of left and right signals from the previous value to the current value during a plurality of processing cycles.

In one embodiment the one or more filtered signals include left and right filtered signals to be output to left and right speakers. In one embodiment the method further includes adjusting each of the left and right filtered signals for interaural intensity difference IID to account for any intensity differences that may exist and not accounted for by the application of one or more filters. In one embodiment the adjustment of the left and right filtered signals for IID includes determining whether the sound source is positioned at left or right relative to the listener. The adjustment further includes assigning as a weaker signal the left or right filtered signal that is on the opposite side as the sound source. The adjustment further includes assigning as a stronger signal the other of the left or right filtered signal. The adjustment further includes adjusting the weaker signal by a first compensation. The adjustment further includes adjusting the stronger signal by a second compensation.

In one embodiment the first compensation includes a compensation value that is proportional to cos where represents an azimuthal angle of the sound source relative to the front of the listener. In one embodiment the compensation value is normalized such that if the sound source is substantially directly in the front the compensation value can be an original filter level difference and if the sound source is substantially directly on the stronger side the compensation value is approximately 1 so that no gain adjustment is made to the weaker signal.

In one embodiment the second compensation includes a compensation value that is proportional to sin where represents an azimuthal angle of the sound source relative to the front of the listener. In one embodiment the compensation value is normalized such that if the sound source is substantially directly in the front the compensation value is approximately 1 so that no gain adjustment is made to the stronger signal and if the sound source is substantially directly on the weaker side the compensation value is approximately 2 thereby providing an approximately 6 dB gain compensation to approximately match an overall loudness at different values of the azimuthal angle.

In one embodiment the adjustment of the left and right filtered signals for IID is performed when new one or more digital filters are applied to the left and right filtered signals due to selected movements of the sound source. In one embodiment the method further includes performing a crossfade transition of the first and second compensation values between the previous values and the current values. In one embodiment the crossfade transition includes changing the first and second compensation values during a plurality of processing cycles.

In one embodiment the one or more digital filters include a plurality of digital filters. In one embodiment each of the one or more digital signals is split into the same number of signals as the number of the plurality of digital filters such that the plurality of digital filters are applied in parallel to the plurality of split signals. In one embodiment the each of one or more filtered signals is obtained by combining the plurality of split signals filtered by the plurality of digital filters. In one embodiment the combining includes summing of the plurality of split signals.

In one embodiment the plurality of digital filters include first and second digital filters. In one embodiment each of the first and second digital filters includes a filter that yields a response that is substantially maximally flat in a passband portion and rolls off towards substantially zero in a stopband portion of the hearing response function. In one embodiment each of the first and second digital filters includes a Butterworth filter. In one embodiment the passband portion for one of the first and second digital filters is defined by a frequency range between about 2.5 KHz and about 7.5 KHz. In one embodiment the passband portion for one of the first and second digital filters is defined by a frequency range between about 8.5 KHz and about 18 KHz.

In one embodiment the selection of the one or more digital filters is based on a finite number of geometric positions about the listener. In one embodiment the geometric positions include a plurality of hemi planes each hemi plane defined by an edge along a direction between the ears of the listener and by an elevation angle relative to a horizontal plane defined by the ears and the front direction for the listener. In one embodiment the plurality of hemi planes are grouped into one or more front hemi planes and one or more rear hemi planes. In one embodiment the front hemi planes include hemi planes at front of the listener and at elevation angles of approximately 0 and 45 degrees and the rear hemi planes include hemi planes at rear of the listener and at elevation angles of approximately 0 and 45 degrees.

In one embodiment the method further includes performing at least one of the following processing steps either before the receiving of the one or more digital signals or after the applying of the one or more filters sample rate conversion Doppler adjustment for sound source velocity distance adjustment to account for distance of the sound source to the listener orientation adjustment to account for orientation of the listener s head relative to the sound source or reverberation adjustment.

In one embodiment the application of the one or more digital filters to the one or more digital signals simulates an effect of motion of the sound source about the listener.

In one embodiment the application of the one or more digital filters to the one or more digital signals simulates an effect of placing the sound source at a selected location about the listener. In one embodiment the method further includes simulating effects of one or more additional sound sources to simulate an effect of a plurality of sound sources at selected locations about the listener. In one embodiment the one or more digital signals include left and right digital signals to be output to left and right speakers and the plurality of sound sources include more than two sound sources such that effects of more than two sound sources are simulated with the left and right speakers. In one embodiment the plurality of sound sources include five sound sources arranged in a manner similar to one of surround sound arrangements and wherein the left and right speakers are positioned in a headphone such that surround sound effects are simulated by the left and right filtered signals provided to the headphone.

Another embodiment of the present disclosure relates to a positional audio engine for processing digital signal representative of a sound from a sound source. The audio engine includes a filter selection component configured to select one or more digital filters with each of the one or more digital filters being formed from a particular range of a hearing response function the selection based on spatial position of the sound source relative to a listener. The audio engine further includes a filter application component configured to apply the one or more digital filters to one or more digital signals so as to yield corresponding one or more filtered signals with each of the one or more filtered signals having a simulated effect of the hearing response function applied to the sound from the sound source.

In one embodiment the hearing response function includes a head related transfer function HRTF . In one embodiment the particular range includes a particular range of frequency within the HRTF. In one embodiment the particular range of frequency is substantially within or overlaps with a range of frequency that provides a location discriminating sensitivity to an average human s hearing that is greater than an average sensitivity among an audible frequency. In one embodiment the particular range of frequency includes or substantially overlaps with a peak structure in the HRTF. In one embodiment the peak structure is substantially within or overlaps with a range of frequency between about 2.5 KHz and about 7.5 KHz. In one embodiment the peak structure is substantially within or overlaps with a range of frequency between about 8.5 KHz and about 18 KHz.

In one embodiment the one or more digital signals include left and right digital signals such that the one or more filtered signals include left and right filtered signals to be output to left and right speakers.

In one embodiment the one or more digital filters include a plurality of digital filters. In one embodiment each of the one or more digital signals is split into the same number of signals as the number of the plurality of digital filters such that the plurality of digital filters are applied in parallel to the plurality of split signals. In one embodiment the each of one or more filtered signals is obtained by combining the plurality of split signals filtered by the plurality of digital filters. In one embodiment the combining includes summing of the plurality of split signals.

In one embodiment the plurality of digital filters include first and second digital filters. In one embodiment each of the first and second digital filters includes a filter that yields a response that is substantially maximally flat in a passband portion and rolls off towards substantially zero in a stopband portion of the hearing response function. In one embodiment each of the first and second digital filters includes a Butterworth filter. In one embodiment the passband portion for one of the first and second digital filters is defined by a frequency range between about 2.5 KHz and about 7.5 KHz. In one embodiment the passband portion for one of the first and second digital filters is defined by a frequency range between about 8.5 KHz and about 18 KHz.

In one embodiment the selection of the one or more digital filters is based on a finite number of geometric positions about the listener. In one embodiment the geometric positions include a plurality of hemi planes each hemi plane defined by an edge along a direction between the ears of the listener and by an elevation angle relative to a horizontal plane defined by the ears and the front direction for the listener. In one embodiment the plurality of hemi planes are grouped into one or more front hemi planes and one or more rear hemi planes. In one embodiment the front hemi planes include hemi planes at front of the listener and at elevation angles of approximately 0 and 45 degrees and the rear hemi planes include hemi planes at rear of the listener and at elevation angles of approximately 0 and 45 degrees.

In one embodiment the application of the one or more digital filters to the one or more digital signals simulates an effect of motion of the sound source about the listener.

In one embodiment the application of the one or more digital filters to the one or more digital signals simulates an effect of placing the sound source at a selected location about the listener.

Yet another embodiment of the present disclosure relates to a system for processing digital audio signals. The system includes an interaural time difference ITD component configured to receive a mono input signal and generate left and right ITD adjusted signals to simulate an arrival time difference of sound arriving at left and right ears of a listener from a sound source. The mono input signal includes information about spatial position of the sound source relative the listener. The system further includes a positional filter component configured to receive the left and right ITD adjusted signals apply one or more digital filters to each of the left and right ITD adjusted signals to generate left and right filtered digital signals with each of the one or more digital filters being based on a particular range of a hearing response function such that the left and right filtered digital signals simulate the hearing response function. The system further includes an interaural intensity difference IID component configured to receive the left and right filtered digital signals and generate left and right IID adjusted signal to simulate an intensity difference of the sound arriving at the left and right ears.

In one embodiment the hearing response function includes a head related transfer function HRTF . In one embodiment the particular range includes a particular range of frequency within the HRTF. In one embodiment the particular range of frequency is substantially within or overlaps with a range of frequency that provides a location discriminating sensitivity to an average human s hearing that is greater than an average sensitivity among an audible frequency. In one embodiment the particular range of frequency includes or substantially overlaps with a peak structure in the HRTF. In one embodiment the peak structure is substantially within or overlaps with a range of frequency between about 2.5 KHz and about 7.5 KHz. In one embodiment the peak structure is substantially within or overlaps with a range of frequency between about 8.5 KHz and about 18 KHz.

In one embodiment the ITD includes a quantity that is proportional to absolute value of sin cos where represents an azimuthal angle of the sound source relative to the front of the listener and represents an elevation angle of the sound source relative to a horizontal plane defined by the listener s ears and the front direction.

In one embodiment the ITD determination is performed when the spatial position of the sound source changes. In one embodiment the ITD component is further configured to perform a crossfade transition of the ITD between the previous value and the current value. In one embodiment the crossfade transition includes changing the ITD from the previous value to the current value during a plurality of processing cycles.

In one embodiment the ITD component is configured to determine whether the sound source is positioned at left or right relative to the listener. The ITD component is further configured to assign as a weaker signal the left or right filtered signal that is on the opposite side as the sound source. The ITD component is further configured to assign as a stronger signal the other of the left or right filtered signal. The ITD component is further configured to adjust the weaker signal by a first compensation. The ITD component is further configured to adjust the stronger signal by a second compensation.

In one embodiment the first compensation includes a compensation value that is proportional to cos where represents an azimuthal angle of the sound source relative to the front of the listener. In one embodiment the second compensation includes a compensation value that is proportional to sin where represents an azimuthal angle of the sound source relative to the front of the listener.

In one embodiment the adjustment of the left and right filtered signals for IID is performed when new one or more digital filters are applied to the left and right filtered signals due to selected movements of the sound source. In one embodiment the ITD component is further configured to perform a crossfade transition of the first and second compensation values between the previous values and the current values. In one embodiment the crossfade transition includes changing the first and second compensation values during a plurality of processing cycles.

In one embodiment the one or more digital filters include a plurality of digital filters. In one embodiment each of the one or more digital signals is split into the same number of signals as the number of the plurality of digital filters such that the plurality of digital filters are applied in parallel to the plurality of split signals. In one embodiment the each of the left and right filtered digital signals is obtained by combining the plurality of split signals filtered by the plurality of digital filters. In one embodiment the combining includes summing of the plurality of split signals.

In one embodiment the plurality of digital filters include first and second digital filters. In one embodiment each of the first and second digital filters includes a filter that yields a response that is substantially maximally flat in a passband portion and rolls off towards substantially zero in a stopband portion of the hearing response function. In one embodiment each of the first and second digital filters includes a Butterworth filter. In one embodiment the passband portion for one of the first and second digital filters is defined by a frequency range between about 2.5 KHz and about 7.5 KHz. In one embodiment the passband portion for one of the first and second digital filters is defined by a frequency range between about 8.5 KHz and about 18 KHz.

In one embodiment the positional filter component is further configured to select the one or more digital filters based on a finite number of geometric positions about the listener. In one embodiment the geometric positions include a plurality of hemi planes each hemi plane defined by an edge along a direction between the ears of the listener and by an elevation angle relative to a horizontal plane defined by the ears and the front direction for the listener. In one embodiment the plurality of hemi planes are grouped into one or more front hemi planes and one or more rear hemi planes. In one embodiment the front hemi planes include hemi planes at front of the listener and at elevation angles of approximately 0 and 45 degrees and the rear hemi planes include hemi planes at rear of the listener and at elevation angles of approximately 0 and 45 degrees.

In one embodiment the system further includes at least one of the following a sample rate conversion component a Doppler adjustment component configured to simulate sound source velocity a distance adjustment component configured to account for distance of the sound source to the listener an orientation adjustment component configured to account for orientation of the listener s head relative to the sound source or a reverberation adjustment component to simulate reverberation effect.

Yet another embodiment of the present disclosure relates to a system for processing digital audio signals. The system includes a plurality of signal processing chains with each chain including an interaural time difference ITD component configured to receive a mono input signal and generate left and right ITD adjusted signals to simulate an arrival time difference of sound arriving at left and right ears of a listener from a sound source. The mono input signal includes information about spatial position of the sound source relative the listener. Each chain further includes a positional filter component configured to receive the left and right ITD adjusted signals apply one or more digital filters to each of the left and right ITD adjusted signals to generate left and right filtered digital signals with each of the one or more digital filters being based on a particular range of a hearing response function such that the left and right filtered digital signals simulate the hearing response function. Each chain further includes an interaural intensity difference IID component configured to receive the left and right filtered digital signals and generate left and right IID adjusted signal to simulate an intensity difference of the sound arriving at the left and right ears.

Yet another embodiment of the present disclosure relates to an apparatus having a means receiving one or more digital signals. The apparatus further includes a means for selecting one or more digital filters based on information about spatial position of a sound source. The apparatus further includes a means for applying the one or more filters to the one or more digital signals so as to yield corresponding one or more filtered signals that simulate an effect of a hearing response function.

Yet another embodiment of the present disclosure relates to an apparatus having a means for forming one or more electronic filters and a means for applying the one or more electronic filters to a sound signal so as to simulate a three dimensional sound effect.

These and other aspects advantages and novel features of the present teachings will become apparent upon reading the following detailed description and upon reference to the accompanying drawings. In the drawings similar elements have similar reference numerals.

The present disclosure generally relates to audio signal processing technology. In some embodiments various features and techniques of the present disclosure can be implemented on audio or audio visual devices. As described herein various features of the present disclosure allow efficient processing of sound signals so that in some applications realistic positional sound imaging can be achieved even with limited signal processing resources. As such in some embodiments sound having realistic impact on the listener can be output by portable devices such as handheld devices where computing power may be limited. It will be understood that various features and concepts disclosed herein are not limited to implementations in portable devices but can be implemented in any electronic devices that process sound signals.

As also shown in some sounds can make it appear that the listener is moving with respect to some sound source. Many other combinations of sound source and listener orientation and motion can be effectuated. In some embodiments such audio perception combined with corresponding visual perception from a screen for example can provide an effective and powerful sensory effect to the listener.

In one embodiment a positional audio engine can generate and provide signal to the speakers to achieve such a listening effect. Various embodiments and features of the positional audio engine are described below in greater detail.

In some embodiments such audio perception combined with corresponding visual perception from a screen for example can provide an effective and powerful sensory effect to the listener. Thus for example a surround sound effect can be created for a listener listening to a handheld device through a headphone. Various embodiments and features of the positional audio engine are described below in greater detail.

Other configurations are possible. For example various concepts and features of the present disclosure can be implemented for processing of signals in analog systems. In such systems analog equivalents of positional filters can be configured based on location critical information in a manner similar to the various techniques described herein. Thus it will be understood that various concepts and features of the present disclosure are not limited to digital systems.

For the purpose of description location critical means a portion of human hearing response spectrum for example a frequency response spectrum where sound source location discrimination is found to be particularly acute. HRTF is an example of a human hearing response spectrum. Studies for example A comparison of spectral correlation and local feature matching models of pinna cue processing by E. A. Macperson 101 3105 1997 have shown that human listeners generally do not process entire HRTF information to distinguish where sound is coming from. Instead they appear to focus on certain features in HRTFs. For example local feature matches and gradient correlations in frequencies over 4 KHz appear to be particularly important for sound direction discrimination while other portions of HRTFs are generally ignored.

Simulated filter responses corresponding to the HRTFs can result from the filter coefficients determined in the process block . As shown peaks and and the corresponding valleys are replicated so as to provide location critical responses for location discrimination of the sound source. Other portions of the HRTFs are shown to be generally ignored thereby represented as substantially flat responses at lower frequencies.

Because only certain portion s and or structure s are selected in this example the two peaks and related valley formation of filter responses for example determination of the filter coefficients that yields the example simulated responses can be simplified greatly. Moreover such filter coefficients can be stored and used subsequently in a greatly simplified manner thereby substantially reducing the computing power required to effectuate realistic location discriminating sound output to a listener. Specific examples of filter coefficient determination and subsequent use are described below in greater detail.

In the description herein filter coefficient determination and subsequent use are described in the context of the example two peak selection. It will be understood however that in some embodiments other portion s and or feature s of HRTFs can be identified and simulated. So for example if a given HRTF has three peaks that can be location critical those three peaks can be identified and simulated. Accordingly three filters can represent those three peaks instead of two filters for the two peaks.

In one embodiment the selected features and or ranges of the HRTFs or other frequency response curves can be simulated by obtaining filter coefficients that generate an approximated response of the desired features and or ranges. Such filter coefficients can be obtained using any number of known techniques.

In one embodiment simplification that can be provided by the selected features for example peaks allows use of simplified filtering techniques. In one embodiment fast and simple filtering such as infinite impulse response IIR can be utilized to simulate the response of a limited number of selected location critical features.

By way of example the two example peaks and for the left hearing and and for the right hearing of the example HRTFs can be simulated using a known Butterworth filtering technique. Coefficients for such known filters can be obtained using any known techniques including for example signal processing applications such as MATLAB. Table 1 shows examples of MATLAB function calls that can return simulated responses of the example HRTFs .

In one embodiment the foregoing example IIR filter responses to the selected peaks of the example HRTFs can yield the simulated responses . The corresponding filter coefficients can be stored for subsequent use as indicated in the process block of the process .

As previously stated the example HRTFs and simulated responses correspond to a sound source located at front at about 45 degrees to the right at about the ear level . Response s to other source location s can be obtained in a similar manner to provide a two or three dimensional response coverage about the listener. Specific filtering examples for other sound source locations are described below in greater detail.

In one embodiment as shown in space about the listener at the origin can be divided into front and rear as well as left and right. In one embodiment a front hemi plane and a rear hemi plane can be defined such that together they define a plane having an elevation angle and intersects the X Y plane at the X axis. Thus for example the example sound source at 45 and 0 and corresponding to the example HRTFs of is in the Front Right FR section and in the front hemi plane at 0.

In one embodiment as described below in greater detail various hemi planes can be above and or below the horizontal to account for sound sources above and or below the ear level. For a given hemi plane a response obtained for one side e.g. right side can be used to estimate the response at the mirror image location about the Y Z plane on the other side e.g. left side by way of symmetry of the listener s head. In one embodiment because such symmetry does not exist for front and rear separate responses can be obtained for the front and rear and thus the front and rear hemi planes .

In one embodiment sound sources about the listener can be approximated as being on one of the foregoing hemi planes. Each hemi plane can have a set of filter coefficients that simulate response of sound sources on that hemi plane. Thus the example simulated response described above in reference to can provide a set of filter coefficients for the front horizontal hemi plane . Simulated responses to sound sources located anywhere on the front horizontal hemi plane can be approximated by adjusting relative gains of the left and right responses to account for left and right displacements from the front direction Y axis . Moreover other parameters such as sound source distance and or velocity can also be approximated in a manner described below.

Note that in the example simulated response a bandstop Butterworth filtering can be used to obtain a desired approximation of the identified features. Thus it should be understood that various types of filtering techniques can be used to obtain desired results. Moreover filters other than Butterworth filters can be used to achieve similar results. Moreover although IIR filter are used to provide fast and simple filtering at least some of the techniques of the present disclosure can also be implemented using other filters such as finite impulse response FIR filters .

For the foregoing example hemi plane configuration 45 0 45 Table 2 lists filtering parameters that can be input to obtain filter coefficients for the six hemi planes and . For the example parameters in Table 2 as in Table 1 the example Butterworth filter function call can be made in MATLAB as butter Order f SamplingRate 2 f SamplingRate 2 Type where Order represents the highest order of filter terms fand frepresent the boundary values of the selected frequency range and SamplingRate represents the sampling rate and Type represents the filter type for each given filter. Other values and or types for filter parameters are also possible.

In one embodiment as seen in Table 2 each hemi plane can have four sets of filter coefficients two filters for the two example location critical peaks for each of left and right. Thus with six hemi planes there can be 24 filters.

In one embodiment same filter coefficients can be used to simulate responses to sound from sources anywhere on a given hemi plane. As described below in greater detail effects due to left right displacement distance and or velocity of the source can be accounted for and adjusted. If a source moves from one hemi plane to another hemi plane transition of filter coefficients can be implemented in a manner described below so as to provide a smooth transition in the perceived sound.

In one embodiment if a given sound source is located at a location somewhere between two hemi planes for example the source is at front 30 then the source can be considered to be at the nearest plane for example the nearest hemi plane would be the front 45 . As one can see it may be desirable in certain situations to provide more or less hemi planes in space about the listener so as to provide less or more granularity in distribution of hemi planes.

Moreover the three dimensional space does not necessarily need to be divided into hemi planes about the X axis. The space could be divided into any one two or three dimensional geometries relative to a listener. In one embodiment as done in the hemi planes about the X axis symmetries such as left and right hearings can be utilized to reduce the number of sets of filter coefficients.

It will be understood that the six hemi plane configuration 45 0 45 described above is an example of how selected location critical response information can be provided for a limited number of orientations relative to a listener. By doing so substantially realistic three dimensional sound effects can be reproduced using relatively little computing power and or resources. Even if the number of hemi planes are increased for finer granularity say to ten front and rear at 60 30 0 30 60 the number of sets of filter coefficients can be maintained at a manageable level.

In one embodiment the ITD component can output left and right signals that take into account the arrival difference and such output signals can be provided to the positional filters component . An example operation of the positional filters component is described below in greater detail.

In one embodiment the positional filters component can output left and right signals that have been adjusted for the location critical responses. Such output signals can be provided into a component that determines an interaural intensity difference IID . IID can provide adjustments of the positional filters outputs to adjust for position dependence in the intensities of the left and right signals. An example of IID compensation is described below in greater detail. Left and right signals can be output by the IID component to speakers to provide positional effect of the sound source.

The input signal is shown to be provided to an ITD calculation component that calculates interaural time delay needed to simulate different arrival times if the source is located to one side at the left and right ears. In one embodiment the ITD can be calculated as ITD Maximum ITD Samples per Sampling Rate 1 sin cos . 1 Thus as expected ITD 0 when a source is either directly in front 0 or directly at rear 180 and ITD has a maximum value for a given value of when the source is either directly to the left 270 or to the right 90 . Similarly ITD has a maximum value for a given value of when the source is at the horizontal plane 0 and zero when the source is either at top 90 or bottom 90 locations.

The ITD determined in the foregoing manner can be introduced to the input signal so as to yield left and right signals that are ITD adjusted. For example if the source location is on the right side the right signal can have the ITD subtracted from the timing of the sound in the input signal. Similarly the left signal can have the ITD added to the timing of the sound in the input signal. Such timing adjustments to yield left and right signals can be achieved in a known manner and are depicted as left and right delay lines and

If a sound source is substantially stationary relative to the listener the same ITD can provide the arrival time based three dimensional sound effect. If a sound source moves however the ITD may also change. If a new value of ITD is incorporated into the delay lines there may be a sudden change from the previous ITD based delays possibly resulting in a detectable shift in the perception of ITDs.

In one embodiment as shown in the ITD component can further include crossfade components and that provide smoother transitions to new delay times for the left and right delay lines and . An example of ITD crossfade operation is described below in greater detail.

As shown in left and right delay adjusted signals are shown to be output by the ITD component . As described above the delay adjusted signals may or may not be crossfaded. For example if the source is stationary there may not be a need to crossfade since the ITD remains substantially the same. If the source moves crossfading may be desired to reduce or substantially eliminate sudden shifts in ITDs due to changes in source locations.

As shown in the left and right input signals can be provided to a filter selection component . In one embodiment filter selection can be based on the values of and associated with the sound source. For the six hemi plane example described herein and can uniquely associate the sound source location to one of the hemi planes. As described above if a sound source is not on one of the hemi planes that source can be associated with the nearest hemi plane.

For example suppose that a sound source is located at 10 and 10 . In such a situation the front horizontal hemi plane in can be selected since the location is in front and the horizontal orientation is the nearest to the 10 degree elevation. The front horizontal hemi plane can have a set of filter coefficients as determined in the example manner shown in Table 2. Thus four example filters 2 left and 2 right corresponding to the Front 0 hemi plane can be selected for this example source location.

As shown in left filters and identified by the selection component can be applied to the left signal and right filters and also identified by the selection component can be applied to the right signal. In one embodiment each of the filters and operate on digital signals in a known manner based on their respective filter coefficients.

As described herein the two left filters and two right filters are in the context of the two example location critical peaks. It will be understood that other numbers of filters are possible. For example if there are three location critical features and or ranges in the frequency responses there may be three filters for each of the left and right sides.

As shown in a left gain component can adjust the gain of the left signal and a right gain component can adjust the gain of the right signal. In one embodiment the following gains corresponding to the parameters of Table 12 can be applied to the left and right signals 

In one embodiment as shown in the filters and gain adjusted left and right signals can be summed by respective summers and so as to yield left and right output signals .

In one embodiment the IID component can adjust the intensity of the weaker channel signal in a first compensation component and also adjust the intensity of the stronger channel signal in a second compensation component . For example suppose that a sound source is located at 10 that is to the right side by 10 degrees . In such a situation the right channel can be considered to be the stronger channel and the left channel the weaker channel. Thus the first compensation can be applied to the left signal and the second compensation to the right signal.

In one embodiment the level of the weaker channel signal can be adjusted by an amount given as Gain cos Fixed Filter Level Difference per Elevation 1.0 1.0. 2 Thus if 0 degree directly in front the gain of the weaker channel is adjusted by the original filter level difference. If 90 degrees directly to the right Gain 1 and no gain adjustment is made to the weaker channel.

In one embodiment the level of the stronger channel signal can be adjusted by an amount given as Gain sin 1.0. 3 Thus if 0 degree directly in front Gain 1 and no gain adjustment is made to the stronger channel. If 90 degrees directly to the right Gain 2 thereby providing a 6 dB gain compensation to roughly match the overall loudness at different values of .

If a sound source is substantially stationary or moves substantially within a given hemi plane the same filters can be used to generate filter responses. Intensity compensations for weaker and stronger hearing sides can be provided by the IID compensations as described above. If a sound source moves from one hemi plane to another hemi plane however the filters can also change. Thus IIDs that are based on the filter levels may not provide compensations in such a way as to make a smooth hemi plane transition. Such a transition can result in a detectable sudden shift in intensity as the sound source moves between hemi planes.

Thus in one embodiment as shown in the IID component can further include a crossfade component that provides smoother transitions to a new hemi plane as the source moves from an old hemi plane to the new one. An example of IID crossfade operation is described below in greater detail.

As shown in left and right intensity adjusted signals are shown to be output by the IID component . As described above the intensity adjusted signals may or may not be crossfaded. For example if the source is stationary or moves within a given hemi plane there may not be a need to crossfade since the filters remain substantially the same. If the source moves between hemi planes crossfading may be desired to reduce or substantially eliminate sudden shifts in IIDs.

In one embodiment the process can further include a process block where crossfading is performed on the left and right ITD adjusted signals to account for motion of the sound source.

In a decision block the process determines whether the sound source is at the front and to the right F.R. . If the answer is Yes front filters at appropriate elevation are applied to the left and right data in a process block . The filter applied data and the gain adjusted data are summed to generate position filters output signals. Because the source is at the right side the right data is the stronger channel and the left data is the weaker channel. Thus in a process block first compensation gain Equation 2 is applied to the left data. In a process block second compensation gain Equation 3 is applied to the right data. The position filtered and gain adjusted left and right signals are output in a process block .

If the answer to the decision block is No the sound source is not at the front and to the right. Thus the process proceeds to other remaining quadrants.

In a decision block the process determines whether the sound source is at the rear and to the right R.R. . If the answer is Yes rear filters at appropriate elevation are applied to the left and right data in a process block . The filter applied data and the gain adjusted data are summed to generate position filters output signals. Because the source is at the right side the right data is the stronger channel and the left data is the weaker channel. Thus in a process block first compensation gain Equation 2 is applied to the left data. In a process block second compensation gain Equation 3 is applied to the right data. The position filtered and gain adjusted left and right signals are output in a process block .

If the answer to the decision block is No the sound source is not at F.R. or R.R. Thus the process proceeds to other remaining quadrants.

In a decision block the process determines whether the sound source is at the rear and to the left R.L. . If the answer is Yes rear filters at appropriate elevation are applied to the left and right data in a process block . The filter applied data and the gain adjusted data are summed to generate position filters output signals. Because the source is at the left side the left data is the stronger channel and the right data is the weaker channel. Thus in a process block second compensation gain Equation 3 is applied to the left data. In a process block first compensation gain Equation 2 is applied to the right data. The position filtered and gain adjusted left and right signals are output in a process block .

If the answer to the decision block is No the sound source is not at F.R. R.R. or R.L. Thus the process proceeds with the sound source considered as being at the front and to the left F.L. .

In a process block front filters at appropriate elevation are applied to the left and right data. The filter applied data and the gain adjusted data are summed to generate position filters output signals. Because the source is at the left side the left data is the stronger channel and the right data is the weaker channel. Thus in a process block second compensation gain Equation 3 is applied to the left data. In a process block first compensation gain Equation 2 is applied to the right data. The position filtered and gain adjusted left and right signals are output in a process block .

In a process block mono input signal is obtained. In a process block position based ITD is determined and applied to the input signal. In a decision block the process determines whether the sound source has changed position. If the answer is No data can be read from the left and right delay lines have ITD delay applied and written back to the delay lines. If the answer is Yes the process in a process block determines a new ITD delay based on the new position. In a process block crossfade can be performed to provide smooth transition between the previous and new ITD delays.

In one embodiment crossfading can be performed by reading data from previous and current delay lines. Thus for example each time the process is called and values are compared with those in the history to determine whether the source location has changed. If there is no change new ITD delay is not calculated and the existing ITD delay is used process block . If there is a change new ITD delay is calculated process block and crossfading is performed process block . In one embodiment ITD crossfading can be achieved by gradually increasing or decreasing the ITD delay value from the previous value to the new value.

In one embodiment the crossfading of the ITD delay values can be triggered when source s position change is detected and the gradual change can occur during a plurality of processing cycles. For example if the ITD delay has an old value ITD and a new value ITD the crossfading transition can occur during N processing cycles ITD ITD ITD ITD ITD N . . . ITD N 1 ITD ITD N 1 N ITD N ITD where ITD ITD ITD assuming that ITD ITD .

As shown in the ITD adjusted data can be further processed with or without ITD crossfading so that in a process block positional filtering can be performed based on the current values of and . For the purpose of description of it will be assumed that the process block also includes IID compensations.

In a decision block the process determines whether there has been a change in the hemi plane. If the answer is No no crossfading of IID compensations is performed. If the answer is Yes the process in a process block performs another positional filtering based on the previous values of and . For the purpose of description of it will be assumed that the process block also includes IID compensations. In a process block crossfading can be performed between the IID compensation values and or when filters are changed for example when switching filters corresponding to previous and current hemi planes . Such crossfading can be configured to smooth out glitches or sudden shifts when applying different IID gains switching of positional filters or both.

In one embodiment IID crossfading can be achieved by gradually increasing or decreasing the IID compensation gain value from the previous values to the new values and or the filter coefficients from the previous set to the new set. In one embodiment the crossfading of the IID gain values can be triggered when a change in hemi plane is detected and the gradual changes of the IID gain values can occur during a plurality of processing cycles. For example if a given IID gain has an old value IID and a new value IID the crossfading transition can occur during N processing cycles IID IID IID IID IID N . . . IID N 1 IID IID N 1 N IID N IID where IID IID IID assuming that IID IID . Similar gradual changes can be introduced for the positional filter coefficients for crossfading positional filters.

As further shown in the positional filtered and IID compensated signals whether or not IID crossfaded yields output signals that can be amplified in a process block so as to yield a processed stereo output .

In some embodiments various features of the ITD ITD crossfading positional filtering IID IID crossfading or combinations thereof can be combined with other sound effect enhancing features. shows a block diagram of one embodiment of a signal processing configuration where sound signal can be processed before and or after the ITD positional filtering IID processing. As shown sound signal from a source can be processed for sample rate conversion SRC and adjusted for Doppler effect to simulate a moving sound source. Effects accounting for distance and the listener source orientation can also be implemented. In one embodiment sound signal processed in the foregoing manner can be provided to the ITD component as an input signal . ITD processing as well as processing by the positional filters and IID can be performed in a manner as described herein.

As further shown in the output from the IID component can be processed further by a reverberation component to provide reverberation effect in the output signal .

In one embodiment functionalities of the SRC Doppler Distance Orientation and Reverberation components can be based on known techniques and thus need not be described further.

In one embodiment functionalities of the SRC Doppler Distance Orientation Downmix and and Reverberation and components can be based on known techniques and thus need not be described further.

As shown in the outputs of the eight ITDs can be directed to corresponding position filters via a downmix component . Six such sets of position filters are depicted to correspond to the six example hemi planes. The position filters apply their respective filters to the inputs provided thereto and provide corresponding left and right output signals. For the purpose of description of it will be assumed that the position filters can also provide the IID compensation functionality.

As shown in the outputs of the position filters can be further downmixed by a downmix component that mixes 2D streams such as normal stereo contents with 3D streams that are processed as described herein. In one embodiment such downmixing can avoid clipping in audio signals. The downmixed output signals can be further processed by sound enhancing component such as SRS WOW XT application to generate the output signals .

As seen by way of examples various configurations are possible for incorporating the features of the ITD positional filters and or IID with various other sound effect enhancing techniques. Thus it will be understood that configurations other than those shown are possible.

In one embodiment at least some portion of the 3D sound API can reside in the program memory of the system and be under the control of a processor . In one embodiment the system can also include a display component that can provide visual input to the listener. Visual cues provided by the display and the sound processing provided by the API can enhance the audio visual effect to the listener viewer.

As described herein various features of positional filtering and associated processing techniques allow generation of realistic three dimensional sound effect without heavy computation requirements. As such various features of the present disclosure can be particularly useful for implementations in portable devices where computation power and resources may be limited.

For the example surround sound configuration positional filtering can be configured to process five sound sources for example five processing chains in or . In one embodiment information about the location of the sound sources for example which of the five simulated speakers can be encoded in the input data. Since the five speakers do not move relative to the listener positions of five sound sources can be fixed in the processing. Thus ITD determination can be simplified ITD crossfading can be eliminated filter selection s can be fixed for example if the sources are placed on the horizontal plane only the front and rear horizontal hemi planes need to be used IID compensation can be simplified and IID crossfading can be eliminated.

In the description herein various functionalities are described and depicted in terms of components or modules. Such depictions are for the purpose of description and do not necessarily mean physical boundaries or packaging configurations. For example and other Figures depicts ITD Positional Filters and IID as components. It will be understood that the functionalities of these components can be implemented in a single device software separate devices softwares or any combination thereof. Moreover for a given component such as the Positional Filters its functionalities can be implemented in a single device software plurality of devices softwares or any combination thereof.

In general it will be appreciated that the processors can include by way of example computers program logic or other substrate configurations representing data and instructions which operate as described herein. In other embodiments the processors can include controller circuitry processor circuitry processors general purpose single chip or multi chip microprocessors digital signal processors embedded microprocessors microcontrollers and the like.

Furthermore it will be appreciated that in one embodiment the program logic may advantageously be implemented as one or more components. The components may advantageously be configured to execute on one or more processors. The components include but are not limited to software or hardware components modules such as software modules object oriented software components class components and task components processes methods functions attributes procedures subroutines segments of program code drivers firmware microcode circuitry data databases data structures tables arrays and variables.

Although the above disclosed embodiments have shown described and pointed out the fundamental novel features of the invention as applied to the above disclosed embodiments it should be understood that various omissions substitutions and changes in the form of the detail of the devices systems and or methods shown may be made by those skilled in the art without departing from the scope of the invention. Consequently the scope of the invention should not be limited to the foregoing description but should be defined by the appended claims.

