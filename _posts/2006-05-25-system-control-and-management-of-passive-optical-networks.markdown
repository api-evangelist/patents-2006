---

title: System control and management of passive optical networks
abstract: A highly reliable, carrier class passive optical network and associated devices which employs multiple instances of operating software in host systems, as well as mechanisms to automatically determine whether an individual OLT device has entered or left the system without disruption to overall system operation.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07606489&OS=07606489&RS=07606489
owner: Cortina Systes, Inc.
number: 07606489
owner_city: Sunnyvale
owner_country: US
publication_date: 20060525
---
This invention relates generally to the field of packet switched networks. More particularly it relates to method s and system s for system control and management a Passive Optical Network PON and likewise to any point to multipoint access network.

The communications industry is on the cusp of a revolution characterized by three driving forces that will forever change the communications landscape. First deregulation has opened the local loop to competition launching a whole new class of carriers that are spending billions to build out their networks and develop innovative new services. Second the rapid decline in the cost of fiber optics and Ethernet equipment has made them an attractive option for access loop deployment. Third the Internet has precipitated robust demand for broadband services leading to an explosive growth in Internet Protocol IP data traffic while at the same time putting enormous pressure on carriers to upgrade their existing networks.

These drivers are in turn promoting several key market trends. In particular the deployment of fiber optics is extending from the telecommunications backbone to Wide Area Network s WAN and Metropolitan Area Network s MAN and the local loop. Concurrently Ethernet is expanding its pervasiveness from Local Area Network s to the MAN and the WAN as an uncontested standard.

The confluence of these factors is leading to a fundamental paradigm shift in the communications industry a shift that will ultimately lead to widespread adoption of a new optical IP Ethernet architecture that combines the best of fiber optic and Ethernet technologies. This architecture is poised to become the dominant means of delivering bundled data video and voice services on a single platform.

Passive Optical Networks PONs address the last mile of communications infrastructure between a Service Provider s Central Office CO Head End HE or Point of Presence POP and business or residential customer locations. Also known as the access network or local loop this last mile consists predominantly in residential areas of copper telephone wires or coaxial cable television CATV cables. In metropolitan areas where there is a high concentration of business customers the access network often includes high capacity synchronous optical network SONET rings optical T3 lines and copper based T1 lines.

Historically only large enterprises can afford to pay the substantial costs associated with leasing T3 45 Mbps or optical carrier OC 3 155Mbps connections. And while digital subscriber line DSL and coaxial cable television CATV technologies offer a more affordable interim solution for data they are infirmed by their relatively limited bandwidth and reliability.

Yet even as access network improvements have remained at a relative bandwidth standstill bandwidth has been increasing dramatically on long haul networks through the use of wavelength division multiplexing WDM and other technologies. Additionally WDM technologies have penetrated metropolitan area networks thereby boosting their capacities dramatically. At the same time enterprise local area networks have moved from 10 Mbps to 100 Mbps and soon many will utilize gigabit 1000 Mbps Ethernet technologies. The end result is a gulf between the capacity of metro networks on one side and end user needs and networks on the other with a last mile bottleneck in between. Passive optical networks and in particular Ethernet Passive Optical Networks promise to break this last mile bottleneck.

The economics of PONs are compelling. Optical fiber is the most effective medium for transporting data video and voice traffic and it offers a virtual unlimited bandwidth. But the cost of deploying fiber in a point to point arrangement from every customer location to a CO installing active components at each endpoint and managing the fiber connections within the CO is prohibitive. PONs address these shortcomings of point to point fiber solutions by using a point to multipoint topology instead of point to point eliminating active electronic components such as regenerators amplifiers and lasers from the outside plant and by reducing the number of lasers needed at the CO.

Unlike point to point fiber optic technology which is typically optimized for metro and long haul applications PONs are designed to address the demands of the access network. And because they are simpler more efficient and less costly than alternative access solutions PONS finally make it cost effective for service providers to extend optical fiber into the last mile.

Accordingly PONs are being widely recognized as the access technology of choice for next generation high speed low cost access network architectures. PONs exhibit a shared single fiber point to multipoint passive optical topology while employing gigabit Ethernet protocol s to deliver up to 1 Gbps of packetized services that are well suited to carry voice video and data traffic between a customer premises and a CO. Adding to its attractiveness PONs have been recently ratified by the Institute of Electrical and Electronics Engineers IEEE Ethernet in the First Mile EFM task force in the IEEE 802.3ah specification.

With reference to there is shown a typical PON as part of overall network architecture . In particular an EPON is shown implemented as a tree topology between a service provider s CO and customer premises . . . N where a single trunk or feeder fiber is split into a number of distribution fibers . . . N through the effect of 1 N passive optical splitters combiner .

As can be further observed with reference to this the trunk fiber is terminated at the CO at Optical Line Terminator OLT device and split into the number of distribution fibers . . . N which are each either further split or terminated at an Optical Network Unit ONU . . . N located at a respective customer premises . . . N .

Due to the directional properties of the optical splitter combiner the OLT is able to broadcast data to all ONUs in the downstream direction. In the upstream direction however ONUs cannot communicate directly with one another. Instead each ONU is able to send data only to the OLT. Thus in the downstream direction a PON may be viewed as a point to multipoint network and in the upstream direction a PON may be viewed as a multipoint to point network.

As can be readily appreciated in a large passive optical network there exist a very large number of PON OLT devices. Managing this plurality of devices is a job that has historically involved a tedious manual provisioning of static configurations. As a result configurations are oftentimes replete with errors that are not easy to detect.

In recognition of these needs and deficiencies in the Art we have developed method s and apparatus for management and control of passive optical networks and devices in a distributed environment. Advantageously the methods and apparatus employ a system on chip solution wherein a microprocessor and associated software are resident within each PON device.

In sharp contrast to earlier attempts to control and manage PONs the invention of the instant application utilizes a novel method for managing and controlling PON devices in a distributed and dynamic manner.

Devices constructed according to the present invention exhibit a high degree of scalability along with high management performance. As a result of their multi threaded asynchronous methodology the devices permit the management of multiple devices simultaneously without exhibiting system level blocking that plagued the prior art.

Still further devices constructed according to the present invention utilize a built in intelligence which permit the automatic discovery of devices that arrive into and depart from a network. As a result hot swapping and high availability characterize devices constructed according to the present invention.

Further features and advantages of our invention will become apparent with reference to the accompanying drawing and illustrative detailed description.

The PON system on chip which is the subject of the present invention comprises three major components an OLT device an ONU device and a software component iROS. In a preferred embodiment the OLT and ONU devices are Application Specific Integrated Circuits ASIC devices having integrated microprocessors for control and management. The iROS software comprises a distributed operating system that provides the management and control of an EPON system constructed from OLT device and ONU device chipset s .

Turning now to there are shown two domains of operation in which the iROS software operates namely a host system domain and a PON system domain. The host system domain includes software systems residing in head end systems that provide the PON services. As can be readily understood for the purposes of this discussion the PON system is an access network which is built using the OLT and ONU chipsets.

The iROS software is responsible for the management and control of the overall PON system and provides the application programming interface to a host system. In a preferred embodiment the iROS software comprises three software components that work in concert to provide the management and control functions. As presently constituted the software components comprising the iROS software includes 

iROS SC is a software component which runs in a host system and is the central point of operation for the distributed system. It communicates with the other two software components and provides the application programming interface to the PON applications resident in the host system.

iROS OLT is a software component which runs on an microprocessor integrated within the OLT device and serves as a gateway to remote ONU devices. The integrated built in microprocessor provides a support execution environment for iROS OLT. In addition to controlling the OLT device iROS OLT communicates directly with the iROS SC component and the iROS ONU component. In a preferred embodiment one instance of iROS SC will manage multiple instances of iROS OLT. The communication between iROS SC and iROS OLT preferably occurs via one or more Ethernet management interfaces. As can be appreciated by those skilled in the art such communication is generally known as an out band management channel.

iROS ONU is a software component which runs on the microprocessor built in the ONU device and is physically positioned at a remote end of an iROS distributed system. As with the OLT device the microprocessor built into ONU devices provide a support and execution environment while controlling the operation of the ONU device. Typically one instance of iROS OLT will manage multiple instances of iROS ONU. Communication between iROS OLT and iROS ONU occurs via the PON in band management channel.

Advantageously and according to the present invention the iROS software is fault tolerant when made part of the host system. Consequently there may be at least two instances of iROS SC running in the host system. In a representative implementation each iROS SC instance runs on a separate controller card in the host system. In such an implementation a single running iROS SC instance could fail caused by any of a variety of events e.g. controller card failure while other instances would remain operational. As a result such a system would operate correctly so long as at least one controller card remained operational.

As noted communication between the iROS SC and an iROS OLT may be conducted through the internal management infrastructure in the host system. Oftentimes such an internal management infrastructure comprises a switched Ethernet environment. For this purpose in a preferred embodiment each OLT device is advantageously equipped with at least two management i.e. Ethernet interfaces. As a result an individual instance of iROS OLT may interact with two iROS SC instances simultaneously.

The communications between an iROS OLT instance and an iROS ONU is preferably in band through Ethernet OAM frames and or vendor specific control frames. Under certain situations e.g. an ONU software upgrade iROS SC may need to exchange Ethernet frames directly with the ONU. In these cases iROS OLT serves as an internal gateway that forwards received frames to a desired destination within the iROS operating environment.

In a preferred embodiment the internal control frame between iROS components is built on a layer 3 structure. As a result when the control frame is received from an iROS SC an iROS OLT may simply forward the control frame rather than terminating it if it is destined for a remote iROS ONU. As can be readily appreciated by those skilled in the art this characteristic results from the control frame containing the destination information in the layer 3 structure. Such a structure further enhances overall system performance.

One underlying objective of the design of the iROS software is the ability to scale as new generations of OLT and ONU devices become available. As a result the iROS software system which is the subject of the instant application employs a generic system identification scheme as illustrated in . With reference to that there is shown two types of PON hardware devices namely an OLT device and an ONU device . As can be observed an OLT device according to the present invention includes three types of interfaces namely a Network Node Interface NNI a Passive Optical Network Interface PON and a Management Interface .

The Network Node Interface represents any uplinks toward the host system. As shown it may include a plurality of Network Node Interface NNI ports which are denoted in this as N N . . . N. In a preferred embodiment an NNI interface may support a number of interfaces for example 1 Gbps Ethernet or 10 Gbps Ethernet.

The PON interface comprises a number of PON ports which in are denoted as P P . . . P. Finally a Management interface is provided and shown in the as providing two separate management ports namely M and M. Advantageously by providing more than one management port a PON system constructed from such an OLT device may overcome a failure in one of the management ports and failover to the backup port s as required.

With continued reference to it is shown that a representative ONU device includes a number of interfaces including both a PON interface and a User Network Interface. The PON interface comprises a number of distinct ONU PON ports denoted in this as P P . . . Pm. Similarly the User Network Interface comprises a number of individual ports and are used to provide downlinks towards an end user of the PON. In this the UNI ports are designated as U U . . . Un. As implemented each ONU PON port is connected to a distinct OLT PON port in the same or different OLT device s . For a given PON port however it may advantageously support more than one LLID Logical Link Identifier .

As can be readily appreciated by those skilled in the art since the present invention supports more than one PON port it may advantageously provide redundant communication paths thereby providing fall back or fail safe operation during communication failure. Such capability is preferably provided via Automatic Protection Switching APS which is generally the capability of communications system in this case an EPON system to detect a failure on a working facility and to switch to a standby facility to recover the traffic. As can be appreciated such a capability has a profoundly positive effect on the overall system availability.

As an example and with initial reference to there are shown two ODN networks having one OLT device and N ONU devices. Each ODN has a fiber tree connecting ONU devices via an optical splitter. Each ONU device is connected to both ODN networks.

In the configuration as shown each ONU and OLT device has two PON ports respectively. A single PON port participates in one ODN operation. To survive a failure i.e. a fiber failure each device shown in is provided with both active and standby PON ports which are denoted as 0 and 1 respectively. Accordingly in the event of a fiber cut or other facility failure working traffic is switched to the standby PON port.

In a preferred embodiment there are two separate communication paths from an individual OLT device to an individual ONU. Advantageously these separate paths may be used to exchange protection switching information. To further provide facility protection against an OLT device failure according to the present invention an EPON system may be configured as shown in . As shown in that there are two OLT devices. In the event that one OLT device fails there is still a working path from the protection OLT to every ONU device.

From the perspective of system management and control there are three levels of control and management in a PON system namely device level PON port level and LLID level. At the device level for example it is important to be able to reset the device or perform a remote software upgrade. Examples of control and management at the PON port level may include optical parameters configurations and status information retrieval. Many operations of control and management are performed at the LLID level.

Returning now to the iROS application programming interface as show in that provides an abstraction of underlying management and control capability. Accordingly a host system and its associated PON applications will manage and control an PON via the iROS API interface. Advantageously this model according to the present invention allows the system to evolve transparently as changes occur in an internal PON system.

The function invocation model employed by the iROS API is based on asynchronous callbacks where there is a single callback for each function call. Accordingly completion of work associated with an API function call is not indicated by the return of the call but by the invocation of a separate completion callback function from the callee to the caller. Of particular advantage the present invention allows substantially more flexibility than alternatives in that a caller is not blocked waiting for the result. Consequently a greater degree of parallelism is achieved while still allowing synchronous behavior to be easily layered on top of the asynchronous callbacks if desired. Such an operational context is depicted in . The request is executed in the caller s context. The call back is performed in the callee s context.

Additionally and according to the present invention the iROS API is advantageously able to handle asynchronous events. Since all events are predefined each application which is interested in an event is required to register itself via the iROS API. The registration contains an event handler which is in turn executed by iROS when the event takes place. The event handler is somewhat similar to the call back function discussed earlier.

Turning our attention now to there it is shown the components comprising the iROS API. As shown the iSOS API comprises 

According to the present invention the iROS software is designed to support a chassis based host system having hot swap capabilities and high availability characteristics. As implemented in a preferred embodiment it is a plug and play technology that supports the dynamic registration of both OLT devices and ONU devices. A typical chassis based system constructed according to the present invention is illustrated in where the one shown has one system control card and multiple line cards.

As noted earlier the iROS SC software component integrated with the host system may advantageously be located in the system control card. Each line card may include one or more OLT device. Preferably each individual OLT device includes both a module identifier and a line card slot identifier. The module identifier identifies the relative position of the OLT in the line card when there is more than one such device in the same line card. The line card slot identifier uniquely identifies the physical position of the line card in a chassis based system.

As a result of these identifiers the above information may be obtained when the OLT device is inserted or otherwise enters into the system e.g. a line card insertion in the host system takes place. . Such characteristics greatly assist for example with system troubleshooting and hardware replacement. As can be appreciated any event that is generated by an OLT device will include the above information so that the host system can immediately identify the source of the event. Consequently an individual OLT device in the system according to the present invention is identified by a tuple .

The ability to dynamically detect the arrival and departure of an OLT device to from a large chassis system is of critical importance. Advantageously and according to the present invention such detection is performed via a Hello protocol.

In order to support the dynamic discovery iROS SC employs a well known multicast Ethernet address which allows any newly arrived OLT device to communicate. Accordingly at all times iROS SC listens for communications utilizing this multicast address. When a line card enters the system the OLT device will first read the information describing its module ID and slot ID which is reported to iROS SC during the initial communication.

Operationally the first task for an entering iROS OLT unit is to send a HELLO message to the known multicast Ethernet address announcing its arrival. This HELLO message is repeated at a prescribed time interval until it receives a response from an iROS SC instance in the system. The HELLO message includes the module ID and slot ID information and once an iROS SC receives this HELLO message it will echo back to the sending iSOS OLT. Once connected the iROS OLT will continue to send a HELLO message to the connected iROS SC at periodic intervals.

In addition the iROS SC periodically sends a HELLO message using another well known multicast address to advertise its capability. This multicast HELLO message is received by all iROS OLTs in the system. Once an iROS OLT receives the HELLO message from the iROS SC it too will echo back to the iROS SC. This back and forth process advantageously allows the establishment of bi directional peering between an iROS SC and any iROS OLT.

This HELLO protocol also provides a keep alive mechanism between an iROS OLT and iROS SC since the iROS SC and iROS OLT periodically exchanges the HELLO messages. As can be readily appreciated an iROS SC would detect the departure of an OLT device if that device does not respond to a transmitted HELLO message within a predetermined time interval.

In order to implement such a protocol there are two HELLO parameters which must be agreed upon by both the local and remote entities namely HelloInterval and HelloDeadInterval. In a preferred embodiment these parameters are exchanged in the initial HELLO message.

The HelloInterval parameter indicates how frequently HELLO messages will be sent in milliseconds ms . For example if the value were 150 then the transmitting entity would send a HELLO message at least every 150 ms.

The HelloDeadInterval indicates how long in milliseconds ms a device should wait to receive a HELLO message before declaring the connection dead. As can be readily appreciated the HelloDeadInterval value must be greater than the HelloInterval value and in a preferred embodiment is at least 3 times the value of HelloInterval.

In a large chassis system it is of critical importance to dynamically detect the arrival and departure of an ONU device. According to the present invention a first approach employs the known multipoint control protocol MPCP timeout. According to this protocol if an OLT device does not receive a regular report message from an ONU within a specified time interval the OLT device will declare the silent departure of the ONU device. This silent departure detection mechanism takes place in the data path.

Another approach to detect the arrival and departure of an ONU device to from the system according to the present invention employs the known OAM control protocol running between an iROS OLT and an iROS ONU. This protocol advantageously allows the establishment of a peering relationship between the iROS OLT and the iROS ONU. After the peering relationship has been established the iROS OLT periodically exchanges information messages with the iROS ONU. If the iROS OLT fails to receives a response message within a specified time interval the iROS OLT will declare the loss of the iROS ONU entity.

In a preferred embodiment the time interval necessary for a peer timeout is typically one second and advantageously this method of detection employs the control path to effect the communication. And while it takes a somewhat longer time in comparison with the data path detection described previously 450 ms vs. 1 second however it is capable of detecting the problems above the MAC layer such as software errors.

Those skilled in the art will readily appreciate that high availability is of critical importance with network infrastructure components systems. According to the present invention one aspect of high availability is realized as a result of two instances of iROS SC running on different system control cards as shown in . The role of one instance is active while the other is standby. The role of each instance is configured by the host system upon initialization. If there is a single system control card in the system then there will be only one iROS SC instance in the system. When a new system control card is added into the system during initialization the iROS SC instance running on the newly added system control card will be configured to the role of standby.

When employed with the dynamic discovery method described earlier and since a HELLO message sent from an iROS OLT uses a multicast address it will be received by two instances of iROS SC if they both are present in the host system. According to the present invention however only the active iROS SC will establish the peering relation with the iROS OLT.

As can now be appreciated by those skilled in the art the transition from standby to active role of an iROS SC instance either in a controlled or uncontrolled manner is a switchover . One example of a controlled switchover is the graceful shut down of an active system control card for maintenance purpose. An example of an uncontrolled switchover is a crash or other uncontrolled shutdown of an active system control card.

Of course one objective of a high reliability carrier class system which is the subject of the present invention is to provide non disruptive service and maintain an operational system in the event of iROS SC switchover. For instance it is critical that OLT and ONU devices will not require re registering again with the system when the switchover is taking place. This requirement is known as the non stop forwarding meaning that the PON system will continue to forward data traffic without interruption.

There are a number of approaches which may be employed to provide a carrier class high availability design according to the present invention. A first approach utilizes intelligent and stateful iROS SC implementations while any iROS OLT implementations remain stateless. With this approach two iROS SC instances remain synchronized all the time with respect to the state information such as the number of current registered OLTs and ONUs. In such a case a switchover is advantageously transparent to any iROS OLT instance in the system.

An alternative approach according to the present invention utilizes intelligent and stateful instances of iROS OLT while any iROS SC instances remain stateless. With this approach iROS OLT maintains the state information while iROS SC does not.

In the event of a switchover from an active to standby iROS SC instance the newly active iROS SC will retrieve the state information from all currently registered iROS OLTs. One benefit of this approach is that it will work in a situation where there is only one iROS SC instance in the system. While such a situation is not normal according to the present invention those skilled in the art will appreciate that an iSOS SC instance can temporarily be down for example during a power cycle and then return to operation after a short period of time. This approach requires that an iROS OLT instance maintain any necessary state information.

