---

title: Queuing of invocations for mobile web services
abstract: Methods and apparatuses for communications between web service applications and web services are described. A first interface is coupled between the application and a messaging system. A second interface is coupled between the messaging system and the web service. The first interface is configured to receive a web service request from the application, to format the web service request into a Simple Object Access Protocol (SOAP) request message, to include the SOAP request message in a first electronic message, and to transmit the first electronic message to the messaging system. The messaging system is configured to receive the first electronic message at a first node, to transmit the first electronic message across a communications network to a second node, and to couple the first electronic message from the second node to the second interface. The second interface is configured to receive the first electronic message from the messaging system, to extract the SOAP request message from the first electronic message, and to transmit the SOAP request message to the web service. Furthermore, a web service response is returned from the web service through the second interface, messaging system, and first interface, to the web service application.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08200845&OS=08200845&RS=08200845
owner: iAnywhere Solutions, Inc.
number: 08200845
owner_city: Dublin
owner_country: US
publication_date: 20061219
---
The present invention relates to web services and more particularly to communications between web services and mobile devices.

Web services provide a standard means of interoperating between different software applications that run on a variety of platforms and or frameworks. See Web Services Architecture W3C Working Group Note 11 February 2004. Entities communicate with web services over a network such as the Internet to access the resources provided by the web service. The entities and the web service exchange messages over the network.

An entity may attempt to initiate a communication with a web service when the web service is not accessible. For example the web service may not be accessible because the web service website is currently down the entity is operating in an offline not Internet connected mode the network connection between the entity and web service is currently down or for other reason. Typically if communication with the web service is not possible at a particular time the entity must re attempt to communicate with the web service at a later time. However such a delay in communication with the web service may be undesirable to the entity. For example it may be time consuming and resource intensive for the entity to have to repeat attempts at communications with the web service until the communication successfully occurs.

Thus what is needed are ways of efficiently communicating with web services in environments where the web services may not be continuously accessible such as in unreliable communications environments.

Methods systems and apparatuses are provided for web service applications to invoke web services over communications networks in the face of inconsistent connectivity.

In an aspect of the present invention a web service interface is provided to interface the web service application with the web service. In an example aspect the web service interface is a messaging system.

In aspects of the present invention a method and system for communicating between web service applications and web services is provided. A first interface is coupled between the application and a messaging system. A second interface is coupled between the messaging system and the web service. The first interface is configured to receive a web service request from the application to format the web service request into a Simple Object Access Protocol SOAP request message to include the SOAP request message in a first electronic message and to provide the first electronic message to the messaging system. The messaging system is configured to receive the first electronic message at a first node to transmit the first electronic message across a communications network to a second node and to couple the first electronic message from the second node to the second interface. The second interface is configured to receive the first electronic message from the messaging system to extract the SOAP request message from the first electronic message and to transmit the SOAP request message to the web service.

In a further aspect the second interface is configured to receive a web service response from the web service the web service response including a SOAP response message. The second interface is configured to include the SOAP response message in a second electronic message and to provide the second electronic message to the messaging system. The messaging system is configured to receive the second electronic message at the second node to transmit the second electronic message across the communications network to the first node and to provide the second electronic message from the first node to the first interface. The first interface is configured to receive the second electronic message from the messaging system to extract the SOAP response message from the second electronic message to decode the SOAP response message into response information and to transmit the response information to the web service application.

In aspects the communications network may provide an occasional intermittent connection. However according to aspects of the present invention the web service application may still invoke the web service without having to repeat the invocation due to communication network outages.

In another aspect of the present invention an interface is provided between a web service application and a messaging system. The interface includes a SOAP request generator and a message generator. The SOAP request generator is configured to receive a web service request from the application and to format the web service request into a SOAP request message. The message generator is configured to generate a first electronic message that includes the SOAP request message. The first electronic message is transmitted through the messaging system.

In an aspect the interface between the web service application and the messaging system further includes a SOAP response extractor and a SOAP decoder. The SOAP response extractor is configured to extract a SOAP response message from a second electronic message received from the messaging system. The SOAP decoder is configured to decode the SOAP response message into response information.

In another aspect of the present invention an interface between a messaging system and a web service is provided. The interface includes a SOAP request extractor and a network interface module. The SOAP request extractor is configured to extract a SOAP request message from a first electronic message received from the messaging system. The network interface module is configured to transmit the SOAP request message to the web service according to a network protocol such as Hypertext Transfer Protocol HTTP .

In an aspect the interface between the messaging system and the web service further includes a message generator. The message generator is configured to include a SOAP response message received from the web service in a second electronic message. The interface is further configured to transmit the second electronic message to the messaging system.

These and other advantages and features will become readily apparent in view of the following detailed description of the invention. Note that the Summary and Abstract sections may set forth one or more but not all exemplary embodiments of the present invention as contemplated by the inventor s .

The present invention will now be described with reference to the accompanying drawings. In the drawings like reference numbers indicate identical or functionally similar elements. Additionally the left most digit s of a reference number identifies the drawing in which the reference number first appears.

The present specification discloses one or more embodiments that incorporate the features of the invention. The disclosed embodiment s merely exemplify the invention. The scope of the invention is not limited to the disclosed embodiment s . The invention is defined by the claims appended hereto.

References in the specification to one embodiment an embodiment an example embodiment etc. indicate that the embodiment described may include a particular feature structure or characteristic but every embodiment may not necessarily include the particular feature structure or characteristic. Moreover such phrases are not necessarily referring to the same embodiment. Further when a particular feature structure or characteristic is described in connection with an embodiment it is submitted that it is within the knowledge of one skilled in the art to affect such feature structure or characteristic in connection with other embodiments whether or not explicitly described.

Methods systems and apparatuses are described below for communications between an application and a web service. The example embodiments described herein are provided for illustrative purposes and are not limiting. Further structural and operational embodiments including modifications alterations will become apparent to persons skilled in the relevant art s from the teachings herein.

Web services provide a standard means of interoperating between different software applications that run on a variety of platforms and or frameworks. See Web Services Architecture W3C Working Group Note 11 February 2004 hereinafter the Working Group which is incorporated by reference herein in its entirety. A web service is generally a software system operating on a server that enables machine to machine interaction enabling a web service application operating in a computer system to access the functionality of the web service.

For example shows a web service communications system where a web service application communicates with a web service over communications network . Web service application resides in a computer system . Web service resides in a server . Web service provides a web service description which is a machine processable specification of an interface provided by web service . Web service description is typically written in Web Service Description Language WSDL . Web service application communicates with web service in a manner dictated by web service description in messages formatted according to Service Oriented Architecture Protocol SOAP .

For example shows web service application transmitting a SOAP request over communications network to web service . SOAP request specifies methods functions of web service and corresponding arguments parameters. Web service processes SOAP request including performing the specified methods functions using the corresponding arguments parameters and transmits a SOAP response to web service application over communications network . SOAP response includes results corresponding to the queries of SOAP request .

SOAP messages are typically conveyed over communications network using a variety of network protocols including HTTP SMTP FTP RMI IIOP etc. Communications network may include any type of communications network including a local area network LAN or wide area network WAN such as the Internet. As shown in communication network may provide an occasional connection between web service application and web service for reasons well known to persons skilled in the relevant art s . For example communications network may suffer occasional network outages. In another example web service itself may periodically go offline such that an occasional connection exists between web service application and web service . In still another example as shown in computer system in which web service application resides is a mobile device that is configured to operate in an online or offline mode. In an offline mode mobile device is decoupled from communications network . In examples mobile device may be a mobile computing device such as a PALM device a BLACKBERRY device a laptop computer a personal digital assistant PDA a cell phone etc.

An occasional connection between web service application and web service as indicated in is undesirable. Conventionally when web service application is not able to communicate with web service at a given time web service application must wait until a later time to reattempt to send SOAP request which may waste time resources opportunities etc. as is typical in a polling architecture.

For example in an embodiment a conventionally available or proprietary messaging system may be used for web service communications system . shows an example embodiment for web service communications system where web service interface is a messaging system . Messaging system is configured to transmit messages across communications network . Messaging system is used by web service application to transmit SOAP request to web service and is used by web service to transmit SOAP response to web service application . Messaging system enables transmission of such messages even in the presence of communications network which provides an occasional connection. In embodiments messaging system may include a variety of proprietary or conventional messaging systems protocols such as Java Message Service JMS Post Office Protocol POP Internet Message Access Protocol IMAP or other systems protocols.

Electronic message is transmitted from first interface to messaging system . Messaging system transmits electronic message to second interface through communications network in a manner normally provided by messaging system . For example if electronic message is an email messaging system transmits electronic message as an email to second interface .

Second interface is configured to receive electronic message from messaging system to extract the SOAP request message from electronic message and to transmit the SOAP request message to web service as SOAP request . Second interface transmits SOAP request to web service according to HTTP or other protocol mentioned elsewhere herein or otherwise known or future developed. For example in an embodiment second interface transmits SOAP request to web service in a manner conventionally used by web service application to communicate directly with web service .

Web service generates a web service response to SOAP request which includes a SOAP response message shown as SOAP response in . Second interface receives SOAP response and includes SOAP response in a second electronic message . Second interface generates second electronic message in a message format typically carried by messaging system such as an email. SOAP response may be included in second electronic message in any manner included as an attachment e.g. an email attachment in the body of second electronic message e.g. as text binary and or encrypted form or in any other manner as would be known to persons skilled in the relevant art s .

Second electronic message is transmitted by second interface to messaging system . Messaging system transmits second electronic message to first interface through communications network in a manner normally provided by messaging system . For example if messaging system is an email delivery system and second electronic message is an email messaging system transmits second electronic message as an email to first interface .

First interface receives second electronic message from messaging system . First interface extracts the SOAP response message from second electronic message and decodes the SOAP response message into response information. First interface transmits the response information to web service application .

In step the web service request is formatted into a Simple Object Access Protocol SOAP request message. shows an example embodiment for first interface . In the embodiment of first interface includes a SOAP request generator and a message generator . SOAP request generator receives web service request and formats web service request into a SOAP request message . For example web service request provides web service methods and corresponding arguments which SOAP request generator formats into a SOAP message as would be known to persons skilled in the relevant art s .

In step a first electronic message is generated that includes the SOAP request message. For example message generator of receives SOAP request message and generates first electronic message which includes SOAP request message . First interface transmits first electronic message to messaging system as shown in .

First interface including SOAP request generator and or message generator may be implemented in hardware software firmware or any combination thereof. For example first interface may be implemented as an application programming interface API as would be known to persons skilled in the relevant art s . In such an embodiment web service request may be received by first interface as an API function call.

In step the first electronic message is transmitted to the messaging system which transmits the first electronic message across a communications network. As described above messaging system can be any type of messaging system. Example embodiments for messaging system are further described below.

In step the first electronic message is received from the message system. For example as shown in first electronic message is received by second interface from messaging system .

In step the SOAP request message is extracted from the first electronic message. shows an example embodiment for second interface . In the embodiment of second interface includes a SOAP request extractor and a network interface module . SOAP request extractor extracts SOAP request message from first electronic message . For example if first electronic message is an email message SOAP request message may be extracted from the body of first electronic message from an attachment of first electronic message or in another manner.

In step the SOAP request message is transmitted to the web service. For example network interface module receives SOAP message and transmits SOAP request message to web service as SOAP request . Network interface module can be configured to transmit SOAP request according to any network protocol including those described elsewhere herein or otherwise known. For example in an embodiment the SOAP request is transmitted by network interface module according to HTTP.

Second interface including SOAP request extractor and or network interface module may be implemented in hardware software firmware or any combination thereof. For example second interface may be implemented as an application programming interface API as would be known to persons skilled in the relevant art s . In another example network interface module may be a standard or special purpose network interface for interfacing with a communication link including a LAN or WAN network. Example network interfaces are described further below.

In step a second electronic message is generated that includes the SOAP response message. For example as shown in second interface may include a message generator . Message generator receives SOAP response and includes the SOAP message of SOAP response in second electronic message in a manner described elsewhere herein or otherwise known. Second interface transmits second electronic message to messaging system .

As described above for second interface message generator may be implemented in hardware software firmware or any combination thereof. For example message generator may be implemented as an application programming interface API as would be known to persons skilled in the relevant art s .

In step the second electronic message is transmitted to the messaging system where the messaging system is configured to transmit the second electronic message across the communications network.

In step the second electronic message is received from the messaging system. For example as shown in second electronic message is received by first interface from messaging system .

In step the SOAP response message is extracted from the second electronic message. For example as shown in first interface may include a SOAP response extractor and a SOAP decoder according to an embodiment of the present invention. SOAP response extractor extracts the SOAP response message of SOAP response from second electronic message . For example if second electronic message is an email message SOAP response may be extracted from the body of second electronic message from an attachment of second electronic message or in other manner.

In step the SOAP response message is decoded into response information. For example as shown in SOAP decoder receives the extracted SOAP response from SOAP response extractor . SOAP decoder decodes the extracted SOAP response into response information . SOAP decoder may be configured to decode a SOAP response into response information in any suitable manner as would be understood by persons skilled in the relevant art s .

As described above for first interface SOAP response extractor and or SOAP decoder may be implemented in hardware software firmware or any combination thereof. For example SOAP response extractor and or SOAP decoder may be implemented as an application programming interface API as would be known to persons skilled in the relevant art s .

In step the response information is transmitted to the web service application. wherein the interface is configured to transmit the response information to the web service application. For example as shown in response information is transmitted to web service application by first interface . Response information includes results of the web service invocation that may be used by web service application .

As described above a variety of messaging systems may be used for messaging system . For example shows a messaging system that may be used for messaging system according to an embodiment of the present invention. As shown in messaging system includes first and second nodes and . First and second nodes and are configured to communicate with each other across a communication network which is an example of communication network . Thus communication network may be occasionally intermittently connected between first and second nodes and . First and second nodes and enable messages to be sent across messaging system despite the intermittent connection. First and second nodes and are typically located on separate computer systems. An example of communication network is the Internet.

First node includes a first message delivery module and a first message store . Second node includes a second message delivery module and a second message store . First message delivery module is coupled to first message store and is coupled to first interface by communication link and second message delivery module is coupled to second message store and is coupled to second interface by communication link .

In step the communications network is monitored from the first node for connectivity to the second node. For example first message delivery module may monitor communications network for connectivity to second node . If connectivity is not detected by first message delivery module first electronic message remains queued in first message store . If connectivity is detected by first message delivery module first message delivery module may read first electronic message from first message store for delivery. Such network monitoring may be performed in a manner well known to persons skilled in the relevant art s .

In step the first electronic message is transmitted across the communications network to the second node after the connectivity is detected. For example when connectivity is detected by first message delivery module first message delivery module may transmit first electronic message across communications network to second node .

Note that in an embodiment web service application first interface and a portion of messaging system reside in a common device such as a computer server or mobile device such as mobile device shown in . For example in a mobile device embodiment first message store and first message delivery module may reside at least partially in a mobile device with web service application and first interface . First message delivery module may be used to perform message synchronization operations for the mobile device over communications network . Alternatively first message store and first message delivery module may reside in one or more separate devices from web service application and first interface .

In step the communications network is monitored from the second node for connectivity to the first node. For example second message delivery module may monitor communications network for connectivity to first node . If connectivity is not detected by second message delivery module second electronic message remains queued in second message store . If connectivity is detected by second message delivery module second message delivery module may read second electronic message from second message store for delivery.

In step the second electronic message is transmitted across the communications network to the first node after the connectivity is detected. For example when connectivity is detected by second message delivery module second message delivery module may transmit second electronic message across communications network to first node .

Systems suitable for first and second delivery modules and and first and second message stores and are well known to persons skilled in the relevant art s . First and second delivery modules and may be implemented in hardware software firmware or in any combination thereof.

Note that connectivity between second interface and web service may not always be present and thus step of flowchart may need to be delayed. shows a system for queuing communications with web service at second interface according to an example embodiment of the present invention. shows a flowchart providing example steps for queuing communications with a web service according to an embodiment of the present invention. According to second interface queues SOAP request prior to providing it to web service . This may be necessary if web service is currently down if communication link between second interface and web service is currently down or for other reason.

In step a communication network between the interface and the web service is monitored for connectivity. For example network interface module of of second interface may monitor communications network for connectivity to web service .

In step the SOAP request message is queued until connectivity is detected. If connectivity is not detected SOAP request may be queued in second message store or other storage which may be coupled to second interface in an embodiment. For example in an embodiment second node and second interface may reside in the same or closely associated computer systems. If connectivity is detected by network interface module second interface may read SOAP request from second message store for delivery to web service . Thus after connectivity is detected step of flowchart may be performed.

As described above a variety of messaging systems are suitable for messaging system . For example in an embodiment the QAnywhere messaging system developed by iAnywhere Solutions Inc. of Waterloo Calif. may be used for messaging system . For example shows a web service communications system that incorporates QAnywhere messaging system for messaging system . Furthermore system includes an iAnywhere Web Service module for first interface and a web service connector for second interface both developed by iAnywhere Solutions Inc.

In an embodiment of the present invention the system and components of the present invention described herein are implemented using well known servers computers such as computer shown in . For example computer system and server shown in can be implemented using computers .

The computer can be any commercially available and well known computer capable of performing the functions described herein such as computers available from International Business Machines Apple Sun HP Dell Compaq Digital Cray etc.

The computer includes one or more processors also called central processing units or CPUs such as a processor . The processor is connected to a communication bus .

The computer also includes a main or primary memory such as random access memory RAM . The primary memory has stored therein control logic A computer software and data.

The computer also includes one or more secondary storage devices . The secondary storage devices include for example a hard disk drive and or a removable storage device or drive as well as other types of storage devices such as memory cards and memory sticks. The removable storage drive represents a floppy disk drive a magnetic tape drive a compact disk drive an optical storage device tape backup etc.

The removable storage drive interacts with a removable storage unit . The removable storage unit includes a computer useable or readable storage medium having stored therein computer software B control logic and or data. Removable storage unit represents a floppy disk magnetic tape compact disk DVD optical storage disk or any other computer data storage device. The removable storage drive reads from and or writes to the removable storage unit in a well known manner.

The computer also includes input output display devices such as monitors keyboards pointing devices etc.

The computer further includes a communication or network interface . The network interface enables the computer to communicate with remote devices. For example the network interface allows the computer to communicate over communication networks or mediums B representing a form of a computer useable or readable medium such as LANs WANs the Internet etc. The network interface may interface with remote sites or networks via wired or wireless connections.

Control logic C may be transmitted to and from the computer via the communication medium B. More particularly the computer may receive and transmit carrier waves electromagnetic signals modulated with control logic via the communication medium B.

Any apparatus or manufacture comprising a computer useable or readable medium having control logic software stored therein is referred to herein as a computer program product or program storage device. This includes but is not limited to the computer the main memory the secondary storage devices the removable storage unit and the carrier waves modulated with control logic . Such computer program products having control logic stored therein that when executed by one or more data processing devices cause such data processing devices to operate as described herein represent embodiments of the invention.

The invention can work with software hardware and or operating system implementations other than those described herein. Any software hardware and operating system implementations suitable for performing the functions described herein can be used.

While various embodiments of the present invention have been described above it should be understood that they have been presented by way of example only and not limitation. It will be apparent to persons skilled in the relevant art that various changes in form and detail can be made therein without departing from the spirit and scope of the invention. Thus the breadth and scope of the present invention should not be limited by any of the above described exemplary embodiments but should be defined only in accordance with the following claims and their equivalents.

