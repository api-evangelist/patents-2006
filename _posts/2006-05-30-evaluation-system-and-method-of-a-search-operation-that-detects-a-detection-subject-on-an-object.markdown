---

title: Evaluation system and method of a search operation that detects a detection subject on an object
abstract: First, an operator inputs various parameters required for a mark recognition operation including a designated position coordinate designated via a mouse and a keyboard (step ). Then, an edge potential position closest to the designated position is selected (step ), or an edge potential position within a predetermined range having the designated position as a datum is selected (step ), and a mark recognition operation is performed at the selected edge potential position (step ). The recognition results are shown on a display (step ).
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07838858&OS=07838858&RS=07838858
owner: Nikon Corporation
number: 07838858
owner_city: Tokyo
owner_country: JP
publication_date: 20060530
---
This non provisional application claims the benefit of Provisional Application No. 60 722 473 filed Oct. 3 2005 the disclosure of which is hereby incorporated herein by reference in its entirety.

The present invention relates to evaluation systems and evaluation methods and more particularly to an evaluation system and an evaluation method that obtains a photoelectric conversion signal by photoelectrically detecting an area subject to detection which includes a detection subject on an object and evaluates a search operation of the detection subject that uses the photoelectric conversion signal.

Recently in a process of manufacturing devices such as semiconductor devices exposure apparatuses by a step and repeat method or a step and scan method wafer probers laser repair apparatuses or the like are used. In these apparatuses each of a plurality of shot areas arranged on a substrate need to be positioned aligned extremely precisely with a predetermined datum point e.g. a processing operation point of each apparatus in a stationary coordinate system that sets a moving position of the substrate an orthogonal coordinate system that sets a position coordinate of a stage holding the substrate that is a stage coordinate system .

In an exposure apparatus in particular 10 or more layers of circuit patterns reticle patterns are overlaid and transferred onto a substrate hereinafter referred to as wafer and in the case the overlay accuracy between layers is poor inconveniences may arise in the quality of the circuit. In such a case the chip does not satisfy a desired quality and the chip becomes defective in the worst case which reduces the yield. Accordingly in the exposure apparatus an alignment mark is arranged in advance in each of a plurality of shot areas areas where circuit patterns are transferred on a wafer and a position coordinate of the alignment mark in a stage coordinate system that sets movement of a stage holding the wafer is detected. After that wafer alignment is performed in which an individual shot area on the wafer is aligned with a reticle pattern based on a positional relation measured beforehand between the position coordinate of the mark and the known reticle pattern.

In the wafer alignment a waveform data that represents photoelectric conversion signals corresponding to areas on the wafer including the alignment marks is obtained and in the obtained waveform data a section corresponding to the alignment marks are searched for and the positions where it is recognized that the alignment marks exist are detected as the position coordinates of the alignment marks in the stage coordinate system.

More specifically by searching the waveform data several positions potential positions are extracted that are highly likely to be positions of the alignment marks from the waveform data based on characteristics of the alignment marks and the correlativity between a template waveform when matching the template waveform of the mark with each of a plurality of potential positions and the waveform data corresponding to the template waveform is obtained. Based on the correlativity the judgment is made of whether the marks could be recognized or not and out of the positions where it is judged that the marks were recognized the position where the correlativity is highest is detected as the position of the mark.

Meanwhile in the case the waveform data is searched and the above correlativity is equal to or less than a predetermined level at all the potential positions a so called mark detection error is generated since the marks could not be recognized. As the causes for not being able to recognize the marks at any potential position various causes can be considered. For example it is a matter of course that the marks cannot be recognized at times due to a noise component included in the waveform data however the case can also be considered where values of processing parameters that set a mark recognition operation such as a design value of a mark width required for performing the mark recognition operation are not appropriately set. In this case by re setting the processing parameters to the appropriate values the position of the mark can be searched for without generating unnecessary mark detection errors.

From the point of view as described above the necessity is increasing for an environment where analysis and evaluation of the mark search operation with respect to the waveform data is performed so that the cause of not being able to recognize the marks can be specified and the processing parameters can be adjusted. However due to the large number of the above processing parameters existing it is difficult to make the setting values of the processing parameters be appropriate if the processing parameters are randomly adjusted and it also requires time.

The present invention has been made in consideration of the circumstances described above and has as its first object to provide an evaluation system that evaluates a search operation of a detection subject using a photoelectric conversion signal which is detected so as to correspond to an area including the detection subject.

In addition the second object of the present invention is to provide an evaluation method in which a search operation of a detection subject using a photoelectric conversion signal detected so as to correspond to an area including the detection subject is evaluated.

According to the first aspect of the present invention there is provided an evaluation system that obtains a photoelectric conversion signal by photoelectrically detecting an area to be detected including a detection subject on an object and evaluates a search operation of the detection subject that uses the photoelectric conversion signal the system comprising an obtaining unit that obtains results of detection of the detection subject that uses the photoelectric conversion signal in the case the detection subject is assumed to be located at any potential position among a plurality of potential positions within the area to be detected that are a potential for a position of the detection subject a specifying unit that specifies at least one potential position from among the plurality of potential positions based on specifying information used to specify a potential position of the detection subject and an evaluating unit that evaluates a search operation of the detection subject that uses the photoelectric conversion signal based on the results of detection obtained by the obtaining unit assuming that the detection subject is located in the at least one potential position specified by the specifying unit.

Because the evaluation system comprises the obtaining unit that obtains the detection results of the detection subject in at least one of any potential positions the specifying unit specifies at least one potential position from among a plurality of potential positions which makes it possible to obtain the results of detection of the detection subject at the specified potential position and to evaluate the search operation of the detection subject that uses the photoelectric conversion signal based on the obtained results of detection.

According to the second aspect of the present invention there is provided an evaluation method in which a photoelectric conversion signal is obtained by photoelectrically detecting an area to be detected including a detection subject on an object and a search operation of the detection subject using the photoelectric conversion signal is evaluated the method comprising specifying at least one potential position where results of detection of the detection subject that uses the photoelectric conversion signal are obtained from among a plurality of potential positions within the area to be detected that are candidates for a position of the detection subject obtaining results of detection of the detection subject that uses the photoelectric conversion signal in the at least one potential position specified in the specifying and evaluating a search operation of the detection subject that uses the photoelectric conversion signal based on the results of detection obtained in the obtaining.

With the method in the specifying process at least one potential position where the detection results of the detection subject are obtained is specified based on the specifying information used to specify a potential position of the detection subject on the object and in the obtaining process the detection results of the detection subject that uses a photoelectric conversion signal is obtained in the case the detection subject is assumed to be located at the specified potential position. In this manner the detection results of the detection subject can be obtained in at least one of any potential positions specified based on the specifying information and in the evaluating process a search operation of the detection subject using the photoelectric conversion signal can be evaluated based on the detection results that have been obtained.

A first embodiment of the present invention will be described below with reference to . shows an entire configuration of an exposure apparatus that can suitably implement the evaluation method related to the first embodiment of the present invention. Exposure apparatus comprises an illumination system a reticle stage RST holding a reticle R a projection optical system PL a wafer stage WST on which a wafer W is mounted a main controller that performs overall control over the exposure apparatus and the like. Exposure apparatus is a scanning exposure apparatus.

As disclosed in for example Kokai Japanese Unexamined Patent Application Publication No. 2001 313250 the corresponding U.S. Patent Application Publication No. 2003 0025890 and the like illumination system is configured including a light source an illuminance uniformity optical system containing an optical integrator a relay lens a variable ND filter a reticle blind also called as a masking blade a dichroic mirror and the like none of which are shown . The above disclosures of the publication and the U.S. Patent Application Publication are incorporated herein by reference. Illumination system illuminates a slit shaped illumination area set by the reticle blind on reticle R where the circuit pattern or the like is fabricated by an illumination light IL with substantially uniform illuminance.

As illumination light IL far ultraviolet light such as the KrF excimer laser beam wavelength 248 nm vacuum ultraviolet light such as the ArF excimer laser beam wavelength 193 nm or the Flaser beam wavelength 157 nm or the like is used. As illumination light IL bright lines in the ultraviolet region generated by an ultra high pressure mercury lamp such as the g line or the i line can also be used. Further as the optical integrator a fly eye lens a rod integrator an internal reflection type integrator a diffraction optical element or the like is used.

On reticle stage RST reticle R is fixed for example by vacuum suction. Reticle stage RST is structured finely drivable in an XY plane perpendicular to an optical axis of illumination system coinciding with an optical axis AX of projection optical system PL which will be described later by for example a reticle stage drive section not shown that includes parts such as a linear motor and is structured also drivable in a predetermined scanning direction in this case a Y axis direction which is the lateral direction of the page surface in at a designated scanning speed.

The position of reticle stage RST within the reticle stage movement plane is constantly detected by a reticle laser interferometer hereinafter referred to as reticle interferometer via a movable mirror at a resolution of for example around 0.5 to 1 nm. Position information of reticle stages RST from reticle interferometer is supplied to a stage controller and to main controller via stage controller . In response to instructions from main controller stage controller drives and controls reticle stage RST via the reticle stage drive section omitted in the drawings based on the position information of reticle stage RST. Incidentally a pair of reticle alignment systems not shown is arranged above reticle R. The configuration of the pair of reticle alignment systems is disclosed in for example Kokai Japanese Unexamined Patent Application Publication No. 07 176468 and the corresponding U.S. Pat. No. 5 646 413 and the like and therefore the detailed description is omitted here. The above disclosures of the publication and the U.S. Patent are incorporated herein by reference.

Projection optical system PL is arranged below reticle stage RST in and the direction of optical axis AX of projection optical system PL is a Z axis direction. As projection optical system PL for example a both side telecentric reduction system is used. The projection magnification of projection optical system PL is for example or the like. Therefore when reticle R is illuminated with illumination light IL from illumination system by illumination light IL passing through reticle R a reduced image a partial image of a circuit pattern of reticle R within an irradiation area the illumination area described earlier of the illumination light is formed on wafer W whose surface is coated with a resist a photosensitive agent via projection optical system PL.

Wafer stage WST is arranged on a base not shown below projection optical system PL in and is configured to be driven in the Y axis direction and an X axis direction an orthogonal direction of the page surface in orthogonal to the Y axis direction in predetermined strokes by a wafer stage drive section including parts such as a liner motor and to be finely drivable in the Z axis direction a x direction a rotation direction around the X axis a y direction a rotation direction around the Y axis and a z direction a rotation direction around the Z axis . On wafer stages WST wafer holder is mounted and wafer W is fixed on wafer holder by for example vacuum suction or the like.

The position of wafer stage WST within the XY plane is constantly detected by a wafer interferometer via a movable mirror arranged on the upper surface of wafer stage WST at a resolution of for example around 0.5 to 1 nm. In other words in the first embodiment a stationary coordinate system an orthogonal coordinate system that sets a moving position of wafer stages WST is set by the measurement axes of the Y interferometer and the X interferometer of wafer interferometer . In the following description the stationary coordinate system is also referred to as a stage coordinate system. Position information or velocity information of wafer stage WST in the stage coordinate system is supplied to stage controller and main controller via stage controller . According to instructions of main controller stage controller controls wafer stage WST via wafer stage drive section based on the position information or velocity information above of wafer stage WST.

Further a fiducial mark plate FM is fixed in the vicinity of wafer W on wafer stage WST. The surface of fiducial mark plate FM is set to the same height as the surface of wafer W and on the surface of the fiducial mark plate FM a fiducial mark for baseline measurement of an alignment system which will be described later a fiducial mark for reticle alignment and other fiducial marks are formed.

Further on a side surface of projection optical system PL an alignment system AS by an off axis method is fixed. Alignment system AS has two types of alignment sensors an LSA Laser Step Alignment system and an FIA Field Image Alignment system and can measure the positions in the X and Y two dimensional directions of the fiducial marks on fiducial mark plate FM and the alignment marks on the wafer. The LSA system is the most versatile sensor that irradiates a mark with a laser beam and measures a mark position using a diffracted or scattered beam. And the FIA system is a sensor that illuminates a mark with a broadband light such as a halogen lamp and measures a mark position by performing an image processing of a mark image. Since details on alignment system AS having the configuration as is described above are disclosed in for example Kokai Japanese Unexamined Patent Application Publication No. 07 321028 and the like a detailed description is omitted here. The above disclosure of the publication is incorporated herein by reference.

Further in exposure apparatus a multiple focal point detection system based on an oblique method is fixed to a support section omitted in the drawings that supports projection optical system PL. The multiple focal point detection system is made up of an irradiation optical system not shown that supplies an image forming beam for forming a plurality of slit images toward the best image forming plane of projection optical system PL from an oblique direction with respect to an optical axis AX direction and a photodetection optical system not shown that receives each image forming beam reflected off the surface of wafer W via each slit. As the multiple focal point detection system a system having a similar configuration to the one disclosed in for example Kokai Japanese Unexamined Patent Application Publication No. 06 283403 the corresponding U.S. Pat. No. 5 448 332 or the like is used and based on wafer position information from the multiple focal point detection system stage controller performs focus leveling control of wafer W by finely driving wafer stage WST in the Z axis direction and gradient directions the x direction and the y direction via wafer stage drive section . The above disclosures of the publication and the U.S. Patent are incorporated herein by reference.

Stage controller performs a position control operation and the like of wafer stage WST and reticle stage RST under instructions of main controller .

Main controller is configured including a microcomputer or a workstation and performs overall control over components of the exposure apparatus. Main controller comprises a CPU that runs various programs for controlling operations of the exposure apparatus as well as an internal memory that stores the programs and various data and the like none of which are shown . In addition main controller is connected to a storage unit and can read and write data with respect to storage unit . Furthermore main controller can send receive data to from a personal computer PC via a communication network such as a LAN Local Area Network .

PC is configured including a computer main body hereinafter shortly referred to as a PC main body P and a display D. PC is configured using a personal computer that operates under a predetermined operating system hereinafter shortly referred to as an OS which supplies an operator with a graphic user interface hereinafter shortly referred to as a GUI environment operable by a pointing device such as a mouse.

PC main body P has a microprocessor and a memory none of which are shown a keyboard K a keyboard interface a keyboard controller for connecting a mouse M a video interface for connecting display D a serial interface a hard disk a communication interface for supplying a communication network communicable with main controller of exposure apparatus and the like. And to PC main body keyboard K and mouse M serving as an input device and display D are connected. Further in PC main body P an application software hereinafter shortly referred to as an application for performing analysis and evaluation to a mark recognition operation described later performed in exposure apparatus is installed. The applications ends receives data files to from main controller constituting at least a part of exposure apparatus via the communication network for example under FTP File Transfer Protocol .

Incidentally PC does not have to be a personal computer and may be an exclusive board that realizes a human machine interface of exposure apparatus .

Next a series of exposure operations in exposure apparatus will be described. The exposure operations are performed under the control of main controller . As a premise exposure of one or more layers of wafer W subject to exposure has been completed and a plurality of shot areas SAas shown in have been formed on wafer W.

First reticle R where a circuit pattern subject to transfer is formed is loaded on reticle stage RST by a reticle loader not shown . Then main controller drives and controls wafer stage WST via stage controller and wafer stage drive section and after performing preparatory operations such as reticle alignment and baseline measurement using detection systems such as a reticle alignment detection system not shown and alignment system AS wafer W subject to exposure is loaded on wafer stage WST by a wafer loader not shown .

Next main controller performs search alignment using alignment system AS. As is shown in in at least two points on wafer W marks that can be observed with a low magnification so called search alignment marks hereinafter shortly referred to as searchmarks SYM and S M are arranged. Main controller gives a target position of wafer stage WST a target position based on design position coordinates of search marks SYM and S M and the like to stage controller in order to sequentially locate each search mark within a detection field of alignment system AS. Stage controller sequentially aligns wafer stage WST via wafer stage drive section in accordance with the target position. Every time when performing the alignment main controller makes alignment system AS detect a photoelectric conversion signal that corresponds to an area including one of search marks SYM and S M and obtains the photoelectric conversion signal. Main controller searches for marks within a waveform data using the photoelectric conversion signal and computes position information of search marks SYM and S M based on the search results. Since search marks SYM and S M are marks that are transferred and formed in a state where a positional relation between the search marks and shot areas SAhas become fixed when shot areas SAare transferred and formed search marks SYM and S M are formed according to an arrangement coordinate system an coordinate system in that sets the arrangement of shot areas SA. Main controller computes a rotation component and an offset component of the arrangement coordinate system of shot areas SAof the wafer with respect to the stage coordinate system from the detected positions of search marks SYM and S M.

Next main controller performs wafer alignment. As is shown in among a plurality of shot areas SAthat have been already formed on wafer W circular shaped marks appear in the center of eight shot areas SAand the circular shaped marks represent that eight shot areas SAare sample shot areas whose position coordinates are to be measured in the wafer alignment. Main controller gives a target position of wafer stage WST to stage controller so that fine alignment marks hereinafter shortly referred to as wafer marks MXand MY which are arranged along in sample shot areas SAcorresponding to a center Cof sample shot areas SAaccording to the arrangement coordinate system whose components have been obtained in the search alignment are sequentially located within the detection field of alignment system AS. Stage controller aligns wafer stage WST via wafer stage drive section in accordance with the target position. Every time when performing the alignment main controller makes alignment system AS obtain a photoelectric conversion signal that is detected so as to correspond to an area including wafer marks MXand MYon the wafer performs a mark search operation to search for wafer marks MXand MYusing a waveform data based on the photoelectric conversion signal and detects position information of wafer marks MXand MYbased on the search results.

The positions of wafer marks MXand MYare the same as the XY position of center Cof sample shot area SAcorresponding to wafer marks MXand MY. In other words when position information of wafer marks MXand MYis detected this means that position information of sample shot area SAis measured in the wafer alignment. In the actual measurement positions of the wafer marks measured in this manner that is the XY positions of sample shot areas SAare represented by x on an image map of the shot areas of wafer W.

Next main controller executes a statistical calculation using the least squares method disclosed in for example Kokai Japanese Unexamined Patent Application Publication No. 61 044429 and the corresponding U.S. Pat. No. 4 780 617 and the like using the calculated position information of sample shot areas SA and computes parameters of a scaling component an offset component an orthogonality degree component and the like of the arrangement of shot areas in the stage coordinate system. The above disclosures of the publication and the U.S. Patent are incorporated herein by reference. The arithmetic expression set by the parameters is a so called EGA model equation. The EGA model equation is a model equation in which when the design position coordinate of center Cof shot area SAis assigned to the equation a correction amount an alignment correction amount of the position coordinate of the center in the X axis and Y axis directions is obtained as an output. When performing overlay exposure main controller assigns the design position coordinate of each shot area on wafer W to the EGA model equation computes an alignment correction amount of the shot area and calculates a position coordinate corrected by the alignment correction amount as a datum position of overlay exposure to shot area SA.

In an alignment correction amount in sample shot area SAon the image map of shot area SAof wafer W is represented by a vector. The base point of the vector represents the design position of shot area SA and the end point represents the datum position after correction. As is shown in although the tip of the vector of the alignment correction amount almost coincides with the actual measurement position of sample shot area SA a slight deviation occurs in actual. This is because the EGA model equation to obtain the alignment correction amount is a model equation based on only a linear component such as scaling and rotation components and is defined by a statistical method using the actual measurement position coordinate of sample shot area SA. A difference between the datum position for overlay corrected by the alignment correction amount and the actual measurement position coordinate of sample shot area SAis referred to as a residual difference hereinafter.

When completing the wafer alignment the alignment correction amount of each sample shot area data of the position coordinates of the sample shot areas after correction that has been calculated based on the alignment correction amount and data of residual difference of the sample shot areas are stored in storage unit respectively.

After the completion of the wafer alignment as described above an exposure operation based a step and scan method is performed as follows.

When performing the exposure operation first of all main controller moves wafer stage WST based on the wafer alignment results and the measurement results of the baseline via stage controller and wafer stage drive section so that the XY position of wafer W is at a scanning starting position for exposing a first shot area a first shot . Simultaneously main controller moves reticle stage RST via stage controller and reticle stage drive section not shown so that the position of reticle R is at the scanning starting position. Then scanning exposure is performed to a first shot area SAby irradiating illumination light IL by illumination system in a state where reticle stage RST and wafer stage WST are synchronously moved by position control of stage controller .

When the transfer of a reticle pattern to the first shot area SAis completed wafer stage WST moves to a scanning starting position for a second shot area and at the same time reticle stage RST moves to a scanning starting position for the second shot area and then scanning exposure is performed in the same manner as in the case of the first shot area described above. In this manner movement of wafer stage WST to the scanning starting position for the next shot area and movement of reticle stage RST to the scanning starting position for the next shot area and scanning exposure are sequentially repeated and patterns of the required number of shots are transferred onto wafer W.

As is described above in the series of exposure operations to wafer W the search alignment and the wafer alignment are performed. In each alignment alignment system AS is made to detect photoelectric conversion signals corresponding to the areas on wafer W including search marks SYM and S M and fine alignment marks MXand MYin sample shot areas SA and marks are searched for within waveform data corresponding to the photoelectric conversion signals a mark search operation then position information of the marks is calculated based on the search results. In the following description the mark search operation is specifically explained.

As is described earlier in alignment system AS two sensors based on the FIA method and the LSA method are prepared. Either sensor can be selected so as to obtain a photoelectric conversion signal corresponding to an area including marks detected by the selected sensor however in this case the FIA sensor is to be selected. As in the description later on the photodetection conversion signal becomes a one dimensional signal waveform data in the X axis direction or the Y axis direction. Main controller searches for marks in the waveform data using a predetermined search algorithm and detects the position information of each mark based on the search results.

An example of a search algorithm will be described below. In the following description the case will be described where a line and space L S mark placed along the Y axis direction is searched based on the one dimensional waveform data and the Y position of the mark is computed based on the search results.

The photoelectric conversion signal detected by the sensor based on the FIA method is the imaging result the imaging data of an area including each L S mark on wafer W. In the search algorithm first with respect to the imaging data sent from alignment system AS white noise is canceled out by obtaining the mean of an intensity distribution on a plurality of scanning lines in the Y axis direction and then by performing smoothing of the waveform a smoothing processing a one dimensional average signal intensity distribution is obtained. The signal intensity distribution is to be the signal waveform data for searching the marks. shows a waveform data function p Y as an example of the waveform data.

Main controller calculates a differential waveform of the above signal intensity distribution. shows a differential waveform p Y of waveform data function p Y in .

As is shown in in differential waveform p Y several peaks appear which seem to correspond to edges that are the boundaries between line patterns and space sections of the L S marks. In the differential waveform main controller extracts the positions having peaks equal to or greater than a contrast limit value as potential positions that are potentials for a position where a pattern edge section i.e. edge within the L S mark exists. In a plurality of potential positions is shown with vertical dashed lines.

Next with respect to each of a plurality of edge potential positions extracted as described above an operation for judging whether or not the L S mark can be recognized a so called mark recognition operation is performed. In the following description the mark recognition operation will be described.

In the mark recognition operation a mark is recognized using a mark template waveform that is based on design information of the L S mark. Specifically by checking how much the mark template waveform is correlated to a section of the waveform data corresponding to the mark template waveform i.e. a section within a frame of the mark template waveform in a state where the edge at a Y end of the mark template waveform is to be a starting point and the starting point is made coincident with a specific edge potential as shown in a bold arrow in the judgment is made of whether or not the mark can be recognized at the position.

First the total number of edges in the section within the frame of the mark template waveform is obtained and the judgment is made of whether or not the number of edges is smaller than the set number of edges. When the judgment is affirmed it is regarded that the mark cannot be recognized and an errorcode01 is set as an error code representing an error factor. The error code will be described later.

Incidentally because it is considered that the mark exists in the vicinity of the center of the waveform data a measurement range an operation range is set and the range for performing the mark recognition operation is restricted to some extent. In the boundary of the measurement range is indicated with vertical double lines. Next in the first embodiment the judgment is made of whether or not the edge within the frame of the mark template protrudes outside the operation range. When the judgment is affirmed it is regarded that the mark cannot be recognized and an errorcode02 is set as an error code.

In addition the judgment is made of whether or not the intensity of the edge within the frame of the mark template is equal to or less than a predetermined intensity. When the judgment is affirmed it is regarded that the mark cannot be recognized and an errorcode03 is set as an error code.

Furthermore the judgment is made of whether or not the direction of the edge intensity is same as the direction of the next edge intensity within the frame of the mark template. When the judgment is affirmed it is regarded that the mark cannot be recognized and an errorcode04 is set as an error code.

In the case all of the above judgments are denied an edge potential position corresponding to each edge position of the mark template can be determined and therefore a score representing the recognition degree of the mark is calculated based on the determined edge potential position.

The score is an index value that shows how accurate the waveform data within the frame of the mark template reproduces the characteristics of the mark. In the first embodiment the divergence of the characteristic of the mark in the actual waveform data from the design characteristic of the mark is obtained as a characteristic amount and the score is calculated based on the characteristic amount. As characteristics of the L S mark for example a width of each line pattern a mark width a distance between line patterns a mark distance an edge shape of a boundary between each line pattern and space section and the like are given. In this case a characteristic amount corresponding to each of these characteristics is computed.

First the sum of an error between a design value of the distance between each of the line patterns of the L S mark the distance between the line patterns of the template and distance between each of the line patterns assumed from the edge potential position is computed this is to be a characteristic amount 1 . Next the sum of an error between a design value of the width of each of the line patterns of the L S mark and the width of each of the line patterns assumed from the edge potential positions is computed this is to be a characteristic amount 2 . Then a characteristic amount related to uniformity of the edge intensity is obtained by computing a standard deviation of peak values this is to be a characteristic amount 3 . And the weighted sum of these characteristic amounts is obtained. The value of the weighted sum is to be the score of a combination of these edge potential positions.

Next the computed score is compared with a threshold value set in advance and when the score is better than the threshold value it is regarded that the mark can be recognized and when this is not the case it is regarded that the mark cannot be recognized.

In this case when the score is not better than the threshold value and it is regarded that the mark cannot be recognized the factor is analyzed.

First the judgment is made of whether or not characteristic amount 1 exceeds a limit set in advance. When the judgment is affirmed it is regarded that the factor causing the mark not to be recognized is that the mark distance error exceeds the limit and an errorcode05 is set as the error code.

Next the judgment is made of whether or not characteristic amount 2 exceeds a limit set in advance. When the judgment is affirmed it is regarded that the factor causing the mark not to be recognized is that the mark width error exceeds the limit and an errorcode06 is set as the error code.

Besides the ones described above the judgment is also made such as whether a balance of a mark edge distance exceeds a limit set in advance whether a balance of the mark edge intensity based on characteristic amount 3 exceeds a limit set in advance whether deviation of the edge intensity between the line marks exceeds a limit set in advance and whether the number of detected edges of each line pattern is smaller than the set edge number set in advance. When each judgment is affirmed a factor causing the mark not to be recognized is specified and a code is set errorcode07 to 0A for the specified factor as an error code of each error factor.

In this manner error factors are segmentalized to some extent by the analysis and are encoded. shows a table showing a relation between the error codes and the error factors.

As is described above in the mark recognition operation where operation is performed with the starting point of the mark template being made to coincide with any one of the edge potential positions when a value of the score based on the characteristics of the mark computed during the operation is better than the threshold value mark recognition is regarded successful. However in the case there are not enough edges to make the score computation possible or the characteristics of the waveform within the frame of the mark template is significantly different from the characteristics of the mark a mark detection error is generated because the mark recognition is regarded as a failure. Such mark recognition result that is the score or the error code is stored in a buffer memory b .

Next as is shown in the mark recognition operation described above is performed again in a state where the starting point of the mark template is shifted to the second edge potential position and the recognition result the score the error code are stored in buffer memory b . Afterwards in the manner described above the mark recognition operation using the mark template is performed each time the starting point of the mark template is shifted in a Y direction one by one and the recognition results are sequentially stored in buffer memory b i i 2 3 . . . . shows a model of how the mark template is shifted in the Y direction and FIG. C shows an example of the recognition result the score the error code of the mark recognition operation stored in each buffer memory b i . Data stored in each buffer memory b i buffer memories b to b in is stored in storage unit .

Main controller performs the mark recognition operation at each edge potential position using the mark recognition algorithm described above and obtains the mark recognition result at each edge potential position. Then main controller determines the edge potential position that has the best score from among a plurality of edge potential positions and the center position of the mark having a predetermined offset from the determined edge potential position is computed as the position of the mark. Incidentally in the first embodiment because the left end edge of the mark template waveform serves as the starting point of mark recognition the predetermined offset is to be a design distance between the left end edge and the center of the mark.

Main controller makes a data file in which position information of the search marks in the case the detection of the waveform data the score and the mark is successful and information related to error codes and the like in the case the detection of the marks is failed are written along with data such as the lot number to which the wafer belongs the wafer number recognition parameters the FIA method or the LSA method design values of widths and distances of line patterns and the like the algorithm number a processing parameter for each algorithm number used for the mark recognition operation in alignment system AS. The data file is made as an alignment history data file and the alignment history data file is stored in storage unit . With this operation the mark search operation is completed.

Main controller performs search alignment or wafer alignment based on position information of search marks SYM and S M or wafer marks MXand MYthat has been obtained using the mark search operation as is described above. On the search alignment or the wafer alignment in the case a mark cannot be recognized at any edge potential position a mark detection error is generated.

Incidentally the error check order in the mark recognition algorithm described above is not limited to the above described order and can be changed appropriately.

As is described above in the first embodiment a mark is searched for by performing the mark recognition operation at a plurality of edge potential positions within the one dimensional waveform data and based on the position coordinate of a mark detected as a result of the search a datum position when performing overlay exposure is obtained. Accordingly in order to perform overlay exposure with high accuracy it is essential to recognize the mark appropriately when searching the mark and therefore it is desirable to build a mechanism for evaluating the mark recognition operation. For the reason in the first embodiment an application for evaluating the mark recognition operation is operable on PC. In the following description the application will be described.

Incidentally as a premise the above application for evaluating the mark recognition operation in exposure apparatus has already been started in PC. In this state when an operator specifies a product name a lot name the wafer number and the layer number via mouse M or keyboard K the application as a FTP File Transfer Protocol client sends a connection request to main controller a FTP server of exposure apparatus . When the connection request is approved then the application sends a directory display request to main controller . When receiving the directory display request main controller reads out the alignment history data related to the designated layer of the designated wafer from storage unit and sends the alignment history data to PC. The application receives the alignment history data and then within a window shown on display D makes display D display an image of a shot map of the specified wafer and a window for showing the alignment history data. shows an example of the window display.

On the screen shown in an image view of the shot map on wafer W specified by the operator is displayed and cells in a matrix arrangement are displayed on the image view of shot areas SAof wafer W. These cells represent shot areas SAformed on the wafer. Marks are displayed in some cells and the cells in which the marks are displayed represent sample shot areas.

Viewing further in detail as a mark in each cell a circular mark a triangle an upper peaked triangle mark an inverted triangle a lower peaked triangle mark and a square mark are displayed. The circular mark represents that sample shot area SAis a sample shot area where a mark detection error is not generated for both wafer marks MXand MYand detection of position information of the mark is successful. The triangle mark represents that sample shot area SAis a sample shot area where detection of wafer mark MXis successful but detection of wafer mark MYP has failed and a mark detection error is generated. The inverted triangle mark represents that sample shot area SAis a sample shot area where detection of wafer mark MYP is successful but detection of wafer mark MXhas failed and a mark detection error is generated. The square mark represents that sample shot area SAis a sample shot area where a mark detection error is generated for both wafer marks MXand MY. Incidentally besides wafer marks MXand MY marks corresponding to search marks SYM and S M also are to be displayed though they are not shown in .

In other words on the screen of the application it is displayed whether the detection of position information of wafer marks MXand MYarranged in a plurality of sample shot areas SAformed on wafer W is successful or not. The application as the FTP client obtains the detection results of position information of a plurality of sample shot areas SAon wafer W from main controller and makes display D display on the screen the obtained detection results of position information of a plurality of sample shot areas SAtogether with the image display a cell display of the shot map of a plurality of shot areas SAon wafer W.

Various types of marks displayed on the cells are objects that generate an event to make the application display a new window by a click operation of mouse M. For example when an operator operates mouse M and selects any mark within the samples shot areas the object issues a command message to the OS that the mark is selected. The OS operating on PC posts the command message to a message queue of the application. A main routine of the application obtains the message and opens the CPU to the OS by performing a so called dispatch. The OS calls up a window procedure of the application and passes the command message along with information that the object is selected as accompanying information to the window procedure. The window procedure executes a message handler corresponding to a relevant pull down menu referring to the accompanying information.

On the screen of display D a window is displayed as shown in . In this window a waveform data is graphically displayed that corresponds to a photoelectric conversion signal obtained by alignment system AS and corresponding to an area including wafer mark MXor wafer mark MYin a sample shot area. Since Y is specified in a text box at the lower left of the window in the waveform data of wafer mark MYis displayed in this case. This window is called as a waveform display window.

In two waveform data are displayed and the waveform data on the lower side is raw waveform data corresponding to the photoelectric conversion signal obtained by alignment system AS. In the following description this waveform data is called as raw waveform data . The raw waveform data is equivalent to waveform data function p Y in .

On the upper side of the raw waveform data a waveform of differential waveform data of the raw waveform data that is made in the mark search operation is displayed. And a plurality of edge potential positions calculated based on peaks of the differential waveform data p Y are represented in vertical dashed lines extending across the raw waveform data and the differential waveform data. This differential waveform data is equivalent to waveform data function p Y in .

On the right side of a waveform display frame of the two waveform data a wafer number of the selected wafer wafer No. an arrangement number of the sample shot area Shot Pos design position information of the alignment mark Mark Pos are displayed. Further below the two waveform data as is described earlier a text box is displayed for the operator to select whether a mark whose sample shot area s raw waveform data is displayed is to be a position detection mark in the X axis direction or a position detection mark in the Y axis direction. When the operator specifies X in the text box by operating mouse M and keyboard K the waveform data displayed switches to raw waveform data and its differential waveform data of wafer mark MX.

When the operator clicks the waveform data using mouse M a vertical line passing though the point is displayed and also a position coordinate of the point is displayed. Incidentally the vertical line corresponds to the center of the mark template displayed below the raw waveform data.

As is shown in on the screen of display D besides the waveform display window a parameter setting window is displayed at the lower right side of the screen. The parameter setting window is a window to set processing parameters necessary for performing a mark recognition operation to the waveform data displayed in the waveform display window.

In the parameter setting window a display field of Sensor for Sequence and a display field of Measured Axis are shown from above and EGA FIA and Y are displayed in the respective display fields. By the display of EGA FIA and Y the operator can recognize that the waveform data displayed in the waveform display window is the waveform data related to the Y axis direction when wafer mark MYP obtained by a sensor of the FIA method of alignment system AS is a measurement subject. A display field of Sim Pos shown below these display fields will be described later.

Various setting fields shown in a frame of Search Mark Data below the display field of Sim Pos are setting fields that are mainly used for setting design information of a search mark. First in a setting field of FIA signal waveform that sets a characteristic of a waveform shape of the mark Normal is designated which shows that the type of shape of the signal waveform is a normal type. In the case the waveform of the mark is a reverse polarity waveform shape due to conditions such as process types or the reflectivity of a base around the mark Reverse may be specified. Further in a Type setting field for setting a type of the mark Triple is set which shows that the mark is a line and space mark made up of three line marks. On the right side of the setting field text boxes of setting fields a to d for setting the distance between marks a mark pitch are displayed. A setting field ALW for setting a mark pitch limit setting fields W to W for setting widths of the marks and a setting field ALW for setting a mark width limit text boxes are displayed in this order.

Below a frame of Search Mark Data a frame of Search Parameter is displayed. In this frame setting fields for mark recognition parameters used in the mark recognition operation are displayed. In this case the selection of a search mark that is to be detected from the search signal waveform Search Mark Choice the algorithm number that is applied to a waveform processing of the search mark Search Operation Algorithm are displayed. In an example shown in Middle and 46 are selected.

At the lower left side of the window a button Load SIG FILE is displayed. By clicking the button by operating mouse M setting values of various parameters that have been set on actual alignment are read out from the alignment history data and displayed in the frames of Search mark Data and Search parameter within the window. In a state is shown where the Load SIG FILE button is clicked and the setting of various parameters used in the actual alignment is displayed. As is shown in for example in the mark parameter frame Triple is displayed in the Type setting field 8 20 26 and 8 m are displayed in the mark pitch setting fields a to d respectively 2 m is displayed in the mark pitch limit ALW 2 m is displayed in the mark width setting fields W W and W and 0.5 m is displayed in the mark width limit ALW .

At the lower right side of the window a button Simulate is displayed. By clicking the Simulate button by operating mouse M a simulation of mark recognition operation is executed using the parameters displayed in the parameter setting window. In the simulation of the mark recognition operation an operation that is equivalent to the mark recognition operation in exposure apparatus described above that is an error check of error codes 01 to 0A and score calculation are performed.

The operator refers to the waveform data displayed in the waveform display window and various parameters displayed in the parameter setting window and performs evaluation and analysis of the mark recognition operation.

When clicking the waveform data displayed in the waveform display window using mouse M a position coordinate of the position that has been clicked is set in the setting field Sim Pos. for setting a position coordinate in the parameter setting window. The set position is the position designated by the operator. In the example shown in 15 m is set in this setting field. The text entered position coordinate serves as the specifying information in the first embodiment. Fix is the setting for determining whether to activate this text box or not and the text box becomes active by setting No Fix . Incidentally the position coordinate of the clicked position is displayed in the waveform display window and the operator may set the position coordinate to the Sim Pos. using keyboard K referring to the displayed position coordinate. Further the operator may directly input a position coordinate of the starting point of the edge to the Sim Pos. based on the design position coordinate of the mark.

When clicking the Simulate button in this state the application starts a processing shown in . As is shown in first in step setting values of various parameters set in the parameter setting window that include the position coordinate designated in the Sim Pos. are inputted in the internal memory.

The position coordinate designated in the Sim Pos. is specifying information for specifying an edge potential position where a mark recognition operation is performed and there are two main methods as methods to specify the edge potential position for performing the mark recognition operation based on the specifying information. Firstly as is shown by an example of search alignment waveform of a three lines mark in a method is available in which the edge potential position closest to the designated position is specified as a position where a mark recognition operation is performed. Secondly as is shown by an example of search alignment waveform also of the three lines mark in a method is available in which the edge position where the intensity of the edge is maximum is selected from among the edge potential positions within a predetermined range having the designated position as a datum. In this case a starting point edge position of a mark to be detected can be picked up without picking up a noise signal within a predetermined range. In the following description the former method will be referred to as a method and the latter method will be referred to as a method . As a predetermined range in method for example a value of about a width of one line pattern can be set in wafer alignment and a value of about 3 to 5 times of a width of one line pattern can be set in search alignment however any value may be set.

Referring back to in the next step step the judgment is made of whether or not method is used. The method to be selected is to be set by the operator in advance. When the judgment is affirmed the procedure proceeds to step and when the judgment is denied the procedure proceeds to step . In step method is executed and in step method is executed. Normally it is assumed that method is mainly used when performing manual assist and method is mainly used when performing automatic adjustment in a lot operation. However either method may be used in either of the manual assist or the automatic adjustment. In the example shown in when the position designated by the operator was at 15 m the specified edge potential position was at 15.225 m.

After the procedures in step or step are executed and the edge potential position for performing the mark recognition operation is specified then in step the mark recognition operation at the specified edge potential position is performed. By this operation the mark recognition result a value of a score in the case the mark recognition succeeds and an error code in the case the mark recognition fails at the specified edge potential position can be obtained.

In the next step step the recognition result of the mark recognition operation at the edge potential position is displayed. In the case the mark recognition is successful the success in the mark recognition and also the value of the score are displayed and in the case the mark recognition has failed an error factor is displayed. In the example shown in a popup window is displayed separately from the waveform display window and the parameter setting window and an error factor that a line width difference exceeds a limit is displayed in the window. Further in the waveform display window as is shown in the position coordinate of the center of the mark that has been detected when the mark recognition operation has been performed is displayed and as is shown in the edge potential positions used for the mark recognition operation are represented by bold dashed lines so that they are identifiable from other edge potential positions. After step is completed the processing ends.

As is described above the application operable on PC makes it possible to use the waveform data obtained in actual perform the simulation of a mark recognition operation at any mark potential position having the position designated by an operator in the waveform data as a datum and display the mark recognition result. In the simulation mark recognition operation can also be performed under parameters used in actual alignment and further mark recognition operation can also be performed under parameters whose setting values are updated in the parameter setting window which allows the operator to perform adjustment of the mark recognition parameters using a simulation function of the application.

First the operator clicks the Load SIG FILE button and reads in the setting values of parameters processed in exposure apparatus as they are. The operator visually observes waveform data without changing the setting values of the parameters and designates a position where a mark seems to exist from the shape of the waveform data. Then the application performs a mark recognition operation at an edge potential position specified from the designated position a position closest to the designated position or a position having the maximum edge intensity within a predetermined range . By this operation the mark recognition operation result at the position near from the designated position can be obtained.

For example supposing that the mark recognition operation result is a mark recognition failure and the error factor judged in the mark recognition operation is a mark detection error that the mark width difference exceeds a limit as is shown in . In this case it can be considered that the mark could not be recognized correctly due to the mark width difference exceeding the limit. By viewing the display result of the error factor the operator can adjust the parameters for example by increasing mark width limit ALW of the processing parameters in the parameter setting window.

When the operator changes the setting values such as the mark width limit ALW in the parameter setting window and pushes the Simulate button the mark recognition operation at the edge potential position is reexecuted under the changed mark width limit. In the case the setting values are appropriate and the value of the computed score is better than a threshold value the mark detection error is solved and the possibility of succeeding in the mark recognition increases.

The operator can repeatedly perform the change in the setting of parameters and the simulation of the mark recognition operation described above and solve mark detection errors as much as possible at the position where the mark seems to exist.

The operator can set the final setting values of parameters to exposure apparatus via the parameter setting window. When the setting values of the parameters are appropriate generation of unnecessary mark detection errors can be reduced in search alignment and wafer alignment to subsequent wafers W in exposure apparatus which makes it possible to perform an appropriate mark recognition operation.

As is described in detail so far according to the first embodiment the system is equipped with an application which in the case a plurality of edge potential positions that become potentials for positions of marks within an area on wafer W including marks wafer marks MX MYor search marks SYM S M subject to detection are extracted obtains the recognition result of the mark using the waveform data detected by alignment system AS in the case the mark is assumed to be located at any edge potential position out of the plurality of edge potential positions and displays the recognition result. In the application by designating a mark approximate position by operating mouse M or keyboard K an edge potential position of the mark can be specified based on the designated position in a predetermined method method or method and the result of detection of the mark using the waveform data in the case the mark is assumed to be located at the specified edge potential position can be displayed. In this manner by the designation by the operator the operator can grasp the recognition result by referring to the display of the recognition result of the mark at any potential position.

Further according to the first embodiment the operator can change processing parameters necessary for the mark recognition operation via the parameter setting window. The application can obtain and display the mark recognition operation result at any designated mark potential position under the changed parameters. In this manner the operator can adjust the processing parameters while referring to the mark recognition results at the position where the mark seems to exist.

Further in the application of the first embodiment using a designated position that has been input referring to the waveform display window of the application as a datum either one of an edge potential position closest to the designated position or an edge potential position where the edge intensity is maximum within a predetermined range is selected. The operator can freely judge whether to select the edge potential position closest to the designated position or to select the edge potential position in the predetermined range including the designated position as its center. In this manner even if the operator roughly designates a position where the mark is to be recognized by operating the mouse referring to the waveform display a secure mark recognition operation can be executed in the vicinity of the position.

Although in the first embodiment the operator designates a position for performing the mark recognition however normally there are many cases where as the position that the operator designates the position closest to a design mark position is designated. However because a mark position in actual is generally deviated from the design mark position depending on the position and orientation of a wafer when being loaded on wafer stage WST a different position from the position in design is preferably designated for a more accurate designation. Thus the application may have a support function for the operator when the operator determines the designated position. In the following description the support function will be described.

In the support function an image view of a shot map is displayed as shown in before the operator designates a position. In a cell corresponding to each sample shot area within the shot map an alignment correction amount of each sample shot area when performing wafer alignment on the wafer is displayed. The alignment correction amounts have been read out from the alignment history data stored in storage unit .

In this case in the sample shot area surrounded by a dotted line circle is to be a shot area where mark detection of wafer marks MXand MYhas failed. Then in the same manner as in the first embodiment in the case when trying to perform analysis and evaluation of a mark search operation of the wafer marks in this sample shot area using the application of PC the operator can designate a mark approximate position to perform a mark recognition operation referring to a vector representation of the alignment correction amount of this shot area.

In a vector of an alignment correction amount of a sample shot area is shown enlarged. In this case when performing mark recognition related to wafer marks MXand MY an X component and a Y component of the vector of the alignment correction amount may be added to the design positions of wafer marks MXand MY respectively and the positions obtained by the addition may be designated positions.

As is described since it is considered that the sample shot areas on wafer W deviates from the design positions by the alignment correction amounts it can be said that the mark position is preferably designated taking the alignment correction amounts into consideration.

Furthermore as is shown in the actual position coordinates of the marks on the actual wafer W slightly deviates from the position coordinates corrected by alignment correction amounts and residual differences remain. Therefore the mark position may be designated further taking into consideration an X component and a Y component of the residual differences in addition to the X component and the Y component of the alignment correction amounts.

In residual difference in alignment in each sample shot area on any one of wafers W within the same lot is represented by a vector. Because the residual difference is so small the residual difference in each shot area is enlarged. In the same sample shot areas on wafers W within the same lot in the case the residual difference components are regarded as being almost the same it is more preferable that the operator also refers to the display of the residual differences and designates the mark position by correcting the design positions of wafer marks MXand MYby an X component and a Y component that are obtained by adding the X component and the Y component of the vectors of the residual differences to the X component and the Y component of the alignment correction amounts as is shown in .

Incidentally in the residual difference components on one wafer Win the same lot are displayed however as is shown in the residual difference components of the rest of wafers within the lot may also be displayed and a mean value of the residual difference components in the sample shot areas may be computed. As is described above in the case there is not much deviation in the residual difference components in the same sample shot areas on wafers W in the lot by using a mean value of the residual difference components on the rest of wafers W in the lot to correct a mark position to be designated the reliability of the designated position will further improve.

Incidentally in the case the deviation in the residual differences in the same sample shot areas on the wafers in the lot exceeds the limit such correction of the designated position using residual differences or a mean value of the residual differences should not be performed. The correction of the designated position by the residual differences is effective only in the case the deviation in the residual differences is small in the lot. In the case the residual differences of some wafers deviates greatly from those on other wafers within the lot the residual differences obtained from such wafers may be excluded when calculating a mean value.

Incidentally in the wafer alignment in the case the reliability of the alignment results is not necessarily high such as when the detection of a plurality of wafer marks fails the designated position may be corrected according to a coordinate system based on the detection results of search marks SYM and S M of the wafer.

Incidentally in the first embodiment the content finally displayed on the screen was a recognition result of the mark at one edge potential position that was ultimately specified. However it is a matter of course that the simulation of the mark recognition operation may be performed at a plurality of edge potential positions and the results may be displayed.

For example in the above step among edge potential positions within a predetermined range having a designated position as a datum the mark recognition operation is performed to each of a plurality of edge potential positions in the proximal order to the designated position or the order of intensity of the edge and in the above step the recognition results of the respective edge potential positions are displayed together. In an example of the displayed recognition results is shown. Incidentally in the recognition results such as error display of the marks are not displayed in a popup window and error factors at a plurality of edge potential positions are displayed on the lower side of the waveform display window. The displaying order in this case may also be in the proximal order to the designated position or the order of intensity of the edge.

In the example shown in the mark width difference exceeding the limit causes the mark detection error corresponding to the edge potential position of top priority and the deviation in the edge intensity of line patterns exceeding the limit causes the mark detection error corresponding to the edge potential position of second priority. In the case the deviation in the edge intensity exceeds the limit the edge potential position is unlikely a mark position and therefore the edge potential position is not a mark position to be detected. Then in this case the operator changes the mark width limit ALW and the like in the parameter setting window to solve the error factor at the edge potential position.

In this manner when the mark recognition results at a plurality of edge potential positions can be displayed the range of the specified edge potential positions can be wider. As a consequence it becomes possible to more securely obtain the mark recognition results at the mark positions to be detected originally as well as to more securely perform error recovery such as adjustment of the parameters.

Next a second embodiment of the present invention will be described. In the first embodiment the case has been described where the mark search operation in search alignment or wafer alignment is evaluated in PC connected to exposure apparatus . In the second embodiment however the case will be described where automatic adjustment of processing parameters of the mark recognition operation is performed when performing search alignment or wafer alignment in exposure apparatus .

The configuration of an exposure apparatus related to the second embodiment is same as the configuration of exposure apparatus in the first embodiment and therefore the detailed description will be omitted. In addition a series of exposure operations is almost same as the operations in the first embodiment except for a wafer alignment operation. In the wafer alignment operation only the point where an automatic adjustment operation of parameters is performed as a final operation in the wafer alignment in the case a mark detection error occurs in any sample shot area after the EGA model equation is determined and the EGA correction amount of each shot area is computed is different. Accordingly in the following description only the automatic adjustment operation of the parameters will be described.

In the next step step the judgment is made of whether or not the deviation in residual differences on wafers W in the lot falls within a permissible range. When the judgment is affirmed the procedure proceeds to step and when the judgment is denied the procedure proceeds to step .

In step in wafer W in the lot a mean value of an X component and a Y component of the residual difference of the alignment correction amount in sample shot area SAis computed and the mean value is added to an X component and a Y component of the alignment correction amount. The correction method in this case is also same as the method described in the first embodiment.

A processing in steps to is almost same as the processing in steps to in in the first embodiment. That is in step setting values of parameters of the mark recognition operation are read in and in the case method is selected the procedure proceeds to step in which an edge potential position is computed closest to a position where the alignment correction amount and further the residual difference component are added to the design position coordinate of the wafer mark. In the case method is selected the procedure proceeds to step in which an edge potential position of the maximum edge intensity is computed among edge potential positions within a predetermined range having the position where the alignment correction amount and further the residual difference component are added to the design position coordinate of the wafer mark as a datum. The computation method is also same as the first embodiment.

In step an error factor at the determined edge potential position that is stored in storage unit is obtained and in step parameters related to the error factor are adjusted. In other words also in the second embodiment similar to the first embodiment parameters to be adjusted are selected based on an error factor of the mark detection error. For example in the case an error related to a mark width occurs a parameter directly related to the mark width is adjusted and in the case an error related to a distance between marks occurs a parameter directly related to the distance between marks is adjusted. In the next step step a mark recognition operation at the selected edge potential position is performed and in step the judgment is made of whether or not the mark detection error is solved. In the case the mark detection error is not solved the procedure returns to step . In step the error factor is analyzed again and in step a parameter related to the analyzed error factor is adjusted and then in step the mark recognition operation is performed again.

In the case the mark detection error of an error factor is not solved in this manner as long as another error factor that is different from the error factor newly occurs the processing of steps is repeated. By this operation when the mark detection error is ultimately solved the judgment in step is affirmed and the processing ends.

Incidentally in the case the number of wafer marks where mark recognition has failed is more than one the above processing is performed with respect to each wafer mark. In this case when the number of wafer marks that allows the EGA model equation to be computed with good accuracy is detected the processing may be completed at this point. Further in the case the recognition result of a wafer mark is not improved the parameter automatic adjustment of the wafer mark may be suspended and the parameter automatic adjustment of the next wafer mark may be started. Also as in the first embodiment manual adjustment of the parameters may be performed by operations of the operator.

After the processing when wafer alignment is performed to wafer W loaded to exposure apparatus the mark recognition operation is performed under such adjusted parameters.

Further in the case the recognition result of the mark recognition operation is favorable after the adjustment of the parameters and detection of the mark are successful wafer alignment may be performed again using position information of the mark or the remeasurement of the wafer mark by alignment system AS may be performed.

As is described in detail so far also in the second embodiment an edge potential position where the mark recognition operation is performed is specified from among a plurality of edge potential positions that become potentials for a position of a mark. However the edge potential position is not specified based on instructions from an operator as in the first embodiment and a position and a range that serve as a datum to specify the edge potential position are estimated by correcting the position coordinates in design of wafer marks MXand MYP based on the alignment correction amount of the shot areas on wafer W which correction amount has been already obtained by the EGA model equation and the residual differences of the sample shot areas SAon other wafers W within the lot. This operation makes it possible to perform evaluation of the mark recognition operation focusing on the positions where there is a statistically high possibility that the wafer marks exist and to perform adjustment of the parameters automatically.

Incidentally in the second embodiment a mean value of the residual differences in the sample shot areas on the rest of wafers within the lot is added to the alignment correction amount. However as in the first embodiment the residual difference on any one of wafers within the lot may simply be added to the alignment correction amount. In this case when the deviation in the residual differences is large within the lot it is preferable that the residual difference is not added to the alignment correction amount.

Incidentally in the above first and second embodiments the adjustment of the setting values performed is limited to the processing parameters directly related to the error factors however in actual there may be cases where a relation between error factors and processing parameters are complicated. Therefore after the parameter adjustment described in each embodiment is performed the adjustment results may be stored and used in the subsequent parameter adjustment. For example in the case the same error factor occurred in the past the parameter adjusted at that time and its setting value become a guide for parameter adjustment. Also in the case a plurality of processing parameters has to be adjusted the succeeding parameter adjustment may be performed according to the priority order of the parameter adjustment that was effective. In other words by having a learning function for performing the parameter adjustment by empirical rule based on the past adjustment results it also becomes possible to increase the adjustment efficiency.

Incidentally in each of the above embodiments the recognition operation of wafer marks has been mainly described. However the present invention is not limited to this and the present invention can be used for a recognition operation of search marks as is described earlier.

However in the actual process lot operation since there is not enough information that can be utilized to estimate the positions of search marks using the detection results of search marks such as a correction amount corresponding to the alignment correction amount and a residual difference another method needs to be applied as the estimation method of the search mark positions. In the following description such a method will be described.

First in the evaluation of a mark recognition operation of a search mark SYM in this case that is measured first the XY position and rotation of wafer W are to be aligned with relatively good accuracy in the alignment of wafer W that is performed before loading wafer W and the design position coordinate is to be a designated position. And in the evaluation of a mark recognition operation of a search mark S M in this case that is measured secondly a position coordinate of search mark S M which is projected from the detected X position and Y position of search mark SYM obtained in the evaluation of the mark recognition operation of search mark SYM is to be a designated position.

Except for the estimation of the designated position as is described above also with respect to search marks the parameter adjustment and the like can be achieved in the same method as the evaluation of the mark recognition operation of wafer marks in each of the above embodiments.

Incidentally information utilized to specify an edge potential position is not limited to alignment correction amounts in sample shot areas on the wafer and the residual differences in wafer alignment performed to other wafers in the lot and the information may be empirical information already obtained or design information of wafer marks. For example information related to an arrangement error of shot areas a so called error between shots formed on the wafer that have been measured beforehand on the wafer or information related to deviation of a stage coordinate system of exposure apparatus measured in advance from a stage coordinate system of other exposure apparatus used in the original process may be used for the selection of edge potential positions.

In addition in each of the above embodiments in the case the residual differences in the sample shot areas on other wafers in the lot exceed a predetermined threshold value the residual differences do not have to be used for the computation of a mean value.

In addition in each of the above embodiments the mark detection waveform is differentiated and position information of the mark is detected by calculation of a characteristic amount of the mark from the differential results however the position information can be detected by other methods. For example an operation may be performed in which a correlation processing between the detected waveform data of the mark and template waveform data is performed and a position where the correlation value is highest is to be a mark position. In this case a correlation value at each position which is obtained when a template pattern obtained in the correlation processing is scanned with respect to the detected waveform data can be the score.

In each of the above embodiments the mark search operation in the one dimensional waveform has been described. However the present invention is not limited to this and the present invention can be applied to the case when marks are searched within two dimensional image data. shows a model of a shot map display and a two dimensional cross mark formed in a circuit pattern on a shot area in the shot map.

Also in this case it is possible to implement a differential processing to a two dimensional image signal data to extract a plurality of edge potential positions to position a starting point of mark template waveform with the edge potential positions to digitalize the degree of correlation at each position to a score and to detect position information of the mark based on the score as in each of the above embodiments. However in the case the mark cannot be appropriately recognized due to the influence of the neighboring circuit patterns evaluation of the mark recognition operation is to be performed in the same manner as in each of the above described embodiments. The position designated in this case may be based on a design position coordinate of the mark within the shot area a measurement value of the position of the mark measured previously or the like.

In the above described waveform processing including an example of this two dimensional image the case has been described where the present invention is applied to the method in which the position of the mark is detected based on the edge potential position extracted by implementing a differential processing to the detected raw waveform data however the present invention is not limited to this. For example in the case of the two dimensional image processing described above as an example the present invention can be applied to evaluation of an image processing in which a template pattern of the mark is scanned in two dimensional directions to raw image data and a position where the correlativity is highest is detected as a mark position that is an image processing in which the position of the mark is detected utilizing the grayscale of the image. The present invention is not limited to image processing methods such as contour correlation and normalized correlation methods.

Also in this case when the mark is searched using a design position coordinate of the mark or a position based on the actual measurement position of the mark measured previously as a datum the parameters of the image processing can appropriately be adjusted.

Incidentally in each of the above embodiments the processing parameters of the operation are adjusted based on the evaluation results of the mark search however the present invention is not limited to this. For example the marks that the mark detection errors are not solved ultimately may be excluded from the measurement subjects in alignment in the operation of the succeeding wafers. In other words the marks subject to detection may be selected based on the evaluation results of the mark search. Further the processing procedures may be optimized by changing the order of the processing procedures in the above mark recognition algorithm or the like.

For analyzing the cause of a mark recognition error generation data other than the waveform data detected by alignment system AS can be used. For example a focus deviation an exposure amount wafer flatness a synchronous accuracy error between a wafer stage and a reticle stage and the like when the mark was transferred and formed are logged in the exposure apparatus where the mark was transferred and formed and therefore the processing parameters may be adjusted referring to these results.

Further in each of the above embodiments the mark subject to detection is an L S mark however the present invention is not limited to this. The mark may be a one line mark a box mark or a set of these marks. The mark subject to detection may be two dimensional or one dimensional as long as the mark is unique and a mark of any shape and any size may be used.

Incidentally in each of the above embodiments the case has been described where alignment system AS has an FIA system sensor by an off axis method an alignment sensor by an image forming method and an LSA system sensor however the present invention is not limited to this and alignment system AS may be an alignment system having either one of these sensors. In addition alignment system AS may be based on either of a TTR Through The Reticle method a TTL Through The Lens method or an off axis method. Further the detection method may be a method such as in which a diffracted light or a scattered light is detected besides an image forming method an image processing method that is employed in an FIA system and the like. For example an alignment system may be used that irradiates a coherent beam almost vertically to an alignment mark on a wafer and detects diffracted lights of the same order first order second order . . . norder generated from the mark by making them interfere with each other. In this case a diffracted light of each order may be independently detected and the detection result of at least one order used or a plurality of coherent beams having different wavelengths may be irradiated to an alignment mark and with respect to each wavelength diffracted lights of respective orders may be detected by making them interfere with each other.

In addition in each of the above embodiments the case has been described where a mark for alignment is detected on a wafer however it is needless to say that the present invention can also be applied to a detection waveform of a mark for alignment formed on a reticle that is a reticle alignment mark.

In addition the present invention can be applied not only to an exposure apparatus by a step and scan method as in each of the above embodiments but can also be fully applied in the same manner to exposure apparatuses by various methods such as an exposure apparatus by a step and repeat method or an exposure apparatus by a proximity method such as an X ray exposure apparatus .

In each of the above embodiments as a light source a far ultraviolet light source such as the KrF excimer laser and the ArF excimer laser a vacuum ultraviolet light source such as the Flaser an ultra high pressure mercury lamp that generates bright lines in the ultraviolet region such as the g line or the i line or the like can be used. Besides the light sources above in the case a light in the vacuum ultraviolet region is used as an illumination light for exposure the light is not limited to the laser beams emitted from each of the light sources referred to above and a harmonic wave may also be used that is obtained by amplifying a single wavelength laser beam in the infrared or visible range emitted by a DFB semiconductor laser or fiber laser with a fiber amplifier doped with for example erbium Er or both erbium and ytterbium Yb and by converting the wavelength into ultraviolet light using a nonlinear optical crystal.

Furthermore the present invention may be applied to an exposure apparatus that uses an EUV light an X ray or a charged particle beam such as an electron beam or an ion beam as an illumination light for exposure. Besides the apparatus above the present invention may also be applied to an immersion exposure apparatus that has a liquid filled in the space between projection optical system PL and wafer W whose details are disclosed in for example the pamphlet of International Publication No. WO99 49504 and the like. Also the exposure apparatus may be a twin wafer stage type exposure apparatus in which a wafer stage is arranged at an exposure position where a reticle pattern is transferred via a projection optical system and at a measurement position an alignment position where a mark detection is performed by a wafer alignment system respectively and an exposure operation and a measurement operation can be executed almost in parallel as is disclosed in for example Kokai Japanese Unexamined Patent Application Publication No. 10 214783 the pamphlet of International Publication No. WO98 40791 and the like. Further projection optical system PL may be either of a dioptric system a catadioptric system or a catoptric system and may be either of a reduction system an equal magnification system or a magnifying system. The above disclosures of the publication and the pamphlets of International Publication are incorporated herein by reference.

Incidentally in the above embodiments a light transmittance mask is used that is a substrate of the light transmitting type where a predetermined light shielding pattern or a phase pattern or an extinction pattern is formed or a light reflection mask is used that is a substrate of the light reflecting type where a predetermined light reflecting pattern is formed. However instead of these masks an electron mask may be used that forms a transmittance pattern a reflection pattern or an emission pattern based on the electron data of the pattern to be exposed. Such an electron mask is disclosed in for example the U.S. Pat. No. 6 778 257. The disclosure of the U.S. Pat. No. 6 778 257 is incorporated herein by reference.

Incidentally the electron mask referred to above is a concept including both a non emissive image display device and a self emissive image display device. In this case the non emissive image display device is also called as a spatial light modulator which is a device that spatially modulates an oscillation width state of phase or polarization of light and is categorized into a transmissive spatial light modulator and a reflective spatial light modulator. In the transmissive spatial light modulator a transmissive liquid crystal display LCD device an electrochromic display ECD and the like are included. In the reflective spatial light modulator a DMD Digital Mirror Device or Digital Micro mirror Device a reflection mirror array a reflective liquid crystal display device an electrophoretic display EPD an electron paper or an electron ink a grating light valve and the like are included.

In addition in the self emissive image display device a CRT Cathode Ray Tube an inorganic EL ElectroLuminescence display a field emission display FED a plasma display panel PDP and a solid light source chip having a plurality of luminous points a solid light source chip array where a plurality of chips are arranged in an array shape a solid light source array that is a substrate where a plurality of luminous points are made such as an LED Light Emitting Diode display an OLED Organic Light Emitting Diode display an LD Laser Diode display and the like are included. Incidentally by removing fluorescent materials set at each pixel of the known plasma display PDP it becomes a self emissive image display device that emits light in the ultraviolet region.

Incidentally the usage of the present invention is not limited to the exposure apparatus for manufacturing semiconductors and the present invention can also be applied to exposure apparatuses such as an exposure apparatus used for manufacturing displays including liquid crystal display devices that transfers a device pattern onto a glass plate an exposure apparatus used for manufacturing thin film magnetic heads that transfers a device pattern onto a ceramic wafer and an exposure apparatus used for manufacturing imaging devices such as CCD micromachines organic EL DNA chips or the like. In addition the present invention can be applied to an exposure apparatus that transfers a circuit pattern onto a glass substrate or a silicon wafer not only when producing microdevices such as semiconductor devices but also when producing a reticle or a mask used in exposure apparatuses such as an optical exposure apparatus an EUV exposure apparatus an X ray exposure apparatus or an electron beam exposure apparatus. In this case in the exposure apparatus that uses DUV deep far ultraviolet light VUV vacuum ultraviolet light or the like normally a transmittance type reticle is used and as the reticle substrate materials such as silica glass fluorine doped silica glass fluorite magnesium fluoride or crystal are used. Further in an X ray exposure apparatus based on the proximity method or in an electron beam exposure apparatus a transmittance type mask a stencil mask a membrane mask is used and as the mask substrate silicon wafer or the like is used.

In addition in each of the above embodiments the case has been described where the present invention is applied to an exposure apparatus and the analysis and evaluation thereof however besides an exposure apparatus the present invention can be applied to any apparatus that performs a waveform processing or an image processing when the analysis and evaluation of the processing is performed such as an inspection apparatus a carriage apparatus a measuring apparatus a test apparatus and other apparatuses. In this case the present invention can also be applied by incorporating the application function described above not into an information processor such as a personal computer but into the main body of each type of apparatuses such as an exposure apparatus.

A semiconductor device is manufactured through the following steps a step of performing function and performance design of device a step of manufacturing a reticle based on the design step a step of manufacturing a wafer using materials such as silicon a step of transferring a pattern of the reticle to the wafer by exposure apparatus in the embodiment described above a step of assembling the device including the dicing process the bonding process and the packaging process an inspection step and the like.

In addition in each of the above embodiments the operating system OS to control PC is Windows registered trademark however other OS may naturally be used as long as the OS is a multitask operating system that supplies a GUI. Such an OS may be preemptive or non preemptive.

Incidentally at present in the OS as described above various types of programming development languages and API Application Programming Interface are supported and a software of the above application can be developed without difficulty. Basically the application s act with respect to the generated event i.e. the operation by an operator or to be more specific the processing contents of a message handler or the like with respect to a message sent to the application only has to be designed.

While the above described embodiments of the present invention are the presently preferred embodiments thereof those skilled in the art of lithography systems will readily recognize that numerous additions modifications and substitutions may be made to the above described embodiments without departing from the spirit and scope thereof. It is intended that all such modifications additions and substitutions fall within the scope of the present invention which is best defined by the claims appended below.

