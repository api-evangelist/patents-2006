---

title: Japanese virtual dictionary
abstract: Methods for converting a source character string to a target character string are described herein. In one aspect of the invention, an exemplary method includes receiving a first character string having the source character string, dividing the first character string into a plurality of sub-strings, converting the plurality of the sub-strings to second character strings through a dictionary, creating third character strings corresponding to the plurality of the sub-strings, analyzing the second and third character strings, constructing fourth character strings from the second and third character strings based on the analysis, creating a candidate list based on the fourth character strings, selecting the target character string from the candidate list and outputting the target character string. Other methods and apparatuses are also described.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07630880&OS=07630880&RS=07630880
owner: Apple Inc.
number: 07630880
owner_city: Cupertino
owner_country: US
publication_date: 20061113
---
This application is a continuation of U.S. patent application Ser. No. 09 965 333 filed Sep. 25 2001 now U.S. Pat. No. 7 136 803.

The present invention relates generally to the field of electronic text entry and more particularly to a method of entering Japanese hiragana characters and translating into appropriate Japanese words using a combination of hiragana katakana and kanji characters.

The Japanese written language contains three separate character strings. Simple Japanese characters representing phonetic syllables are represented by the hiragana and katakana character sets together referred to as kana . Hiragana characters which are characterized by a cursive style are typically used for words native to Japan. Katakana characters which are characterized by a more angular style are typically used for words borrowed from other cultures or for emphasis and sound effects. The third character set in Japanese is kanji. Kanji are the complex Japanese characters borrowed from the Chinese language. There are over 9000 kanji characters in the Japanese language. Approximately 4000 kanji are used on a semi regular basis while knowledge of 2000 kanji is generally required to read a newspaper or get around in Japan. The complexity of the Japanese written language poses several challenges for efficient text entry in computers word processors and other electronic devices.

Common methods of Japanese text entry for computers and like devices typically require the use of a standard Japanese character keyboard or a roman character keyboard which has been adapted for Japanese use. A typical kana keyboard has keys which represent typically only one kana set usually hiragana which may be input directly from the keyboard. A conventional method is to take the hiragana text from the keyboard containing the hiragana keys as an input and convert it into a Japanese text using a process called Kana Kanji conversion. A typical Japanese text is represented by hiragana katakana and kanji characters such as sentence which has English meaning of Watch a movie in San Jose . The text includes katakana characters which are corresponding to a foreign word of San Jose a hiragana character that is normally used as a particle and a kanji character set .

One of the conventional methods transliteration direct conversion from hiragana to katakana normally does not provide a correct result for most of the cases because typically users choose e.g. in a method shown in instead of the katakana word a segment containing the word and one or more trailing post particles that are written in hiragana in the final form. The normal transliteration will also convert all trailing post particles to katakana form which is incorrect.

Another conventional method generates alternative candidates by transliterating the leading sub string of the string. This method takes advantage of the fact that the trailing particles are always trailing and are all in hiragana. This method creates many candidates that may include the correct one among them. Following is an illustration of an example of the a conventional method in English 

One of the disadvantages of the conventional method is that if a Katakana word is not in the dictionary the conversion containing the Katakana word usually fails. Another disadvantage of this method is that it involves user specific interaction to convert and select the best candidate. It consumes more time and efforts if the user does not know the possible outputs of the conversion. Hence a better method to automatically and efficiently convert Japanese hiragana character string to katakana character string is highly desirable.

The present invention discloses methods and apparatuses for converting a first character string to a second character string. In addition to a regular dictionary the invention includes a virtual dictionary to generate an artificial character string based on the first character string. When the first character string cannot be converted through a regular dictionary e.g. the regular dictionary does not know the first character string the invention uses the artificial character string generated by the virtual dictionary to convert the first character string. Therefore with the virtual dictionary of the invention the conversion never fails.

In one aspect of the invention an exemplary method includes receiving a hiragana input automatically determining a plurality of possible katakana candidates based on the hiragana input analyzing the plurality of possible katakana candidates to convert the hiragana input to katakana characters selecting one of the katakana candidates and outputting converted text comprising the one of the katakana candidates and at least in some cases kanji characters.

In another aspect of the invention an exemplary method includes receiving a first character string having the source character string dividing the first character string into a plurality of sub strings converting the plurality of the sub strings to second character strings through a dictionary creating third character strings corresponding to the plurality of the sub strings analyzing the second and third character strings constructing fourth character strings from the second and third character strings based on the analysis creating a candidate list based on the fourth character strings selecting the target character string from the candidate list and outputting the target character string.

In one particular exemplary embodiment the method includes constructing the fourth character strings from the second character strings if the second character strings contain a character string corresponding to the first character string and constructing the fourth character strings from the third character strings if the second character strings do not contain the character string corresponding to the first character sting. In another embodiment the method includes examining the output of the conversion to determine whether the conversion is correct providing the candidate list of alternative character strings if the conversion is incorrect and selecting a character string from the candidate list as a final output. In a further embodiment the method includes providing an artificial target character string and updating the database based on the artificially created character string.

The present invention includes apparatuses which perform these methods and machine readable media which when executed on a data processing system causes the system to perform these methods. Other features of the present invention will be apparent from the accompanying drawings and from the detailed description which follows.

The following description and drawings are illustrative of the invention and are not to be construed as limiting the invention. Numerous specific details are described to provide a thorough understanding of the present invention. However in certain instances well known or conventional details are not described in order to not unnecessarily obscure the present invention in detail.

Japanese is written with kanji characters of Chinese origin and two sets of phonetic kana symbols hiragana and katakana. A single kanji character may contain one symbol or several symbols and may by itself represent an entire word or object. Unlike kanji kana have no intrinsic meaning unless combined with other kana or kanji to form words. Both hiragana and katakana contain 46 symbols each. Combinations and variations of the kana characters provide the basis for all of the phonetic sounds present in the Japanese language. All Japanese text can be written in hiragana or katakana. However since there is no space between the words in Japanese it is inconvenient to read a sentence when the words of the sentence are constructed by either hiragana or katakana only. Therefore most of the Japanese texts include hiragana katakana and kanji characters. Normally kanji characters are used as nouns adjectives or verbs while hiragana and katakana are used for particles e.g. of at etc. .

As computerized word processors have been greatly improved the Japanese word processing can be implemented through a word processing software. Typical Japanese characters are inputted as hiragana only because it is impractical to include all of hiragana katakana and kanji characters kana kanji in a keyboard. Therefore there is a lot of interest to create an improved method of converting hiragana characters to katakana characters. The present invention introduces a unique method to convert hiragana characters to katakana characters automatically based on the predetermined relationships between hiragana characters and katakana characters. The methods are normally performed by software executed in a computer system.

As shown in the computer system which is a form of a data processing system includes a bus which is coupled to a microprocessor and a ROM and volatile RAM and a non volatile memory . The microprocessor which may be a G3 or G4 microprocessor from Motorola Inc. or IBM is coupled to cache memory as shown in the example of . The bus interconnects these various components together and also interconnects these components and to a display controller and display device and to peripheral devices such as input output I O devices which may be mice keyboards modems network interfaces printers and other devices which are well known in the art. Typically the input output devices are coupled to the system through input output controllers . The volatile RAM is typically implemented as dynamic RAM DRAM which requires power continually in order to refresh or maintain the data in the memory. The non volatile memory is typically a magnetic hard drive or a magnetic optical drive or an optical drive or a DVD RAM or other type of memory systems which maintain data even after power is removed from the system. Typically the non volatile memory will also be a random access memory although this is not required. While shows that the non volatile memory is a local device coupled directly to the rest of the components in the data processing system it will be appreciated that the present invention may utilize a non volatile memory which is remote from the system such as a network storage device which is coupled to the data processing system through a network interface such as a modem or Ethernet interface. The bus may include one or more buses connected to each other through various bridges controllers and or adapters as are well known in the art. In one embodiment the I O controller includes a USB Universal Serial Bus adapter for controlling USB peripherals.

The virtual dictionary may include direct translation of the hiragana characters to katakana characters. The virtual dictionary may return all multiple words with different part of speeches. In one embodiment the virtual dictionary may return three parts of speeches. They are noun noun that can be used as verb and adjective. It is useful to note that artificially generated katakana words from the virtual dictionary look no different from regular words once they are returned from the virtual dictionary.

In another embodiment the dictionary database may be divided into two or more dictionaries. One of them is a regular dictionary containing regular words. The other dictionary is a special dictionary e.g. so called virtual dictionary . The special dictionary may contain all possible katakana characters including the artificial katakana characters created during the processing. The katakana is straight transliteration of the hiragana input. The virtual dictionary may return multiple words with different part of speeches. Each word has its priority value. Such priority value may be assigned by the virtual dictionary. For example in the implementation for string A Ka Ma I the dictionary may return three outputs with different part of speeches Noun Noun that is associated with verb and adjective as follows 

Three words can be considered as one record or they may be considered as three separate records. The priority value can be the same for all words returned from the dictionary. The priority value could be calculated from the katakana and or the part of speeches. In one embodiment the priority value is determined by the length of the word. In another embodiment the priority may be based on bi gram and tri gram statistics of the katakana and can be adjusted based on the part of speeches. Typically the priority value is set lower than all or most of regular words in regular dictionaries in order to prevent the artificial katakana words from appearing as the most probable conversion when there are proper regular words available.

Part of speeches defines how often or easy words of a certain part of speech come next to the other words of certain part of speech. It could be just yes no value. Subject to the implementation there are cases one word has two part of speeches. One for the right side connection and the other for left side connection. Also there are cases that it is also used to determine not only the next or previous words but also the connection with words at before the previous or after the next.

Referring to the MAE sends a request to DMM to convert the inputted hiragana words. The DMM searches the regular dictionaries for corresponding Japanese words. At the mean while the MAE then sends a request to DMM to retrieve all possible katakana character combinations from the virtual dictionary . In general the MAE will select the words from the regular dictionaries if the dictionaries contain such direct translation. Otherwise the MAE will select an artificial katakana word created by the virtual dictionary .

The MAE also invokes a set of rules from a database and applies the set of rules to the analysis of all possible combinations. The database containing the rules may be a separate database or it may be the same database as the dictionary or . Each of the possible combinations is associated with a usage frequency. The usage frequency represents how frequent the characters are previously being used. The dictionary may also include a connection relationship between each character set e.g. noun adjective and verb etc. . The set of rules may include the information of usage frequency and connection relationship. The MAE applies these rules to construct a possible candidate pool or list from the possible combination from the dictionary based on the set of rule. In one embodiment the set of rules may include semantic or grammar rules to construct the candidate list. For example the word hot may mean hot temperature or mean spicy food. When the word hot is associated with the word summer e.g. hot summer the word hot means more like hot temperature rather then spicy . The MAE may calculate the cost values of the candidates based on the set of rule. The final candidate may consist of the least cost value among the candidate list.

However although the evaluation unit selects the final output based on least cost value and in most cases the selected outputs are correct in some rare cases the correct output may not has least cost value. Under the circumstances the invention provides an opportunity for a user to interact. shows another embodiment of the present invention. Referring to the system provides a user interaction where the user can examine the output generated by the MAE and determine whether the output is correct. If the user decides the output is incorrect the MAE retrieves the candidate list from the database e.g. virtual dictionary through DMM and displays the candidate list to a user interface. In one embodiment the user interface may be a pop up window. The user then can select the best choice e.g. final choice from the candidate list as an output. In a further embodiment the output may be transmitted to an application through an application programming interface API from which the application may select a final choice.

In another embodiment if the candidate list does not contain a correct output the user desires the invention further provides means for user directly enters the final output manually and force the system to convert the hiragana characters to katakana characters. The system will update its database e.g. virtual dictionary or regular dictionaries to include the final output katakana word entered by the user as a future reference. In a further embodiment the user may in fact modify the rules applied to the conversion and store the user specific rules in the database .

The present invention introduces a virtual katakana dictionary . In addition to the conversion using regular dictionaries the virtual dictionary takes the sub strings and creates a set of corresponding artificial katakana words . By combining the regular words from the dictionaries and the artificial katakana words generated from the virtual dictionary and applying set of rules the full set of words corresponding to the sub strings are created. As a result each of the sub strings has its corresponding converted string which may be a regular Japanese word such as word or an artificial katakana word. The invention then creates a candidate list based on the set of rules . Each of the candidates is associated with a priority based on the rules. From the candidate list the word with highest priority is selected as final correct candidate .

Referring to Japanese hiragana character string is received through a user interface such as keyboard. In one embodiment the user interface may include a touch pad from a palm pilot or other inputting devices. In a further embodiment the Japanese hiragana character string may be received from an application software through an application programming interface API . The hiragana character string is divided into multiple sub strings. The morphological analysis engine MAE then communicates with the dictionary management module DMM to convert each of the sub strings into corresponding Japanese words through regular dictionaries. At the same time the MAE also instructs DMM to create all possible katakana words corresponding to the sub strings through the virtual dictionary. Next the system constructs possible candidates from the all possible words including Japanese words from the regular dictionaries and artificial katakana words generated from the virtual dictionary and forms a candidate list. The possible choices of the katakana words from the virtual dictionary may include part speech information. The system may use a set of rules to construct the candidates. In one embodiment the set if rules may include usage frequency of each katakana character set and connection relationship between each choice. In another embodiment the set of rules may include word s semantic or grammar rules. This information may be stored in the database where the all possible katakana character sets are stored. In another embodiment these rules may be stored in a separate database. The system next retrieves the usage frequency and connection relationships from the database and applies the semantic and grammar rules to the analysis. Based on this information the system calculates cost values for all candidates. The candidate with least cost value is then selected as final target character set. The final target character set may be displayed to a user interface in a display device.

In a yet another aspect of the invention a user may inspect the result provided by the kana kanji conversion engine to check whether the conversion is correct. If the user is satisfied with the result the conversion is done. However if the conversion is incorrect the user selects the portion of the input e.g. original hiragana input and instruct the system to explicitly convert it. The system in turn provides all possible combination of Japanese words including the artificial katakana words in a form of candidate list. The user then retrieves such candidate list and display in a user interface. In one embodiment the user interface is in a form of pop up window. Next the user may check whether the candidate list contain the correct conversion. If the candidate list contains the correct conversion the user selects the best candidate from the candidate list. The system then updates its database e.g. knowledge bases of the parameters e.g. usage frequency connection relationship etc. regarding to the user selection. The final selection is then outputted to the application. In one embodiment if the candidate list does not contain the correct result the user may construct and create the correct result manually through a user interface. Once the artificial conversion is created by the user the system saves such results in its database as a future reference.

In the foregoing specification the invention has been described with reference to specific exemplary embodiments thereof. It will be evident that various modifications may be made thereto without departing from the broader spirit and scope of the invention as set fourth in the following claims. The specification and drawings are accordingly to be regarded in an illustrative sense rather than a restrictive sense.

