---

title: Establishing communications sessions
abstract: A method of establishing a communications session in a communications system is disclosed. The communications system comprises a caller terminal (), a mobile terminal () associated with the caller terminal (), a callee terminal () associated with a callee and session initiation means (). It has become common yet frustrating for users to have to maintain contact lists on a multiplicity of communications devices (e.g. the caller terminal and the mobile terminal). The method comprises: (i) identifying the callee using the mobile telephone (); (ii) responsive to identification of said callee, transferring data identifying the callee from the mobile terminal () to the session initiation means (); and (iii) in dependence on the transferred data, operating the session initiation means () to establish a communications session between the caller terminal () and the callee terminal ().
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08340649&OS=08340649&RS=08340649
owner: British Telecommunications public limited company
number: 08340649
owner_city: London
owner_country: GB
publication_date: 20060227
---
This application is the US national phase of international application PCT GB2006 000688 filed 27 Feb. 2006 which designated the U.S. and claims benefit of EP 05251470.0 dated 11 Mar. 2005 the entire content of which is hereby incorporated by reference.

This invention relates to a method of and an apparatus for establishing a communications session in a communications system.

A common frustration for users of present communications devices is the maintenance of contacts lists on a multiplicity of such devices. For example a user might have a mobile telephone one or more fixed line cordless telephones and or one or more fixed line corded telephones each of which has the capacity to store its own independent contacts list.

It is known for the contacts list stored in the subscriber identity module SIM card of a mobile telephone to be made available for use in establishing a telephone call on a fixed line telephone. For example the Equinox 1200 digital cordless DECT telephone available from British Telecommunications plc has a SIM card reader. By temporarily removing the SIM card from a mobile telephone handset and plugging it into the Equinox 1200 handset the contacts list stored on the SIM card can be copied into the Equinox 1200 handset after which the SIM card can be returned to the mobile telephone handset. The contact list is then available for use in establishing calls on the Equinox 1200 handset. However if the contact list on the SIM card is modified this process must be repeated in order to enable the updated contacts list to be used on the fixed line handset.

According to a first aspect of the present invention there is provided a method of establishing a communications session in a communications system said communications system comprising a caller terminal a mobile terminal associated with said caller terminal a callee terminal associated with a callee and session initiation means said method comprising 

According to a second aspect of the present invention there is provided communication session initiation apparatus for establishing a communications session in a communications system said communications system comprising a caller terminal a mobile terminal associated with said caller terminal and a callee terminal associated with a callee said apparatus comprising 

By using a mobile terminal associated with a caller terminal to identify a callee and in response to the identification of the callee transferring data identifying the callee from the mobile terminal to session initiation means and in dependence on the transferred data operating the session initiation means to establish a communications session between the caller terminal and a callee terminal associated with the callee a mobile terminal can be used to establish a communications session on a caller terminal not having the necessary contact information and without the need to synchronise any contact databases associated with the mobile terminal and the caller terminal.

Preferably billing for the established communications session is applied to an account associated with the caller telephone.

In preferred embodiments the caller terminal comprises a caller telephone the callee terminal comprises a callee telephone and the communication session comprises a telephone call. For example the telephones could comprise a fixed line corded or analogue or digital cordless telephone. Preferably in such embodiments the data identifying the caller and callee terminals comprises the telephone numbers associated with the terminals. In alternative embodiments the data comprises information related to the location of the terminals e.g. latitude longitude coordinates derived using GPS global positioning system .

In alternative embodiments the caller terminal and or the callee terminal comprise a computer connected to a communications network and running a telephony software package. Preferably in such embodiments the data identifying the terminals comprises SIP session initiation protocol addresses.

In alternative embodiments the communication session comprises a multimedia communications session e.g. a video call . In such embodiments the communications terminals could for example take the form of video telephones or computers as described above.

In preferred embodiments the mobile terminal comprises a mobile telephone. In other embodiments it comprises for example a personal digital assistant suitably enabled to access a communications network.

In preferred embodiments the data relating to the mobile terminal comprises one or more of the International Mobile Station Equipment Identity the International Mobile Subscriber Identity and the Mobile Station Integrated Services Digital Network number which are all capable of uniquely identifying the combination of a mobile telephone handset and SIM card.

In preferred embodiments the data identifying the callee is stored in a contacts database on the mobile terminal. In alternative embodiments a user uses the mobile terminal to identify a callee in a source accessible from the mobile terminal e.g. from a WAP wireless application protocol or HTML page displayed on the terminal or from a contacts database that is resident in the communications network but accessed from the mobile terminal. In other embodiments the data is sent to the mobile terminal via an SMS or MMS message. In all these embodiments the data identifying the callee is easily accessible using the mobile terminal.

In preferred embodiments the method further comprises the antecedent step of associating said caller terminal with said mobile terminal by storing in a network based registration database a mapping between data identifying said mobile terminal and data identifying said caller terminal. In this way a record of registered users can be created and stored in the network which can be used to restrict access to a service operating in accordance with this method to registered users of the service.

Preferably the session initiation means is local to said caller terminal. Thus no additional equipment is required in the communications network.

Alternatively the session initiation means is remote to said caller terminal. In some embodiments therefore no additional customer premises equipment CPE is required.

Preferably when the call initiation means is remote to said caller telephone the session initiation means is operable to I establish a first leg of said communications session with said caller terminal II establish a second leg of said communications session with said callee terminal and III connect said first and second legs together.

In preferred embodiments the transferring step comprises transferring the data to the session initiation means initially via a wireless network. For example when the session initiation means is local to the caller terminal data could be transferred to the session initiation means via a Bluetooth WiFi 802.11 or comparable wireless network. When the session initiation means is remote to the caller terminal data could be transferred to it initially via a GPRS WiMax 3G or other similar network. In such cases no additional CPE equipment is required.

Preferably when the session initiation means is remote to the caller terminal the transferring step comprises transferring said data from said mobile terminal to said session initiation means via an intermediate device local to said mobile terminal and connected to an internet wherein said data is transferred via a wireless network between said mobile terminal and said intermediate device and via said internet between said intermediate device and said session initiation means. In this way data can be transferred to the session initiation means without needing to access a longer range wireless network such as a GPRS general packet radio service WiMax 3G or other similar network. The wireless network could comprise a short 0 30 m to medium range up to several kilometers depending on environmental and regulatory factors wireless network such as a Bluetooth WiFi 802.11 or similar wireless network.

Preferably the method further comprises associating a further caller terminal with said mobile terminal said further caller terminal itself being associated with different identification data to said caller terminal and operating said session initiation means to establish a communications session between one of said caller terminals and said callee terminal in dependence on the location of said mobile terminal. Preferably the further caller terminal is at a location remote to the caller terminal. In this way a user can register not just a single caller terminal but rather multiple caller terminals for example terminals at home at an office for use with a service operating in accordance with the method.

Preferably the method further comprises the step of storing in a database for each caller terminal a mapping between data identifying the caller terminal and data identifying the location of the caller terminal. The database can be based in the mobile terminal thus eliminating the need for further network resources or in the network thus reducing the memory requirements in the mobile terminal .

Preferably the mobile terminal is operable to determine its location. For example the mobile terminal could identify the mobile network cell that it is communicating with. In this way no extra network resources are needed to determine the location of the mobile.

In other embodiments the communications system further comprises a location server in communication with the mobile terminal and or the session initiation means and arranged in operation to provide location information e.g. longitude and latitude relating to the mobile terminal. The location information can be provided to the mobile terminal or the session initiation means. Preferably the method further comprises determining the location of the mobile terminal in dependence on the location information.

Preferably data identifying said caller terminal is additionally transferred in said transferring step. In this way if multiple caller terminals have been registered the caller terminal from which to establish the communications session can be identified. Moreover transferring the data identifying the caller terminal may alleviate the need to store it in advance and therefore alleviate the need for a separate network based database. In such embodiments the user could be charged each time they use the service operating in accordance with the method.

Preferably said caller terminal comprises a home caller terminal said communications system further comprises a visitor caller terminal said transferring step further comprises transferring data identifying said visitor caller terminal from said mobile terminal to said session initiation means said operating step comprises operating said session initiation means to establish said communications session between said visitor caller terminal and said callee terminal and billing for said communications session is applied to an account associated with said home caller terminal. In this way a user can be at a location other than their home office e.g. friend s colleague s partner s home office i.e. at a location that they themselves have not registered with a service operating in accordance with the present invention and use their mobile terminal to initiate a call at that location which is then billed to their own bill account.

In such embodiments the method preferably further comprises storing in a network based database a mapping between data identifying said mobile terminal and data identifying said visitor caller terminal. Alternatively the method preferably further comprises storing in a network based database a mapping between data identifying said visitor caller terminal and an authentication code wherein said transferring step further comprises transferring said authentication code from said mobile terminal to said session initiation means and said operating step is implemented if said transferred authentication code and said stored authentication code match. In these ways the person in charge of the visitor caller terminal can control who can access the service from the visitor location. Preferably the mappings could be stored for a predetermined period of time thus providing the person in charge of the visitor caller terminal with yet more access control. In all these embodiments the data identifying said visitor caller terminal preferably comprises the telephone number associated with the visitor caller terminal and the authentication code preferably comprises a four or more digit access code.

According to a first embodiment of the present invention and with reference to a communications system is provided which includes a mobile telephone handset such as the Nokia and a telephone A located at a location A . In the present embodiment telephone A may be a fixed line corded or analogue or digital cordless telephone and is connected to the public switched telephone network PSTN . The communications system further comprises a General Packet Radio Service GPRS network and a network call control server such as the Marconi Intelligent Networks platform which provides third party call control functionality as specified by the standard Parlay Application Programming Interface API . Third party call control refers to the ability of one entity to create a telephone call in which communication is actually between other parties. The network call control server is connected to PSTN . Connected to the network call control server is a Click2call application server which is described in more detail in relation to . The Click2call application server comprises a Java 2 Enterprise Edition J2EE application server on which the Click2call J2EE application resides. It also comprises two databases a registered users database and a location versus number database which comprise Extensible Markup Language XML datafiles loaded by the Click2call application server . The role and population of databases and the role of the Click2call application server will be described in more detail later.

With reference to mobile telephone handset comprises a Click2call application client that a user of handset can download e.g. over the GPRS network . In the present embodiment this application is a Symbian OS application although it could also comprise a Java application e.g. J2ME Java 2 Mobile Edition or personal Java or a SIM subscriber identity module card based application.

Call setup requests can be passed from Click2call application client to network call control server via Click2call application server . The Click2call application client and Click2call application server exchange messages over GPRS network using HTTP request response pairs which are described in the chapter entitled HTTP Transactions in Wong C. May 2000 ISBN 1 56592 862 8. The call setup requests are passed to drivers which interact with the Marconi platform via the Parlay call control API. It is also possible that this HTTP interface could comprise a Web Service API e.g. the Parlay X API.

Handset also comprises two databases a contacts database and a location versus number database . The contacts database comprises the address book or contact lists of handset and can be accessed by the Click2call application client . The location versus number database will be described in more detail later.

The process of establishing a communications session in accordance with this first embodiment of the present invention will now be described in relation to .

In an initial registration stage not shown the user registers mobile handset and telephone A with the Click2call service In the preferred embodiment the Click2call service is provided by the telephone company supplying service to telephone A . Registration can be effected by speaking to a call centre via mobile handset and or telephone A short message system SMS message from mobile handset using mobile handset and GPRS network to access a wireless application protocol WAP site or a combination of any of the above. Further ways of effecting registration of mobile handset and telephone A will be apparent to someone skilled in the art. The effect of registration is that a record is created in the registered users database which stores details of mobile handset and maps those details to the details of telephone A . The details of mobile handset that may be stored are the International Mobile Station Equipment Identity IMEI number a number unique to every mobile handset the International Mobile Subscriber Identity IMSI number a number unique to the SIM card inside the mobile handset and the Mobile Station Integrated Services Digital Network MSISDN number the phone number of mobile handset SIM card or a combination thereof. The details of telephone A that are stored include the telephone number of the telephone line used by telephone A . In preferred embodiments successful registration also enables the user to download the Click2call Symbian OS application client to mobile handset .

The Click2call application client is preferably configured to start automatically when mobile handset is switched on. Once running a user then uses the Click2call application client instead of the default phone book contacts list application of mobile handset .

In preferred embodiments when mobile handset is switched on the Click2call application client is configured to establish a GPRS session with GPRS network and open a connection with the Click2call application server . The Click2call application client subsequently sends periodic heartbeat messages to the Click2call application server e.g. every 5 minutes thus ensuring that the GPRS connection is maintained in an active state while mobile handset is switched on. This serves to reduce the delay at the time of establishing a communications session since the user will not have to wait for the GPRS session to be established before the Click2call application client connects to the Click2call application server . In other embodiments however a GPRS session could be opened when the Click2call application client is brought into the foreground by the user prior to placing a call or a GPRS session could be opened only when the user selects the callee.

When a user wishes to contact a callee they bring the Click2call application client into the foreground using the on screen menus of mobile handset . The Click2call application client is configured to present the contents of contacts database to the user which it will be remembered comprises the address book or contact lists of mobile handset . The user then searches for the required contact s name e.g. by scrolling down a list of contacts entering one or more initial letters of the name s on the keypad etc. and selects that contact . This is indicated in screenshot shown in . Upon selecting the required contact name the Click2call application client then presents the user with the option of calling the contact directly using the mobile handset and its associated mobile communications network or calling the contact via the Click2call service . This is indicated in screenshot shown in where Fixed Line Callback relates to the Click2call service option. If the user chooses to call the contact directly a normal mobile phone call is placed between mobile handset and the callee who uses telephone C of . If however the user selects to use the Click2call service as indicated by screenshot the Click2call application client sends an HTTP Post request to the Click2call application server requesting a call setup the Post request parameters including the telephone number of the telephone line used by the callee s telephone C and one or more of the IMEI IMSI and MSISDN of mobile handset .

The Click2call application server then consults Registered users database which it will be remembered contains details of registered mobile handsets and maps those details to the details of the fixed line telephones associated with the registered handsets to determine the corresponding telephone number of the telephone line used by telephone A . If a record is found in database then Click2call application server constructs an HTTP request and sends it to network call control server instructing it to setup a telephone call between telephone A and telephone C .

Network call control server then attempts to place one leg of the telephone call from itself to telephone A by sending a ringing signal e.g. 75V AC current 25 Hz over PSTN to telephone . Network call control server is configured to not allow any network based call diversion that may divert telephone calls way from telephone A e.g. to a network based answer phone service or to another telephone number not having a stored association with mobile handset A . In response to receiving the ringing signal telephone A rings thus alerting the user that he should lift the handset on telephone A . If the handset of telephone A is not lifted within a pre specified period of time the network call control server reports the failure to the Click2call application server which in turn reports the failure back to the Click2call application client on mobile handset which indicates the failure to set up the call to the user. If however the handset of telephone A is lifted within the specified period network call control server then attempts to place another leg of the telephone call from itself to telephone C by sending a ringing signal over PSTN to telephone C and then attempts to connect the two legs of the telephone call together so that it seems as if the telephone call to telephone C had been dialed directly from telephone A . The user can hear a ringing tone through the handset of telephone A and telephone C rings thus alerting the callee that there is an incoming telephone call to telephone C . Once the network call control server has connected the two legs of the telephone call together it plays no further part in the process as it has succeeded in establishing a telephone call from telephone A to telephone C . The callee then picks up the handset of telephone C and can converse with the user who is using telephone A . Billing for the telephone call is arranged by the network call control server to be applied to the account of telephone A . If the handset of telephone C is not picked up then the user will realise that the person he wanted to speak to i.e. the callee is not available and the user then replaces the handset of telephone A ending the telephone call between telephone A and telephone C .

According to a second embodiment of the present invention and in relation to a communications system is provided which like in the previously described first embodiment includes telephone A located at location A and telephone C both connected to PSTN Click2call application server network call control server and GPRS network . The second embodiment differs from the first embodiment in that the communications system further comprises a telephone B at a location B . Like telephone A in the present embodiment telephone B may be a fixed line corded or analogue or digital cordless telephone and is connected to PSTN .

In this embodiment the user may register both telephone A and telephone B with the Click2call service and hence may use mobile handset to make a call to a callee using the Click2call service from either location A or location B . Location A may be the user s home whilst location B may be the user s office.

The method of registering mobile handset telephone A and telephone B with the Click2call service is similar to that described above in the first embodiment and results in records being created in the registered users database which store details of mobile handset and map those details to the details of both telephone A and telephone B . Registration is carried out both at location A and location B . During registration at location A the function GetCellID of the Symbian Mobinfo API is run on mobile handset to obtain the Cell Global Identifier CGI of the mobile network cell that mobile handset is communicating with at location A . A CGI uniquely identifies each cell in a mobile communications network and thus assuming location A and location B are separated by a large enough distance mobile handset will communicate with different cells at location A and location B . Cell sizes can range from 1 km in urban areas to c35 km in rural areas. Alternative embodiments for the situation where a user wants to use the Click2call service with two telephones in the same cell will be described later.

Thus during registration the CGI at location A is mapped to the telephone number of telephone A and the mapping is stored as a record in location versus number database of mobile handset . Similarly during registration at location B another record is created in location versus number database that maps the CGI at location B to the telephone number of telephone B .

Like in the above described first embodiment the Click2call application client is preferably configured to start automatically when mobile handset is switched on. Once running a user then uses the Click2call application client instead of the default phone book contacts list application of mobile handset .

The process of establishing a communications session in accordance with this embodiment of the present invention will now be described in relation to and is largely similar to the process described above in relation to .

If the user selects to use the Click2call service the Click2call application client runs the GetCellID function of the Symbian Mobinfo API in order to get to obtain from the mobile handset operating system OS the CGI of the mobile network cell that mobile handset is communicating with . Then Click2call application client consults the location versus name database of mobile handset in order to find the identity of the telephone that is associated with the previously obtained CGI . If mobile handset is at location A mobile handset OS returns the CGI of location A and the identity of the associated telephone is that of telephone A . Alternatively if mobile handset is at location B mobile handset OS returns the CGI of location B and the identity of the associated telephone is that of telephone B .

The process for subsequent steps to is then the same as that described above for steps to in relation to except that the HTTP Post request sent by Click2call application client to Click2call server requesting call setup step also includes the telephone number of either telephone A or telephone B as one of the Post request parameters depending on the location of mobile handset . The process results in the creation of a telephone call from either telephone A or telephone B to telephone C depending on the location of mobile handset .

According to a third embodiment of the present invention the communications system of further comprises a location server . Mobile handset is also operable to connect to a web service interface of location server via a GPRS connection over GPRS network . Connection could either be direct to a mobile network operator s location lookup service for example the mobile operator Oprovide access to the Location API a web service API to members of the SourceODeveloper Forum or through a third party product such as Verilocation from Overview Mapping Solutions UK or mapAmobile from Cybit Ltd. UK .

Location server can be used to determine the location of mobile handset in situations where the user wishes to register multiple locations for use with the Click2call service but those locations are too close together i.e. they share a common CGI. Location server is operable to supply on request location information relating to the position location of mobile handset at the time the request is made. That Information may include the latitude longitude and accuracy of the supplied longitude and latitude e.g. in meters .

The method of registering mobile handset telephone A and telephone B with the Click2call service is similar to that described above in the first embodiment and results in records being created in the registered users database which store details of mobile handset and map those details to the details of both telephone A and telephone B . Like in the second embodiment registration is carried out both at location A and location B . During registration at location A mobile handset establishes a GPRS connection with GPRS network and sends a location request to location server . Location server responds with the location information of mobile handset which can then be mapped to the telephone number of telephone A . The mapping is then stored as a record in location versus number database of mobile handset . Similarly during registration at location B another record is created in location versus number database that maps the location information of mobile handset at location B to the telephone number of telephone B .

Like in the above described first embodiment the Click2call application client is preferably configured to start automatically when mobile handset is switched on. Once running a user then uses the Click2call application client instead of the default phone book contacts list application of mobile handset .

The process of establishing a communications session in accordance with this embodiment of the present invention will now be described in relation to and is largely similar to the process described above in relation to .

If the user selects to use the Click2call service the Click2call application client sends a location request to location server which responds with the location information of mobile handset . Then Click2call application client consults the location versus name database of mobile handset in order to find the identity of the telephone that is associated with the previously obtained location information . If mobile handset is at location A location server returns the location information of location A and the identity of the associated telephone is that of telephone A . Alternatively if mobile handset is at location B location server returns the location information of location B and the identity of the associated telephone is that of telephone B .

The process for subsequent steps to is then the same as that described above for steps to in relation to except that the HTTP Post request sent by Click2call application client to Click2call server requesting call setup step also includes the telephone number of either telephone A or telephone B as one of the Post request parameters depending on the location of mobile handset . The process results in the creation of a telephone call from either telephone A or telephone B to telephone C depending on the location of mobile handset .

In the above described third embodiment it is mobile handset that determines where it is by contacting the location server itself. Alternatively according to a fourth embodiment of the present invention the Click2call application server contacts the location server and sets up the call accordingly.

It will be recalled that in the third embodiment during the registration stages location information for location A was mapped to the telephone number of telephone A and then stored as a record in location versus number database of mobile handset . Similarly during registration at location B another record was created in location versus number database that maps the location information of mobile handset at location B to the telephone number of telephone B . In the present embodiment however these mappings of location information to telephone numbers are stored instead in the location versus number database of Click2call application server .

The process of establishing a communications session in accordance with this fourth embodiment of the present invention will now be described in relation to . The process for steps to is the same as that described above for steps to of .

It will be recalled that if the user selects to use the Click2call service the Click2call application client sends an HTTP Post request to the Click2call application server requesting a call setup . Upon receiving such a request Click2call application server sends a location request to location server which responds with the location information of mobile handset . Then Click2call application server consults location versus name database in order to find the identity of the telephone that is associated with the previously obtained location information . If mobile handset is at location A location server returns the location information of location A and the identity of the associated telephone is that of telephone A . Alternatively if mobile handset is at location B . location server returns the location information of location B and the identity of the associated telephone is that of telephone B .

The process for subsequent steps to is then the same as that described above for steps to in relation to which results in the creation of a telephone call from either telephone A or telephone B to telephone C depending on the location of mobile handset .

In all the previous embodiment the Click2call application client installed on mobile handset and the Click2call application server exchange messages via GPRS network . However there may be circumstances where a GPRS network is not available or the user may incur additional charges through the use of the GPRS network. Moreover in the above described embodiments that involved use of location server additional charges would be incurred when location information is requested from location server . Both the use of the GPRS network and location server may also add delays and therefore increase the response time of the Click2call service.

According to a fifth embodiment of the present invention and referring now to the communications system comprises a mobile telephone handset and a telephone D located at a location D . Like in the previously described embodiments in the present embodiment telephone D may be a fixed line corded or analogue or digital cordless telephone connected to the public switched telephone network PSTN . Also connected to PSTN is network call control server and connected to it is Click2call application server . Mobile handset again includes a Click2call application client and two databases a contacts database and a location versus number database . The contacts database comprises the address book or contact lists of handset and can be accessed by the Click2call application client .

In this fifth embodiment the Click2call application client and Click2call application server exchange messages over a combination of a short medium range wireless connection e.g. Bluetooth WiFi 802.11 etc. and an always on internet connection broadband DSL digital subscriber line cable modem LAN local area network connection etc. Preferably mobile handset exchanges messages with Click2call application server via a Bluetooth enabled ADSL router modem hereinafter BT basestation such as the Bluetooth ADSL Voice and Data Access Point available from IVT Corporation using HTTP request response pairs. Message exchange between mobile handset and BT basestation is over a Bluetooth connection whilst message exchange between BT basestation and Click2call application server is over the internet connection. Other connection options will be apparent to someone skilled in the art.

The process of establishing a communications session in accordance with this fifth embodiment of the present invention will now be described in relation to .

As in the previously described embodiments the user registers mobile handset and telephone D with the Click2call service in an initial registration stage not shown . The Click2call application client is preferably configured to start automatically when mobile handset is switched on. Once running a user then uses the Click2call application client instead of the default phone book contacts list application of mobile handset .

The next stage is then to associate BT basestation with telephone D . When the user first wishes to register BT basestation they select an appropriate option on the GUI graphical user interface of the Click2call application client . In combination with Bluetooth service discovery functionality of mobile handset Click2call application client then searches for Bluetooth devices to which it can connect by searching for Bluetooth signals that are being output from nearby Bluetooth devices that are in a discoverable state those skilled in the art will know that Bluetooth signals have a limited range of approximately 10 m . The method of placing a Bluetooth in a discoverable state i.e. enabling it to be found by another Bluetooth device varies from device to device but may involve pressing a button on the device.

The GUI of Click2call application client displays to the user a list of nearby Bluetooth devices and the user selects the identifier for the chosen Bluetooth device which in the present embodiment is the identifier of BT basestation . This action pairs mobile handset and BT basestation i.e. certain connection information e.g. device name passkey etc. is saved so that subsequent actions can occur automatically. 

By communicating with Click2call application server Click2call application client is aware of the identity of telephone D that the user has registered with the Click2call service. The GUI of Click2call application client then displays to the user the identity of telephone D and any other telephones that the user may have registered with the Click2call service for use in conjunction with mobile handset and the user selects the appropriate identifier which in the present embodiment is the identifier of telephone D . This creates an entry in the location versus number database of mobile handset associating BT basestation with telephone D . It is to be noted that on subsequent occasions when the user wishes to use the Click2call service from the same location D the above described association process does not need to be repeated. Rather when the user of handset comes into range of BT basestation mobile handset is able to detect the presence of BT basestation note its identity and therefore determine that telephone D is the appropriate telephone to use at location D when the Click2call service is initiated. Optionally mobile handset can be configured to alert the user to the fact that the Click2call service is available at that location through for example a visual or aural signal.

Preferably when mobile handset is switched on the Click2call application client is configured to establish a connection over Bluetooth to BT basestation which itself establishes a connection over the internet to Click2call application server . In other embodiments however the connections could be established when the Click2call application client is brought into the foreground by the user prior to placing a call or the connections could be established only when the user selects the callee to be called.

When a user wishes to place a call to a callee the process for steps to is the same as that described above for steps to of .

If the user selects to use the Click2call service the Click2call application client consults the location versus name database of mobile handset in order to find the identity of the telephone that is associated with BT basestation which in this case is telephone D .

Then Click2call application client sends an HTTP Post request to the Click2call application server via BT basestation requesting a call setup the Post request parameters including the IMEI IMSI and MSISDN of mobile handset the telephone number of the telephone line used by telephone D and the telephone number of the telephone line used by the callee s telephone C .

The process for subsequent steps to is then the same as that described above for steps to in relation to and results in the creation of a telephone call from telephone D to telephone C .

According to a sixth embodiment of the present invention and referring now to the communications system comprises a mobile telephone handset and a telephone E located at a location E . Like in the previously described embodiments in the present embodiment telephone E may be a fixed line corded or analogue or digital cordless telephone connected to the public switched telephone network PSTN . Mobile handset again includes a Click2call application client and contacts database . The contacts database comprises the address book or contact lists of handset and can be accessed by the Click2call application client .

Unlike in previous embodiments call setup in this sixth embodiment is not performed by network based servers but rather by customer premises equipment CPE . Thus the communications system further comprises a wireless basestation situated at location E and connected to telephone E PSTN and a power source not shown .

Referring now to wireless basestation comprises a wireless receiver connected to a controller . Also connected to controller are switching circuit ringing current generator onhook offhook detector and ringing detector . Onhook offhook detector is also connected to switching unit . Ringing generator is connected to telephone E ringing detector is connected to PSTN and switching unit is connected to both telephone E and PSTN .

If the handset of telephone E is lifted this is detected by onhook offhook detector causing controller and switching unit to connect telephone E to PSTN . Also if ringing detector detects any incoming calls from PSTN controller causes ringing generator to send a ringing signal to telephone E .

In this sixth embodiment Click2call application client and wireless basestation exchange messages via wireless receiver over Bluetooth however any short medium range wireless connection e.g. WiFi 802.11 etc. could be used.

The process of a user placing a telephone call to a callee in accordance with this sixth embodiment of the present invention will now be described in relation to .

As in the previously described embodiments the user downloads the Click2call application client to mobile handset and installs wireless basestation not shown . The Click2call application client is preferably configured to start automatically when mobile handset is switched on. Once running a user then uses the Click2call application client instead of the default phone book contacts list application of mobile handset .

In step the user pairs mobile handset with wireless basestation . The user selects an appropriate option on the GUI graphical user interface of the Click2call application client . In combination with Bluetooth service discovery functionality of mobile handset Click2call application client then searches for Bluetooth devices to which it can connect by searching for Bluetooth signals that are being output from nearby Bluetooth devices that are in a discoverable state those skilled in the art will know that Bluetooth signals have a limited range of approximately 10 m . The method of placing a Bluetooth in a discoverable state i.e. enabling it to be found by another Bluetooth device varies from device to device but may involve pressing a button on the device. The GUI of Click2call application client displays to the user a list of nearby Bluetooth devices and the user selects the identifier for the chosen Bluetooth device which in the present embodiment is the identifier of wireless basestation . This action pairs mobile handset and wireless basestation .

Preferably when mobile handset is switched on the Click2call application client is configured to establish a connection over Bluetooth to wireless basestation . In other embodiments however the connections could be established when the Click2call application client is brought into the foreground by the user prior to placing a call or the connections could be established only when the user selects the callee to be called. Preferably a visual and or aural notification is provided to the user that he is within range of wireless basestation .

When a user wishes to place a call to a callee the process for steps to is the same as that described above for steps to of . Upon selecting the required contact name and if the user is within range of wireless basestation the Click2call application client presents the user with the option of calling the contact directly using the mobile handset and its associated mobile telecommunications network or calling the contact via the Click2call service . If the user is not within range of wireless basestation then the call is placed directly using the mobile handset .

If the user selects to use the Click2call service the Click2call application client sends a request to wireless basestation requesting a call setup the request parameters including the telephone number of the telephone line used by the callee s telephone C .

Controller of wireless basestation receives the request via wireless receiver and exchanges messages with switching unit and onhook offhook detector to check whether a telephone call is currently being held on the telephone line that telephone E is connected to. If a call is currently in progress then the call setup request from Click2call application is declined. Preferably a visual and or aural indication of the call setup request failure is provided to the user. If no call is in progress controller then sends a message to ringing generator causing a ringing signal to be sent to telephone E thus causing telephone E to ring . Preferably at the same time a placing call confirmation message is sent to handset for display on the screen of handset .

As soon as the user picks up the handset of telephone E controller and switching unit connect telephone E to PSTN and dial the requested telephone number of callee s telephone using DTMF dual tone multiple frequency dialing.

The user hears a ringing tone through the handset of telephone E and telephone C rings thus alerting the callee that there is an incoming telephone call to telephone C . A telephone call from telephone E to telephone C has been created. The callee then picks up the handset of telephone C and can converse with the user who is using telephone E . If the handset of telephone C is not picked up then the user will realise that the person he wanted to speak to i.e. the callee is not available and the user then replaces the handset of telephone E ending the telephone call between telephone E and telephone C .

A modification of the communications system according to this sixth embodiment is described below in relation to .

In this modification a wireless access point phone adapter and a private LAN replace wireless basestation . Telephone E is connected to phone adapter which is also connected to PSTN . Access point may be the Bluetooth Access Point available from Belkin Corporation CA USA and hence mobile telephone handset is able to exchange data with access point over Bluetooth.

Phone adapter may be the Sipura phone adapter SPA 3000 available from Sipura Technology Inc. CA USA. Both access point and phone adapter are connected to LAN and use private Internet Protocol IP addresses that can be fixed in advance.

In the modification session initiation protocol SIP 3party call control techniques as described in section 4.1 of Request for Comment 3725 of the Internet Engineering Task Force IETF are used. Click2call application client sends SIP messages as defined in RFC 3725 to create a SIP session between the telephone E that is connected to phone adapter and PSTN that is also attached to phone adapter .

Phone adapter provides two SIP clients one associated with telephone E which has a predetermined static SIP address e.g. telephoneE 192.168.1.11 5060 and one associated with PSTN which has a dynamic SIP user name e.g. 646473 192.168.1.11 5061 which if set to a valid telephone number i.e. 646473 will cause the PSTN SIP client to dial the telephone number and provide a SIP to PSTN bridging function. RFC 3725 defines the SIP message flow between the two SIP clients in phone adapter and Click2call application client that enables the media streams for the two SIP clients i.e. voice data to be connected to enable a user of telephone E to talk to a user of telephone C . Click2call application client provides the Controller function described in RFC 3725.

It will be apparent from the foregoing description that many modifications or variations may be made to the above described embodiments without departing from the invention. Such modifications and variations include 

Although in some of the above described embodiments two locations were described location A and location B and at each of the locations the exchange of messages between Click2call application client and Click2call application server was via GPRS network it is also possible that more than two locations can be registered with the Click2call service and the exchange of messages at one or more of the locations could be via a combination of a short medium range wireless connection and a high speed internet connection as described above in relation to the fifth embodiment. It is also possible that one or more of the multiple locations is equipped with apparatus as described above in relation to the sixth embodiment.

It may also be the case that a wireless basestation is provided at one or more locations that does not have access to the internet. In such a case the method for determining the location of mobile handset and therefore which location s telephone to use as described above in relation to the second third or fifth embodiments could be used but then a GPRS connection could be used to contact Click2call application server in order to setup the Click2call service telephone call.

In the above described embodiments during the call setup process the user does not get any acknowledgement of how the setup process is progressing and thus it may end for a reason unbeknown to him. In alternative embodiments Click2call application server or wireless basestation could be arranged to send to Click2call application multiple acknowledgement messages as the call setup process progresses which would be displayed on the screen of mobile handset . Alternatively or additionally an aural signal could give some indication to the user of the progress of the call setup process. The stages of the call setup process that could be acknowledged with progress messages include Telephone A B D E ringing engaged answered not answered within timeout hung up telephone C ringing engaged answered not answered within timeout hung up. Other stages of the setup process that could be acknowledged by progress messages will be apparent to someone skilled in the art.

Although in the above described fifth and sixth embodiments the user manually selected whether to call directly from mobile handset or to use the Click2call service the system could be configured to automatically use the Click2call service whenever mobile handset was within range of one of its registered wireless basestations. Alternatively when the user selects a contact to call Click2call application client could be configured to automatically determine whether to place the call over the mobile network or via the Click2call service in dependence on the phone number of the contact to be called and the costs associated with each option. For example if the telephone number of the contact to be called is a mobile telephone number that is part of the same mobile network as the user s telephone number it may be cheaper to place the call over the mobile network and not via the Click2call service. However if the telephone number of the contact to be called is a fixed line telephone number then it may be cheaper to use the Click2call service.

Although in the above described sixth embodiment if a call was found to be in progress the call setup request from Click2call application was declined in an alternative embodiment the call setup request could be accepted. In this embodiment controller would monitor the state of the line i.e. whether the handset of telephone E was onhook or offhook and when it was onhook i.e. no call was in progress it could then initiate the call setup routing as described above in relation to steps to of . Acknowledgement messages could be sent to the user at various stages of the process to alert him to the fact that the line was busy but that call setup would be initiated as soon as the line became free.

Although in the above described embodiments communication sessions were established between telephones in alternative embodiments one or more telephones could be replaced by other communication terminals such as a computer connected to the internet via an always on data connection e.g. an ADSL broadband connection and running a telephony software package such as BT Communicator available from British Telecommunications plc.

Moreover although in the above described embodiments the communication sessions that were established were voice telephone calls in alternative embodiments the communication sessions could comprise multimedia communication sessions such as video calls. In such embodiments the caller and callee identification data could comprise SIP addresses or other forms of identifier instead of telephone numbers. Also the communications terminals in such embodiments may comprise for example video telephones or computers as described above.

In the above described embodiments the data identifying the callee was found in a contacts database on the mobile telephone. In alternative embodiments the user could select a callee from any source easily accessible from the mobile terminal. For example from a WAP wireless application protocol or HTML page displayed on the terminal or from a contacts database that is resident in the communications network but accessed from the mobile terminal. It is also possible for the data to be sent to the mobile terminal via an SMS or MMS message.

Although in the above described embodiments a mobile telephone handset was described in alternative embodiments it could be replaced by other forms of mobile communications terminal such as a GSM GPRS enabled personal digital assistant like the Treo 650 available from PalmOne Inc. USA.

Although in the above described embodiments a communications session was established between a caller terminal and a callee terminal it is also possible to establish a communications system between a caller terminal and more than one callee terminal like when setting up a conference call. In such embodiments the user could identify more than one callee using the mobile terminal before transmitting a session setup request thus establishing a communications session with multiple callees at one time. Alternatively the user could establish a first session with a first callee and then establish subsequent sessions with more callees.

In alternative embodiments the user may have registered the mobile handset and one or more caller telephones but may want to use the service in another location with an unregistered caller telephone. For example the user may be at a friend s house office or at the office of a customer partner. In such embodiments the user would have already registered their mobile handset and at least one caller telephone hereinafter called a home caller telephone with the Click2call service. The home caller telephone is the caller telephone associated with an account that is billed when the user establishes telephone calls from their mobile handset. The owner of the third party caller telephone hereinafter visitor caller telephone would have also registered a caller telephone with the Click2call service and now wishes to enable someone else i.e. the user to use Click2call service on the visitor caller telephone perhaps for only a limited predetermined period of time .

In certain embodiments upon registering the visitor caller telephone the owner of the visitor caller telephone would be sent an access code e.g. a four digit PIN number which he can give to the user. A mapping between the access code and an identifier of the visitor caller terminal e.g. telephone number is created and stored in the network. To establish a call the user would identify the contact they wish to call using their mobile handset enter the telephone number associated with the visitor caller terminal and enter the access code. This information is sent to the Click2call server which validates the access code against the identifier of the visitor caller telephone and requests call setup with billing applied to the account associated with the home caller telephone.

Alternatively the owner could dial a short code followed by an identifier of the user s mobile telephone e.g. the MSISDN number telephone number . A mapping between the identifier of the mobile handset and an identifier of the visitor caller telephone e.g. telephone number is created and stored in the network. To establish a call the user would identify the contact they wish to call using their mobile handset and enter the telephone number associated with the visitor caller terminal. This information is sent to the Click2call server which validates the identifier of the mobile handset against the identifier of the visitor caller telephone and requests call setup with billing applied to the account associated with the home caller telephone.

Alternatively the owner may have a wireless access point as described above in relation to the fifth or sixth embodiments in which case an identifier of the access point e.g. IP address can be used to validate the request.

