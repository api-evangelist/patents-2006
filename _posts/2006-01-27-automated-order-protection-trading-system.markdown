---

title: Automated order protection trading system
abstract: Methods and systems for trading financial or commodity assets are presented. In particular, the invention relates to a trading system and method that operates with third party data and a Third Party Inside Market to promote fair and orderly transactions. In some embodiments, a client order or client bid/offer is protected by automated order protection (AOP), which may be a set of rules or specifications that can modify a client's order. In certain embodiments, an average weighted price function is used to protect a client order that might be larger than the best bid/offer. In other embodiments, an autofill, a tie-breaking, and a wait-for-follow process can be used to promote trading opportunities for dealers and/or clients.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07860796&OS=07860796&RS=07860796
owner: MarketAxess Holdings, Inc.
number: 07860796
owner_city: New York
owner_country: US
publication_date: 20060127
---
This application claims the benefit of U.S. Provisional Patent Application No. 60 647 525 filed Jan. 27 2005 which is hereby incorporated by reference herein in its entirety.

The present invention relates to systems and methods for trading financial or commodity assets. In particular the invention relates to a trading system and method that operates with third party data to promote fair and orderly transactions.

There exist a number of marketplaces for financial or commodity assets that are not organized on exchanges such as the New York Stock Exchange or the Chicago Board of Trade. Rather these markets are more fragmented over the counter OTC markets. Some of the largest markets in the world such as the markets for U.S. Treasury Bills Notes and Bonds are not exchange traded and instead are typically served by market makers who are dealers in the securities or commodities and provide markets to customers who are not themselves market makers. Market makers Dealers also deal with each other in order to manage their market risk and inventories of tradable assets. Trading activity in such markets can be broadly divided into two segments 1 Inter dealer trading and 2 Dealer to customer trading. For example The Federal Reserve Bank of New York reports the trading activity of Primary Dealers in U.S. Treasury securities in two categories Transactions with Interdealer brokers and Transactions with Others.

Dealers and customers Clients of Dealers traditionally trade with each other in non exchange based markets. The non exchange markets allow the Clients to inquire on prices of particular assets from Dealers and choose whether to trade the assets at those prices. Sometimes a Client will receive a price and then negotiate further to reach a final price. In this context clients are often referred to as price takers and Dealers as price makers. One of the reasons for an inquiry based behavior is that away from an exchange market pricing is not entirely transparent to all parties. Clients need to make inquiries to discover with certainty prices available for trading a particular asset.

Even with electronic innovations in Client to Dealer trading the marketplace has largely remained bound to traditional patterns of Client to Dealer relationships. Electronic Client to Dealer trading of U.S. Treasury and Corporate bonds for example typically takes the form of inquiries sent by a Client to one or more Dealers. Dealers typically respond with prices that are executable for certain periods of time and the Dealers may update these prices for a limited period of time as part of their response to the inquiry. Electronic trading has improved the efficiency of the price discovery and trade settlement processes but has not fundamentally changed the dialog of the trading process. Some systems do permit Clients to send an order with an executable price to a Dealer. In these the Dealer is authorized to execute a trade without further communication with the Client but with limitations such as the number of dealers that may be utilized and or the time period for executing the order.

Electronic innovations have proceeded in parallel and separate paths in the two separate market segments of interdealer trading and Client to Dealer trading. Interdealer trading in large liquid but non exchange traded markets such as spot foreign exchange and U.S. Treasuries may utilize fully electronic cross matching systems operated by interdealer brokers whose operation resembles that of electronic futures exchanges or equity electronic crossing networks ECNs even though they are not actually exchange markets. These fully electronic interdealer broker IDB markets provide continuous liquidity and an executable quality level of transparency. That is it is possible to see levels with associated quantities that actually can be executed in real time over a continuous period of time for those quantities shown.

Electronic trading systems in Client to Dealer trading on the other hand particularly multi dealer systems do not provide continuous liquidity and full transparency. Systems that do provide continuous liquidity do so only at levels fixed by the Dealer s and do not allow the Client to specify their own price to for the purpose of continuous order matching. Transparency is typically limited to indicative levels that may or may not show quantity information. These pricing levels may be near executable levels and updated frequently or they may be periodic updates such as twice a day. Clients send an inquiry when they have a trading interest such as to buy bonds and typically dealers respond with prices that are good for a short period of time e.g. a few seconds that may automatically update in order to slightly extend the period of time that prices are available for execution. Frequently upon receiving an electronic inquiry the Dealer automatically responds to the Client with an executable price. The executable price can be generated using a process that utilizes third party market data such as prices from the electronic IDB market and proprietary data such as the Dealer s database of pricing relationships. The database can include pricing relationships between more liquid benchmark securities and less liquid securities that are priced based upon the levels of the benchmark securities.

Clients obtain reasonably competitive execution by sending inquiries to multiple dealers and comparing responses when they return. This execution however is competitive only for the instant in time when the client sends the inquiry. The timing characteristics of such inquiry models do not directly support more patient trading strategies that are considered a vital part of trading on exchanges or even in trading in the IDB markets for non exchange based products. Patient trading sacrifices the certainty of immediate execution for the possibility of achieving a better price through the general volatility of the market. Patient trading also gives Dealers the ability to find more matching interests that may enable them to fill a Client order with less risk and possibly cost to themselves producing a more favorable trade execution for the Client.

There are a variety of reasons for the separate nature of the electronic IDB markets and electronic Client to Dealer trading. IDB markets are typically anonymous and often clear their trades through a central netting counterparty in order to reduce cost and risk for market participants. Clients often do not wish to trade anonymously because they prefer to know their counterparty and Clients are often not eligible to participate in central netting arrangements. This is especially true when such nets involve mutualization of risk which institutional investors such as mutual funds are not typically permitted to engage in by their own bylaws. Thus Client to Dealer trading systems do not provide the Client with the quality of execution benefits of the fully electronic IDB systems such as access to continuous liquidity transparency trade matching opportunities while at the same time retaining the desired characteristics of traditional Client to Dealer trading such as the flexibility to execute non round lot amounts and the ability to trade on a disclosed relationship basis.

Certain embodiments of the present invention provide investors Clients who transact securities in an over the counter OTC market or other marketplace that is not an exchange with the ability to reference and benefit from the transparency as well as continuous liquidity available in third party markets such as electronic interdealer broker markets IDBs that serve the professional Dealers of the OTC market. The market making function is improved for both Dealers and Clients by providing continuous real time opportunities for trade matching between Dealers and Clients thereby improving liquidity and economic efficiency for both.

Some embodiments may guarantee to investors and Dealers that the matching process is fair and orderly by automatically providing price protection to any Client orders placed with Dealers. The price protection can guarantee that any potential trade matches for a given asset will occur within a price range controlled by the most competitive markets for that asset on an electronic IDB market. That is the clearing price or execution of any Client order filled by a Dealer will occur within bounds automatically controlled by the TPIM which is the highest bid and the lowest offer available on the referenced electronic IDB market at the time of order execution.

Some embodiments may also improve the liquidity discovery process for Clients through the use of rule based processing to maximize the breadth of Dealer liquidity available to the Client at the moment the Client places an order. This process allows the Client to reach very broadly and in a controlled manner across the available Dealer set to attempt a trade match prior to pursuing the protected order process with Dealers as described above.

Certain embodiments of the invention may include a method of financial trading comprising forwarding a client order to at least one exclusive dealer. The client order remains active for an exclusive time for possible execution by the at least one exclusive dealer. Upon expiration of the exclusive time if the client order remains open a transition into an open phase occurs where the client order is forwarded to at least one permissioned dealer for execution by the at least one permissioned dealer. Upon expiration of an open period time if the client order remains open a transition occurs into a protected order phase where automatic order protection AOP rules protect the client order.

Some embodiments of the invention include a method of financial trading including forwarding a client order to at least one dealer entering a protected order phase applying order protection to the client order based on Third Party Market data and modifying the client order based on at least one of the TPIM data and Third Party Data.

Certain embodiments of the invention are a system for financial trading that include a server. The server receives Third Party Data and is coupled to a client computer. The server provides Third Party Data to the client computer and the server receives client orders. A dealer computer is also coupled to the server. The server forwards client orders to the dealer computer and an automated order protection processor implemented in the server. The automated order protection processor determines whether to transition the client order to an order protection state based on Third Party Inside Market TPIM data and the order protection processor modifies the client order based on at least one of TPIM data and Third Party Data.

Some embodiments of the invention are a system for financial trading including a first means for providing a server. The first means receives third party data and is coupled to a second means for providing a client computer. The first means provides third party data to the second means and the first means receives client orders. A third means for providing a dealer computer is also coupled to the first means. The first means places client orders with the third means and a protection means for processing automatic order protection is implemented in the first means. The second means checks TPIM data against the client order to determine whether to apply order protection to the client order and the order protection modifies a price level in the client order based on the TPIM data.

Certain embodiments are a method of financial trading involving a client and at least one dealer that include forwarding the client order to at least one exclusive dealer. The client order remains active for an exclusive time for possible execution by the at least one exclusive dealer. Upon expiration of the exclusive time with the order remaining open a transition occurs into a protected order phase where automatic order protection AOP rules protect the client order.

In certain embodiments elements such as an average weighted price function that calculates order protection levels using prices for at least one of bids and offers an autofill function that fills a client of order when there is a price difference between a client and dealer and a wait for follow processing that applies order protection if an inversion of TPIM levels relative to the client order level occurs can be combined either separately or as a set with any of the described embodiments.

Before explaining at least one embodiment of the invention in detail it is to be understood that the invention is not limited in its application to the details of construction and to the arrangements of the components set forth in the following description or illustrated in the drawings. The invention is capable of other embodiments and of being practiced and carried out in various ways. Also it is to be understood that the phraseology and terminology employed herein are for the purpose of description and should not be regarded as limiting.

As such those skilled in the art will appreciate that the conception upon which this disclosure is based may readily be utilized as a basis for the designing of other structures methods and systems for carrying out the several purposes of the present invention. It is important therefore that the invention be regarded as including equivalent constructions to those described herein insofar as they do not depart from the spirit and scope of the present invention.

For example the specific sequence of the described process may be altered so that certain processes are conducted in parallel or independent with other processes to the extent that the processes are not dependent upon each other. Thus the specific order of steps described herein is not to be considered implying a specific sequence of steps to perform the process. Other alterations or modifications of the above processes are also contemplated. For example further insubstantial approximations of the process and or algorithms are also considered within the scope of the processes described herein.

In addition features illustrated or described as part of one embodiment can be used on other embodiments to yield a still further embodiment. Additionally certain features may be interchanged with similar devices or features not mentioned yet which perform the same or similar functions. It is therefore intended that such modifications and variations are included within the totality of the present invention.

Systems and methods of certain embodiments of the present invention relate to a computerized system that is operated by a third party intermediary. The computerized system provides new ways of processing transactions in government securities and enables more efficient transactions for investors. The system can be implemented to provide investor interface and or trading screens on terminals or computers that reside on a local area network LAN or a wide area network WAN where remotely situated clients can communicate across a network with the third party intermediary. Clients which are not limited to the ultimate investor such as fund managers and may include traders and brokers for executing transactions are permitted to enter orders into the system. These orders may include setting a price limit at the level of the current best bid best offer or any level manually by the client.

Certain embodiments of the invention utilize executable market data or Third Party Data from a fully electronic market. This Third Party Data includes real time trade data and price data that is executable by market participants who have direct access to the executable Third Party Data. The Third Party Data can be maintained and presented in visual form on trading screens to support a Clients trading decision processes as shown for example in . Also the Third Party Data can be used to control an automatic order protection mechanism that manages and possibly improves client orders within a system that manages the matching of Client and Dealer orders or trading interests as shown for example in . The Third Party Data can be combined with system market data or any other suitable market data to form Third Party Inside Market TPIM data. In some embodiments TPIM can be the best bid with its size and best offer with its size which is the tightest inside market found within the Third Party Data.

Referring now to system includes a software enabled computer implemented trading system for initiating transactions to serve Clients which are not limited to the ultimate investor and may include traders and brokers for executing transactions in accordance with certain embodiments of the present invention. Although the trading system is shown in as occupying a central function between clients and dealers it is to be understood that this is a schematic representation and may differ in other embodiments. As will be further explained hereinbelow in some embodiments of the trading system include components running at the premises of clients and dealers . In some embodiments trading system may be implemented on a server or any other suitable device. Further dealers and clients may represent human users interfacing with trading system application and trading system application which may be implemented on computers that interact with trading system in some embodiments. Trading system application can be tailored to the needs of client and may provide a user interface for client to access information provided by trading system as well as to submit orders to trading system . Trading system application can be a different interface than trading system application or trading system applications and can provide dealer and client functionality. In certain embodiments trading system application is tailored to dealers for responding to client orders.

Trading system is directed to data processing systems and methods for implementing trading rules that support transactions. A hardware arrangement with a plurality of processors workstations and network interfaces is one aspect of the invention. Transmission of client orders to trading system can be accomplished in any manner. However order information is preferably electronically effected via data transmission over secure private communication networks for links with Dealers systems and preferably via secured communication channels over Internet or private networks for links with Clients . Client orders can also include other information that describes or instructs trading system on how to process the client order.

In some embodiments trading system provides a direct connection between it and one or more dealers . In other embodiments transactions are conducted from Clients to one or more dealers through the intermediary of trading system . Trading system may also be configured to transmit information of a transaction to a Clients or dealers in house processing system for proper recordkeeping and accounting. Transactions passing through the intermediary of trading system can also be modified by trading system before being forwarded to one or more dealers .

In operation trading system attempts to find an optimal dealer for each Client order. While locating the optimal or predetermined dealer in a timely manner trading system may be subject to protection rules described below and others rules. For example trading system can implement various investment rules such as contacting a minimum number of dealers before completing a transaction. The novel trading system may fulfill these investment rules which may be required by some institutional clients by enabling rapid distribution of orders to dealers and by providing quick and efficient mechanisms for evaluating collating and transmitting a number of order responses to client for further action. The order responses can be automatically executed on behalf of client if this is specified by client or the order responses can be reviewed by client and one or more order responses can be executed.

In some embodiments orders are executed by reference to standardized information that uniquely identifies various financial securities generally available from a reference database. The reference database may be online and networked to trading system or locally connected to trading system . Preferably trading system includes a local securities database which stores descriptions of securities for future use whenever encountered by trading system . Securities database can be primed or supplemented with preferred lists of security descriptions and has no particular limits. In some embodiments the structure of the database is substantially matched to fields utilized in trading system and or dealers and clients trading system application. Additionally securities database can be updated at a specified time period from a remote reference database to keep it refreshed with the latest developments. The remote reference database may be a third party database such as a government securities server available through a network connection. In other embodiments an event driven update may be used to maintain synchronicity of data fields between securities database and the remote reference database. In an event driven update when new or updated data is received at the remote reference database this data is forwarded on to systems such as trading system .

In certain embodiments trading system allows clients to enter orders in price increments that are finer than the minimum increments available for trading directly in the interdealer broker market which provides third party data . Third party data can be used by trading system to determine how a client s order compares to other transaction data. For example in an embodiment for trading in U.S. Treasuries Clients can enter orders in price units as small as of 1 32nd even if the minimum d trading increment for dealers on the IDB market is of 1 32. Clients can enter finer increment orders because dealers may be willing to fulfill transactions from their own supply of assets or can fulfill multiple client offers with an IDB trade.

Fulfillment and matching of Client orders may occur within a matching facility logic operated within an Order Manager and an Automated Order Protection Processor . As may be appreciated by one skilled in the art order manager and automated order protection processor may be implemented in trading system in any suitable manner and are not necessarily discrete hardware or software components. In some embodiments prior to submitting an order client may be requested to select from one or more dealers possibly limited to a number such as five or as few as one to whom the order is presented in section of . Each selected dealer may see the name and the order terms of client s order. Orders may be executed partially or in their entirety according to the order terms set by client . Also depending on the order type e.g. Fill or Kill or Day as shown section the selected dealer s can have the opportunity to match against the order either instantaneously and or continuously until the order is filled or cancelled.

In some embodiments orders are presented to a single dealer and a Client s order is actively managed by Automated Order Protection Processor and Order Manager relative to levels extracted from Third Party Data . Third party data can be obtained from levels executing on the Interdealer Broker market. Transaction information from Third Party Data is communicated to the Market Data API . Market Data API can use the transaction information to extract levels at which particular securities are trading. Market Data API may forward extracted information to Automated Order Protect AOP Processor and or Order Manager . AOP Processor and or Order Manager can use information from Market Data API to modify or cancel client orders. For example if an order is unfavorable to client based on the extracted information that is the order causes an inversion versus IDB market levels then the order can be adjusted to stay consistent with current best levels in Third Party Data . Thus AOP Processor and or Order Manager can protect client from off market execution and may create opportunity for actual price improvement.

While the topology and architecture of trading system is described above the system also optionally utilizes software and other components to visually present Third Party Data and to provide client with the best possible trade execution among other things. Clients may either 1 enter orders within the current Third Party Inside Market on a particular asset with the hope of immediate execution or 2 enter orders outside of the current Third Party Inside Market with more patient trading strategies that favor price of execution over speed of execution. Third Party Data is relevant and of sufficient quality to guide either of these strategies or other strategies that clients may use when trading with dealers . Also Third Party Data can be used to control an automatic order protection and improvement mechanism for managing client orders within a system that manages the matching of client and dealer orders and or trading interests.

Some embodiments of the present invention provide a user interface see for clients to enter orders to buy or sell a single asset or to simultaneously buy and sell a collection of assets in a single trade. The signal trade can be in two security trades such as swaps or rolls or three asset combinations such as a butterfly where a short maturity and longer maturity bond might be bought and an intermediate maturity in between the first two might be sold. Additionally client orders may be entered as limit orders where client specifies a price a yield or a spread limit to control the filling of the order. In certain embodiments Third Party Data allows client to automatically enter a limit price at the level of the current best bid best offer or any level manually. If desired client orders can be entered by a dealer salesperson using the interface of on behalf of client according to instructions received over telephone connection between a dealer salesperson at and client at .

In at least one embodiment a client order must be filled at the client s level or better. The user interface may include an order panel see for an example that supports the entry of price spread or yield based Limit Orders with Time in Force options such as Fill or Kill or Day or Good until Cancelled. The system may also support the options for All or None or Partials Accepted with respect to the quantity specified in the client s order. Client instructions communicated through trading system and or trading system application are hereinafter referred to as a Client Bid Offer CBO where client bids to purchase or offers to sell an asset or combination of assets grouped together as a single synthetic asset. A CBO can also be considered a client order which may be a Bid or Offer and any instructions communicated to trading system by client .

In some embodiments client specifies a dealer or group of dealers that Client prefers the order to be initially directed to as shown in section . These dealers are referred to as the Exclusive Dealers which may be one or more dealers . In certain embodiments client can only select from among Permissioned Dealers dealers that client has established an account with trading relationships established credit lines and obtained permission to transact on trading system with optional credit line restrictions for such trading. Trading system may maintain these relationships permissions and credit limits.

Client can optionally and additionally select a second set of dealers from among the Permissioned Dealers with whom the client participates with in Open phase matching as described below. In some embodiments the system can retain Open phase matching preferences with a default setting available so that client does not need to re enter this information with each order.

The Exclusive Phase Matching process shown in step can begin with a tie breaking step with detail of the tie breaking process illustrated in . The tie breaking process provides a short interval of time such as 300 milliseconds during which any dealer matching messages received in response to the CBO are considered to have arrived at the system at the same time as any other dealer matching message arriving within the tie breaking interval. Tie breaking process can also provide for the option of operating trading system with a price auction capability. A purpose of the tie breaking mode is to encourage the maximum participation of the dealers involved and to provide the client with the greatest breadth of liquidity over long term use of the system. The tie breaking interval time may be short enough so that any overall delay in execution time is minimal. However it offers dealers who might otherwise be at an infrastructure disadvantage the ability to compete fairly to provide liquidity to clients . For example a dealer located at great geographic distance from trading system communication hub or hubs can compete for client flow even if that dealer were disadvantaged by an additional communication latency of say 5 milliseconds. As long as the system receives that dealer s matching message within the tie breaking period the matching message is considered for the client. Tie breaking process works to preserve maximum choices of dealer liquidity for the client thereby increasing competition and providing more opportunity for trade execution. The price auction option allows for price improvement through dealers competing to fill the CBO. This option may further enhance client opportunity for execution with speed and a better price.

Tie breaking process begins at step of . When the pre established time interval expires at step the number of dealer responses or dealer matching messages are counted at decision . If there are no matches then tie breaking process returns with no match at step . If there is exactly one 1 match the process returns with that dealer matching message in step . If there are multiple responses i.e. greater than 1 then decision tests whether price auction capabilities are enabled. If the result is a NO then one of the tied responses is randomly chosen in step using standard approaches for computerized random or pseudo random number generation. The selected winning dealer match is returned in step . If decision returns a YES showing the price auction mode is enabled then the dealer responses are examined in step and filtered for best price most favorable for the client . Decision tests the selection s made in step . If there are tied responses after filtering for best price then the process proceeds with tie breaking step otherwise if there is one best response then that dealer match is returned in step .

Returning to after some time in exclusive phase matching step trading system checks if the CBO has been matched canceled or the timer expired at step . If none of the above options have occurred in step the process returns a NO and trading system goes back to Exclusive Phase Matching step . If at least one of the above options have occurred in step returns a YES and trading system moves to step . At step a decision is made regarding whether the order was matched cancelled or open. An open order can be an order that remains unexecuted or unfilled. If the order was cancelled then at step trading system can proceed to close the order at step .

If a suitable matching counter order or counter orders from the Exclusive Dealers is found for the CBO within the Exclusive Time then the order is matched and filled. The matched and filled order then flows on to step where processing forks into two parallel paths of Post trade processing in for any matched trade amounts and Order complete checker of step which determines if the CBO is completely filled. If the determination at step is a Yes then the process is terminated for this CBO at step if the determination step at is a NO then processing continues with Open Phase Matching at step .

If the CBO doesn t match or is only partially matched in the Exclusive phase as described above then the system proceeds or transitions to Open Phase Matching . In Open Phase Matching the CBO is sent to Dealers who Client has specifically selected as a second set of Permissioned Dealers which may again include the Exclusive Dealers for matching the order.

Open Phase initiates at step with the selected Open Phase Dealers having a limited period of time within which to transmit into the system a matching counter order the Open Time . This time period is preferably configurable by the Client within a system defined range in the same manner and with a similar value to the Exclusive Time. The matching process can be fully automated with Dealers utilizing the trading system APIs for this purpose and the Open Time would typically be about 3 seconds. Flow iterates through steps and unless Client has selected no Dealers or until the CBO receives a match is cancelled or the Open Time expires causing decision to result in a Yes. Step then tests the outcome of Open Matching. If the order was cancelled before step then the order is closed at step .

Otherwise at step if a suitable matching counter order or counter orders from the Open Phase Dealers is found for the CBO within the Open Time then the order is matched and filled. The matched and filled order then flows on to step where processing forks into the two parallel paths of Post trade processing in step for any matched trade amounts and step where it is determined if the CBO is completely filled. If the outcome of step is a Yes then the flow is terminated for this CBO at step if the outcome of step is a NO then processing continues with Protected Phase Matching at step .

If the CBO is still open and at least partially unmatched after proceeding through Exclusive and Open states then trading system progresses the CBO to the Protected Order state shown at step . In Protected Order PO state the order is placed solely with the Exclusive Dealers who have an opportunity to match all or part of the order during the time the CBO stays in PO phase . PO phase persists and may iterate with step until the order is canceled by the client is timed out on the basis of the client s original Good for time instructions is filled or is partially filled. Protected phase is the last phase and its completion will complete the order which may end up filled through one or more executions partially filled across one or more executions remain unfilled cancelled by client instruction or timed out under good for time instructions. Depending on client instructions a filled order or partially filled order across one or more executions may be considered a match and trading system moves to step . In step post trade processing is completed. This step like steps and can consist of clearing settling and or accounting the order which may take place electronically partially electronically or by another mechanism. After post trade processing the order is filled or completed at step or alternatively if there is no match for the order the order is closed at step .

Protected Order phase is further explained in conjunction with that shows the flow of system processing for Protected Order phase and that details the Automated Order Protection process. These processes are controlled and implemented by Automated Order Protection Processor . The processes in are used to actively manage the Client Bid Offer relative to the best levels in a Third Party Inside Market. The Third Party Inside Market can be obtained from Interdealer Broker Data for example or from Third Party Data . In some embodiments Third Party Inside Market can be a combination of Third Party Data with current and previous executions and Client Bid Offers on trading system . Protected Order phase protects the client from off market execution and creates an opportunity for actual price improvement.

Trading system with each iteration establishes in test whether the CBO has already been protected. That is the system checks whether the CBO price level is presently modified by trading system according to Automated Order Protection AOP rules. The AOP rules can include instructions to modify an order or a CBO to a more favorable price to execute an order or a CBO within a certain period of time to fill a CBO with multiple dealer s bid offers and to partially fill an order or a CBO if an order is not filled during a predetermined time period. If the CBO is not already protected AOP Flag is False then test returns a NO and processing flows to step where the CBO is processed with AOP rules. The AOP processing of step is further explained below in conjunction with . After AOP processing trading system returns to step where TPIM data is updated from TPIM and the CBO or order status is checked. If the CBO should become no longer active due to completion cancellation or time out then this flow terminates at step .

If test returns a YES the CBO is already protected and the process flows to decision to test whether Client s order level equals the contra side of the TPIM. That is if Client s bid equals the TPIM Offer level or if Client s offer equals the TPIM Bid level. If test returns a YES then the process flows back to step as no further protection action is required at these TPIM levels.

If test returns a NO then the CBO flows to test . At step trading system determines whether the market has moved to levels that are more or less favorable to the client given that the CBO level is not the same as the TPIM contra side level since the CBO level was last modified by AOP rules . If the TPIM contra side levels i.e. TPIM bid for CBO or TPIM offer for CBO are now less favorable to Client then trading system flows to step . At step the CBO is unprotected either back to the original CBO level or to the current TPIM level whichever results in more favorable level for the Client. In certain embodiments this is accomplished by rules shown in step For CBOthe new level equals the minimum of the original CBO and the current TPIM Offer else for CBOthe new level equals the maximum of the original CBO offer and the current TPIM bid. Trading system then moves to step where the AOP Flag is set according to whether or not the current CBO level equals the original CBO level.

If the result of test is a NO then the CBO does not need to be unprotected but instead may undergo further evaluation at step . In step the CBO is processed according to the AOP rules which can be seen in . The CBO then flows to step where the AOP Flag is set according to whether the current CBO level equals the original CBO level. After step processing flows to step where the iteration continues while the CBO is active.

If step is a price only update then the TPIM levels are tested in step to determine whether the TPIM levels represent a passive inversion relative to the current CBO level. This would be the case if the TPIM Offer is cheaper than the CBO bid or if the TPIM bid is more expensive than the CBO offer. Either of these situations gives a first appearance of an order that crosses the market and requires further examination to determine whether order protection is appropriate. If there is no passive inversion then step simply returns NO and flow moves to step where control is returned to step or . In certain embodiments the control can be returned to a module in trading system that invoked this portion of the AOP process.

Alternatively if test returns a YES then a quantity test determines whether the TPIM quantity on the contra side of the CBO causing the inversion is greater than or equal to the CBO quantity where the contra side is the offer side for CBO or the bid side for CBO.

If the quantity test at step returns a YES then the inversion is of sufficient quantity to invoke protection and flow moves to step where the CBO level is adjusted to the same level as the TPIM contra side level. Additionally the AOP Flag is set to True and control is returned to the calling module of trading system step and or step .

If the test at step returns a NO then decision determines whether the preference is to operate the AOP process with or without using Average Weighted Price AWP statistics from Third Party Data or TPIM. In some embodiments AWP computations are only possible if Third Party Data provides data showing bids and offers that are positioned behind the best bid and best offer in the order stack. Alternatively trading system may have an internal stack where bid offers from dealers are stored for a given security. The internal stack can be implemented through hardware or software and is used to calculate order fulfillment from multiple dealers bid offers. For example consider the order stack below for a given security 

The best bid and offer 98.75 and 99.00 respectively are at the top of the stack for size of by . Worse bids lower in price and worse offers higher in price are shown in the lower rows or stack positions through . The sizes for example units of million for the U.S. Treasury market are shown for each bid and offer at each level of the stack or five levels deep in this case. In this example the average price required to buy 265 from the offers on the stack would be 99.08. This is the AWP for the best offers 99.00 99.10 and 99.15 for quantities of 100 90 and 75 respectively computed as 99.00 100 99.10 90 99.15 75 100 90 75 or 26255.25 265 99.08.

If cumulative quantity exists within the order that is greater than or equal to the quantity of the CBO and the system preference option is to operate with AWP then decision returns a YES and trading system proceeds to step . At step the AWP is computed for the quantity specified in the CBO. The AWP is computed from the average weighted price using the CBO quantity in its entirety according to the prices and quantities displayed on the contra side of the market. For example if the CBO is a bid of 99.11 for 250 then to fill the entire quantity of 250 requires buying from all of what is offered in position 1 and 2 and part of the 3position offer in the stack above. As highlighted above in the stack the cumulative AWP ranges from 99.05 in position 2 to 99.08 in position 3. In this example the AWP for a quantity of 250 is 99.07 because only a portion of the 3position was used.

The AWP may not always be found for the Clients specified quantity. For example if the CBO was a bid for size of 2000 and 2000 exceeds the total size available on the offered side of the market it totals 1535 in the previous example order stack then it is not possible to compute the AWP for the CBO and step returns zero. If an AWP can be found then decision results in a YES and trading system flows to step . At step the CBO is protected at a level equal to the computed AWP the AOP Flag is set to True and control is returned to the calling module of trading system step and or step .

Otherwise if step returns a NO or if previous decision returned a NO that is the CBO was not operating with AWP enabled the CBO flows to step . Step tests whether the Wait for Follow Flag is True. If step returns a YES then the system proceeds to step where the CBO level is protected to the level of contra side of the TPIM. Additionally in step the AOP Flag is set to True and control is returned to the calling module of trading system step and or step . Otherwise if the Wait for Follow WFF check at step returns a NO the flow moves to step where control is returned to the calling module of trading system step and or step .

An alternative flow through step results if there has been a trading event in the TPIM. If there was a trading update CBO moves to step and the WFF Flag is cleared i.e. set to False . Step checks whether the TIPM has reported a trade event at a level through the CBO level that is an active inversion. If step results in a NO then there may be no need to protect the order and process flow terminates at step . Upon termination at step control can return to calling module of trading system step and or step . Alternatively if test results in a YES then the active inversion is reacted to and the CBO flows to step that tests whether the quantity traded is the same or more than the CBO quantity. If step results in a YES then the active inversion is of sufficient quantity and may require protection of the order which is accomplished by flowing to step . If the test at step results in NO then the WFF Flag is set to True and the CBO flows to decision . At decision the Wait for Follow level is set equal to the TPIM of the last trade and the WWF is kept at true. The process terminates at step and control returned to the calling module of trading system step and or step .

The WFF Flag represents a Wait for Follow state where Wait for Follow processing can occur. If the CBO is in the Wait for Follow state then a passive inversion of any quantity following an active inversion even quantities less than the CBO quantity can invoke protection. For example if a resting order in the market provokes an inversion for a quantity less than the CBO quantity but this condition follows a trading event inversion then it is assigned more weight by trading system . In some embodiments the assigning of more weight can lead to an overriding of the size comparison that takes place at for example step and the CBO is protected.

Wait for Follow processing captures price change events in the TPIM or Third Party Data that might otherwise be filtered out by quantity checks. This may occur in thin market conditions or where there are orders resting in the TPIM and the full order size is not visible for some or all orders in the third party order stack. The determination of whether price levels have changed enough after a trade i.e. the trade was not a one off or spurious event to warrant protection can be supported by waiting to see where the market comes to rest after the trade. In certain embodiments the amount of price change permitted before entering into a protected state can be set by client . In other embodiments if following a trade on the bid side a new market offer rests at that last trade price or lower or conversely on the offer side a new market bid rests at that last trade price or higher then the new resting levels are significant enough to enable protection of the CBO.

An example of Wait for Follow processing is shown in the table below with a sequence of market events from sequence 1 to sequence 4. Sequence 1 shows a CBO a Client bid with a price of 99.12 for a quantity of 100. The TPIM shows securities offered at 99.25 for a size of 65. The Client bid at 99.12 is below 99.25 and the AOP state is OFF as shown in the column at the right. In sequence 3 the market within the TPIM trades down to 99.08 where the signifies that a trade is occurring. Although the price level 99.08 is less than the Client bid level of 99.12 the AOP state remains OFF because the quantity traded is 15 and is less than the Client bid quantity of 100. The AOP processor does detect however an active i.e. traded inversion signified by the AOP state OFF A below. In this state a WFF Flag would be set to TRUE at decision in . In sequence 4 the new offer side of the TPIM comes in at 99.08 satisfying the condition of being less than or equal to the last traded level and also less than the Client bid price i.e. crosses through the order level as tested in decision of . The Client bid is subject to AOP modified and set lower to 99.08 even though the TPIM offer size of 50 is less than the Client bid quantity of 100. The Client bid is set lower because the TPIM offer level has crossed through the Client bid causing a passive inversion immediately following the active inversion in sequence 3.

Another feature of the Automatic Order Protection process for Clients and Dealers preferred to as Autofill. Autofill can make it easier for dealers to fill a CBO of clients by providing a window in which a dealer response to a client CBO is filled. This may be useful in circumstances where Third Party Data showing a Third Party Market is moving rapidly prices are changing in a volatile manner and Dealer systems communicating with trading system lose synchronization with respect to the latest updated Client Bid Offer. Such a condition can arise for example from a race condition where at time t trading system generated a new auto protected level and a Dealer system was transmitting a message to match the CBO level at a time t i. At time t the message from Dealer reaches trading system but it is to late as the new auto protected level was already enabled. Since the CBO level has changed the Dealer match attempt fails which can cause further iteration of the matching process.

In certain embodiments an Autofill option is provided in order to mitigate the negative impact of such race conditions on Client order fulfillment. The Autofill function can also make execution easier for Dealers to execute quickly in those circumstances where it is their preference to sell securities on the offered side of the TPIM or buying securities on the bid side of the TPIM when the TPIM has slight movements during the intervening dealer matching message transmission time. These slight movements in the TPIM can consequently change the auto protected CBO level if the CBO is undergoing AOP processing at the moment the system checks the price terms of the Dealer message with the price terms of the CBO.

The Autofill option can be selected on a message by message basis within the Dealer matching response to the Client Bid Offer. If Autofill is enabled the Dealer message may also specify an Autofill Threshold that specifies the tolerable limits of difference between the price specified by the Dealer and the current real time TPIM level. If the threshold is 1 32of point for example and the Dealer is willing to sell 1 million U.S. Treasury 2 Year Notes at price of 99 28 i.e. 99 and 28 32nds points but the TPIM offer side is now 99 27.5 the order can still be filled because the difference of these two prices is only of 1 32. The match is able to Autofill since the pricing discrepancy is within the specified threshold.

In certain embodiments the Autofill option can be selected on a CBO by CBO basis by client . If client selects Autofill and the CBO has been modified by AOP processor the CBO may be filled by a dealer matching message with a less favorable price. This may occur if the price in the dealer matching message was within the client s specified threshold and the price less than the client s originally specified CBO price.

Note that all prices used in these examples adhere to US Treasury market price conventions that use 32nds rather than decimal fractions where the price consists of a whole number handle such as 99 and a fractional figure that represents 1 32nds of 1. The third place of the fraction expression represents ths of 1 32nds and can be any digit from 1 to 7 except that the digit 4 for 4 8 or of 32nds is usually written as a . So for example 99 26 is interpreted as 99 and 26.5 32 or 99 267 is 99 and 26 ths 32.

Client order gets filled at 99 266 by dealer at client s specified level unaffected by AOP since client level is within the TPIM.

Client order gets filled at an improved level of 99 26 after TPIM Offer moves to 99 26 as shown in the second row and AOP moves client s order to match the new TPIM Offer side 

Client order gets filled at original specified level of 99 266 after TPIM fluctuates. In the example below in the second row the TPIM Offer moves to 99 26 and AOP protects Client s Buy order by adjusting it to be within TPIM. However the Client s order is not filled at this level and in the third row the TPIM Offer swings back to 99 27. Trading system then reverts the order to 99 266 in the third row or unprotects as TPIM Offer moves away and becomes more expensive. In the fourth row the Client Order is filled at 99 266 

