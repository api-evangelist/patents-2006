---

title: Account linking with privacy keys
abstract: A computer system includes a security module programmed to generate a first privacy key for use with secure communications with a first web site, and a second privacy key for use with secure communications with a second web site, the first and second keys being different. The computer system also includes an identity module programmed to receive a request from the first web site for linking a first user account associated with the first web site with a second user account associated with the second web site, and the identity module being programmed to present a user with an option to link the first and second user accounts.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07747540&OS=07747540&RS=07747540
owner: Microsoft Corporation
number: 07747540
owner_city: Redmond
owner_country: US
publication_date: 20060224
---
A portion of the disclosure of this patent document contains material that is subject to copyright protection. The copyright owner has no objection to the facsimile reproduction by anyone of the patent document or the patent disclosure as it appears in the United States Patent and Trademark Office patent file or records but otherwise reserves all copyright rights whatsoever.

As users continue to increase their reliance on online resources to conduct business and pleasure the importance of protecting privacy and facilitating secure transactions grows. Encryption of information is one method for providing privacy and security in the online environment. One encryption method involves the use of a public key that is shared openly with others. The public key is used to encrypt a message that is sent to the owner of the public key. The owner then uses a secret key to decrypt the message. The use of advanced cryptography such as public keys functions to counter phishing attacks and provides a new level of protection for online users.

One of the potential disadvantages of this type of cryptography is that when a public key is reused at many online sites the public key becomes a new form of personally identifying information. The public key can be thought of as a string of bytes that can be used as a database key in addition to being a cryptographic key. In this context a public key can be employed to correlate and track a user s online activities across multiple online resources. For example two web sites could compare the public keys registered at their sites and finding matches could correlate the purchasing profiles of the owners of those keys in ways a user did not contemplate or sanction.

In addition although a user will typically want to preserve his or her privacy when conducting online transactions there are situations in which the user may want to allow web sites to share information about the user. For example if a first web site offers discounted goods or services to members of a second web site and the user is member of the second web site the user may want to allow the first and second web sites to share information about the user so that the user can receive the discount.

Users therefore desire an online environment in which privacy and security concerns are addressed and in which users can control when and how online resources share user information.

This Summary is provided to introduce a selection of concepts in a simplified form that are further described below in the Detailed Description. This Summary is not intended to identify key features or essential features of the claimed subject matter nor is it intended to be used as an aid in determining the scope of the claimed subject matter.

According to one aspect a computer system includes a security module programmed to generate a first privacy key for use with secure communications with a first web site and a second privacy key for use with secure communications with a second web site the first and second keys being different. The computer system also includes an identity module programmed to receive a request from the first web site for linking a first user account associated with the first web site with a second user account associated with the second web site and the identity module being programmed to present a user with an option to link the first and second user accounts.

According to another aspect a method for communicating with a plurality of web sites includes generating a first privacy key to communicate securely with a first web site generating a second privacy key to communicate securely with a second web site receiving a request for account linking from the first web site to share user information with the second web site and presenting a user with an option to approve or disapprove of the account linking.

According to yet another aspect a method for a first web site to link user accounts with a second web site includes sending a request for account linking from the first web site to share user information with the second web site receiving a response from the user approving of the account linking and forwarding a coupon to the second web site to initiate the account linking the coupon including a linking agreement including a first privacy key associated with the first web site and a second privacy key associated with the second web site the first and second privacy keys being different.

Example embodiments will now be described more fully hereinafter with reference to the accompanying drawings. These embodiments are provided so that this disclosure will be thorough and complete. Like numbers refer to like elements throughout.

Example embodiments disclosed herein relate generally to a plurality of different privacy keys that are generated by a user s computer system for communicating securely with a plurality of web sites. Because the privacy key used to communicate with each web site differs the use of the privacy keys cannot be used to correlate the user s activities on the different web sites. In some embodiments the user can allow two or more web sites to share information about the user including the different privacy keys used at the web sites.

Referring now to an example computing environment includes a computer system a network such as the Internet and a plurality of web sites . Computer system can be controlled by a user to communicate through Internet with web sites .

Computer system can be configured as a personal computer including at least one processor and memory. Computer system includes one or more of volatile and non volatile computer storage media as well as removable and non removable media implemented in any method or technology for storage of information such as computer readable instructions data structures program modules or other data. Computer system includes an operation system such as the WINDOWS operating system from Microsoft Corporation and one or more programs stored on the computer readable media.

Computer system also includes one or more input and output communication devices that allow the user to interact with computer system as well as allow computer system to communicate with other devices such as web sites . The user of computer system can access web sites using a program on computer system such as a browser . One example of a browser is the Internet Explorer browser offered by Microsoft Corporation. In one embodiment browser running on computer system communicates with one or more of web sites using the hypertext transport protocol secure HTTPS protocol although other protocols can be used.

In example embodiments system includes an identity module that is programmed to maintain one or more digital identities associated with the computer user. In some embodiments these digital identities are InfoCards that form part of the InfoCard system provided in the WINFX application programming interface developed by Microsoft Corporation of Redmond Wash. The InfoCard system allows the user to manage multiple digital identities associated with the user referred to as InfoCards. The InfoCard system utilizes a web services platform such as the Windows Communication Foundation in the WINFX application programming interface. In addition the InfoCard system is built using the Web Services Security Specifications propagated at least in part by Microsoft Corporation of Redmond Wash. These specifications include a message security model WS Security an endpoint policy WS SecurityPolicy a metadata protocol WS MetadataExchange and a trust model WS Trust.

Computer system also includes a security module that is programmed to generate privacy keys . For example system generates privacy key that is shared with web site . In example embodiments privacy key is a pair wise key between the user of system and web site . Security module of system is programmed to generate a different privacy key for each web site . System and web sites can in turn use the respective privacy key to communicate securely. For example system can use privacy key to generate an encrypted message that is sent to web site . Web site can in turn decrypt message as described below.

Although privacy keys are all associated with the user of system each privacy key is different. Because of this pair wise nature privacy keys minimize the ability of web sites to correlate the activities of the user of computer system across the different web sites based solely on use of privacy keys . For example since privacy key used to communicate with web site differs from privacy key used to communicate with web site web sites cannot correlate the user s activities on web sites based solely on the keys used to communicate with web sites .

In example embodiments each privacy key can be a symmetric key or an asymmetric key. An example privacy key is similar in structure to a public key in that the privacy key is a binary number of a particular length such as from 40 to 256 bits in length for symmetric keys and from 512 to 4096 bits for asymmetric keys. The primary difference between a privacy key and a public key is that a privacy key is not openly disseminated but is instead sent to one or a select group of web sites. A user can have a plurality of different privacy keys with one privacy key for each of the web sites or each group of web sites with which the user communicates.

In one embodiment one or more of privacy keys are symmetric keys based for example on algorithms like the Data Encryption Standard DES or the Advanced Encryption Standard AES . For example a symmetric privacy key such as privacy key is known both by the user of computer system and by web site . A symmetric key can be used to sign and encrypt but because it is shared among system and web site it is not possible to determine which party signed or encrypted a particular communication. Further privacy key is not shared with a third party e.g. web sites since the third party could then pose as one or both of the user and web site .

In an alternative embodiment one or more of privacy keys are asymmetric keys based for example on the Rivest Shamir Adleman RSA algorithm. In this embodiment the user of system has a secret key that is not shared and web site has privacy key that can be used to encrypt messages sent to the user and to verify a signature made using the secret key. Since only the user of system can sign with the secret key it is possible for the resource to prove that the user signed a particular communication. This is commonly referred to as non repudiation.

Additional details regarding the generation of privacy keys are described in U.S. patent application Ser. No. 11 074 885 filed on Mar. 7 2005 the entirety of which is hereby incorporated by reference.

Referring now to an example method for using privacy keys is shown. At operation the user s system generates a first privacy key. The first privacy key is sent to the first web site at operation . For example in some embodiments the first privacy key can be securely sent to the first web site by using the public key associated with the first web site to encrypt the message including the first privacy key. The user can then send a signed message to the first web site using the first privacy key at operation using the first privacy key if the first privacy key is symmetric or a secret key if the first privacy key is asymmetric . Next at operation the user s system generates a second privacy key and the second privacy key is sent to the second web site at operation . Next the user can then send a signed message to the second web site at operation using the second privacy key if the second privacy key is symmetric or a secret key if the second privacy key is asymmetric . In example embodiments the first and second web sites cannot correlate transactions by the user between the first and second web sites based solely on the privacy keys used in the communications between the user and the first and second web sites because the first and second privacy keys differ.

Referring again to although computing environment is configured to limit the ability of web sites to correlate information about the user of system based on the keys associated with communications between the user and web sites it may be desirable for the user to allow for correlation in some situations.

For example if web site is an airline reservations web site and web site is a car rental web site that provides discounted rates for customers of the airline reservations web site the user may want to allow for web sites to share user information so that the user can receive the discounted rates.

In such situations the user can approve account linking between web sites . Account linking allows the user to decide when information about the user on web site is shared with web site and vice versa. The shared user information can include profile information such as name address and telephone number as well as transactional information such as information about the goods and or services purchased by the user. In the example shown account linking allows web site to share information about the user such as profile and transactional information with web site . In example embodiments privacy keys can be used to facilitate account linking .

For example in one embodiment two pair wise asymmetric privacy keys K and K are used at web sites Rand R. A human readable policy P defining account linking is provided to the user for review. The policy P defines the way in which information will be shared between web sites Rand R. For example the policy P can define what information is shared how long the information is updated shared if the sharing is unidirectional or bidirectional and what can be done with the shared information. S L represents a signature over the content L using key K and T represents a timestamp. Based on this information security module is programmed to produce a coupon C according to an account linking agreement L as follows and . As describe further below the coupon C can be used to facilitate the sharing of user information between two web sites. In example embodiments the linking agreement L is implemented as part of the InfoCard system using an XML fragment incorporating the policy the site identifiers and the related privacy keys.

Referring now to an example coupon is shown. Coupon is a three part extensible markup language XML document including a linking agreement and signatures encoded over linking agreement using each of privacy keys employed at web sites . In some embodiments coupon can be encoded as a security token in accordance with the security assertion markup language SAML or the extensible rights markup language XrML although other languages can be used.

Coupon can be used at either web site or web site and can be presented to the web sites in any order. The user of system can give coupon directly to each web site or either web site can forward it to the other to create account link . In this embodiment non repudiation is possible and the user of system can keep a copy of coupon to indicate the policy under which the user approved account linking.

In an alternative embodiment employing symmetric privacy keys K and K because the secret key cannot be disclosed to third parties a second pair wise key is introduced at each web site Rand Rthat serves as an identifier and which can be shared with selected third parties similar to an asymmetric privacy key. For example an identifier key I can be used. A coupon C such as coupon can be produced from a linking Agreement L as follows and . In this symmetric privacy key context coupon works at either web site and can be presented to web sites in any order. The user of system can give coupon directly to each web site or either web site can present it to the other. However no proof is offered to either web site that the consumer owns the identity employed at the other web site. To obtain this assurance web site presents coupon to web site before linking the accounts at the two sites. Web site can then verify the signature and existence of the account. Non repudiation is not possible since web sites are capable of applying the relevant signature as well as the user.

Referring now to an example method for implementing account linking is shown. Beginning at operation the user receives a policy from a first web site regarding account linking with a second web site. Next at operation the user decides based on the policy whether or not to allow account linking. If the user chooses to allow account linking control is passed to operation and the user sends a response to the first web site approving the account linking. In example embodiments the user s computer can generate a coupon as described above and forward the coupon to the first web site to approve the account linking. Alternatively if the user decides at operation not to allow account linking control is passed to operation and a response is sent to the web site disapproving of the account linking.

Referring now to in some embodiments an example method allows a web site to request account linking with a plurality of other web sites. For example beginning at operation the web site forwards to the user s computer a policy and a plurality of identifiers associated with web sites with which the web site desires account linking. In example embodiments the identifiers are public keys associated with the web sites although other unique identifiers such as domain names can be used.

Next at operation the user s computer searches a list of web sites with which the user has an existing relationship to determine if any of the identifiers match any of the web sites in the list. Next at operation the policy and the list of any matching web sites are presented to the user. The user is then allowed to decide whether or not to allow account linking for any of the web sites in the matched list at operation . If the user decides to allow account linking for any of the web sites listed control is passed to operation and a coupon is generated including the linking agreement and a two way signature for the selected web sites. Alternatively if the user decides at operation not to allow account linking of any of the web sites listed control is passed to operation and account linking is not allowed for those web sites.

In example embodiments method can be implemented as part of the InfoCard system provided in the WINFX application programming interface developed by Microsoft Corporation of Redmond Wash. The multiple digital identities stored by identity module on computer system can be searched when a web site requests account linking to determine if the user has existing accounts with any of the web sites in the request.

For example in response to receiving a request from a web site for account linking with a plurality of web sites the user s computer system is programmed to search the InfoCards associated with the user that are stored on the user s system that have been used to establish accounts at any of the web sites in the request. InfoCards that match the web sites in the request are presented to the user. The user can decide whether or not to allow account linking by reviewing the policy and the matched InfoCards for the web sites.

In some embodiments account linking is implemented as part of the registration process for a web site such as web site . For example when the user registers with web site the policy for the web site solicits account linking information in addition to other registration information. This account linking information can include the identifiers e.g. public keys or domain names of the web sites with which account linking is desired such as web site . If the user has an existing account with web site the user is presented with the option for account linking with web site during the registration process of web site and the user can approve disapprove of account linking between web sites . In addition identity module can be programmed to allow the user to track which sites the user has approved for account linking.

For example referring now to during the registration process with web site the user is presented with a graphical user interface . User interface can be presented within browser or as a separate interface on computer system . Interface provides a window with a list of all of the web sites with which web site requests account linking and the user has an existing relationship. For example window lists web site for which account linking is requested by web site and with which the user has an existing account. The user can authorize account linking for web sites by checking box . Alternatively the user can disallow account linking by leaving box unchecked and continuing with the registration process for web site . If multiple web sites are listed in window multiple check boxes can be provided so that the user can select with which if any web sites to allow account linking.

Referring now to an example method for a first web site to request and implement account linking is shown. At operation the first web site sends a request for account linking to a user. Next at operation the web site receives the response from the user. At operation the web site determines if the user has approved of account linking. If account linking has not been approved control is passed to operation and account linking is not implemented.

Alternatively if account linking is approved by the user control is passed to operation and the first web site evaluates the coupon received from the user to verify the signatures in it such as coupon described above. Next at operation the first web site exchanges the coupon with the second web site to implement account linking and to obtain profile information about the user from the second web site.

In example embodiments the first web site can exchange a coupon with the second web site using the protocols defined in the web services platform such as the Windows Communication Foundation provided in the WINFX application programming interface developed by Microsoft Corporation of Redmond Wash. For example the first web site can forward a coupon and profile information to the second web site by sending a request security token RST in accordance with the issuance mechanism provided in WS Trust. An example RST including a coupon is shown below.

One or more advantages are associated with the systems and methods described herein. For example the use of privacy keys can enhance the privacy of users in the online environment. Further the use of account linking allows users to decide when and how information associated with the users is shared between web sites.

Although the examples described herein reference web sites in alternative embodiments privacy keys and account linking can be used with other online resources as well. For example in alternative embodiments rich client applications accessing web services over the Internet using the Web Service standard protocols defined in the WS suite can utilize privacy keys and account linking. For example in one alternative embodiment a dedicated rich client application that allows a user to trade stocks and manage a portfolio with a brokerage can initiate account linking between the brokerage account and the user s bank account. Other alternatives are possible.

The various embodiments described above are provided by way of illustration only and should not be construed to limiting. Those skilled in the art will readily recognize various modifications and changes that may be made to the embodiments described above without departing from the true spirit and scope of the disclosure or the following claims.

